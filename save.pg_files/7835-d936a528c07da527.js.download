(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7835],{80680:(e,t,n)=>{"use strict";let r;n.d(t,{h:()=>eY});var s=n(31085);n(86486);var i=n(6172),o=n(3564),a=n(2657),l=n.n(a),c=n(31242),d=n(14041),h=n(32133),u=n(73893),f=n(56154),g=n(50877),p=n(25934);let m=e=>{let t=["malformed","encoded","illegal"];return e.includes("URIError")&&e.split(" ").some(e=>t.includes(e))};class w extends d.Component{componentDidMount(){window.addEventListener("error",this.handleError),window.addEventListener("unhandledrejection",this.handleUnhandledRejection)}componentWillUnmount(){window.removeEventListener("error",this.handleError),window.removeEventListener("unhandledrejection",this.handleUnhandledRejection)}componentDidCatch(e,t){if("dev"===u.$.APPLICATION_ENVIRONMENT)throw e;f.Cp(e,{extra:{info:null==t?void 0:t.componentStack}})}static getDerivedStateFromError(e){return{hasError:!0,errMessage:e.message,shouldMountChildren:!1}}handleError(e){if("dev"===u.$.APPLICATION_ENVIRONMENT)throw Error("[ErrorBoundary]: ".concat(e.message))}handleUnhandledRejection(e){if(this.props.unhandledRejectionFilter(e)){var t;let n=(null===(t=e.reason)||void 0===t?void 0:t.message)||"";this.setState({hasError:!0,errMessage:n})}}render(){let e=!0===m(this.state.errMessage)?{opacity:"0.65",starOverlay:!1}:{};return(0,s.jsxs)(s.Fragment,{children:[this.state.hasError&&(0,s.jsx)(p.A,{pos:"absolute",top:0,...e,errMessage:""===this.state.errMessage?void 0:this.state.errMessage,showDisclosure:!0}),this.state.shouldMountChildren&&this.props.children]})}constructor(e){super(e),this.state={hasError:!1,errMessage:"",shouldMountChildren:!0},this.handleError=this.handleError.bind(this),this.handleUnhandledRejection=this.handleUnhandledRejection.bind(this)}}w.defaultProps={unhandledRejectionFilter:e=>{var t;return!!m((null===(t=e.reason)||void 0===t?void 0:t.message)||"")||e.reason instanceof g.Teu&&!1===document.hidden||e.reason instanceof g.cdx}},n(68647),n(41378),n(23472),n(98701),n(11291),n(52984),n(68765),n(57769),n(37272);var y=n(85401),b=n(60916),x=n(88304),v=n(42457),E=n(14525),j=n(22082),C=n(31757),O=n(64225);let S=e=>{console.debug("%c[useApiRefetch] Refetching due to ".concat(e),"background-color: aqua"),(0,E.H4)().reFetchObservableQueries()},_=()=>{let e=(0,O.CU)(),t=(0,d.useRef)(!1),n=(0,d.useRef)(null),r=(0,d.useCallback)(e=>{n.current&&(clearTimeout(n.current),n.current=null),n.current=setTimeout(()=>{S(e),n.current=null},3e3)},[]),s=(0,d.useCallback)(()=>(0,C.mN)(e.getState()).backgrounded,[e]);(0,j.LQ)("online",(0,d.useCallback)(()=>{if(s()){t.current=!0;return}r("online")},[r,s])),(0,j.LQ)("wakeup",(0,d.useCallback)(()=>{if(s()){t.current=!0;return}r("wakeup")},[r,s])),(0,j.LQ)("foreground",(0,d.useCallback)(()=>{t.current&&(r("foreground"),t.current=!1)},[r]))},I=Number(new URLSearchParams(u.$.IS_CLIENT_SIDE?window.location.search:"").get("MAX_BACKGROUND_TIME_ALLOWED"))||432e5,D=()=>{let e=(0,d.useRef)(!1),t=(0,d.useCallback)(t=>{t.timeInBackground&&!e.current&&t.timeInBackground>I&&(e.current=!0,window.location.reload())},[]);(0,j.LQ)("foreground",t)},T=(0,d.memo)(()=>((0,j.yj)(),_(),D(),null));T.displayName="ConnectionMonitor";var k=n(83292),R=n(23672),A=n(72194);function M(){let e=(0,k._)(["^",""]);return M=function(){return e},e}var N=n(81366),L=n(10458),P=n(87747),U=n(57882),F=n(44507),G=n(92347),z=n(2387),$=n(25420),H=n(80853),K=n(15672),V=n(80532),B=n(61778),W=n(52177),Y=n(63449);let q=e=>{let{meta:t,setMeta:n}=(0,N.Mw)(),r=(0,L.st)(),{setCurrentStep:i,steps:o,currentStep:a,setIsOpen:l,setSteps:c}=e,[h,u]=(0,d.useState)({}),f=0===a,g=a===o.length-1,p=(0,d.useCallback)(()=>{if(g){if(t===z.p.DOC_EDITOR){let e=Math.max(...Object.keys(h).map(e=>+e))+1;null==r||r.track(L.VV.DOC_EDITOR_TOUR_COMPLETED,{stepsCompleted:e,completed:e===o.length-1}),(0,Y.Xv)()}c&&c([]),n&&n(""),l(!1)}else i(e=>e===(null==o?void 0:o.length)-1?0:e+1)},[r,g,t,i,l,n,c,o.length,h]);(0,d.useEffect)(()=>{g||u(e=>({...e,[a]:!0}))},[a,g]);let m=(0,d.useCallback)(()=>{f?i(e=>o.length-1):i(e=>e-1)},[f,i,o.length]);return(0,s.jsx)($.s,{w:"100%",mt:6,justify:"Center",children:f?(0,s.jsx)(H.$,{variant:"solid",onClick:p,size:"md",children:(0,s.jsx)(W.x6,{id:"l1TCvG"})}):(0,s.jsxs)(K.r,{columns:3,w:"100%",alignItems:"center","justify-content":"space-between",children:[(0,s.jsx)(H.$,{size:"sm",variant:"ghost",colorScheme:"blackAlpha",onClick:m,w:"fit-content",justifySelf:"flex-start",children:(0,s.jsx)(W.x6,{id:"iH8pgl"})}),(0,s.jsx)(V.az,{textAlign:"center",children:(0,s.jsx)(B.E,{fontSize:"sm",color:"gray.300",fontWeight:"bold",children:(0,s.jsx)(W.x6,{id:"RfkEBH",values:{0:a+1,1:o.length}})})}),(0,s.jsx)(H.$,{size:"sm",variant:"solid",onClick:p,width:"fit-content",justifySelf:"flex-end",children:g?(0,s.jsx)(W.x6,{id:"f2sKYF"}):(0,s.jsx)(W.x6,{id:"hXzOVo"})})]})})},J=e=>{let{children:t}=e,{setSettings:n}=(0,U.ur)(),r=(0,P.rd)(),i=(0,L.st)();return(0,F.Xb)()?(0,s.jsx)(s.Fragment,{children:t}):(0,s.jsx)(N.AY,{steps:[],onClickMask:()=>{},styles:{...(0,G.E)(r)},disableKeyboardNavigation:!0,showBadge:!1,onClickClose:e=>{let{setIsOpen:t,steps:r,currentStep:s,setCurrentStep:o,setMeta:a,setSteps:l,meta:c}=e;r&&s!==r.length-1?(c===z.p.DOC_EDITOR&&(null==i||i.track(L.VV.DOC_EDITOR_TOUR_CLOSE_CLICKED,{step:s}),null==n||n({remove:["needsEditorOnboarding"]})),r&&o(r.length-1)):(l&&l([]),a&&a(""),t(!1))},showDots:!1,components:{Navigation:q},children:t})};var Q=n(52609),X=n(65998),Z=n(58167);let ee=(e,t)=>{Z.H.init(u.$.HIGHLIGHT_PROJECT_ID,{environment:u.$.APPLICATION_ENVIRONMENT,sessionShortcut:!!t&&"shift+command+0",enableStrictPrivacy:e,enableSegmentIntegration:!0,networkRecording:{enabled:!0,recordHeadersAndBody:!0}}),L.zS.loadSdkPromise.then(e=>{e&&e.addSourceMiddleware(Z.aS)})},et=e=>{let{children:t}=e,{user:n,anonymousUser:r,isGammaOrgUser:i,isUserLoading:o}=(0,U.ur)(),{enabled:a,enableStrictPrivacy:l}=(0,X.u)("highlight");return(0,d.useEffect)(()=>{a&&!o&&n&&ee(l,i)},[l,a,i,o,n]),(0,d.useEffect)(()=>{if(!o){if(n){let{id:e,displayName:t,email:r,profileImageUrl:s}=n;Z.H.identify(e,{highlightDisplayName:t,email:r,avatar:s})}else if(null==r?void 0:r.id){let{id:e,displayName:t}=r;Z.H.identify("",{anonDisplayName:t||"",anonId:e})}}},[n,r,o]),(0,s.jsx)(s.Fragment,{children:t})};var en=n(83479),er=n(12327),es=n(1892),ei=n(32222),eo=n(98692);let ea=e=>{let{children:t}=e;return(0,ei.Z)(),(0,es.e)(),(0,eo.Z)(),(0,s.jsx)(W.CY,{i18n:er.Ru,children:t})};var el=n(20879),ec=n(6657),ed=n(9067),eh=n(57999),eu=n(51462),ef=n(60285),eg=n(69011),ep=n.n(eg),em=n(5720);class ew{async enable(){try{await window.serwist.register()}catch(e){console.error("Error registering Serwist service worker:",e)}}async disable(){try{for(let e of(await navigator.serviceWorker.getRegistrations()))console.debug("offlineMode - [SerwistOfflineCache] Unregistering service worker:",e),await e.unregister()}catch(e){console.error("Error unregistering Serwist service worker:",e)}try{await this.clearCaches()}catch(e){console.error("Error clearing caches",e)}this.store.dispatch((0,em.Em)())}async debug(){let e=await window.caches.keys();return{cache:(await Promise.all(e.map(async e=>{let t=await window.caches.open(e).then(e=>e.matchAll());return[e,t]}))).reduce((e,t)=>(e[t[0]]=t[1],e),{})}}async gc(e){}async clearCaches(){try{if(!window.caches)return;for(let e of(await window.caches.keys()))await window.caches.delete(e);console.debug("offlineMode - [SerwistOfflineCache] Serwist caches cleared successfully")}catch(e){console.error("Error clearing caches",e)}}constructor(){this.store=(0,O.KA)()}}let ey=ep()(()=>new ew);var eb=n(40269),ex=n(26488),ev=n(12784),eE=n.n(ev),ej=n(46343),eC=n.n(ej);let eO="offline-state-v1",eS=e=>{let t=e_(),n=null;t&&(console.debug("offlineMode - [setupOfflineManagerPersistence] LOADING PERSISTED STATE",t),e.dispatch((0,em.OA)(t)),n=t);let r=eE()(e=>{eI(e)},500);return e.subscribe(()=>{let t=(0,em.uc)(e.getState());if(n!==t){if(eC()(n,t)){n=t;return}n=t,console.debug("offlineMode - [setupOfflineManagerPersistence] PERSISTING STATE",t),r(t)}})},e_=()=>{try{let e=localStorage.getItem(eO);return JSON.parse(e)}catch(e){return null}},eI=async e=>{try{let t=JSON.stringify(e);localStorage.setItem(eO,t)}catch(e){console.error("Error persisting state",e)}},eD=(0,ex.B)();class eT{get enabled(){return(0,em.yy)(this.store.getState())}async init(){if(!eD){console.debug("offlineMode - [OfflineManager] Offline mode is not supported");return}this.cleanupFns.push(eS(this.store)),await this.notifyCaches(this.enabled),console.debug("offlineMode - [OfflineManager] caches initialized",this.enabled),this.setupFeatureFlagSubscription(),this.setupConnectionListener(),console.debug("offlineMode - [OfflineManager] subscriptions initialized")}setupConnectionListener(){let e=eh.l.on("offline",()=>{this.apolloOfflineCache.useOfflineCache()}),t=eh.l.on("online",()=>{this.apolloOfflineCache.backOnline()});this.cleanupFns.push(t),this.cleanupFns.push(e)}setupFeatureFlagSubscription(){X.of.initializePromise.then(()=>{let e=X.of.get("offline");e!==this.enabled&&(e?this.enable():this.disable()),this.cleanupFns.push(X.of.subscribe("offline",e=>{e?this.enable():this.disable()}))})}async enable(){if(!eD){console.debug("offlineMode - [OfflineManager] Offline mode is not supported");return}if(this.enabled){console.warn("Offline mode already enabled");return}let{user:e,status:t}=await (0,eu.m)({returnOfflineUser:!1});if("loggedIn"!==t){console.warn("[OfflineManager] Offline mode user not logged in");return}await this.notifyCaches(!0),this.store.dispatch((0,em.Es)({user:e,lastSynced:new Date().toISOString()}))}async disable(){if(!eD){console.debug("offlineMode - [OfflineManager] Offline mode is not supported");return}if(!this.enabled){console.warn("[OfflineManager] Offline mode already disabled");return}await this.notifyCaches(!1),this.store.dispatch((0,em.lK)())}async notifyCaches(e){return Promise.all(e?this.caches.map(e=>e.enable()):this.caches.map(e=>e.disable()))}cleanup(){for(;this.cleanupFns.length>0;){var e;null===(e=this.cleanupFns.pop())||void 0===e||e()}}constructor(){this.store=(0,O.KA)(),this.serwistOfflineCache=ey(),this.ydocOfflineCache=(0,eb.f)(),this.apolloOfflineCache=(0,ef.h)(),this.caches=[this.serwistOfflineCache,this.ydocOfflineCache,this.apolloOfflineCache],this.cleanupFns=[]}}let ek=async()=>{if(r)throw Error("OfflineManager already initialized");try{r=new eT,await r.init()}catch(e){console.error("Error initializing OfflineManager",e)}};window.getOfflineManagerState=()=>(0,O.KA)().getState().OfflineManager,window.getOfflineManager=()=>r;var eR=n(63899),eA=n(59025),eM=n(69087);let eN="no_org_id",eL=e=>{let{children:t}=e;(0,eA.Iy)();let{user:n,anonymousUser:r,currentWorkspace:i,isUserLoading:o}=(0,U.ur)();return(0,d.useEffect)(()=>{let e=(0,eM.g)();(0,eR.eZ)(e.get()),e.fetch().then(eR.eZ).catch(()=>{})},[]),(0,d.useEffect)(()=>{let e;if(!o){if(n){let{id:t,email:r}=n,s=!!r&&r.endsWith("@gamma.app");e={userId:t,isGammaUser:s,userOrgId:(null==i?void 0:i.id)||eN,anonymousUser:!1,gammaUserFirstName:s?n.firstName:""}}else e={userId:"anonymous_user",isGammaUser:!1,userOrgId:eN,anonymousUser:!0,gammaUserFirstName:""};(0,eR.eZ)(e)}},[o,n,r,i]),(0,s.jsx)(s.Fragment,{children:t})};var eP=n(19408),eU=n(50923),eF=n(13154),eG=n(35015),ez=n(39236),e$=n(0),eH=n(15576),eK=n(30503);o.$W.autoAddCss=!1;let eV=(0,O.KA)();ek();let eB=(0,g.fqS)({supportOfflineMode:!0}),eW=(0,g.fFM)();(0,e$.xy)(),ec.WC.initialize(),(0,en.Wf)(),L.zS.init(),R.yf.init({clientToken:u.$.DATADOG_CLIENT_TOKEN,service:"gamma-client",env:u.$.APPLICATION_ENVIRONMENT.replace("production","prod"),site:"datadoghq.com",forwardErrorsToLogs:!1,forwardConsoleLogs:[],sessionSampleRate:100}),function(){let e=new RegExp(String.raw(M(),u.$.API_HOST));if(u.$.DATADOG_RUM_CLIENT_TOKEN){var t;A.L.init({applicationId:u.$.DATADOG_APP_ID,clientToken:u.$.DATADOG_RUM_CLIENT_TOKEN,site:"datadoghq.com",service:"app",env:u.$.APPLICATION_ENVIRONMENT.replace("production","prod"),sessionSampleRate:null!==(t=u.$.DATADOG_RUM_SAMPLE_RATE)&&void 0!==t?t:10,sessionReplaySampleRate:0,trackUserInteractions:!0,trackResources:!0,trackLongTasks:!0,defaultPrivacyLevel:"mask-user-input",allowedTracingUrls:[{match:e,propagatorTypes:["tracecontext"]}]})}}(),(0,el.Ts)(),(0,Q.li)(),(0,eF.P)("appMainBundleLoaded"),X.of.get("debugLogging")||(window.console.debug=()=>{});let eY=e=>function(t){return(0,s.jsx)(eq,{children:(0,s.jsx)(e,{...t})})},eq=e=>{let{children:t}=e,n=(0,c.useRouter)();(0,eP.R)(),(0,eH.E)(),(0,y.G)(),(0,d.useEffect)(()=>{let e=(e,t)=>{let{shallow:n}=t;console.debug("[GammaApp - handleRouteChange] App is changing to ".concat(e," ").concat(n?"with":"without"," shallow routing"))};return n.events.on("routeChangeStart",e),()=>{n.events.off("routeChangeStart",e)}},[n]);let r=(0,eG.dC)();return(0,s.jsx)(h.Kq,{store:eV,children:(0,s.jsx)(ea,{children:(0,s.jsx)(v.Z,{children:(0,s.jsx)(w,{children:(0,s.jsx)(i.X,{client:eB,children:(0,s.jsxs)(g.N0f,{client:eW,children:[(0,s.jsx)(eQ,{}),(0,s.jsx)(b.fH,{}),(0,s.jsx)(el.FM,{}),(0,s.jsx)(ez.I,{}),(0,s.jsx)(x.D,{}),(0,s.jsx)(T,{}),(0,s.jsxs)(U.ac,{children:[(0,s.jsx)(eU.M7,{children:(0,s.jsx)(X.Yy,{children:(0,s.jsx)(ed.K,{children:(0,s.jsx)(eL,{children:(0,s.jsx)(et,{children:(0,s.jsx)(eG.gk,{value:r,children:(0,s.jsx)(J,{children:t})})})})})})}),(0,s.jsx)(X.zf,{})]})]})})})})})})},eJ="A new medium for presenting ideas, powered by AI. Beautiful, engaging content with none of the formatting and design work.",eQ=()=>{let e=u.$.APPLICATION_ENVIRONMENT;return(0,s.jsxs)(l(),{children:[(0,s.jsx)("title",{children:"Gamma"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, viewport-fit=cover"}),(0,s.jsx)("link",{rel:"manifest",href:"/manifest.json"}),(0,s.jsx)("link",{rel:"shortcut icon",href:"production"===e?"/favicons/favicon-192.svg":"staging"===e?"/favicons/favicon_staging.jpg":"/favicons/favicon_local.jpg"}),(0,s.jsx)("meta",{content:eJ,name:"description"},"description"),(0,s.jsx)("meta",{content:"Gamma",property:"og:title"},"og:title"),(0,s.jsx)("meta",{content:eJ,property:"og:description"},"og:description"),(0,s.jsx)("meta",{content:u.$.OG_IMAGE_URL,property:"og:image"},"og:image"),(0,s.jsx)("meta",{content:"Gamma",property:"twitter:title"},"twitter:title"),(0,s.jsx)("meta",{content:eJ,property:"twitter:description"},"twitter:description"),(0,s.jsx)("meta",{content:u.$.OG_IMAGE_URL,property:"twitter:image"},"twitter:image"),(0,s.jsx)("meta",{property:"og:type",content:"website"},"og:type"),(0,s.jsx)("meta",{content:"summary_large_image",name:"twitter:card"},"twitter:card"),(0,s.jsx)("meta",{name:"google",content:"notranslate"}),(0,s.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900",rel:"stylesheet"}),(0,s.jsx)("link",{rel:"stylesheet",href:"https://use.typekit.net/tiw2cwq.css"}),!(0,F.rA)()&&!(0,eK.NF)()&&(0,s.jsx)("script",{async:!0,src:"https://cdn.optimizely.com/js/20579410255.js"}),(0,s.jsx)("script",{src:"//cdn.iframe.ly/embed.js",async:!0,charSet:"utf-8"})]})}},25934:(e,t,n)=>{"use strict";n.d(t,{A:()=>j});var r=n(31085),s=n(25420),i=n(35687),o=n(61778),a=n(60353),l=n(14892),c=n(84755),d=n(80532),h=n(37586),u=n(58821),f=n(6256),g=n(35789),p=n(80853),m=n(18651),w=n(95986),y=n(52177);let b={src:"/_next/static/media/Sal-Asteroid-Parachute.ad317576.png"};var x=n(63723),v=n(44047);let E=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.x6,{id:"nwtY4N"})," ",(0,r.jsx)("span",{role:"img","aria-label":"sad face",children:"\uD83D\uDE15"})]}),j=e=>{let{errMessage:t=E,showDisclosure:n=!1,opacity:j=1,backgroundColor:C=w.t1.colors.trueblue[900],...O}=e;return(0,r.jsx)(s.s,{"data-error-component":!0,w:"100vw",h:"100vh",overflow:"hidden",justify:"center",align:"center",zIndex:99999,backgroundColor:(0,x.$3)(C,j),...O,children:(0,r.jsxs)(v.Kp,{lede:"",title:(0,r.jsx)(y.x6,{id:"HbR60U"}),stackProps:{shadow:"lg",position:"relative"},children:[(0,r.jsxs)(i.B,{spacing:8,children:[(0,r.jsx)(o.E,{children:(0,r.jsx)(y.x6,{id:"1gm+lP"})}),n&&(0,r.jsx)(a.n,{allowToggle:!0,pt:4,children:(0,r.jsxs)(l.A,{children:[(0,r.jsxs)(c.J,{px:0,_hover:{bgColor:"none"},borderStyle:"none",children:[(0,r.jsx)(d.az,{flex:"1",textAlign:"left",children:(0,r.jsx)(y.x6,{id:"qug3k/"})}),(0,r.jsx)(h.Q,{})]}),(0,r.jsx)(u.v,{pb:4,children:(0,r.jsx)(f.C,{colorScheme:"red",children:t})})]})}),(0,r.jsx)(g.o,{children:(0,r.jsx)(p.$,{variant:"solid",size:"lg",m:6,onClick:()=>{window.location.reload()},children:(0,r.jsx)(y.x6,{id:"C6f2hU"})})})]}),(0,r.jsx)(m._,{pos:"absolute",w:36,bottom:"calc(-100% + 120px)",right:-12,src:b.src,pointerEvents:"none",opacity:{base:0,md:1}})]})})}},60916:(e,t,n)=>{"use strict";n.d(t,{fH:()=>h,hw:()=>f,vj:()=>u});var r=n(31085),s=n(31242),i=n(66996),o=n.n(i),a=n(73893),l=n(92667),c=n(92947);let d=["/signin","/signup","/invitations/workspaces/[workspaceId]"],h=()=>{let e=(0,s.useRouter)().pathname;return!(0,l.En)()||d.includes(e)?null:(0,r.jsx)("style",{children:".grecaptcha-badge { visibility: hidden; }"})},u=()=>(0,r.jsx)(o(),{src:"https://www.google.com/recaptcha/enterprise.js?render=".concat(a.$.RECAPTCHA_SCORING_KEY),async:!0,defer:!0}),f=async e=>(await (0,c.f)(50,100)(()=>!!window.grecaptcha).catch(()=>{throw Error("Timed out waiting for grecaptcha")}),new Promise((t,n)=>{grecaptcha.enterprise.ready(async()=>{try{let n=await grecaptcha.enterprise.execute(a.$.RECAPTCHA_SCORING_KEY,{action:e});t(n)}catch(e){console.log(e),n(e)}})}))},40269:(e,t,n)=>{"use strict";n.d(t,{f:()=>S});var r=n(12784),s=n.n(r),i=n(69011),o=n.n(i),a=n(30795),l=n.n(a),c=n(32899),d=n(64225),h=n(94188),u=n(17191),f=n(76285);let g="custom",p="updates",m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},[n]=h.hL(e.db,[p]);return h.UK(n,h.T3(e._dbref,!1)).then(r=>{t(n),f.hL(e.doc,()=>{r.forEach(t=>f.QE(e.doc,t))},e,!1)}).then(()=>h.y7(n).then(t=>{e._dbref=t+1})).then(()=>h.U9(n).then(t=>{e._dbsize=t})).then(()=>n)},w=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return m(e).then(n=>{(t||e._dbsize>=500)&&h.GL(n,f.PR(e.doc)).then(()=>h.yH(n,h.U2(e._dbref,!0))).then(()=>h.U9(n).then(t=>{e._dbsize=t}))})},y=e=>h.MR(e);class b extends u.c{destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then(e=>{e.close()})}clearData(){return this.destroy().then(()=>{h.MR(this.name)})}get(e){return this._db.then(t=>{let[n]=h.hL(t,[g],"readonly");return h.Jt(n,e)})}set(e,t){return this._db.then(n=>{let[r]=h.hL(n,[g]);return h.yJ(r,t,e)})}del(e){return this._db.then(t=>{let[n]=h.hL(t,[g]);return h.yH(n,e)})}constructor(e,t){super(),this.doc=t,this.name=e,this._dbref=0,this._dbsize=0,this._destroyed=!1,this.db=null,this.synced=!1,this._db=h.P2(e,e=>h.vK(e,[["updates",{autoIncrement:!0}],["custom"]])),this.whenSynced=this._db.then(e=>(this.db=e,m(this,e=>h.GL(e,f.PR(t))).then(()=>(this._destroyed||(this.emit("synced",[this]),this.synced=!0),this)))),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(e,t)=>{if(this.db&&t!==this){let[t]=h.hL(this.db,[p]);h.GL(t,e),++this._dbsize>=500&&(null!==this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout(()=>{w(this,!1),this._storeTimeoutId=null},this._storeTimeout))}},t.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),t.on("destroy",this.destroy)}}var x=n(5933),v=n(26488),E=n(63025),j=n(5720);let C=(0,v.S)();class O{async enable(){}async disable(){}get enabled(){return C&&((0,j.yy)(this.store.getState())||c.of.get("offlineEditing"))}async loadYDoc(e,t){return this.enabled?!!(0,j.TT)(this.store.getState())[e]&&(this.setup(e,t),!0):(console.warn("Cannot setupForDocLoad when it is not enabled"),!1)}async syncYDoc(e,t){if(!this.enabled){console.warn("Cannot setup IndexedDB for doc as it is not enabled");return}await this.setup(e,t),this.store.dispatch((0,j.GD)({docId:e,lastSynced:new Date().toISOString()}))}setup(e,t){return new Promise(n=>{let r=new b(e,t),i=s()(()=>{let e=t.getMap("SCHEMA_VERSION").get("REQUIRED_VERSION");r.set("lastUpdated",new Date().toISOString()),r.set("schemaVersion",e||"")},1e3);t.on("update",i),r.on("synced",()=>{n()})})}async gc(){let e=Date.now(),t=Object.values(this.syncedYDocs).filter(t=>!!t.lastSynced&&e-new Date(t.lastSynced).getTime()>E.P).map(e=>e.docId),n=(0,x.pn)(this.store.getState());n?this.removeDocs(l()(t,n)):this.removeDocs(t)}async removeDocs(e){if(0===e.length)return;this.store.dispatch((0,j.jk)({docIds:e}));let t=e.map(e=>y(e));await Promise.all(t)}async debug(){return{syncedYdocs:this.syncedYDocs}}get syncedYDocs(){return(0,j.TT)(this.store.getState())}constructor(){this.store=(0,d.KA)()}}let S=o()(()=>new O)},26488:(e,t,n)=>{"use strict";n.d(t,{B:()=>i,S:()=>s});var r=n(88255);let s=()=>"indexedDB"in window&&"localStorage"in window&&r.P,i=()=>"undefined"!=typeof navigator&&"serviceWorker"in navigator&&s()},59025:(e,t,n)=>{"use strict";n.d(t,{Br:()=>u,Iy:()=>f,n6:()=>p,td:()=>g});var r=n(14041),s=n(65998),i=n(64225),o=n(5933),a=n(14e3),l=n(33684),c=n(63899);let d=e=>Math.random()<=1/e;class h{setupProvider(){this.t1SetupProvider||(this.t1SetupProvider=performance.now())}downloadDoc(){this.t2DownloadDoc||(this.t2DownloadDoc=performance.now())}onCreate(){this.t3OnCreate||(this.t3OnCreate=performance.now())}report(){return null===this.t1SetupProvider||null===this.t2DownloadDoc||null===this.t3OnCreate?null:{downloadDoc:this.t2DownloadDoc-this.t1SetupProvider,onCreate:this.t3OnCreate-this.t2DownloadDoc}}constructor(){this.t1SetupProvider=null,this.t2DownloadDoc=null,this.t3OnCreate=null}}let u=(e,t)=>{let n=(0,i.GV)(o.Cl),s=(0,r.useRef)(n);(0,r.useEffect)(()=>{s.current=n},[n]),(0,r.useEffect)(()=>{if(e)return window.addEventListener("keydown",n,!0),()=>{window.removeEventListener("keydown",n,!0)};function n(e){if(!e.target.closest(".ProseMirror")||!s.current||!d(t))return;let n=performance.now();requestAnimationFrame(()=>{let t=e.key;" "===t&&(t="Space");let r=performance.now()-n;(0,c.I1)({...(0,l.w)(),key:t,duration:r})})}},[e,s,t])},f=()=>{let e=(0,s.u)("rumSampleRate");(0,r.useEffect)(()=>{(0,c.BR)(e)},[e])},g=e=>{let t=(0,r.useCallback)(t=>{let{isFullscreen:n=!1}=t;if(!e)return;let r=performance.now();requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=performance.now()-r;(0,c.WX)({...(0,l.w)(),toMode:a.w.SLIDE_VIEW,duration:e,isFullscreen:n})})})},[e]);return{recordExitSlideModePerformance:(0,r.useCallback)(t=>{let{isFullscreen:n=!1}=t;if(!e)return;let r=performance.now();requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=performance.now()-r;(0,c.WX)({...(0,l.w)(),toMode:a.w.DOC_VIEW,duration:e,isFullscreen:n})})})},[e]),recordEnterSlideModePerformance:t}},p=()=>{let[e]=(0,r.useState)(()=>new h),t=(0,r.useCallback)(()=>{e.setupProvider()},[e]),n=(0,r.useCallback)(()=>{e.downloadDoc()},[e]);return{timeOnCreate:(0,r.useCallback)(()=>{e.onCreate();let t=e.report();if(null===t){console.warn("[HoneycombDocLoadTimer] failed to generate doc timings");return}(0,c.Ac)({...(0,l.w)(),duration:t.onCreate}),(0,c.Dx)({...(0,l.w)(),duration:t.downloadDoc})},[e]),timeOnSetupProvider:t,timeOnDownloadDoc:n}}},19408:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var r=n(31242),s=n(14041),i=n(85025),o=n(14691);let a=()=>{let{pathname:e,isReady:t}=(0,r.useRouter)(),n=(0,s.useRef)(!1),[a,l]=(0,i.F)(o.E.lastHomeUrl,"/");(0,s.useEffect)(()=>{!n.current&&t&&(l("/inspiration"===e||"/templates"===e?e:"/"),n.current=!0)},[l,t,e])}},85025:(e,t,n)=>{"use strict";n.d(t,{F:()=>i});var r=n(14041),s=n(69086);function i(e,t){let[n,i]=(0,r.useState)(()=>{try{let n=s.e.getItem(e);if(null===n)return t;return JSON.parse(n)}catch(e){return console.error("[useSessionStorage.getItem] Error getting sessionStorage item",e),t}});return[n,(0,r.useCallback)(t=>{try{s.e.setItem(e,JSON.stringify(t)),i(t)}catch(e){console.error("[useSessionStorage.setItem] Error setting sessionStorage item",e)}},[e])]}},41378:()=>{},23472:()=>{},98701:()=>{},11291:()=>{},52984:()=>{},68765:()=>{},57769:()=>{}}]);
//# sourceMappingURL=7835-d936a528c07da527.js.map