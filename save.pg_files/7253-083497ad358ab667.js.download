(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7253],{26660:(e,t,n)=>{e.exports=n(98226)},68427:(e,t,n)=>{"use strict";var i=n(44345),r=n(96435),s=n(68286),o=n(93025),l=n(13916),a=n(6135),d=n(56923),c=n(31792);e.exports=function(e){return new Promise(function(t,n){var u=e.data,h=e.headers,x=e.responseType;i.isFormData(u)&&delete h["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(m+":"+f)}var g=l(e.baseURL,e.url);function j(){if(p){var i="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null;r(t,n,{data:x&&"text"!==x&&"json"!==x?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:i,config:e,request:p}),p=null}}if(p.open(e.method.toUpperCase(),o(g,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,"onloadend"in p?p.onloadend=j:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(j)},p.onabort=function(){p&&(n(c("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(c("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(c(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},i.isStandardBrowserEnv()){var v=(e.withCredentials||d(g))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;v&&(h[e.xsrfHeaderName]=v)}"setRequestHeader"in p&&i.forEach(h,function(e,t){void 0===u&&"content-type"===t.toLowerCase()?delete h[t]:p.setRequestHeader(t,e)}),i.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),x&&"json"!==x&&(p.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),n(e),p=null)}),u||(u=null),p.send(u)})}},98226:(e,t,n)=>{"use strict";var i=n(44345),r=n(25063),s=n(9560),o=n(4816);function l(e){var t=new s(e),n=r(s.prototype.request,t);return i.extend(n,s.prototype,t),i.extend(n,t),n}var a=l(n(10292));a.Axios=s,a.create=function(e){return l(o(a.defaults,e))},a.Cancel=n(69945),a.CancelToken=n(95912),a.isCancel=n(6945),a.all=function(e){return Promise.all(e)},a.spread=n(18127),a.isAxiosError=n(18568),e.exports=a,e.exports.default=a},69945:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},95912:(e,t,n)=>{"use strict";var i=n(69945);function r(e){if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});var t,n=this;e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r},6945:e=>{"use strict";e.exports=function(e){return!!(e&&e.__CANCEL__)}},9560:(e,t,n)=>{"use strict";var i=n(44345),r=n(93025),s=n(70546),o=n(71617),l=n(4816),a=n(16552),d=a.validators;function c(e){this.defaults=e,this.interceptors={request:new s,response:new s}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},(e=l(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t,n=e.transitional;void 0!==n&&a.assertOptions(n,{silentJSONParsing:d.transitional(d.boolean,"1.0.0"),forcedJSONParsing:d.transitional(d.boolean,"1.0.0"),clarifyTimeoutError:d.transitional(d.boolean,"1.0.0")},!1);var i=[],r=!0;this.interceptors.request.forEach(function(t){("function"!=typeof t.runWhen||!1!==t.runWhen(e))&&(r=r&&t.synchronous,i.unshift(t.fulfilled,t.rejected))});var s=[];if(this.interceptors.response.forEach(function(e){s.push(e.fulfilled,e.rejected)}),!r){var c=[o,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(s),t=Promise.resolve(e);c.length;)t=t.then(c.shift(),c.shift());return t}for(var u=e;i.length;){var h=i.shift(),x=i.shift();try{u=h(u)}catch(e){x(e);break}}try{t=o(u)}catch(e){return Promise.reject(e)}for(;s.length;)t=t.then(s.shift(),s.shift());return t},c.prototype.getUri=function(e){return r((e=l(this.defaults,e)).url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],function(e){c.prototype[e]=function(t,n){return this.request(l(n||{},{method:e,url:t,data:(n||{}).data}))}}),i.forEach(["post","put","patch"],function(e){c.prototype[e]=function(t,n,i){return this.request(l(i||{},{method:e,url:t,data:n}))}}),e.exports=c},70546:(e,t,n)=>{"use strict";var i=n(44345);function r(){this.handlers=[]}r.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},13916:(e,t,n)=>{"use strict";var i=n(34860),r=n(7825);e.exports=function(e,t){return e&&!i(t)?r(e,t):t}},31792:(e,t,n)=>{"use strict";var i=n(27148);e.exports=function(e,t,n,r,s){return i(Error(e),t,n,r,s)}},71617:(e,t,n)=>{"use strict";var i=n(44345),r=n(97638),s=n(6945),o=n(10292);function l(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return l(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||o.adapter)(e).then(function(t){return l(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t},function(t){return!s(t)&&(l(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},27148:e=>{"use strict";e.exports=function(e,t,n,i,r){return e.config=t,n&&(e.code=n),e.request=i,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},4816:(e,t,n)=>{"use strict";var i=n(44345);e.exports=function(e,t){t=t||{};var n={},r=["url","method","data"],s=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function a(e,t){return i.isPlainObject(e)&&i.isPlainObject(t)?i.merge(e,t):i.isPlainObject(t)?i.merge({},t):i.isArray(t)?t.slice():t}function d(r){i.isUndefined(t[r])?i.isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(e[r],t[r])}i.forEach(r,function(e){i.isUndefined(t[e])||(n[e]=a(void 0,t[e]))}),i.forEach(s,d),i.forEach(o,function(r){i.isUndefined(t[r])?i.isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(void 0,t[r])}),i.forEach(l,function(i){i in t?n[i]=a(e[i],t[i]):i in e&&(n[i]=a(void 0,e[i]))});var c=r.concat(s).concat(o).concat(l),u=Object.keys(e).concat(Object.keys(t)).filter(function(e){return -1===c.indexOf(e)});return i.forEach(u,d),n}},96435:(e,t,n)=>{"use strict";var i=n(31792);e.exports=function(e,t,n){var r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(i("Request failed with status code "+n.status,n.config,null,n.request,n))}},97638:(e,t,n)=>{"use strict";var i=n(44345),r=n(10292);e.exports=function(e,t,n){var s=this||r;return i.forEach(n,function(n){e=n.call(s,e,t)}),e}},10292:(e,t,n)=>{"use strict";var i=n(39907),r=n(44345),s=n(2327),o=n(27148),l={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var d={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(68427):void 0!==i&&"[object process]"===Object.prototype.toString.call(i)&&(e=n(68427)),e}(),transformRequest:[function(e,t){return(s(t,"Accept"),s(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e))?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(a(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(0,JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(s){if("SyntaxError"===e.name)throw o(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};d.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],function(e){d.headers[e]={}}),r.forEach(["post","put","patch"],function(e){d.headers[e]=r.merge(l)}),e.exports=d},25063:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},93025:(e,t,n)=>{"use strict";var i=n(44345);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;if(n)s=n(t);else if(i.isURLSearchParams(t))s=t.toString();else{var s,o=[];i.forEach(t,function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),o.push(r(t)+"="+r(e))}))}),s=o.join("&")}if(s){var l=e.indexOf("#");-1!==l&&(e=e.slice(0,l)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},7825:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},68286:(e,t,n)=>{"use strict";var i=n(44345);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,n,r,s,o){var l=[];l.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),i.isString(r)&&l.push("path="+r),i.isString(s)&&l.push("domain="+s),!0===o&&l.push("secure"),document.cookie=l.join("; ")},read:function(e){var t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},34860:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},18568:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},56923:(e,t,n)=>{"use strict";var i=n(44345);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=i.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},2327:(e,t,n)=>{"use strict";var i=n(44345);e.exports=function(e,t){i.forEach(e,function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])})}},6135:(e,t,n)=>{"use strict";var i=n(44345),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,s,o={};return e&&i.forEach(e.split("\n"),function(e){s=e.indexOf(":"),t=i.trim(e.substr(0,s)).toLowerCase(),n=i.trim(e.substr(s+1)),t&&!(o[t]&&r.indexOf(t)>=0)&&("set-cookie"===t?o[t]=(o[t]?o[t]:[]).concat([n]):o[t]=o[t]?o[t]+", "+n:n)}),o}},18127:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},16552:(e,t,n)=>{"use strict";var i=n(38983),r={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){r[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var s={},o=i.version.split(".");function l(e,t){for(var n=t?t.split("."):o,i=e.split("."),r=0;r<3;r++){if(n[r]>i[r])return!0;if(n[r]<i[r])break}return!1}r.transitional=function(e,t,n){var r=t&&l(t);function o(e,t){return"[Axios v"+i.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,l){if(!1===e)throw Error(o(i," has been removed in "+t));return r&&!s[i]&&(s[i]=!0,console.warn(o(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,l)}},e.exports={isOlderVersion:l,assertOptions:function(e,t,n){if("object"!=typeof e)throw TypeError("options must be an object");for(var i=Object.keys(e),r=i.length;r-- >0;){var s=i[r],o=t[s];if(o){var l=e[s],a=void 0===l||o(l,s,e);if(!0!==a)throw TypeError("option "+s+" must be "+a);continue}if(!0!==n)throw Error("Unknown option "+s)}},validators:r}},44345:(e,t,n)=>{"use strict";var i=n(25063),r=Object.prototype.toString;function s(e){return"[object Array]"===r.call(e)}function o(e){return void 0===e}function l(e){return null!==e&&"object"==typeof e}function a(e){if("[object Object]"!==r.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function d(e){return"[object Function]"===r.call(e)}function c(e,t){if(null!=e){if("object"!=typeof e&&(e=[e]),s(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:l,isPlainObject:a,isUndefined:o,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:d,isStream:function(e){return l(e)&&d(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){var t={};function n(n,i){a(t[i])&&a(n)?t[i]=e(t[i],n):a(n)?t[i]=e({},n):s(n)?t[i]=n.slice():t[i]=n}for(var i=0,r=arguments.length;i<r;i++)c(arguments[i],n);return t},extend:function(e,t,n){return c(t,function(t,r){n&&"function"==typeof t?e[r]=i(t,n):e[r]=t}),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},76272:e=>{var t="function"==typeof Float32Array;function n(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e}function i(e,t,n){return 3*(1-3*n+3*t)*e*e+2*(3*n-6*t)*e+3*t}function r(e){return e}e.exports=function(e,s,o,l){if(!(0<=e&&e<=1&&0<=o&&o<=1))throw Error("bezier x values must be in [0, 1] range");if(e===s&&o===l)return r;for(var a=t?new Float32Array(11):Array(11),d=0;d<11;++d)a[d]=n(.1*d,e,o);return function(t){return 0===t?0:1===t?1:n(function(t){for(var r=0,s=1;10!==s&&a[s]<=t;++s)r+=.1;var l=r+(t-a[--s])/(a[s+1]-a[s])*.1,d=i(l,e,o);return d>=.001?function(e,t,r,s){for(var o=0;o<4;++o){var l=i(t,r,s);if(0===l)break;var a=n(t,r,s)-e;t-=a/l}return t}(t,l,e,o):0===d?l:function(e,t,i,r,s){var o,l,a=0;do(o=n(l=t+(i-t)/2,r,s)-e)>0?i=l:t=l;while(Math.abs(o)>1e-7&&++a<10);return l}(t,r,r+.1,e,o)}(t),s,l)}}},28985:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,i,s,o){if("function"!=typeof i)throw TypeError("The listener must be a function");var l=new r(i,s||e,o),a=n?n+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],l]:e._events[a].push(l):(e._events[a]=l,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function l(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1)),l.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},l.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,o=Array(s);r<s;r++)o[r]=i[r].fn;return o},l.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},l.prototype.emit=function(e,t,i,r,s,o){var l=n?n+e:e;if(!this._events[l])return!1;var a,d,c=this._events[l],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,r),!0;case 5:return c.fn.call(c.context,t,i,r,s),!0;case 6:return c.fn.call(c.context,t,i,r,s,o),!0}for(d=1,a=Array(u-1);d<u;d++)a[d-1]=arguments[d];c.fn.apply(c.context,a)}else{var h,x=c.length;for(d=0;d<x;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),u){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,t);break;case 3:c[d].fn.call(c[d].context,t,i);break;case 4:c[d].fn.call(c[d].context,t,i,r);break;default:if(!a)for(h=1,a=Array(u-1);h<u;h++)a[h-1]=arguments[h];c[d].fn.apply(c[d].context,a)}}return!0},l.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,i,r){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var l=this._events[s];if(l.fn)l.fn!==t||r&&!l.once||i&&l.context!==i||o(this,s);else{for(var a=0,d=[],c=l.length;a<c;a++)(l[a].fn!==t||r&&!l[a].once||i&&l[a].context!==i)&&d.push(l[a]);d.length?this._events[s]=1===d.length?d[0]:d:o(this,s)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l},37124:e=>{"use strict";let t=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);e.exports=e=>!t.has(e&&e.code)},5508:function(e,t){(function(){(null!==t?t:this).Lethargy=function(){function e(e,t,n,i){this.stability=null!=e?Math.abs(e):8,this.sensitivity=null!=t?1+Math.abs(t):100,this.tolerance=null!=n?1+Math.abs(n):1.1,this.delay=null!=i?i:150,this.lastUpDeltas=(function(){var e,t,n;for(e=1,n=[],t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}).call(this),this.lastDownDeltas=(function(){var e,t,n;for(e=1,n=[],t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}).call(this),this.deltasTimestamp=(function(){var e,t,n;for(e=1,n=[],t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}).call(this)}return e.prototype.check=function(e){var t;return(null!=(e=e.originalEvent||e).wheelDelta?t=e.wheelDelta:null!=e.deltaY?t=-40*e.deltaY:(null!=e.detail||0===e.detail)&&(t=-40*e.detail),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),t>0)?(this.lastUpDeltas.push(t),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(t),this.lastDownDeltas.shift(),this.isInertia(-1))},e.prototype.isInertia=function(e){var t,n,i,r,s,o;return null===(t=-1===e?this.lastDownDeltas:this.lastUpDeltas)[0]?e:(!(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now())||t[0]!==t[2*this.stability-1])&&(i=t.slice(0,this.stability),n=t.slice(this.stability,2*this.stability),o=i.reduce(function(e,t){return e+t}),s=n.reduce(function(e,t){return e+t}),!!(Math.abs(o/i.length)<Math.abs((r=s/n.length)*this.tolerance)&&this.sensitivity<Math.abs(r))&&e)},e.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},e.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},e}()}).call(this)},95953:(e,t,n)=>{"use strict";n.d(t,{V:()=>ej});var i=n(31085),r=n(46882),s=n(76003),o=n(80532),l=n(20501),a=n(3040),d=n(52177),c=n(14041),u=n(50080),h=n(97548),x=n(75675),p=n(37908),m=n(64130),f=n(64225),g=n(20869),j=n(2600),v=n(26848),b=n(35687),y=n(62313),C=n(61778),w=n(24221),E=n(23832),k=n(60434),S=n(2768);let I=(0,c.memo)(()=>{let[e]=(0,k.R7)("editorMode"),t=(0,E.n)(S.s);return(0,i.jsxs)(j.T,{spacing:3,align:"stretch",children:[(0,i.jsx)(o.az,{fontSize:"sm",children:(0,i.jsx)(d.x6,{id:"x4f8pZ"})}),"freeform"===e?(0,i.jsx)(T,{title:t.freeform.label(),icon:t.freeform.icon,children:(0,i.jsx)(d.x6,{id:"ELg7Zs",values:{0:t.freeform.label()}})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(T,{title:t.structured.label(),icon:t.structured.icon,children:(0,i.jsx)(d.x6,{id:"iKG7iK",values:{0:t.structured.label()}})}),(0,i.jsx)(T,{title:(0,i.jsx)(d.x6,{id:"+mgW41"}),icon:l.LFz,children:(0,i.jsx)(d.x6,{id:"oGNrqw",components:{0:(0,i.jsx)(v.u,{})}})}),(0,i.jsx)(T,{title:(0,i.jsx)(d.x6,{id:"1Nr9Bi"}),icon:a.zm_,children:(0,i.jsx)(d.x6,{id:"5cPTto",components:{0:(0,i.jsx)(v.u,{})}})})]})]})});I.displayName="AIGeneratorTips";let T=e=>{let{icon:t,title:n,children:r}=e;return(0,i.jsx)(o.az,{p:4,borderRadius:"md",bg:"whiteAlpha.700",children:(0,i.jsxs)(b.B,{color:"gray.700",spacing:"1",children:[(0,i.jsxs)(y.z,{spacing:"1",fontSize:"sm",children:[null!==t&&(0,i.jsx)(w.g,{icon:t}),(0,i.jsx)(C.E,{fontWeight:"600",color:"gray.800",children:n})]}),(0,i.jsx)(C.E,{fontSize:"sm",children:r})]})})};var A=n(11070),_=n(66176),R=n(93129),O=n(27559),D=n(80853);let z=(0,c.memo)(()=>{let e=(0,f.jL)(),t=(0,f.CU)(),n=(0,f.GV)(g.mD),r=(0,f.GV)(g.cK),s=(0,f.GV)(g.OM),a=(0,k.jQ)(),u=(0,c.useCallback)(()=>{let n=(0,g.QR)(t.getState()).find(e=>e.isDraft);n&&e((0,g.mr)({num:n.num}))},[e,t]);return(0,i.jsx)(o.az,{children:n&&(0,i.jsx)(O.S,{in:s,children:(0,i.jsxs)(b.B,{direction:{base:"column",md:"row"},alignItems:{base:"stretch",md:"center"},spacing:4,bg:"white",p:"4",borderRadius:"lg",boxShadow:"sm",children:[(0,i.jsxs)(y.z,{flex:"1",children:[(0,i.jsx)(w.g,{icon:l.Yj9}),(0,i.jsxs)(b.B,{spacing:0,children:[(0,i.jsx)(C.E,{fontWeight:"600",fontSize:"lg",children:(0,i.jsx)(d.x6,{id:"YU/AK+",values:{0:null==r?void 0:r.num}})}),(0,i.jsx)(C.E,{children:(0,i.jsx)(d.x6,{id:"J4c0Rh"})})]})]}),(0,i.jsx)(D.$,{variant:"solid",colorScheme:"primary",onClick:a,children:(0,i.jsx)(d.x6,{id:"u52q7m"})}),(0,i.jsx)(D.$,{onClick:u,variant:"plain",children:(0,i.jsx)(d.x6,{id:"dEgA5A"})})]})})})});z.displayName="OverrideDraftWarning";var P=n(74727),L=n(9021),N=n(63341),M=n(18528),V=n(40173),G=n(72821),F=n(48310),W=n(33473),U=n(81575),B=n(95986),H=n(46343),q=n.n(H),K=n(87064);let J={size:"sm",variant:"ghost",colorScheme:"gray",color:"gray.800"},Y=(0,c.memo)(()=>{let e=(0,f.CU)(),t=(0,f.jL)(),n=(0,k.ow)(),r=(0,f.GV)(g.QR,(e,t)=>q()(e,t)),{hideTooltips:s,GammaTooltipHiderContext:a}=(0,B.ku)(),u=(0,f.GV)(g.mD),h=(0,c.useCallback)(()=>{t((0,g.yU)()),n((0,g.qT)(e.getState()),!1),(0,K.WR)({changeType:"next"})},[t,n,e]),x=(0,c.useCallback)(()=>{t((0,g.kh)()),n((0,g.qT)(e.getState()),!1),(0,K.WR)({changeType:"prev"})},[t,n,e]),p=(0,c.useCallback)(i=>{t((0,g.mr)({num:i})),n((0,g.qT)(e.getState()),!1),(0,K.WR)({changeType:"load",version:i})},[t,n,e]);if(0===r.length)return null;let m=r.findIndex(e=>e.isCurrent),j=r[m],v=m<r.length-1;return u?(0,i.jsxs)(P.e,{isAttached:!0,bg:"whiteAlpha.500",borderRadius:"md",children:[(0,i.jsx)(L.K,{display:{base:"none",md:"inline-flex"},isDisabled:!(m>0),"aria-label":"previous version",onClick:x,...J,icon:(0,i.jsx)(w.g,{icon:l.Wzs,fixedWidth:!0})}),(0,i.jsxs)(N.W,{closeOnSelect:!0,children:[(0,i.jsx)(a,{children:(0,i.jsx)(B.Tz,{label:"Version ".concat(j.num," ").concat(j.isDraft?"(current draft)":""),closeOnClick:!1,children:(0,i.jsx)(M.I,{colorScheme:"gray",minW:"10",size:"sm",as:D.$,variant:"ghost",onClick:()=>{s()},children:j.num})})}),(0,i.jsx)(V.Z,{children:(0,i.jsxs)(G.c,{maxW:"260px",children:[(0,i.jsx)(F.i,{title:"Version history",type:"radio",value:String(j.num),children:[...r].reverse().map((e,t)=>(0,i.jsx)(W.k,{value:String(e.num),onClick:()=>{p(e.num),setTimeout(()=>{s()},0)},children:(0,i.jsxs)(C.E,{children:["Version ",e.num," ",e.isDraft&&"(current draft)"]})},t))}),(0,i.jsx)(U.N,{}),(0,i.jsx)(o.az,{py:1,px:2,children:(0,i.jsx)(C.E,{fontSize:"xs",children:(0,i.jsx)(d.x6,{id:"gdzgeC"})})})]})})]}),(0,i.jsx)(L.K,{display:{base:"none",md:"inline-flex"},isDisabled:!v,onClick:h,"aria-label":"next version",...J,icon:(0,i.jsx)(w.g,{icon:l.XkK,fixedWidth:!0})})]}):null});Y.displayName="VersionSwitcher";var X=n(62230),$=n(60353),Z=n(70323),Q=n(91568),ee=n(98177),et=n(49547),en=n(22218),ei=n(63633),er=n(12327),es=n(12664),eo=n(99548),el=n(84142),ea=n(820),ed=n(44066);let ec=(0,c.memo)(()=>{var e;let{format:t,styleTemplate:n,setStyleTemplate:r}=(0,k.pm)(),s=(0,E.n)(el.sb);return(0,i.jsx)(ed.X,{label:(0,i.jsx)(d.x6,{id:"kI1qVD"}),colorScheme:"orchid",icon:a.swh,values:[s[t].label(),n&&(null===(e=es.S9[n])||void 0===e?void 0:e.label())],testId:"format-settings-group",children:(0,i.jsxs)(j.T,{spacing:2,align:"start",children:[(0,i.jsxs)(et.MJ,{children:[(0,i.jsx)(el.Qz,{wrap:!0}),n&&(0,i.jsx)(ea.j,{docFormatType:t,onSelectStyleTemplate:r,selectedStyleTemplate:n})]}),(0,i.jsxs)(et.MJ,{children:[(0,i.jsx)(en.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(d.x6,{id:"G57+qO"})}),(0,i.jsx)(eu,{})]})]})})});ec.displayName="FormatSettingsGroup";let eu=(0,c.memo)(()=>{let[e,t]=(0,k.lF)(),n=(0,c.useCallback)(e=>t(e.target.value),[t]);return(0,i.jsx)(ei.T,{value:e||"",onChange:n,bg:"white",placeholder:er.Ru._({id:"LLAa/9"}),maxLength:eo.nt})});eu.displayName="PromptInput";var eh=n(40137),ex=n(2928);let ep=(0,c.memo)(e=>{let{isLoading:t}=e,n=(0,f.GV)(g.OM);return(0,i.jsxs)(j.T,{flex:"1",overflow:"hidden auto",spacing:3,align:"start",alignItems:"stretch",transition:"all 300ms ease",opacity:n?.75:1,pointerEvents:n?"none":"inherit",cursor:n?"not-allowed":"default",children:[(0,i.jsxs)(o.az,{fontSize:"sm",children:[(0,i.jsx)(d.x6,{id:"Tz0i8g"})," ",(0,i.jsx)(B.qT,{label:(0,i.jsx)(d.x6,{id:"FDel/s"})})]}),t?(0,i.jsxs)(b.B,{children:[(0,i.jsx)(X.E,{height:16}),(0,i.jsx)(X.E,{height:16}),(0,i.jsx)(X.E,{height:16})]}):(0,i.jsxs)($.n,{allowMultiple:!0,defaultIndex:[0],allowToggle:!0,as:b.B,w:"100%",bg:"white",borderRadius:"lg",overflow:"hidden",spacing:0,divider:(0,i.jsx)(Z.c,{}),boxShadow:"sm",children:[(0,i.jsx)(ex.M,{}),(0,i.jsx)(eh.cG,{}),(0,i.jsx)(ec,{})]}),(0,i.jsx)(o.az,{display:{base:"none",lg:"block"},children:(0,i.jsx)(em,{})})]})});ep.displayName="AIGeneratorSettings";let em=(0,c.memo)(()=>{let e=(0,f.GV)(g.J$),{maxTokens:t}=(0,ee.is)();return(0,i.jsx)(Q.n,{charCount:e,max:t,shouldShow:!0})});em.displayName="AIGeneratorCharacterCount";var ef=n(24548),eg=n(20574);let ej=(0,c.memo)(()=>{let[e,t]=(0,c.useState)("outline"),{skipThemeStep:n}=(0,u._2)(),j=(0,f.jL)(),v=(0,m.fW)()?a.CeG:a.dmS,b=(0,m.fW)()?l.dmS:l.CeG;(0,c.useEffect)(()=>()=>{j((0,g.GL)())},[j]);let y=(0,c.useCallback)(()=>{t("outline")},[]),C="theme"===e?void 0:(0,i.jsx)(d.x6,{id:"opD9db"});return(0,i.jsx)(p.pY,{children:(0,i.jsxs)(A.dJ,{children:[(0,i.jsx)(R.V,{onClick:"theme"===e?y:void 0,navIconOverride:"theme"===e?b:void 0,navLabelOverride:"theme"===e?(0,i.jsx)(d.x6,{id:"iH8pgl"}):void 0,styleProps:"theme"===e?{position:"absolute"}:void 0,pageTitle:C,rightItem:"outline"===e?(0,i.jsx)(Y,{}):void 0}),"outline"===e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.x,{templateAreas:{base:'"overrideWarning" \n                   "settings" \n                   "editor"\n                   "tips"',md:'"overrideWarning overrideWarning"\n                   "settings editor"\n                   "tips editor"',xl:'". overrideWarning ." \n                 "settings editor tips" \n                 "settings editor tips"'},gridTemplateColumns:{base:"1fr",md:"2fr 3fr",xl:"3fr 6fr 3fr"},gridTemplateRows:{base:"auto",md:"auto auto 1fr",xl:"auto"},gap:4,mx:"auto",alignItems:"flex-start",p:{base:4,lg:6},pt:{base:4,lg:4},maxW:"1800px",children:[(0,i.jsx)(s.E,{area:"overrideWarning",children:(0,i.jsx)(z,{})}),(0,i.jsx)(s.E,{area:"settings",alignSelf:"start",children:(0,i.jsx)(ep,{isLoading:!1})}),(0,i.jsx)(s.E,{area:"editor",h:"100%",children:(0,i.jsx)(_.N,{showTopbar:!0,showAddBreaks:!0,enableModes:!0,containerProps:{minH:{base:"40vh",lg:"60vh"},fontSize:"16px"},showContentTip:!0})}),(0,i.jsx)(s.E,{area:"tips",children:(0,i.jsx)(I,{})})]}),(0,i.jsx)(o.az,{height:"20vh"})," ",(0,i.jsx)(eg.I,{cta:n?(0,i.jsx)(x.I,{children:(0,i.jsx)(d.x6,{id:"ziAjHi"})}):(0,i.jsx)(ef.Q,{arrowIcon:v,onClick:()=>t("theme")})})]}):"theme"===e?(0,i.jsx)(h.e,{}):null]})})});ej.displayName="AIGeneratorPage"},52509:(e,t,n)=>{"use strict";n.d(t,{D:()=>et});var i=n(31085),r=n(32202),s=n(35687),o=n(80532),l=n(61778),a=n(3706),d=n(2600),c=n(2219),u=n(80853),h=n(31223),x=n(3040),p=n(24221),m=n(52177),f=n(12327),g=n(14041),j=n(50877),v=n(33916),b=n(15355),y=n(71197),C=n(65998),w=n(48911),E=n(64225),k=n(10458),S=n(39848),I=n(3968),T=n(12664),A=n(31242),_=n(30358);let R=()=>{let[e]=(0,j.bME)();return(0,g.useCallback)(async t=>{var n;let{settings:i}=t,r=await e({variables:{input:{workspaceId:(0,_.gx)(),generationType:j.xbH.UploadPptV2,input:{prompt:i.filename,format:j.JW1.Deck,settings:i}}}});if(r.errors)throw Error("Got the following graphql errors:\n\n"+r.errors.map(e=>e.message).join("\n\n"));return null===(n=r.data)||void 0===n?void 0:n.createDocGeneration},[e])},O=()=>{let e=R(),{push:t}=(0,A.useRouter)(),[n,i]=(0,g.useState)(!1),[r,s]=(0,g.useState)(null);return{continueToPptImport:(0,g.useCallback)(async n=>{if(i(!0),!n.filename||!n.fileUrl||!n.slideHtml)throw Error("Unable to continue, no fileUrl from ImportedFile");let r={htmlUrl:n.htmlUrl,filename:n.filename,fileUrl:n.fileUrl,numSlides:n.slideHtml.length};try{let n=await e({settings:r});if(!n)throw Error("Unable to create doc generation");t("/create/import-ppt/".concat(n.id))}catch(e){s(e.message),i(!1)}},[e,t]),isLoading:n,error:r}};var D=n(60434),z=n(32033),P=n(20869),L=n(14671),N=n(78416),M=n(2241),V=n(73893),G=n(11070),F=n(14090),W=n(93129);let U=e=>{let{children:t}=e;return(0,i.jsx)(M.G_,{clientId:V.$.GOOGLE_DRIVE_IMPORT_CLIENT_ID,children:(0,i.jsxs)(G.dJ,{children:[(0,i.jsx)(W.V,{}),(0,i.jsx)(F.I,{title:(0,i.jsx)(m.x6,{id:"eumYBf"}),subtitle:(0,i.jsx)(m.x6,{id:"7aFH7x"}),icon:(0,i.jsx)(p.g,{icon:x.$MS}),iconBoxProps:{color:"purple.300"},children:(0,i.jsx)(h.m,{maxW:"4xl",display:"flex",flexDirection:"column",alignItems:"center",children:t})})]})})};var B=n(62313),H=n(18201),q=n(9021),K=n(20501),J=n(95986);let Y=e=>{let{importedFile:t,handleDelete:n}=e;return(0,i.jsx)(d.T,{spacing:4,align:"stretch",w:"100%",children:(0,i.jsxs)(B.z,{justifyContent:"center",bg:"white",py:3,px:4,spacing:4,borderRadius:"md",shadow:"sm",children:[(0,i.jsx)(o.az,{color:"green.500",fontSize:"lg",children:(0,i.jsx)(p.g,{icon:x.SGM})}),(0,i.jsx)(l.E,{noOfLines:1,children:null==t?void 0:t.filename}),(0,i.jsx)(H.h,{}),(0,i.jsx)(J.Tz,{placement:"top",label:(0,i.jsx)(m.x6,{id:"cILfnJ"}),children:(0,i.jsx)(q.K,{onClick:n,variant:"ghost",colorScheme:"red","aria-label":f.Ru._({id:"cILfnJ"}),icon:(0,i.jsx)(p.g,{icon:K.sjs})})})]})})};var X=n(12917),$=n(84142);let Z=(0,g.memo)(e=>{let{value:t,onSelect:n}=e;return(0,i.jsxs)(s.B,{direction:"row",mb:4,w:"100%",justifyContent:"center",children:[(0,i.jsx)(o.az,{flex:"1",children:(0,i.jsx)($.Ik,{label:(0,i.jsx)(m.x6,{id:"hEgO4f"}),icon:X.p7g,selectedIcon:x.p7g,onClick:()=>{n("text")},isSelected:"text"===t,description:(0,i.jsx)(m.x6,{id:"9GItSL",components:{0:(0,i.jsx)("strong",{})}})})}),(0,i.jsx)(o.az,{flex:"1",children:(0,i.jsx)($.Ik,{label:(0,i.jsx)(m.x6,{id:"Mm48EF"}),icon:X.uts,selectedIcon:x.uts,onClick:()=>{n("vision")},description:(0,i.jsx)(m.x6,{id:"ApxVH5",components:{0:(0,i.jsx)("strong",{})}}),isSelected:"vision"===t,badge:"Beta"})})]})});Z.displayName="PptImportTypeSelector";var Q=n(50080);let ee={GoogleDocs:j.xbH.ImportGoogleDoc,GoogleSlides:j.xbH.ImportGoogleSlides,PptxUpload:j.xbH.UploadPpt,DocxUpload:j.xbH.UploadWordFile,WebpageUrl:j.xbH.ImportWebpage,PdfUpload:j.xbH.ImportPdf},et=(0,g.memo)(()=>{let e=(0,E.jL)(),t=(0,k.st)(),n=(0,r.d)(),[A,_]=(0,g.useState)(!1),{guessSettings:R,isLoading:M}=(0,z.D)({ref:"createImport"}),{goToScreen:V}=(0,Q._2)(),G=(0,C.u)("pptImportV2"),[F,W]=(0,g.useState)("freeform"),B=(0,E.GV)(P.Rz),H=(null==B?void 0:B.source)==="PptxUpload"||(null==B?void 0:B.source)==="GoogleSlides",{format:q,styleTemplate:K}=(0,D.pm)(),[J,X]=(0,g.useState)("text"),et=(0,g.useCallback)(n=>{let{source:i,src:r}=n;e((0,P.Js)(n)),"GoogleSlides"===i||"PptxUpload"===i?W("structured"):W("freeform"),r&&(null==t||t.track(k.VV.DOC_IMPORTED,{source:i,src:r,with_ai:!0,latency:n.latency}))},[e,t]),en=(0,y.tO)(void 0,"pptImportV2",k.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_PPT_IMPORT_V2),{continueToPptImport:ei,isLoading:er}=O(),es=M||A||er,eo=(0,g.useCallback)(async()=>{if(!B)return;_(!0);let e=ee[B.source];if(H){if("text"===J){try{if(!B.slideHtml)throw Error("No slideHtml returned from getPptHtml");let t=B.slideHtml.map(I.V).map(e=>(0,S.Yj)(e,void 0,L.d)).join("\n\n---\n\n"),{cardDimensions:n,defaultContentWidth:i}=T.S9.deck_traditional.docSettings;await R(e,{format:q,content:t,settings:{textMode:"generate",editorMode:"structured",styleTemplate:"deck_traditional",cardDimensions:n,cardWidth:i}})}catch(e){console.error("[caught] getPptHtml error: ".concat(e)),n({status:"error",title:f.Ru._({id:"SlfejT"}),description:f.Ru._({id:"lIW942"}),duration:5e3,isClosable:!0})}finally{_(!1)}return}if(!en())return;H&&G&&"vision"===J&&await ei(B);return}let t=B.markdown;if(!t){let e=(0,I.V)(B.html);t=(0,S.Yj)(e,void 0,L.d)}let i="GoogleDocs"===B.source||"DocxUpload"===B.source||"PdfUpload"===B.source||"WebpageUrl"===B.source,r={format:q,content:t||"",settings:{textMode:i&&"document"!==q?"condense":i||"document"!==q?G&&H&&"text"===J?"generate":"preserve":"generate",editorMode:F,styleTemplate:K}};await R(e,r)},[B,H,q,K,G,J,F,R,en,n,ei]),el=(0,g.useCallback)(()=>{e((0,P.Js)(void 0))},[e]);return(0,i.jsxs)(U,{children:[!B&&(0,i.jsxs)(s.B,{direction:"column",spacing:{base:6,md:8},align:"center",w:"100%",children:[(0,i.jsx)(w.J,{onImportComplete:et}),(0,i.jsx)(o.az,{w:"100%",children:(0,i.jsx)(l.E,{textAlign:"center",color:"blackAlpha.800",children:(0,i.jsx)(m.x6,{id:"HmmZUO",components:{0:(0,i.jsx)(a.N,{textDecoration:"underline",fontWeight:"600",href:"/create/paste?ref=import",onClick:e=>{e.preventDefault(),V("createPaste",{ref:"createImport"})}})}})})})]}),B&&(0,i.jsxs)(d.T,{spacing:{base:8,md:10},maxW:"100%",w:"700px",alignSelf:"center",children:[(0,i.jsx)(Y,{importedFile:B,handleDelete:el}),(0,i.jsxs)(d.T,{spacing:4,w:"100%",children:[!H&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.T,{spacing:4,w:"100%",py:2,children:[(0,i.jsx)(c.D,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,i.jsx)(m.x6,{id:"SjATqV"})}),(0,i.jsx)($.Qz,{})]}),(0,i.jsx)(o.az,{width:"100%",children:(0,i.jsx)(u.$,{size:"lg",variant:"solid",rightIcon:(0,i.jsx)(p.g,{icon:x.dmS}),onClick:eo,isLoading:es,loadingText:f.Ru._({id:"qgUvjm"}),w:"100%",children:(0,i.jsx)(m.x6,{id:"xGVfLh"})})})]}),H&&(0,i.jsxs)(i.Fragment,{children:[G&&(0,i.jsxs)(d.T,{spacing:4,w:"100%",py:2,children:[(0,i.jsx)(c.D,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,i.jsx)(m.x6,{id:"ETAPks"})}),(0,i.jsx)(Z,{value:J,onSelect:X})]}),"text"===J&&(0,i.jsxs)(d.T,{spacing:4,w:"100%",py:2,children:[(0,i.jsx)(c.D,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,i.jsx)(m.x6,{id:"SjATqV"})}),(0,i.jsx)($.Qz,{})]}),(0,i.jsxs)(d.T,{spacing:2,width:"100%",children:[(0,i.jsxs)(u.$,{size:"lg",variant:"solid",rightIcon:(0,i.jsx)(p.g,{icon:x.dmS}),onClick:eo,isLoading:es,loadingText:f.Ru._({id:"qgUvjm"}),w:"100%",children:[(0,i.jsx)(m.x6,{id:"xGVfLh"}),"vision"===J&&(0,i.jsx)(b.G,{type:"pptImportV2"})]}),"vision"===J&&(0,i.jsx)(v.f,{modalId:"ai-credits-modal-generate-v2",variant:"ghost",justify:"flex-end",segmentEvent:k.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2,alignSelf:"center"})]})]})]})]}),(0,i.jsx)(h.m,{maxW:"2xl",pb:"10vw",mt:16,children:(0,i.jsx)(N.r,{generationTypes:[j.xbH.ImportPdf,j.xbH.ImportWebpage,j.xbH.ImportGoogleDoc,j.xbH.ImportGoogleSlides,j.xbH.UploadPpt,j.xbH.UploadPptV2,j.xbH.UploadWordFile]})})]})});et.displayName="CreateImportPage"},76406:(e,t,n)=>{"use strict";n.d(t,{m:()=>R});var i=n(31085),r=n(31223),s=n(35687),o=n(46882),l=n(76003),a=n(3706),d=n(20501),c=n(3040),u=n(24221),h=n(52177),x=n(31242),p=n(14041),m=n(93081),f=n(11070),g=n(65998),j=n(64130),v=n(64225),b=n(10458);let y={src:"/_next/static/media/Thumbnail-generate.8e2e4605.svg"},C={src:"/_next/static/media/Thumbnail-paste.fdba31f6.svg"},w={src:"/_next/static/media/Thumbnail-transform.76b5e76e.svg"};var E=n(44507),k=n(20869),S=n(78416),I=n(14090),T=n(50080),A=n(93129);let _=e=>{let{createGenerateV2Enabled:t}=e,n=g.of.get("importUrl");return{paste:{label:(0,i.jsx)(h.x6,{id:"Q4xH1Z"}),description:(0,i.jsx)(h.x6,{id:"MxbdK6"}),icon:c.bLf,colorScheme:"pink",imageUrl:C.src,transform:"rotate(-1.5deg) scale(0.84)",screen:"createPaste"},generate:{label:(0,i.jsx)(h.x6,{id:"ziAjHi"}),description:(0,i.jsx)(h.x6,{id:"anOFr5"}),icon:c.p7g,colorScheme:"trueblue",imageUrl:y.src,isPopular:!0,screen:t?"createGenerate":"legacyGuidedMode"},import:{label:n?(0,i.jsx)(h.x6,{id:"krF+YI"}):(0,i.jsx)(h.x6,{id:"2xoyqj"}),description:n?(0,i.jsx)(h.x6,{id:"fG2B2z"}):(0,i.jsx)(h.x6,{id:"5c5WYH"}),icon:c.$MS,colorScheme:"purple",imageUrl:w.src,transform:"rotate(1.5deg) scale(0.84)",screen:"createImport"}}},R=(0,p.memo)(()=>{let e=(0,v.jL)(),t=(0,j.fW)(),{goToScreen:n,navEnabled:c}=(0,T._2)(),p=(0,g.u)("createGenerateV2"),y=(0,b.st)(),{query:C}=(0,x.useRouter)(),w=C.channelId;return(0,i.jsxs)(f.dJ,{children:[c&&(0,i.jsx)(A.V,{}),(0,i.jsx)(I.I,{title:(0,i.jsx)(h.x6,{id:"1zuBj5"}),subtitle:(0,i.jsx)(h.x6,{id:"h0sjMM"}),children:(0,i.jsx)(r.m,{maxW:"4xl",children:(0,i.jsx)(s.B,{spacing:12,align:"center",children:(0,i.jsx)(o.x,{gap:[4,4,2],gridTemplateAreas:{base:'"generate" "paste" "import"',md:'"paste generate import"'},gridTemplateColumns:{base:"1fr",md:"1fr 1fr 1fr"},width:"100%",children:Object.entries(_({createGenerateV2Enabled:p})).map(r=>{let[s,{label:o,description:c,isPopular:x,colorScheme:p,imageUrl:f,transform:g,screen:j}]=r;return(0,i.jsx)(l.E,{area:s,children:(0,i.jsx)(m.V,{as:a.N,label:o,description:c,isPopular:x,colorScheme:p,imageUrl:f,transform:g,onClick:t=>{null==y||y.track(b.VV.AI_DOC_CREATION_GENERATION_TYPE_CLICKED,{generationType:s,device:(0,E.ZI)()}),e((0,k.s)()),t.preventDefault(),t.stopPropagation(),n(j,{ref:"createWithAI",channelId:w})},ctaIcon:(0,i.jsx)(u.g,{icon:t?d.CeG:d.dmS}),ctaLabel:(0,i.jsx)(h.x6,{id:"xGVfLh"})})},s)})})})})}),(0,i.jsx)(r.m,{maxW:"2xl",pb:"10vw",children:(0,i.jsx)(S.r,{})})]})});R.displayName="CreatePage"},55729:(e,t,n)=>{"use strict";n.d(t,{b:()=>L});var i=n(31085),r=n(31223),s=n(2600),o=n(80532),l=n(27559),a=n(2219),d=n(35789),c=n(80853),u=n(61778),h=n(3706),x=n(20501),p=n(3040),m=n(24221),f=n(95986),g=n(52177),j=n(12327),v=n(14041),b=n(11070),y=n(37908),C=n(74109),w=n(50877),E=n(64130),k=n(64225),S=n(66176),I=n(60434),T=n(32033),A=n(20869),_=n(14452),R=n(820),O=n(84142),D=n(14090),z=n(50080),P=n(93129);let L=(0,v.memo)(()=>{let{guessSettings:e,isLoading:t}=(0,T.D)({ref:"createPaste"}),n=(0,k.GV)(A.qT),[L,N]=(0,v.useState)(!1),{format:M,styleTemplate:V,setStyleTemplate:G}=(0,I.pm)(),{goToScreen:F}=(0,z._2)(),W=(0,v.useCallback)(async()=>{let t=(0,_.QA)(n),i=(0,_.rd)(n),r=(0,C.WW)(n);await e(w.xbH.PasteText,{format:M,content:n,settings:{textMode:r>=1e3?"document"===M?"preserve":"condense":"generate",editorMode:i>2&&t>5?"structured":"freeform",styleTemplate:V}})},[n,V,e,M]),U=(0,E.fW)()?x.CeG:x.dmS;return(0,i.jsx)(y.pY,{children:(0,i.jsxs)(b.dJ,{children:[(0,i.jsx)(P.V,{}),(0,i.jsx)(D.I,{title:(0,i.jsx)(g.x6,{id:"RG+JLG"}),subtitle:(0,i.jsx)(g.x6,{id:"v2ydVh"}),icon:(0,i.jsx)(m.g,{icon:p.vZS}),iconBoxProps:{color:"salmon.300"},children:(0,i.jsx)(r.m,{maxW:"2xl",children:(0,i.jsxs)(s.T,{spacing:4,w:"100%",children:[(0,i.jsx)(s.T,{spacing:3,align:"stretch",w:"100%",children:(0,i.jsx)(S.N,{containerProps:{minH:{base:"270px",sm:"300px",md:"50vh"},maxH:"50vh",overflow:"auto",fontSize:"16px"},hideFooter:!0,onEditorUpdate:e=>{let{editor:t}=e;N(!t.isEmpty)}})}),(0,i.jsx)(o.az,{w:"100%",children:(0,i.jsx)(l.S,{in:L,children:(0,i.jsxs)(s.T,{py:2,w:"100%",spacing:0,children:[(0,i.jsx)(a.D,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,pb:4,w:"100%",children:(0,i.jsx)(g.x6,{id:"SjATqV"})}),(0,i.jsx)(d.o,{children:(0,i.jsx)(O.Qz,{wrap:!0})}),V&&(0,i.jsx)(o.az,{w:"100%",children:(0,i.jsx)(R.j,{docFormatType:M,onSelectStyleTemplate:G,selectedStyleTemplate:V})})]})})}),(0,i.jsx)(f.Tz,{label:n?"":(0,i.jsx)(g.x6,{id:"9IxKHJ"}),isDisabled:!!n,placement:"top",children:(0,i.jsx)(o.az,{width:"100%",children:(0,i.jsx)(c.$,{size:"lg",minW:"16em",width:"100%",onClick:W,variant:"solid",rightIcon:(0,i.jsx)(m.g,{icon:U}),isLoading:t,isDisabled:!n,loadingText:j.Ru._({id:"qgUvjm"}),children:(0,i.jsx)(g.x6,{id:"xGVfLh"})})})}),(0,i.jsx)(o.az,{w:"100%",children:(0,i.jsx)(l.S,{in:!L,children:(0,i.jsx)(u.E,{textAlign:"center",color:"blackAlpha.800",children:(0,i.jsx)(g.x6,{id:"LVQnRo",components:{0:(0,i.jsx)(h.N,{onClick:e=>{e.preventDefault(),F("createImport",{ref:"createPaste"})},textDecoration:"underline",fontWeight:"600"})}})})})})]})})})]})})});L.displayName="CreatePastePage"},14090:(e,t,n)=>{"use strict";n.d(t,{I:()=>a});var i=n(31085),r=n(35687),s=n(2219),o=n(80532),l=n(25420);let a=e=>{let{title:t,subtitle:n,icon:a,iconBoxProps:d,children:c}=e;return(0,i.jsxs)(r.B,{alignContent:"center",position:"relative",zIndex:"0",spacing:0,py:{base:"9",md:"8vh"},w:"100%",children:[(0,i.jsxs)(r.B,{spacing:{base:2,md:4},mb:{base:5,md:8},w:"100%",children:[null!==t&&(0,i.jsxs)(s.D,{textAlign:"center",color:"gray.800",fontWeight:"600",fontFamily:"p22-mackinac-pro",w:"100%",size:{base:"xl",md:"2xl"},px:4,children:[a&&(0,i.jsx)(o.az,{display:"inline",me:2,...d,children:a}),t]}),n&&(0,i.jsx)(s.D,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:n})]}),(0,i.jsx)(l.s,{w:"100%",justifyContent:"center",children:c})]})}},14643:(e,t,n)=>{"use strict";n.d(t,{y:()=>j});var i=n(31085),r=n(25420),s=n(14041),o=n(17723),l=n(46108),a=n.n(l),d=n(31242),c=n(20869),u=n(50877),h=n(64225),x=n(50080);let p=e=>{let{id:t}=e,n=(0,d.useRouter)(),i=(0,h.jL)(),r=(0,h.CU)(),{goToScreen:o}=(0,x._2)(),[l,a]=(0,s.useState)(!0),[p]=(0,u.ezx)({variables:{id:t}});return(0,s.useEffect)(()=>{n&&r&&p&&p().then(e=>{let{data:t}=e;if(null==t?void 0:t.docGeneration)return t.docGeneration;throw Error("Could not load docGeneration")}).then(e=>{i((0,c.Jv)(m(e))),a(!1)}).catch(()=>{o("createWithAI")})},[i,p,o,n,r]),{isLoading:l}},m=e=>({...e,docGenerateInputs:e.docGenerateInputs.map(f),draftInput:e.draftInput?f(e.draftInput):void 0}),f=e=>{let t=a()(e);return t.settings.textMode||(t.settings.preserveText?t.settings.textMode="preserve":t.settings.textMode="generate",delete t.settings.preserveText),t};var g=n(11070);let j=(0,s.memo)(e=>{let{id:t,children:n}=e,{isLoading:s}=p({id:t});return s?(0,i.jsx)(r.s,{...g.vP,w:"100%",h:"100%",flex:1,alignSelf:"center",children:(0,i.jsx)(o.Yh,{})}):(0,i.jsx)(i.Fragment,{children:n})});j.displayName="LoadDocGenerationPage"},78416:(e,t,n)=>{"use strict";n.d(t,{r:()=>M});var i=n(31085),r=n(2600),s=n(2219),o=n(35789),l=n(62230),a=n(80853),d=n(20501),c=n(24221),u=n(52177),h=n(14041),x=n(50877),p=n(30358),m=n(35687),f=n(80532),g=n(61778),j=n(27670),v=n(18201),b=n(3706),y=n(62313),C=n(12327),w=n(98087),E=n.n(w),k=n(31242),S=n(64130),I=n(14979),T=n(44507),A=n(92405),_=n(50080);let R="trueblue",O={[x.xbH.Generate]:(0,i.jsx)(u.x6,{id:"ziAjHi"}),[x.xbH.PasteText]:(0,i.jsx)(u.x6,{id:"yK5KbG"}),[x.xbH.ImportGoogleDoc]:(0,i.jsx)(u.x6,{id:"yYGwlq"}),[x.xbH.ImportGoogleSlides]:(0,i.jsx)(u.x6,{id:"z+pP4d"}),[x.xbH.ImportPdf]:(0,i.jsx)(u.x6,{id:"+HOkuz"}),[x.xbH.ImportWebpage]:(0,i.jsx)(u.x6,{id:"6gz43w"}),[x.xbH.UploadWordFile]:(0,i.jsx)(u.x6,{id:"yYGwlq"}),[x.xbH.UploadPpt]:(0,i.jsx)(u.x6,{id:"z+pP4d"}),[x.xbH.UploadPptV2]:(0,i.jsx)(u.x6,{id:"z+pP4d"})},D=e=>{let{count:t}=e;return(0,i.jsx)(i.Fragment,{children:[...Array(t)].map((e,t)=>(0,i.jsx)(N,{children:(0,i.jsxs)(m.B,{spacing:1,w:"100%",children:[(0,i.jsx)(l.E,{height:"1rem",borderRadius:"sm",w:"100%"}),(0,i.jsx)(f.az,{w:"12rem",children:(0,i.jsx)(l.E,{height:"0.875rem",borderRadius:"sm",w:"100%"})})]})},t))})},z=e=>{for(let t of e){let e=t.replace(/<[^>]*>/g,"");if(0!==e.trim().length&&"---"!==e.trim())return e.trim().replace(/^[#]{1,3}/,"")}return C.Ru._({id:"wja8aL"})},P=e=>{let{prompt:t,content:n,generationType:i}=e,r=z(n.split("\n"));return i===x.xbH.Generate&&t?t:i===x.xbH.UploadPptV2&&t?null!=t?t:"imported.pptx":r.slice(0,100)},L=e=>{var t,n,r,s,o,l;let{docGeneration:a}=e,p=(0,k.useRouter)(),m=(0,S.fW)(),{goToScreen:b}=(0,_._2)(),y={whitespace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},C=(null===(t=a.draftInput)||void 0===t?void 0:t.prompt)||(null===(r=a.docGenerateInputs)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.prompt),w=(null===(s=a.draftInput)||void 0===s?void 0:s.content)||(null===(l=a.docGenerateInputs)||void 0===l?void 0:null===(o=l[0])||void 0===o?void 0:o.content)||"",T=P({generationType:a.generationType,prompt:C,content:w}),D=(0,I.ak)(a.updatedTime),z=0===a.docGenerateInputs.length,L=(0,A.o0)(a,{ref:"createWithAI"}),M=(0,h.useCallback)(()=>{let{generationType:e}=a;if(e===x.xbH.Generate)b("createGenerate",{generateId:a.id,ref:"createWithAI"});else if(e===x.xbH.UploadPptV2){if(a.draftInput)p.push("/create/import-ppt/".concat(a.id));else{let e=E()(a.docGenerateInputs),t=null==e?void 0:e.docId;if(!t)throw Error("No generated docId for PPT import docGeneration.id=".concat(a.id));p.push("/docs/".concat(t))}}else b("promptEditor",{generateId:a.id,ref:"createWithAI"})},[a,b,p]);return(0,i.jsxs)(N,{href:L,onClick:M,children:[(0,i.jsxs)(f.az,{overflow:"hidden",maxW:"100%",children:[(0,i.jsx)(g.E,{...y,textAlign:"start",fontSize:{base:"sm",md:"md"},mb:[1,1.5],children:T}),(0,i.jsxs)(g.E,{...y,textAlign:"start",maxW:"100%",fontWeight:"400",fontSize:{base:"xs",md:"sm"},color:"gray.700",children:[O[a.generationType]," \xb7 ",D,z&&(0,i.jsxs)(i.Fragment,{children:[" \xb7 ",(0,i.jsx)(j.E,{colorScheme:"teal",children:(0,i.jsx)(u.x6,{id:"eneWvv"})})]})]})]}),(0,i.jsx)(v.h,{}),(0,i.jsx)(f.az,{fontSize:{base:"sm",md:"md"},color:"blackAlpha.400",_groupHover:{color:"".concat(R,".500")},children:(0,i.jsx)(c.g,{icon:m?d.Wzs:d.XkK})})]})},N=e=>{let{children:t,href:n,onClick:r,...s}=e;return(0,i.jsx)(a.$,{as:b.N,href:n||void 0,onClick:e=>{e.preventDefault(),null==r||r()},bg:"white",borderRadius:"lg",display:"flex",border:"1px solid",boxShadow:"sm",borderColor:"white",variant:"plain",fontSize:"lg",py:4,spacing:"3",role:"group",minH:{base:16,md:20},_hover:(0,T.Xb)()?{}:{color:"".concat(R,".600"),textDecoration:"none",boxShadow:"md"},...s,children:(0,i.jsx)(y.z,{spacing:"3",w:"100%",children:t})})},M=(0,h.memo)(e=>{var t;let{generationTypes:n}=e,m=(0,p.gx)(),[f,g]=(0,h.useState)(!1),{data:j,fetchMore:v,loading:b}=(0,x.vCR)({variables:{workspaceId:m,first:5,generationTypes:n}}),y=null==j?void 0:j.docGenerations.pageInfo,C=(0,h.useCallback)(()=>{(null==y?void 0:y.hasNextPage)&&(null==y?void 0:y.endCursor)&&(g(!0),v({variables:{after:null==y?void 0:y.endCursor}}).finally(()=>{g(!1)}))},[v,y]),w=(0,h.useMemo)(()=>{var e;return(null==j?void 0:null===(e=j.docGenerations)||void 0===e?void 0:e.edges.map(e=>e.node))||[]},[null==j?void 0:null===(t=j.docGenerations)||void 0===t?void 0:t.edges]);return(0,i.jsxs)(r.T,{align:"stretch",spacing:[2,3],children:[(0,i.jsx)(s.D,{fontSize:["lg","2xl"],mb:[2,3],textAlign:"center",fontWeight:"600",color:"gray.800",fontFamily:"p22-mackinac-pro",children:b?(0,i.jsx)(o.o,{children:(0,i.jsx)(l.E,{w:"50%",h:6})}):0===w.length?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(u.x6,{id:"yvKMb+"})}),(0,i.jsx)(r.T,{spacing:3,align:"stretch",children:b?(0,i.jsx)(D,{count:5}):(null==w?void 0:w.length)===0?(0,i.jsx)(i.Fragment,{}):w.map(e=>(0,i.jsx)(L,{docGeneration:e},e.id))}),f&&(0,i.jsx)(D,{count:5}),(null==y?void 0:y.hasNextPage)&&(0,i.jsx)(a.$,{leftIcon:(0,i.jsx)(c.g,{icon:d.QLR}),variant:"plain",boxShadow:"none",_hover:{bg:"white"},onClick:()=>C(),isLoading:f,children:(0,i.jsx)(u.x6,{id:"yQ2kGp"})})]})});M.displayName="RecentPrompts"},95312:(e,t,n)=>{"use strict";n.d(t,{u:()=>j});var i=n(31085),r=n(62313),s=n(26848),o=n(61778),l=n(80532),a=n(35687),d=n(2219),c=n(15672),u=n(70323),h=n(80853),x=n(20501),p=n(3040),m=n(24221),f=n(52177);n(14041);let g=e=>{let{label:t,shortcuts:n}=e;return(0,i.jsxs)(r.z,{children:[n.map((e,t)=>(0,i.jsx)(s.u,{padding:1,children:e},t)),(0,i.jsx)(o.E,{fontSize:"sm",fontWeight:"medium",whiteSpace:"nowrap",children:t})]})},j=e=>{let{onClose:t,showExitPresentMode:n=!0}=e;return(0,i.jsx)(l.az,{children:(0,i.jsxs)(a.B,{spacing:6,children:[(0,i.jsxs)(a.B,{spacing:1,children:[(0,i.jsxs)(r.z,{color:"gray.500",children:[(0,i.jsx)(m.g,{icon:x.Lhe})," ",(0,i.jsx)(d.D,{size:"xs",fontWeight:"normal",children:(0,i.jsx)(f.x6,{id:"h7MgpO"})})]}),(0,i.jsx)(d.D,{size:"md",children:(0,i.jsx)(f.x6,{id:"UodEcE"})})]}),(0,i.jsxs)(c.r,{spacing:3,columns:1,children:[(0,i.jsx)(g,{label:(0,i.jsx)(f.x6,{id:"9xCxY6"}),shortcuts:[(0,i.jsx)(m.g,{icon:p.CeG},"left"),(0,i.jsx)(m.g,{icon:p.dmS},"right")]}),(0,i.jsx)(g,{label:(0,i.jsx)(f.x6,{id:"K0Oq/D"}),shortcuts:["R"]}),(0,i.jsx)(u.c,{borderColor:"gray.300"}),(0,i.jsx)(g,{label:(0,i.jsx)(f.x6,{id:"CgmvBu"}),shortcuts:["S"]}),(0,i.jsx)(g,{label:(0,i.jsx)(f.x6,{id:"/5i2oX"}),shortcuts:[(0,i.jsx)(m.g,{icon:p.INu},"up"),(0,i.jsx)(m.g,{icon:p.B0C},"down")]}),(0,i.jsx)(g,{label:(0,i.jsx)(f.x6,{id:"rEj/lx"}),shortcuts:["Enter"]}),(0,i.jsx)(u.c,{borderColor:"gray.300"}),n&&(0,i.jsx)(g,{label:(0,i.jsx)(f.x6,{id:"IkakN2"}),shortcuts:["Esc"]})]}),(0,i.jsx)(h.$,{size:"sm",variant:"solid",onClick:t,children:(0,i.jsx)(f.x6,{id:"76gPWk"})})]})},"coach-bar")}},31504:(e,t,n)=>{"use strict";n.d(t,{z:()=>v});var i=n(31085),r=n(25420),s=n(80532),o=n(12327),l=n(14041),a=n(94445),d=n(64225),c=n(98100),u=n(5893),h=n(62407),x=n(38888),p=n(63955);let m={fontFamily:'"Inter", sans-serif !important',fontWeight:"500",lineHeight:"1.5 !important",textTransform:"none",letterSpacing:"normal !important",textAlign:"start !important",margin:"0 !important",color:"gray.800 !important",background:"none !important",border:"0 none !important",padding:"0 !important",content:'""'},f={".block-paragraph,.block-heading,.block-title,.block-todo,.block-numbered,.block-bullet":{...m,margin:0,my:"0.75em",":first-child":{mt:"0px !important"},":last-child":{mb:"0px !important"}},".block-paragraph":{fontSize:"1em"},".block-heading,.block-title":{fontWeight:"bold",lineHeight:{fontSize:"1.25"},'.heading[level="1"]':{fontSize:"1.5em"},'.heading[level="2"]':{fontSize:"1.25em"},'.heading[level="3"]':{fontSize:"1.125em"},'.heading[level="4"]':{fontSize:"1em"}},".block-title":{".title":{fontSize:"1.75em"},'.title[level="1"]':{fontSize:"1.75em"},'.title[level="2"]':{fontSize:"2em"},'.title[level="3"]':{fontSize:"2.25em"}},a:{...m,color:"var(--chakra-colors-blue-500) !important","&:hover":{textDecoration:"underline"},'&[href=""]':{textDecorationStyle:"dashed"},cursor:"pointer"},".mention":{bgColor:"trueblue.50",whiteSpace:"break-spaces"},code:{backgroundColor:"var(--chakra-colors-trueblue-50)",color:"var(--body-color)",...p.wd}},g={".block-paragraph,.block-heading,.block-title,.block-todo,.block-numbered,.block-bullet":{...m,margin:0,my:"0.75em",":first-child":{mt:"0px !important"},":last-child":{mb:"0px !important"},color:"white"},code:{backgroundColor:"var(--chakra-colors-whiteAlpha-100)",color:"var(--chakra-colors-gray-200)",...p.wd},".block-todo label.chakra-checkbox .chakra-checkbox__control[data-checked]":{backgroundColor:"var(--chakra-colors-whiteAlpha-100)",color:"var(--chakra-colors-white)"}},j=e=>{let{isDark:t=!1}=e;return{".ProseMirror":{height:"100%"},...f,...x.X0,"--box-border-radius":"var(--chakra-radii-sm)","--link-color":t?"var(--chakra-colors-trueblue-100)":"var(--chakra-colors-trueblue-500)",".block-todo label.chakra-checkbox .chakra-checkbox__control:not([data-checked])":{borderColor:"var(--chakra-colors-chakra-border-color)"},"--body-color-inverted":t?"black":"white",...t?g:{},".is-selecting-node":{"[data-selection-ring]":{_before:{content:'""',position:"absolute",inset:0,borderRadius:"inherit",outline:"2px solid",outlineColor:t?"trueblue.100":"trueblue.300",pointerEvents:"none",zIndex:1}},'[data-selection-ring="padded"]':{_before:{outlineOffset:"0.25em"}}}}},v=(0,l.memo)(e=>{var t;let{isEditable:n,notesSx:x,canShowEditHint:p=!1,isDark:m=!1}=e,[f,g]=(0,l.useState)(null),{destroyEditor:v,mountEditor:b}=(0,d.GV)(a.rd),y=(0,l.useRef)(!1);(0,l.useEffect)(()=>(b&&g(b()),()=>{null==v||v(),g(null)}),[v,b]),(0,l.useEffect)(()=>{f&&n&&!y.current&&(f.commands.focus("end"),y.current=!0)},[n,f]),(0,l.useEffect)(()=>{if(f){if(f.shouldUseLiteMenus=!0,n&&!f.isEditable){f.setEditable(!0);return}if(!n&&f.isEditable){f.setEditable(!1);return}}},[n,f]);let C=n?o.Ru._({id:"fnNtuR"}):"Double click to edit",w=p&&(null===(t=null==f?void 0:f.isEmpty)||void 0===t||t),E=j({isDark:m});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.s,{className:"card-notes-editor",overflowY:"auto",border:"1px solid",borderColor:m?"gray.700":"gray.200",borderRadius:"md",flex:1,p:4,wordBreak:"break-word",sx:{".block.block-paragraph.first-block.last-block.is-empty::before":{...h.sx,content:'"'.concat(C,'"')},...E,...x,_before:w?{...h.sx,top:4,left:4,height:"auto",width:"auto",content:'"'.concat(o.Ru._({id:"CvH5f/"}),'"')}:{}},pos:"relative",children:(0,i.jsx)(r.s,{flex:1,flexDirection:"column",children:f&&(0,i.jsx)(u.$,{editor:f,className:"highlight-mask",style:{height:"100%"}})})}),f&&n&&(0,i.jsx)(s.az,{children:(0,i.jsx)(c.Ht,{editor:f,appendToSelector:"[data-card-notes-bubble-menu-target]"})})]})});v.displayName="CardNotesEditor"},3367:(e,t,n)=>{"use strict";n.d(t,{JW:()=>k,Lh:()=>_,SQ:()=>S});var i=n(31085),r=n(61778),s=n(40173),o=n(80532),l=n(2219),a=n(46882),d=n(76003),c=n(30046),u=n(9021),h=n(3040),x=n(24221),p=n(52177),m=n(12327),f=n(12567),g=n(14041),j=n(6657),v=n(73524),b=n(64225),y=n(36661),C=n(41510),w=n(73059);let E=(0,f.Ay)("mod+Escape"),k=new Set(["h","j","k","l","s","PageUp","PageDown","ArrowRight","ArrowLeft","ArrowDown","ArrowUp","Enter","Escape"]),S=e=>{let{enabled:t,setActiveKey:n}=e,{editor:i}=(0,y.m)(),{editCardInPresentMode:r}=(0,C.V)({editor:i}),s=(0,b.GV)(v.AO),{handlePresentNavigationEvent:o,spotlightingByBlock:l}=(0,w.e)();return(0,g.useEffect)(function(){if(t)return j.WC.on("keydown","NAVIGATION_CONTROLS",e=>{var t,i;let l=e.target;if((null==l?void 0:null===(t=l.closest)||void 0===t?void 0:t.call(l,"[data-gamma-child-tiptap-editor]"))||(null==l?void 0:null===(i=l.closest)||void 0===i?void 0:i.call(l,"input"))||e.metaKey||s)return!1;let a=e.key;if(k.has(a)&&("s"!==a&&(n(e.key),setTimeout(()=>{n(null)},100)),e.preventDefault())," "===a&&e.shiftKey)return o({eventType:"arrowLeft",eventKey:a});switch(e.key){case"e":return r(),!0;case"s":return o({eventType:"toggleSpotlight",eventKey:a});case" ":case"l":case"ArrowRight":return o({eventType:"arrowRight",eventKey:a});case"h":case"ArrowLeft":return o({eventType:"arrowLeft",eventKey:a});case"j":case"ArrowDown":case"PageDown":return o({eventType:"arrowDown",eventKey:a});case"k":case"ArrowUp":case"PageUp":return o({eventType:"arrowUp",eventKey:a});case"r":return o({eventType:"restart",eventKey:a});case"Escape":if(E(e))return!1;return o({eventType:"cancelCurrentAction",eventKey:a});case"Enter":return o({eventType:"toggleExpanded",eventKey:a});default:return!1}})},[r,t,o,s,n]),l},I=e=>{let t=new KeyboardEvent("keydown",{key:e});n.g.dispatchEvent(t)},T={ArrowUp:{icon:h.INu,label:(0,i.jsx)(p.x6,{id:"VbggDE"}),ariaLabel:()=>m.Ru._({id:"VbggDE"}),shortcuts:["","K"],key:"ArrowUp",onClick:()=>{I("ArrowUp")},gridPos:[1,2]},ArrowLeft:{icon:h.CeG,label:(0,i.jsx)(p.x6,{id:"4jciC3"}),ariaLabel:()=>m.Ru._({id:"4jciC3"}),shortcuts:["","H"],key:"ArrowLeft",onClick:()=>{I("ArrowLeft")},gridPos:[2,1]},ArrowDown:{icon:h.B0C,label:(0,i.jsx)(p.x6,{id:"e3GOIZ"}),ariaLabel:()=>m.Ru._({id:"e3GOIZ"}),shortcuts:["","J"],key:"ArrowDown",onClick:()=>{I("ArrowDown")},gridPos:[2,2]},ArrowRight:{icon:h.dmS,label:(0,i.jsx)(p.x6,{id:"ZjQRVw"}),ariaLabel:()=>m.Ru._({id:"ZjQRVw"}),shortcuts:["","L"],key:"ArrowRight",onClick:()=>{I("ArrowRight")},gridPos:[2,3]},Spotlight:{icon:h.Jq7,label:(0,i.jsx)(p.x6,{id:"Xon9jp"}),ariaLabel:()=>m.Ru._({id:"Xon9jp"}),shortcuts:["S"],key:"S",onClick:()=>{I("s")},gridPos:[1,3]}},A=e=>{let{shortcuts:t}=e;return(0,i.jsx)(r.E,{as:"span",color:"gray.400",ml:2,children:t.map((e,n)=>(0,i.jsxs)(g.Fragment,{children:[e,n===t.length-1?null:(0,i.jsx)(r.E,{fontSize:"11px",as:"span",color:"gray.500",mx:1,children:"or"})]},e))})},_=e=>{let{activeKey:t,spotlightingByBlock:n}=e;return(0,i.jsx)(s.Z,{children:(0,i.jsxs)(o.az,{position:"absolute",bottom:4,right:6,zIndex:"sticky",children:[(0,i.jsx)(l.D,{children:(0,i.jsx)(p.x6,{id:"wja8aL"})}),(0,i.jsx)(a.x,{gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(2, 1fr)",children:Object.values(T).map(e=>{let{gridPos:s,icon:o,label:l,ariaLabel:a,shortcuts:h,key:p,onClick:m}=e;return(0,i.jsx)(d.E,{gridColumn:s[1],gridRow:s[0],children:(0,i.jsx)(c.m,{hasArrow:!0,placement:"top",label:(0,i.jsxs)(r.E,{whiteSpace:"nowrap",children:[l,(0,i.jsx)(A,{shortcuts:h})]}),children:(0,i.jsx)(u.K,{m:1,shadow:"base",size:"md",variant:"S"==p&&n?"solid":"plain",isActive:t===p||"S"===p&&n,onClick:m,onMouseDown:e=>e.preventDefault(),"aria-label":a(),icon:(0,i.jsx)(x.g,{icon:o})})})},p)})})]})})}},41510:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});var i=n(14041),r=n(64225),s=n(5933);let o=e=>{let{editor:t}=e,n=(0,r.jL)(),o=(0,r.CU)();return{editCardInPresentMode:(0,i.useCallback)(()=>{(0,s.Ik)(o.getState())&&(n((0,s._b)({isEditingInSlideView:!0})),n((0,s.mF)({attached:!1})),n((0,s.tB)()),null==t||t.commands.turnOffSpotlight())},[t,n,o])}}},73059:(e,t,n)=>{"use strict";n.d(t,{e:()=>m});var i=n(14041),r=n(5159),s=n(64225),o=n(80352),l=n(10458),a=n(51183),d=n(43167),c=n(86047),u=n(46896),h=n(5933),x=n(36661);let p=function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=(0,o.H1)("editor"),r=i.scroller;if(!r)return;e.commands.turnOffSpotlight();let s=r.scrollHeight-r.offsetHeight;if("down"===t){if(!(i.isAtBottom(90)&&n&&e.commands.spotlightNextCard(!1,"top"))){let e=r.scrollTop+.5*r.offsetHeight;e>s-150&&(e=s),i.scrollTo({top:e})}}else if(!(i.isAtTop(90)&&n&&e.commands.spotlightNextCard(!0,"bottom"))){let e=r.scrollTop-.5*r.offsetHeight;e<150&&(e=0),i.scrollTo({top:e})}},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.Y2.MAIN_PRESENT_VIEW,{editor:t}=(0,x.m)(),n=(0,l.st)(),{enabled:o}=(0,d.kY)(t),m=(0,s.CU)();return{handlePresentNavigationEvent:(0,i.useCallback)(i=>{let{eventType:s,eventKey:o,method:d="keyboard",payload:x={}}=i;if(!t)return!1;let f=m.getState(),g=(0,h.FI)(f),j=null==g?void 0:g.pos,v=!!(t&&g&&(0,c.UE)(t,g)),b=Object.keys((0,h.Ev)(f).tree);switch(s){case"toggleSpotlight":return v?null==t||t.commands.turnOffSpotlight():null==t||t.commands.spotlightNextBlock(),m.dispatch((0,h.tB)()),!0;case"goToCard":{let{cardId:e}=x;if(!e)return!1;return t.commands.spotlightCardById(e,v),m.dispatch((0,h.mF)({attached:!1})),!0}case"arrowRight":if((0,r.up)(),m.dispatch((0,h.mF)({attached:!1})),null==n||n.trackDocEvent(l.VV.PRESENT_MODE_NAVIGATED,{direction:l.Fk.CARD_NEXT,method:"keyboard"===d?l.fG.KEYBOARD:l.fG.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),v)return t.commands.spotlightNextBlock();return t.commands.spotlightNextCard();case"arrowLeft":if((0,r.up)(),m.dispatch((0,h.mF)({attached:!1})),null==n||n.trackDocEvent(l.VV.PRESENT_MODE_NAVIGATED,{direction:l.Fk.CARD_PREV,method:"keyboard"===d?l.fG.KEYBOARD:l.fG.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),v)return t.commands.spotlightNextBlock(!0);return t.commands.spotlightNextCard(!0);case"arrowDown":if((0,r.up)(),m.dispatch((0,h.mF)({attached:!1})),!v){let e=(0,a.TX)(t.state.selection);return t.commands.goToNextExpandableNode()||p(t,"down",!e),!0}return null==n||n.trackDocEvent(l.VV.PRESENT_MODE_NAVIGATED,{direction:l.Fk.TELEPROMPTER_DOWN,method:"keyboard"===d?l.fG.KEYBOARD:l.fG.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),t.commands.spotlightNextBlock();case"arrowUp":if((0,r.up)(),m.dispatch((0,h.mF)({attached:!1})),!v){let e=(0,a.TX)(t.state.selection);return t.commands.goToNextExpandableNode(!0)||p(t,"up",!e),!0}return null==n||n.trackDocEvent(l.VV.PRESENT_MODE_NAVIGATED,{direction:l.Fk.TELEPROMPTER_UP,method:"keyboard"===d?l.fG.KEYBOARD:l.fG.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),t.commands.spotlightNextBlock(!0);case"restart":if(b[0])return(0,r.up)(),t.commands.spotlightCardById(b[0]),m.dispatch((0,h.mF)({attached:!1})),!0;return!1;case"cancelCurrentAction":{let e=v&&j;if(t.commands.spotlightCollapseNearestExpandableNode(e?j:null))return t.commands.reHighlightExpandableNode(),!0;if(v)return t.commands.turnOffSpotlight(),!0;return m.dispatch((0,h.mF)({attached:!1})),null==n||n.track(l.VV.CARD_COLLAPSED,{is_present_mode:!0,method:"escape_key"}),t.commands.ascendUpToParentCard(!1)}case"toggleExpanded":{let e=v&&j;if(t.commands.expandOrCollapseExpandableNode(e?j:null))return!0;if(e){let e=t.state.doc.resolve(j).parent;if(e&&(0,u.p8)(e))return(0,u.bG)(e.attrs.id,!1),t.commands.spotlightNextBlock(!0),!0;return t.commands.spotlightCollapseNearestExpandableNode(j)}return!1}default:return!1}},[n,t,e,m]),spotlightingByBlock:o}}},69588:(e,t,n)=>{"use strict";n.d(t,{FM:()=>x,Lt:()=>h,Ur:()=>u,Yi:()=>p});var i=n(17228),r=n.n(i),s=n(14041),o=n(65998),l=n(64225),a=n(82354),d=n(5933),c=n(22544);let u="disable-card-size-animations",h=()=>{let e=(0,o.u)("autoZoomToFit"),t=(0,l.GV)(d.G7);return(0,s.useEffect)(()=>{t||f()},[t]),null!=t?t:e},x=()=>{let e=(0,l.GV)(d.$i),t=(0,s.useRef)(),n=h(),i=!c.rS&&!c.GC&&n;(0,s.useEffect)(()=>{let n=!t.current;t.current=e,e&&i&&(document.body.classList.add(u),p(),requestAnimationFrame(()=>{document.body.classList.remove(u)}),n&&setTimeout(()=>{document.body.classList.add(u),p(),requestAnimationFrame(()=>{document.body.classList.remove(u)})},a.M2))},[e,i])},p=()=>{let e=document.documentElement.clientHeight,t=document.querySelector('[data-animate-value="presentCurrent"][data-card-scroll-element]');if(!t)return;let n=m(t,e,1);if(n<.9){let i=(1-n)/3;n=m(t,e,n+i)}(0,l.KA)().dispatch((0,d.ed)({zoomLevel:n}))},m=(e,t,n)=>{e.style.setProperty("--zoom-level",n.toString());let i=e.scrollHeight,s=r()(n*t/i,c.hQ?.5:a.bq,1);return e.style.setProperty("--zoom-level",s.toString()),s},f=()=>{document.querySelectorAll("[data-card-scroll-element]").forEach(e=>{e.style.removeProperty("--zoom-level")})}},42850:(e,t,n)=>{"use strict";n.d(t,{l:()=>p});var i=n(3478),r=n(14041),s=n(73893),o=n(55640),l=n(65998),a=n(64225),d=n(30358),c=n(27042),u=n(18667),h=n(42434),x=n(51039);let p=e=>{let t=(0,a.GV)(x.Jo),n=(0,r.useMemo)(()=>!!i.A.get(u.oH),[]),p=(0,a.GV)(c.iG),m=(0,d.IM)(),f=(0,a.jL)(),g=(0,a.GV)(x.wt),j=(0,l.u)("docEditorForcePublicStatic"),v=window!==window.top,b=(0,r.useMemo)(()=>{var e,i;if(p||v)return!1;let r=new URLSearchParams(window.location.search);if(r.get("following_id")&&r.get("follow_on_start"))return!0;if(!t)return n;let l=null===(i=t.accessLinks)||void 0===i?void 0:null===(e=i.find(e=>e.token===s.$.SHARE_TOKEN))||void 0===e?void 0:e.permission;return l&&[o.aXG.Edit,o.aXG.Comment].includes(l)||m.can(o.aXG.Comment,t)||m.can(o.aXG.Edit,t)||m.can(o.aXG.Manage,t)},[m,t,n,v,p]);(0,r.useEffect)(()=>{let t=j?h.i.PUBLIC_STATIC:e||(b?h.i.COLLABORATIVE:h.i.PUBLIC_STATIC);f((0,x.wm)({docEditorType:t}))},[f,e,j,b]);let y=e||(b?h.i.COLLABORATIVE:h.i.PUBLIC_STATIC);return g||y}},17948:(e,t,n)=>{"use strict";n.d(t,{BC:()=>mG,UN:()=>mk,vn:()=>mY,mi:()=>t4.mi});var i,r,s=n(31085),o=n(25420),l=n(80532),a=n(81313),d=n(2628),c=n(52177),u=n(12327),h=n(2657),x=n.n(h),p=n(14041),m=n(32133),f=n(37132),g=n(91559),j=n(19893),v=n(54235),b=n(65998),y=n(3204),C=n(44507),w=n(92405),E=n(57628),k=n(36832);let S=new k.b;var I=n(40173),T=n(19098),A=n(98903),_=n(56824),R=n(93185),O=n(97864),D=n(35687),z=n(61778),P=n(2219),L=n(35789),N=n(80853),M=n(9021),V=n(15428),G=n(20501),F=n(24221),W=n(95986),U=n(52374),B=n(58403),H=n(42214),q=n(64130),K=n(80352),J=n(10458),Y=n(87747),X=n(57882),$=n(0),Z=n(45591);let Q=e=>{let{selector:t}=e,[n,i]=(0,p.useState)(null),r=t?document.querySelector(t):null,s=(0,p.useCallback)(()=>{if(!t){i(null);return}if(r){r.scrollIntoView({behavior:"auto",block:"center"});let e=r.getBoundingClientRect();i({top:e.top,bottom:e.bottom,left:e.left,right:e.right,width:e.width,height:e.height})}else i(null)},[t,r]),o=(0,Z.wb)(s,500);return(0,p.useEffect)(()=>(s(),window.addEventListener("resize",o),window.addEventListener("scroll",o),()=>{window.removeEventListener("resize",o),window.removeEventListener("scroll",o)}),[o,s]),{rectAttrs:n}},ee=e=>({backgroundColor:e?"gray.900":"white",borderColor:e?"gray.700":"gray.200",color:e?"white":"gray.800"});var et=n(4479);n(54);let en=e=>{let{selector:t,onClickTargetElement:n,rectAttrs:i,lockScroll:r=!1}=e,o=(0,p.useCallback)(e=>{let n=t&&document.querySelector(t);n&&(null==n?void 0:n.parentElement)&&(e?n.parentElement.style.opacity="1":n.parentElement.style.opacity="unset")},[t]);(0,p.useEffect)(()=>{let e=()=>{null==n||n(),o(!1)},i=t&&document.querySelector(t);return i&&i.addEventListener("mousedown",e),()=>{i&&i.removeEventListener("mousedown",e)}},[o,n,t]),(0,p.useEffect)(()=>(o(!0),()=>{o(!1)}),[o]);let a=(0,p.useMemo)(()=>(0,et.X)(),[]);return(0,s.jsxs)(I.Z,{children:[r&&(0,s.jsx)(V.mL,{styles:{".doc-root":{overflowY:"hidden !important",paddingInlineEnd:"".concat(a,"px !important")}}}),(0,s.jsxs)("svg",{className:"overlay-svg",width:"100%",height:"100%",preserveAspectRatio:"none",children:[(0,s.jsxs)("defs",{children:[i&&(0,s.jsxs)("mask",{id:"mask",children:[(0,s.jsx)("rect",{width:"100%",height:"100%",fill:"white",rx:3,ry:3}),(0,s.jsx)("rect",{x:i.left,y:i.top,width:i.width,height:i.height,fill:"black",rx:3,ry:3})]}),(0,s.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#f79533"}),(0,s.jsx)("stop",{offset:"20%",stopColor:"#f37055"}),(0,s.jsx)("stop",{offset:"40%",stopColor:"#ef4e7b"}),(0,s.jsx)("stop",{offset:"60%",stopColor:"#a166ab"}),(0,s.jsx)("stop",{offset:"80%",stopColor:"#5073b8"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#1098ad"}),(0,s.jsx)("animateTransform",{attributeName:"gradientTransform",type:"rotate",from:"0",to:"1000",dur:"3s",repeatCount:"indefinite"})]})]}),(0,s.jsx)("rect",{width:"100%",height:"100%",fill:"black",opacity:"0.5",mask:"url(#mask)",id:"mask-overlay"}),i&&(0,s.jsx)("rect",{x:i.left-4,y:i.top-4,width:i.width+8,height:i.height+8,rx:3,ry:3,fill:"none",stroke:"url(#gradient)",strokeWidth:"3"})]}),(0,s.jsx)(l.az,{className:"overlay-clickable",children:i&&(0,s.jsx)(l.az,{className:"cutout-area",position:"absolute",top:i.top,left:i.left,width:"".concat(i.width,"px"),height:"".concat(i.height,"px"),borderRadius:3})})]})};var ei=n(64444),er=n(19635),es=n(78784),eo=n(64225),el=n(5933),ea=n(86724),ed=n(14691),ec=n(26848),eu=n(39286);let eh={createFirstGamma:!1,addCard:!1,dragToReorderCards:!1,changeTheme:!1,addMedia:!1,editWithAI:!1,tryPresenterView:!1,exportPDF:!1},ex=()=>({createFirstGamma:{title:(0,s.jsx)(c.x6,{id:"cwH/bW",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}}),detail:(0,s.jsx)(c.x6,{id:"gPnQTx"}),learnMoreLink:"https://help.gamma.app/en/articles/7838093-how-to-create-a-new-presentation-document-or-webpage-with-gamma-ai",webm:"https://cdn.gamma.app/_app_static/videos/editor-checklist/Generate_f505f66b.webm",mp4:"https://cdn.gamma.app/_app_static/videos/editor-checklist/Generate_998d2375.mp4"},addCard:{title:(0,s.jsx)(c.x6,{id:"B3xxao"}),detail:(0,s.jsx)(c.x6,{id:"QFRh35",components:{0:(0,s.jsx)(ec.u,{})}}),webm:"https://cdn.gamma.app/_app_static/videos/editor-checklist/AddCard_9cf50846.webm",mp4:"https://cdn.gamma.app/_app_static/videos/editor-checklist/AddCard_1b627598.mp4",maskSelector:'[data-guider-highlight="add-card-button"]'},dragToReorderCards:{title:(0,s.jsx)(c.x6,{id:"eCIfAy"}),detail:(0,s.jsx)(c.x6,{id:"r2DHdM"}),webm:"https://cdn.gamma.app/_app_static/videos/editor-checklist/DragToReorder_c4911817.webm",mp4:"https://cdn.gamma.app/_app_static/videos/editor-checklist/DragToReorder_a55df823.mp4",maskSelector:'[data-guider-highlight="filmstrip-scroller"]',actionBefore:()=>{v.R.emit("openFilmStrip",{})}},addMedia:{title:(0,s.jsx)(c.x6,{id:"MfJ43d"}),detail:(0,s.jsx)(c.x6,{id:"4IBZBD",components:{0:(0,s.jsx)(ec.u,{})}}),learnMoreLink:"https://help.gamma.app/en/articles/7898153-how-to-add-blocks-and-content",webm:"https://cdn.gamma.app/_app_static/videos/editor-checklist/AddMedia_9a3aed6c.webm",mp4:"https://cdn.gamma.app/_app_static/videos/editor-checklist/AddMedia_bba28889.mp4",maskSelector:'[data-testid="images-widget-inner-button"]'},changeTheme:{title:(0,s.jsx)(c.x6,{id:"UOE+DR"}),detail:(0,s.jsx)(c.x6,{id:"MOba58"}),learnMoreLink:"https://help.gamma.app/en/articles/10262646-how-to-change-the-theme-in-gamma",webm:"https://cdn.gamma.app/_app_static/videos/editor-checklist/ChangeTheme_ef3d0144.webm",mp4:"https://cdn.gamma.app/_app_static/videos/editor-checklist/ChangeTheme_eed94575.mp4",maskSelector:'[data-guider-highlight="toolbar-theme-button"]'},editWithAI:{title:(0,s.jsx)(c.x6,{id:"EVnzPs"}),detail:(0,s.jsx)(c.x6,{id:"t5XFEE"}),learnMoreLink:"https://help.gamma.app/en/articles/8033284-how-to-edit-content-using-ai",webm:"https://cdn.gamma.app/_app_static/videos/editor-checklist/EditWithAI_44614239.webm",mp4:"https://cdn.gamma.app/_app_static/videos/editor-checklist/EditWithAI_26550494.mp4",maskSelector:'[data-guider-highlight="edit-with-ai-button"]'},tryPresenterView:{title:(0,s.jsx)(c.x6,{id:"E3nYWH"}),detail:(0,s.jsx)(c.x6,{id:"c4vcd2",components:{0:(0,s.jsx)(ec.u,{})}}),learnMoreLink:"https://help.gamma.app/en/articles/8032935-how-to-present-your-gamma",webm:"https://cdn.gamma.app/_app_static/videos/editor-checklist/TryPresenting_c299f34e.webm",mp4:"https://cdn.gamma.app/_app_static/videos/editor-checklist/TryPresenting_a37920a2.mp4",maskSelector:'[data-guider-highlight="present-button-group"]',actionBefore:()=>{v.R.emit("isInOnboardingChecklistPresentMode",!0)}},exportPDF:{title:(0,s.jsx)(c.x6,{id:"eW0Hm2"}),detail:(0,s.jsx)(c.x6,{id:"GZeq1f"}),learnMoreLink:"https://help.gamma.app/en/articles/8022861-how-to-export-gammas",webm:"https://cdn.gamma.app/_app_static/videos/editor-checklist/ShareAndExport_7dfc3194.webm",mp4:"https://cdn.gamma.app/_app_static/videos/editor-checklist/ShareAndExport_65aba06d.mp4",maskSelector:'[data-guider-highlight="share-button"]',skipCompleteStepOnMaskClick:!0}}),ep=ex(),em=()=>{let[e]=(0,ea.M)(ed.E.onboardingChecklistSteps,eh),t=Object.values(ep).length,n=Object.values(e).filter(Boolean).length;return{isChecklistComplete:n===t,progress:n/t*100,stepCount:n,totalSteps:t}},ef="onboardingChecklistWidgetActivator",eg=()=>{var e;let t=(0,eo.GV)(el.sX),n=(0,eo.GV)((0,es.A0)(t)),i=(null==n?void 0:n.status)==="running",{user:r,isUserLoading:o}=(0,X.ur)(),{progress:l,stepCount:a,totalSteps:d,isChecklistComplete:u}=em(),h=(0,_.dU)("gray.800","gray.200"),x=(0,_.dU)("gray.400","gray.600"),p=null==r?void 0:null===(e=r.settings)||void 0===e?void 0:e.needsEditorOnboarding;return i||o||u?null:(0,s.jsx)(ei.W,{children:(0,s.jsx)(N.$,{onClick:()=>{v.R.emit("toggleOpen",{behavior:"toggle"})},width:"fit-content",px:4,minW:"150px",borderRadius:"full","data-id":ef,visibility:p||0===a?"hidden":"visible",pointerEvents:p||0===a?"none":"auto",children:(0,s.jsxs)(D.B,{spacing:1,w:"100%",children:[(0,s.jsxs)(D.B,{w:"100%",direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,s.jsx)(P.D,{fontSize:"xs",color:h,fontWeight:"semibold",children:(0,s.jsx)(c.x6,{id:"ZDIydz"})}),(0,s.jsx)(z.E,{fontSize:"xxs",color:x,children:(0,s.jsx)(c.x6,{id:"sNvodR",values:{totalSteps:d,0:String(a)}})})]}),(0,s.jsx)(er.k,{size:"xs",value:l,colorScheme:"green",borderRadius:"full"})]})})})};n(62770);let ej=[{heading:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.x6,{id:"WywDbS",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}})," ",(0,s.jsx)("span",{role:"img","aria-label":"party popper",className:"emoji",children:"\uD83C\uDF89"})]}),description:(0,s.jsx)(c.x6,{id:"qp5/eb",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}}),cta:(0,s.jsx)(c.x6,{id:"1K069f"})},{heading:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.x6,{id:"SikK9S",values:{GAMMA_PROPER_NOUN:eu.On}})," ",(0,s.jsx)("span",{role:"img","aria-label":"card",className:"emoji",children:"\uD83C\uDCCF"})]}),description:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(c.x6,{id:"OXpHoP"})}),selector:'[data-guider-highlight="card-body"]'},{heading:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.x6,{id:"ufgIDV"})," ",(0,s.jsx)("span",{role:"img","aria-label":"brick",className:"emoji",children:"\uD83E\uDDF1"})]}),description:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(c.x6,{id:"YzLd99",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}})}),shouldFocusEditor:!0,selector:".first-block-in-card"},{heading:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.x6,{id:"xL3A5l"})," ",(0,s.jsx)("span",{role:"img","aria-label":"racing flag",className:"emoji",children:"\uD83C\uDFC1"})]}),description:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(c.x6,{id:"USbGN7",values:{GAMMA_PROPER_NOUN:eu.On}})})}],ev='[data-id="'.concat(ef,'"]'),eb=e=>{let{editor:t}=e,n=(0,q.fW)(),{setSettings:i}=(0,X.ur)(),[r,o]=(0,p.useState)(0),a=(0,K.O2)("editor"),[d,c]=(0,p.useState)(!1),u=ej[r],{rectAttrs:h}=Q({selector:u.selector}),{rectAttrs:x}=Q({selector:ev}),m=u.selector&&h||x;(0,p.useEffect)(()=>{(0,$._1)(ev,12e4).then(()=>{a.scrollTo({top:0,behavior:"smooth"}).then(()=>{requestAnimationFrame(()=>{(0,B.v)(J.VV.ONBOARDING_WELCOME_TOUR_STARTED),c(!0)})})}).catch(()=>{})},[]);let f=(0,p.useCallback)(()=>{(0,B.v)(J.VV.ONBOARDING_WELCOME_TOUR_STEP_COMPLETED,{step:r+1}),o(r+1)},[r]);(0,p.useEffect)(()=>{u.shouldFocusEditor&&(null==t||t.commands.focusDelayed())},[r,t,u.shouldFocusEditor]);let g=(0,p.useCallback)(()=>{(0,B.v)(J.VV.ONBOARDING_WELCOME_TOUR_STEP_COMPLETED,{step:r+1}),c(!1),null==i||i({remove:["needsEditorOnboarding"]}),v.R.emit("toggleOpen",{behavior:"open"})},[i,r]),j=(0,p.useCallback)(()=>{o(r-1)},[r]),b=(0,Y.rd)();return!d||(0,C.Xb)()||!m?null:(0,s.jsxs)(I.Z,{children:[(0,s.jsx)(V.mL,{styles:{"[data-editor-toolbar] button":{pointerEvents:"none"}}}),(0,s.jsx)(W.L8,{isDark:b,children:(0,s.jsxs)(T.A,{isOpen:!0,lazyBehavior:"unmount",closeOnBlur:!1,isLazy:!0,gutter:8,preventOverflow:!0,boundary:"clippingParents",placement:u.selector&&h?"start-start":"top",modifiers:[{name:"detectOverflow",phase:"beforeWrite",requiresIfExists:["offset"],enabled:!0,fn:e=>{let{state:t}=e;if(!u.selector)return t.styles.popper={...t.styles.popper,left:n?"".concat(H.uA):"-".concat(H.uA)},t;let i=(0,U.A)(t,{boundary:"clippingParents"}),r=i.top>0||i.bottom>0||i.left>0||i.right>0,s=t.elements.popper.getBoundingClientRect();return u.selector&&(null==x?void 0:x.top)&&r&&(t.styles.popper={...t.styles.popper,right:n?"auto":"0px",top:"-".concat(8,"px"),left:n?"0px":"auto",bottom:"auto",transform:"translate3d(0px, ".concat(x.top-s.height,"px, 0px)"),insetInlineEnd:H.uA}),t}}],children:[(0,s.jsx)(A.d,{children:(0,s.jsx)(l.az,{position:"absolute",pointerEvents:"none",top:"".concat(null==m?void 0:m.top,"px"),left:"".concat(null==m?void 0:m.left,"px"),width:"".concat(null==m?void 0:m.width,"px"),height:"".concat(null==m?void 0:m.height,"px")})}),(0,s.jsx)(I.Z,{children:(0,s.jsx)(ey,{step:u,onNextClick:f,onBackClick:j,onCompleteClick:g,stepIndex:r},r)})]})}),(0,s.jsx)(en,{selector:u.selector,rectAttrs:h||null,onClickTargetElement:()=>{}})]})},ey=e=>{let{step:t,onNextClick:n,onBackClick:i,onCompleteClick:r,stepIndex:o}=e,a=(0,q.fW)(),d=a?G.CeG:G.dmS,h=a?G.dmS:G.CeG,x=ee((0,Y.rd)()),p=(0,_.dU)("gray.500","gray.400"),m=(0,_.dU)("gray.300","gray.700");return(0,s.jsx)(R.h,{"data-id":"tour-popover-content",shadow:"2xl",w:"400px",border:"1px solid var(--chakra-colors-gray-200)",className:"tour-popover",...x,children:(0,s.jsx)(O.e,{children:(0,s.jsxs)(D.B,{p:2,pt:4,spacing:6,children:[o!==ej.length-1&&(0,s.jsx)(z.E,{fontSize:"sm",color:m,fontWeight:"bold",mt:-2,children:(0,s.jsx)(c.x6,{id:"RfkEBH",values:{0:o+1,1:ej.length-1}})}),(0,s.jsxs)(D.B,{spacing:2,children:[(0,s.jsx)(l.az,{display:"inline",alignItems:"center",children:(0,s.jsx)(P.D,{display:"inline",variant:"fancy",fontSize:"2xl",mb:2,textAlign:"start",lineHeight:"1",children:t.heading})}),(0,s.jsx)(z.E,{fontSize:"md",children:t.description}),t.helperText&&(0,s.jsx)(z.E,{fontSize:"sm",color:p,children:t.helperText})]}),0===o?(0,s.jsx)(L.o,{children:(0,s.jsx)(N.$,{w:"fit-content",variant:"solid",onClick:n,children:(0,s.jsx)(c.x6,{id:"1K069f"})})}):o===ej.length-1?(0,s.jsx)(L.o,{children:(0,s.jsx)(N.$,{onClick:r,w:"fit-content",variant:"solid",children:(0,s.jsx)(c.x6,{id:"O1h2Xs"})})}):(0,s.jsxs)(D.B,{w:"100%",alignItems:"center",justifyContent:"space-between",direction:"row",children:[(0,s.jsx)(M.K,{size:"md",variant:"plain",px:6,colorScheme:"blackAlpha",onClick:i,"aria-label":u.Ru._({id:"iH8pgl"}),icon:(0,s.jsx)(F.g,{icon:h})}),(0,s.jsx)(M.K,{px:6,size:"md",variant:"solid",onClick:n,"aria-label":u.Ru._({id:"hXzOVo"}),icon:(0,s.jsx)(F.g,{icon:d})})]})]})})})};var eC=n(2223);let ew=e=>{let{enabled:t}=e,n=(0,b.u)("editorOnboardingFlow"),{hasInitialized:i}=(0,b.FY)(),r=(0,p.useRef)(!1),s=(0,J.st)(),{startTour:o}=(0,eC.l)({enabled:"originalTour"===n});(0,p.useEffect)(()=>{o&&!r.current&&t&&i&&(!i||"originalTour"===n)&&(null==o||o(0),null==s||s.track(J.VV.DOC_EDITOR_TOUR_STARTED,{source:"queryParam"}),r.current=!0)},[s,i,n,o,t])};var eE=n(32202),ek=n(94259);let eS=["90%","360px"],eI=e=>{let{onClose:t,eyebrowText:n,mainText:i,callsToAction:r}=e;return(0,s.jsxs)(l.az,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",p:4,w:eS,maxW:eS,position:"relative",children:[(0,s.jsx)(ek.J,{size:"sm",onClick:t,position:"absolute",insetEnd:1,top:1}),(0,s.jsxs)(D.B,{spacing:4,children:[(0,s.jsxs)(D.B,{spacing:1,paddingEnd:3,children:[!(0,C.Xb)()&&(0,s.jsx)(z.E,{fontSize:"sm",color:"gray.600",children:n}),(0,s.jsx)(z.E,{fontSize:"md",children:i})]}),(0,s.jsx)(l.az,{w:"100%",children:r})]})]})},eT=e=>{let{onClose:t,startTour:n}=e;return(0,s.jsx)(eI,{eyebrowText:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{"aria-label":"Wave",role:"img",children:"\uD83D\uDC4B"})," ",(0,s.jsx)(c.x6,{id:"IiwaCT",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}})]}),mainText:(0,s.jsx)(c.x6,{id:"ntWFEH"}),onClose:t,callsToAction:(0,s.jsx)(N.$,{size:"md",w:"100%",variant:"solid",onClick:()=>{n(0),t()},children:(0,s.jsx)(c.x6,{id:"VzFYDl"})})})},eA="desktop-tour-toast",e_=e=>{let{docId:t,enabled:n}=e,i=(0,eE.d)(),r=(0,eo.jL)(),{hasInitialized:s}=(0,b.FY)(),{setSettings:o}=(0,X.ur)(),[l,a]=(0,p.useState)(!1),d=(0,p.useRef)(!1),c=(0,eo.GV)((0,es.A0)(t)),u=(null==c?void 0:c.status)==="running",h=(0,b.u)("editorOnboardingFlow"),{startTour:x}=(0,eC.l)({enabled:"originalTour"===h});(0,p.useEffect)(()=>{!(0,C.Xb)()&&t&&x&&a(!u&&!(0,C.Xb)()&&n)},[t,n,u,x]),(0,p.useEffect)(()=>(!d.current&&l&&s&&!i.isActive(eA)&&"originalTour"===h&&(d.current=!0,setTimeout(()=>{i({id:eA,position:"bottom-left",render:e=>{let{onClose:t}=e;return eT({onClose:()=>{null==o||o({remove:["needsEditorOnboarding"]}),t()},startTour:()=>null==x?void 0:x(0)})},isClosable:!0,duration:null})},2e3)),()=>{i.isActive(eA)&&(d.current=!0,i.close(eA))}),[o,l,x,i,h,s,r])},eR=e=>{let{docId:t,editor:n}=e,[i,r]=(0,p.useState)("off"),o=(0,b.u)("editorOnboardingFlow"),{hasInitialized:l}=(0,b.FY)();return(e_({docId:t,enabled:"aiGenerate"===i}),ew({enabled:"tour"===i}),(0,p.useEffect)(()=>S.on("triggerOnboarding",e=>{let{reason:t}=e;(0,C.Xb)()||r(t)}),[]),eO(),l&&"checklistWidget"===o&&("tour"===i||"aiGenerate"===i))?(0,s.jsx)(eb,{editor:n}):null},eO=()=>{let e="true"===(0,w.sF)()[E.y];(0,y.o)(E.y),(0,p.useEffect)(()=>{e&&S.emit("triggerOnboarding",{reason:"tour"})},[e])};var eD=n(83402),ez=n(55276),eP=n(69011),eL=n.n(eP),eN=n(97331),eM=n.n(eN);class eV extends k.b{cleanup(){document.removeEventListener("mousemove",this.throttled)}constructor(){super(),this.throttled=eM()(e=>{this.emit("move",e)},200,{leading:!0}),document.addEventListener("mousemove",this.throttled)}}let eG=eL()(()=>new eV),eF=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=eG(),[i,r]=(0,p.useState)(!1),s=(0,p.useRef)(t);return(0,p.useEffect)(()=>{s.current=t},[t]),(0,p.useEffect)(()=>n.on("move",t=>{s.current||r(e(t))}),[n,e]),i};var eW=n(68251),eU=n(95312);let eB=(0,p.memo)(e=>{let{forceShow:t=!1}=e,{isOpen:n,onToggle:i,onClose:r,onOpen:o}=(0,ez.j)(),l=(0,eo.GV)(el.VJ),a=eF((0,p.useCallback)(e=>e.clientX>window.innerWidth-150&&e.clientY>window.innerHeight-150,[]));return(0,p.useEffect)(()=>{t?o():r()},[t,o,r]),(0,s.jsx)(eW.x,{me:!l||n||a||t?"0px":"-100%",transitionProperty:"margin-right",transitionDuration:"ultra-slow",transitionTimingFunction:"ease-in-out",children:(0,s.jsxs)(T.A,{returnFocusOnClose:!1,isOpen:n,onClose:r,closeOnBlur:!0,closeOnEsc:!1,children:[(0,s.jsx)(ei.W,{children:(0,s.jsx)(M.K,{onClick:()=>{i()},"aria-label":"Help",isRound:!0,size:"md",icon:(0,s.jsx)(F.g,{icon:G.Lhe})})}),(0,s.jsx)(R.h,{...H.kK,children:(0,s.jsx)(O.e,{children:(0,s.jsx)(eU.u,{onClose:r})})})]})})});eB.displayName="PresentModeHelpWidget";var eH=n(61722),eq=n(62911),eK=n(41057),eJ=n(12790),eY=n(9138);let eX=()=>(0,eo.GV)((0,eY.lp)("left")),e$=()=>(0,eo.GV)((0,eY.lp)("right")),eZ=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=e.panelPosition,i=(0,m.wA)(),r=(0,eo.GV)((0,eY.El)(e)),s=(0,p.useCallback)(()=>{i((0,eY.TQ)({component:e}))},[e,i]);return(0,eK.V)(()=>{!t&&r&&i((0,eY.Zv)({position:n}))},[r,i,t,n],[t]),{togglePanel:(0,p.useCallback)(s=>{if(!t)return;let o=!r;(null==s?void 0:s.override)==="open"?o=!0:(null==s?void 0:s.override)==="closed"&&(o=!1),o?i((0,eY.NE)({component:e,disableTransition:!!(null==s?void 0:s.disableTransition)})):i((0,eY.Zv)({position:n}))},[e,n,r,i,t]),initPanel:s,isPanelOpen:r}},eQ=()=>{let e=(0,p.useMemo)(()=>new eJ.$u,[]),t=(0,p.useMemo)(()=>new eJ.$u,[]),n=(0,p.useMemo)(()=>new eJ.$u,[]);return(0,p.useEffect)(()=>{if(!n||!e||!t)return;let i=e.pipe(n),r=t.pipe(n);return()=>{i(),r()}},[e,t,n]),{leftPanelLifecycle:e,rightPanelLifecycle:t,globalPanelLifecycle:n}};var e0=n(82223),e1=n(6657),e6=n(68335),e2=n(78354),e5=n(57548);let e3={ifPanelHasRoomToOpen:function(e,t,n){return"left"===n?{base:t,xl:e}:{base:t,"2xl":e}}},e4=e=>{let{children:t,onClose:n,panelName:i}=e;return(0,p.useEffect)(()=>e1.WC.on("keydown",i,e=>"Escape"===e.key&&(n(),!0)),[i,n]),t},e8=e=>{var t;let{position:n,panelLifecycle:i}=e,r=(0,q.fW)()?"left"===n?"right":"left":n,l=(0,p.useRef)(),[a,d]=(0,p.useState)(!1),c=(0,m.wA)(),u=(0,eo.GV)((0,eY.DP)(n)),h=(0,eo.GV)((0,eY.I2)(n)),x=(0,eo.GV)(el.OG),f=(0,eo.GV)((0,eY.lp)(n)),g=(0,eo.GV)((0,eY.yG)(n)),j=null!==(t=null==g?void 0:g.canCollapse)&&void 0!==t&&t,v=(0,p.useCallback)(()=>{c((0,eY.Zv)({position:n}))},[c,n]),b=(0,p.useCallback)(()=>{c((0,eY.NE)({component:g}))},[g,c]),y=(0,p.useCallback)(e=>{c((0,eY.bz)({width:e,position:n})),i.emit("resize",{})},[c,i,n]),C={zIndex:Number((0,e0.rd)("zIndices","overlay"))+1,position:e3.ifPanelHasRoomToOpen("relative","fixed",r),top:e3.ifPanelHasRoomToOpen(0,"var(--editor-padding-top)",r),bottom:0,[r]:0},w=(0,Y.rd)();h||a||(C.transitionProperty="width",C.transitionDuration="normal"),(0,p.useEffect)(()=>{let e=e=>{"width"===e.propertyName&&i.emit("resize",{})};return l.current.addEventListener("transitionend",e),()=>{l.current&&l.current.removeEventListener("transitionend",e)}},[i,l]);let E=(0,e2.h5)(e3.ifPanelHasRoomToOpen(!0,!1,r))||!1;return(0,p.useEffect)(()=>{u&&!E&&j&&v()},[E,u,v,j]),(0,p.useEffect)(()=>{x&&v()},[x,v]),(0,s.jsxs)(o.s,{ref:l,...C,style:{width:u||j?f:0},boxShadow:E?"none":"2xl",borderColor:u?w?"gray.800":"blackAlpha.100":void 0,borderLeftWidth:u&&"right"===r?"1px":0,borderRightWidth:u&&"left"===r?"1px":0,maxW:"100%","data-print-hidden":!0,children:[u&&"right"===n&&(0,s.jsx)(e5.$P,{isDragging:a,setIsDragging:d,position:r,width:f,minWidth:null==g?void 0:g.minWidth,setWidth:y,panelRef:l,onClose:v,initialWidth:e6.JO}),(0,s.jsx)(eJ.Y.Provider,{value:i,children:g&&(u||j)&&(0,s.jsx)(e4,{onClose:v,panelName:g.panelName,children:(0,s.jsx)(g,{isDragging:a,isOpen:u,closePanel:v,openPanel:b,panelRef:l,lifecycle:i,hasRoomToOpen:E})})}),u&&"left"===n&&(0,s.jsx)(e5.$P,{isDragging:a,setIsDragging:d,position:r,width:f,minWidth:null==g?void 0:g.minWidth,setWidth:y,panelRef:l,onClose:v,initialWidth:e6.qm})]})},e7=(0,p.memo)(e=>(0,s.jsx)(e8,{position:"right",...e}));e7.displayName="RightPanelContainer";let e9=(0,p.memo)(e=>(0,s.jsx)(e8,{position:"left",...e}));e9.displayName="LeftPanelContainer";var te=n(62313),tt=n(74727),tn=n(31242),ti=n(17303);let tr=e=>{let{docId:t}=e,n=(0,eo.jL)(),i=(0,_.dU)("gray.300","gray.800"),r=(0,_.dU)("white","gray.900"),a=(0,_.dU)("transparent","transparent"),d=(0,_.dU)("gray.500","gray.400"),h=(0,_.dU)("trueblue.50","trueblue.400"),x=(0,_.dU)("trueblue.500","white"),m=(0,_.dU)("gray.600","gray.100"),f=(0,_.dU)("gray.100","gray.700"),g=(0,_.dU)("trueblue.50","trueblue.400"),j=(0,_.dU)("trueblue.500","white"),{replace:v}=(0,tn.useRouter)(),b=(0,eo.GV)(ti.og),y=(0,p.useCallback)(()=>{t&&v((0,w.pF)({docId:t}),void 0,{shallow:!0})},[t,v]),E=(0,p.useCallback)(e=>{n((0,ti.ey)({previewSize:e}))},[n]);return(0,p.useEffect)(()=>e1.WC.on("keydown","SITE_PREVIEW_PANE",e=>("Escape"===e.key&&y(),!0)),[y]),(0,s.jsx)(o.s,{bg:"white",align:"flex-start",direction:"column",width:"100%","data-sites-preview-pane":!0,children:(0,s.jsxs)(te.z,{w:"100%",spacing:0,p:2,py:2,bg:r,borderColor:i,justify:"flex-start",borderBottomWidth:"1px",children:[(0,s.jsx)(te.z,{spacing:2,flexBasis:"30%",children:!(0,C.Xb)()&&(0,s.jsx)(N.$,{size:"sm",variant:"plain",onClick:y,children:(0,s.jsx)(te.z,{children:(0,s.jsx)(l.az,{children:(0,s.jsx)(F.g,{icon:G.CeG})})})})}),(0,s.jsxs)(tt.e,{size:"sm",ml:24,flexBasis:"40%",justifyContent:"center",children:[(0,s.jsx)(W.Tz,{label:(0,s.jsx)(c.x6,{id:"58m6Qy"}),children:(0,s.jsx)(M.K,{"aria-label":u.Ru._({id:"58m6Qy"}),variant:"ghost",size:"sm",icon:(0,s.jsx)(F.g,{icon:G.GrJ}),bg:"mobile"===b?h:a,_hover:{color:"mobile"===b?j:m,bg:"mobile"===b?g:f},color:"mobile"===b?x:d,onClick:()=>{E("mobile")}})}),!(0,C.Xb)()&&(0,s.jsx)(W.Tz,{label:(0,s.jsx)(c.x6,{id:"fpcKeD"}),children:(0,s.jsx)(M.K,{"aria-label":u.Ru._({id:"fpcKeD"}),variant:"ghost",size:"sm",icon:(0,s.jsx)(F.g,{icon:G.w7B}),bg:"tablet"===b?h:a,_hover:{color:"tablet"===b?j:m,bg:"tablet"===b?g:f},color:"tablet"===b?x:d,onClick:()=>{E("tablet")}})}),!(0,C.Xb)()&&(0,s.jsx)(W.Tz,{label:(0,s.jsx)(c.x6,{id:"K3p0ar"}),children:(0,s.jsx)(M.K,{"aria-label":u.Ru._({id:"K3p0ar"}),variant:"ghost",size:"sm",icon:(0,s.jsx)(F.g,{icon:G.ArK}),bg:"desktop"===b?h:a,_hover:{color:"desktop"===b?j:m,bg:"desktop"===b?g:f},color:"desktop"===b?x:d,onClick:()=>{E("desktop")}})})]}),(0,s.jsx)(te.z,{flexBasis:"30%",justifyContent:"flex-end"})]})})};var ts=n(89059),to=n(12784),tl=n.n(to),ta=n(35147),td=n(13487);let tc=(e,t)=>{let n=(0,eo.jL)(),i=(0,eo.CU)(),r=!!(0,eo.GV)(ta.df),s=(0,eo.GV)(el.Ik),o=(0,eo.GV)(ta.le),l=t&&r&&s;(0,p.useEffect)(()=>{var t,r;if(!l||!e||e.gammaDocId!==o)return;let s=(0,el.Jo)(i.getState()),a=null==s?void 0:null===(r=s.publishedSnapshot)||void 0===r?void 0:null===(t=r.content)||void 0===t?void 0:t.default;if(!a)return;let d=!(0,td.wX)(e,a);console.debug("[useDirtyStateTracking] INITIALIZING DIRTY STATE ".concat(o," via compareDocJSON"),{isDirty:d}),d&&n((0,ta.VP)({pageId:e.gammaDocId,lastUpdatedAt:new Date().toISOString()}))},[n,i,e,l,o]),(0,p.useEffect)(()=>{if(!l||!e)return;let t=tl()(()=>{n((0,ta.VP)({pageId:e.gammaDocId,lastUpdatedAt:new Date().toISOString()}))},500,{leading:!0,trailing:!0,maxWait:1e3});return e.on("update",t),()=>{e.off("update",t)}},[l,n,e])};var tu=n(68962),th=n(63693),tx=n(37056),tp=n(86186),tm=n(56922),tf=n(28895),tg=n(99100),tj=n(13236),tv=n(87835),tb=n.n(tv),ty=n(77646),tC=n(14e3);let tw=(e,t,n,i,r)=>{let s=i-n,o=Math.max(s-Math.max(e-n,0)-Math.max(i-t,0),0),l=o/s,a=l>0&&o==t-e;return{overlap:l,viewing:r&&(a||l>.5||o>400),only:a}},tE=(e,t)=>{let n=(0,K.O2)("editor"),[i,r]=(0,p.useState)(null),s=(0,p.useRef)({presentingCardId:null,scrollTop:0,containerHeight:0,expandedCards:{}}),o=(0,eo.GV)(el.wC),l=(0,eo.GV)(el.$i);(0,p.useEffect)(()=>{s.current.presentingCardId=null!=l?l:null},[l]);let a=(0,eo.GV)(el.vy);(0,p.useEffect)(()=>{s.current.expandedCards=a},[a]),(0,p.useEffect)(()=>{let e=document.querySelector(n.scrollSelector);if(!e)return;r(e);let{height:t}=e.getBoundingClientRect();s.current.scrollTop=e.scrollTop,s.current.containerHeight=t},[n.scrollSelector,s]),(0,p.useEffect)(()=>{let e=tl()(()=>{i&&(s.current.scrollTop=i.scrollTop)},250,{trailing:!0,maxWait:500});return window.addEventListener("scroll",e,!0),()=>window.removeEventListener("scroll",e,!0)},[i]),(0,p.useEffect)(()=>{let e=tl()(()=>{i&&(s.current.containerHeight=i.getBoundingClientRect().height)},250,{trailing:!0,maxWait:500});return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[i]),(0,p.useEffect)(()=>{if(!e)return;if(o===tC.w.SLIDE_VIEW){let e=setInterval(()=>{t.emit("cardViewed",{cardId:s.current.presentingCardId,interval:1e3})},1e3);return()=>clearInterval(e)}let i=setInterval(()=>{if(document.hidden)return;let{scrollTop:i,containerHeight:r,expandedCards:o}=s.current,l=i+r;tb()((0,tj.xe)(e.state.doc,ty.jg),e=>e.node.attrs.id).map(t=>{let r;let s=t.node.attrs.id,a=o[s];if(!a)return null;try{r=e.view.nodeDOM(t.pos)}catch(e){return null}if(r instanceof HTMLElement){let e=(0,$.sR)(r,n.scrollSelector),{offsetHeight:t}=r;return{id:s,...tw(i,l,e,t+e,a)}}return null}).filter(e=>!!(null==e?void 0:e.viewing)).forEach(e=>{t.emit("cardViewed",{cardId:e.id,interval:1e3})})},1e3);return()=>clearInterval(i)},[o,e,s,t,n.scrollSelector])},tk=e=>{let{editor:t,backoffFactor:n=1}=e,i=(0,J.st)(),[r,s]=(0,p.useState)(15e3);tE(t,tg.t);let o=(0,p.useCallback)(()=>{tg.t.flush(),s(Math.min(r*n,12e4))},[n,r]);return(0,p.useEffect)(()=>{if(!i)return;tg.t.initialize(),tg.t.on("flush",e=>{let{viewed:t}=e;for(let[e,n]of Object.entries(t))i.trackDocEvent(J.VV.CARD_VIEWED,{card_id:e,duration:n})});let e=setInterval(()=>o(),r);return()=>{clearInterval(e),tg.t.destroy()}},[i,r,o]),null};var tS=n(85303),tI=n(94445),tT=n(36661),tA=n(2600),t_=n(18201),tR=n(3040),tO=n(15355),tD=n(86984),tz=n(30191),tP=n(31504),tL=n(46343),tN=n.n(tL),tM=n(15072),tV=n(12554);let tG=e=>{let t=(0,eo.GV)(tI.Ix),{title:n}=(0,tM.d)({cardId:t||void 0,editor:e}),i=(0,eo.GV)(el.uF,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return tN()(...t)}),r=i.indexOf(t||""),s=(0,p.useCallback)(t=>()=>{var n,s;if(!e)return;let o=null!==(s=i[r+(t?1:-1)])&&void 0!==s?s:i[r],l=null===(n=(0,ty.W0)(e,o))||void 0===n?void 0:n.pos;if(!l)return;(0,tV.I5)(e,l)||e.commands.selectInsideNodeAtPos(l);let a=e.view.nodeDOM(l);a instanceof HTMLElement&&(0,K.H1)("editor").scrollElementIntoView({element:a,delay:0})},[r,e,i]);return{cardId:t,title:n||"Untitled",canGoForward:r<i.length-1,canGoBack:r>0,goToNextCard:s(!0),goToPreviousCard:s(!1)}};var tF=n(72860),tW=n(32262);let tU=e=>{let{editor:t,isReadonly:n}=e,{selection:i}=(0,tF.y)(t),r=(0,eo.jL)(),s=(0,b.u)("cardNotes");(0,p.useEffect)(()=>{if(!t||!s)return;let e=(0,tW.hT)(t.state.doc,t.state.selection.from);if(e&&e.node&&!(0,tV.eh)(e.node)){if(n){r((0,tI.qq)());return}(0,tV.ni)(t,e.pos)}},[s,r,t,n,i])};var tB=n(63587),tH=n(65449),tq=n(87064),tK=n(71197),tJ=n(19717),tY=n(55090),tX=n(26768),t$=n(48984),tZ=n(39848),tQ=n(92667);let t0=e=>{let{editor:t,cardId:n}=e,i=(0,eo.GV)(el.sK),r=(0,eo.GV)(el.nD),s=(0,b.u)("aiCardNotes"),o=(0,p.useCallback)(e=>{if(!t||!n)return;let i=(0,ty.W0)(t,n);if(!i)return;let r=t.state.doc.resolve(i.pos),s=(0,tV.PD)(r);if(!s)return;let o=(0,tZ.os)(e,t.schema),{tr:l}=t.state,a=s.pos+1,d=a+s.node.content.size;l.delete(a,d).insert(a,o.content),t.view.dispatch(l)},[t,n]),l=(0,tQ.wb)(o,200),[a,d]=(0,p.useState)(!1),{generate:c}=(0,tH.pt)("GenerateSpeakerNotes",{onStart(){d(!0),l("")},onContent(e){l(e)},onComplete(e){l(e),d(!1)},timeout:3e4}),u=(0,eo.CU)(),h=(0,p.useCallback)(async()=>{if(!i||!t||!n)return;let e=(0,ty.W0)(t,n);if(!e)return;let r=(0,tB.K)(t,e.node),s=(0,tq.$F)(),o=(0,t$.qe)(t,e.pos),l=(0,tX.u)(u);await c({variables:{cardHtml:r,previous:o,outline:l},workspaceId:i.id}).promise,(0,tJ.w)("generateCardNotes",i,s)},[c,i,t,n,u]);return{onClickGenerate:(0,tK.tO)(h,"generateCardNotes",tY.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_CARD),isGenerating:a,canGenerateCardNotes:s&&r}},t1=e=>{let{closePanel:t}=e,{editor:n}=(0,t4.mi)(),i=(0,eo.GV)(el.nD),{cardId:r,canGoBack:l,canGoForward:a,title:d,goToNextCard:h,goToPreviousCard:x}=tG(n),{isInOfflineMode:p}=(0,g.u)();tU({editor:n,isReadonly:!i});let m=(0,Y.rd)(),f=m?"gray.900":"white",j=m?"white":"gray.900",v=m?"gray.300":"gray.500",{onClickGenerate:b,isGenerating:y,canGenerateCardNotes:C}=t0({editor:n,cardId:r});return(0,s.jsx)(W.L8,{isDark:m,children:(0,s.jsx)(tD.Z,{bgColor:f,"data-panelid":"card-notes-panel",color:j,children:(0,s.jsxs)(o.s,{direction:"column",h:"100%",flex:1,children:[(0,s.jsxs)(o.s,{px:6,py:4,children:[(0,s.jsx)(o.s,{flex:1,children:(0,s.jsxs)(te.z,{spacing:4,children:[(0,s.jsx)(tz.a,{children:(0,s.jsx)(c.x6,{id:"1DBGsz"})}),i&&!p&&(0,s.jsx)(W.qT,{label:(0,s.jsx)(c.x6,{id:"qcPeK2"})})]})}),(0,s.jsx)(ek.J,{"data-card-notes-close-button":!0,onClick:t})]}),(0,s.jsxs)(tA.T,{px:6,pb:4,alignItems:"stretch",flex:1,overflowY:"hidden",spacing:4,"data-card-notes-bubble-menu-target":!0,children:[(0,s.jsxs)(te.z,{align:"end",children:[(0,s.jsx)(z.E,{fontWeight:"600",color:v,wordBreak:"break-word",noOfLines:2,"data-testid":"card-notes-card-title",py:1,children:d}),(0,s.jsx)(t_.h,{}),C&&(0,s.jsx)(W.Tz,{label:(0,s.jsxs)(te.z,{spacing:0,children:[(0,s.jsx)(c.x6,{id:"GyxUS3"}),(0,s.jsx)(tO.G,{type:"generateCardNotes"})]}),placement:"top",children:(0,s.jsx)(N.$,{variant:"ghost",onClick:b,isLoading:y,isDisabled:p,size:"sm","aria-label":u.Ru._({id:"ziAjHi"}),rightIcon:(0,s.jsx)(F.g,{icon:tR.p7g}),flexShrink:0,children:(0,s.jsx)(c.x6,{id:"ziAjHi"})})})]}),(0,s.jsx)(tP.z,{isEditable:i,isDark:m}),i&&(0,s.jsxs)(te.z,{children:[(0,s.jsx)(W.Tz,{label:l?(0,s.jsx)(c.x6,{id:"cbqngJ"}):(0,s.jsx)(c.x6,{id:"4OtlnH"}),children:(0,s.jsx)(o.s,{flex:1,children:(0,s.jsx)(M.K,{"aria-label":l?u.Ru._({id:"cbqngJ"}):u.Ru._({id:"4OtlnH"}),icon:(0,s.jsx)(F.g,{icon:G.CeG}),onClick:x,isDisabled:!l,flex:1})})}),(0,s.jsx)(W.Tz,{label:a?(0,s.jsx)(c.x6,{id:"EyUKqu"}):(0,s.jsx)(c.x6,{id:"ggpGEd"}),children:(0,s.jsx)(o.s,{flex:1,children:(0,s.jsx)(M.K,{"aria-label":a?u.Ru._({id:"EyUKqu"}):u.Ru._({id:"ggpGEd"}),icon:(0,s.jsx)(F.g,{icon:G.dmS}),onClick:h,isDisabled:!a,flex:1})})})]})]})]})})})};t1.panelPosition="right",t1.panelName="card-notes";let t6=()=>{let{togglePanel:e,isPanelOpen:t}=eZ(t1),{editor:n}=(0,tT.m)(),i=(0,eo.jL)(),r=(0,b.u)("cardNotes"),s=(0,eo.GV)(el.wC)===tC.w.SLIDE_VIEW;(0,p.useEffect)(()=>{t&&(!r||s)&&e()},[r,t,e,s]),(0,p.useEffect)(()=>{!t&&n&&(i((0,tI.Yf)({isOpen:!1})),n.view.dispatch(n.state.tr))},[i,n,t,e]),(0,p.useEffect)(()=>{if(r&&n)return tS.R.on("toggle",r=>{let{config:s,clickedCardId:o,activeNotesCardId:l}=r;t&&o!==l||(e(s),i((0,tI.Yf)({isOpen:!t})),n.view.dispatch(n.state.tr))})},[i,n,r,t,e])},t2="drag-in-progress",t5=()=>{(0,p.useEffect)(()=>{let e=()=>{document.body.classList.add(t2)},t=()=>{document.body.classList.remove(t2)};return document.body.addEventListener("dragstart",e,!0),document.body.addEventListener("dragend",t,!0),document.body.addEventListener("drop",t,!0),document.body.addEventListener("mouseup",t,!0),()=>{document.body.removeEventListener("dragstart",e,!0),document.body.removeEventListener("dragend",t,!0),document.body.removeEventListener("drop",t,!0),document.body.removeEventListener("mouseup",t,!0)}},[])};var t3=n(42434),t4=n(60219),t8=n(43342),t7=n(29719),t9=n(82257),ne=n(46595),nt=n(52743),nn=n(94052),ni=n(24935),nr=n(57322),ns=n(30503),no=n(43421),nl=n(33718),na=n(65695),nd=n(34323),nc=n(84003),nu=n(22071),nh=n(63751);let nx=()=>{let e=(0,e2.h5)({lg:100,xl:125,"2xl":150})||100,t=(0,eo.GV)(nl.jF),n=null!==t?t:e;return{previewWidth:n,width:n+40,fontSize:n/nh.s5}};var np=n(2696),nm=n(27042),nf=n(51039);let ng=()=>{let e=(0,eo.GV)(nm.iG),t=(0,b.u)("filmstrip"),n=(0,eo.GV)(nf.wt),i=(0,np.UT)("comment"),r=(0,eo.GV)(el.wC),s=(0,eo.GV)((0,eY.DP)("left")),o=(0,eo.GV)(ti.C),l=n===t3.i.COLLABORATIVE||e;return t&&l&&(i||e)&&r===tC.w.DOC_VIEW&&!(0,C.Xb)()&&!s&&!o},nj=()=>{let e=(0,q.fW)(),t=eX(),n=e$(),i=(0,e2.h5)({base:!1,lg:!0,"3xl":!1}),r=(0,eo.GV)(el.cS),s=(0,eo.GV)(nl.lh),o=ng(),l=(0,nu.Tq)(),a=s&&o&&i,d=(0,na.R)(),c=(0,no.A)({base:"0px",[nd.y3]:nc.iq})||"0px",{width:u}=nx();return(0,p.useMemo)(()=>{let i=a?"".concat(u,"px"):l.src&&"bottom-left"===l.position?"".concat(l.width+l.paddingX/2,"px"):"0px",s=r?c:d?"60px":"0px";return{"--doc-padding-left":e?s:i,"--doc-padding-right":e?i:s,"--present-padding-left":"".concat(t,"px"),"--present-padding-right":"".concat(n,"px"),"--comment-slide-margin":c}},[u,t,r,n,d,c,l,a,e])};var nv=n(78273);let nb=e=>"tablet"===e?"768px":"mobile"===e?(0,C.Xb)()?"100vw":"375px":"100vw",ny=e=>{let{loading:t,...n}=e,{editor:i,docId:r,previewSize:a}=n;return(0,s.jsxs)(t7.Tw,{children:[(0,s.jsx)("style",{id:"global-styles",dangerouslySetInnerHTML:{__html:nv.S.toString()}}),(0,s.jsx)(t9.Um,{children:(0,s.jsx)(o.s,{pos:"relative",justifyContent:"center",bg:"#C5C5C5",flex:1,children:!t&&i&&r?(0,s.jsx)(nC,{...n,editor:i,docId:r}):(0,s.jsx)(l.az,{flexDirection:"column",w:nb(a),h:"var(--100vh)",bg:"gray.100","data-testid":"preview-editor-loading",inset:0,children:(0,s.jsx)(L.o,{h:"100%",children:(0,s.jsx)(D.B,{align:"center",children:(0,s.jsx)(t8.y,{})})})})})})]})},nC=e=>{let{docId:t,editor:n,previewSize:i,onCreate:r}=e,d=(0,p.useMemo)(()=>(0,ne.C)().concat(nt.Q),[]),c=(0,p.useMemo)(()=>n.getJSON(),[n]),u="mobile"===i?"mobile":"desktop",h=(0,ni.h)({async onCreate(e){let{editor:t}=e;console.debug("[SimpleEditor][onCreate] TipTap editor is now ready"),null==r||r({editor:t})},content:c,extensions:d,editable:!1});h.shouldUsePublishedVersion=!0;let{editorAnimationsClass:x,editorAnimationsCSSVars:m}=(0,tx.O)({editor:h,instanceId:u,scrollingParentSelector:".".concat(t3.v)}),f=(0,eo.GV)(ta.Gd),g=(0,eo.GV)(el.SJ),j=(0,ns.pg)(f),v=j?tm.kb:0,b=nb(i),y=nj();return(0,s.jsxs)(l.az,{className:(0,a.cx)("preview-editor-root",x),style:m,w:b,h:"100%",css:{...y,"--editor-width":b,"--doc-padding-top":"".concat(v,"px"),"--editor-padding-top":"".concat(50,"px")},position:"relative",shadow:"xl",children:[f&&j&&(0,s.jsx)(o.s,{pos:"absolute",top:0,left:0,w:"100%",zIndex:"10",children:(0,s.jsx)(nn._,{theme:g,editable:!1,content:f.navContent},"".concat(t,"__preview-editor-nav__").concat(u,"}"))}),(0,s.jsx)(nr.N,{editor:h},"".concat(t,"__preview-editor__").concat(u,"}"))]})};var nw=n(50877),nE=n(14968);let nk=()=>{let e=(0,eo.GV)(ta.Gd),t=(0,eo.GV)(el.SJ),n=(0,eo.CU)(),[i]=(0,nw.vlJ)(),r=(0,p.useCallback)(async e=>{var t;let{editor:r}=e,s=null===(t=(0,ta.Gd)(n.getState()))||void 0===t?void 0:t.id;s&&await i({variables:{input:{siteId:s,navContent:r.state.doc.toJSON()}}})},[i,n]),l=(0,tQ.lW)(r,500);return e?(0,s.jsx)(o.s,{pos:"absolute",top:0,left:0,w:"100%",zIndex:nE.$.siteNav,children:(0,s.jsx)(nn._,{theme:t,onUpdate:l,content:e.navContent,editable:!0,scrollingParentSelector:".".concat(t3.v)})}):null};var nS=n(5665),nI=n(79967),nT=n(3706),nA=n(31889);let n_="onboarding-checklist-popover-content";var nR=n(69237),nO=n(25676);let nD=e=>{let{item:t,itemKey:n,onButtonClick:i}=e,r=(0,_.dU)("gray.800","gray.200"),o=(0,_.dU)("gray.500","gray.400"),l=(0,_.dU)("gray.400","gray.300"),a=(0,p.useCallback)(()=>{(0,B.v)(tY.VV.ONBOARDING_CHECKLIST_WIDGET_ITEM_LEARN_MORE_CLICKED,{item:n})},[n]);return(0,s.jsx)(O.e,{overflowY:"auto","data-id":"onboarding-checklist-item-detail",children:(0,s.jsxs)(D.B,{spacing:4,py:2,children:[(0,s.jsx)(nO.g,{ratio:16/9,children:(0,s.jsxs)("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,controls:!0,children:[(0,s.jsx)("source",{src:t.mp4}),(0,s.jsx)("source",{src:t.webm})]})}),(0,s.jsxs)(D.B,{children:[(0,s.jsx)(P.D,{size:"md",fontWeight:"bold",children:t.title}),(0,s.jsxs)(z.E,{fontSize:"sm",color:r,children:[t.detail&&t.detail,t.learnMoreLink&&(0,s.jsxs)(s.Fragment,{children:[" ",(0,s.jsxs)(nT.N,{href:t.learnMoreLink,isExternal:!0,display:"inline-block",alignItems:"center",color:o,textDecoration:"underline",_hover:{color:l},verticalAlign:"text-top",fontSize:"xs",onClick:a,children:[(0,s.jsx)(c.x6,{id:"zwWKhA"})," ",(0,s.jsx)(nR.p,{})]})]})]})]}),(0,s.jsx)(N.$,{variant:"solid",onClick:i,size:"sm",id:"completeButton",children:(0,s.jsx)(c.x6,{id:"76gPWk"})})]})})};var nz=n(32351);let nP=e=>{let{item:t,onClick:n,itemKey:i,isCompleted:r,showPointer:o}=e,a=(0,_.dU)("gray.800","white"),d=(0,_.dU)("gray.600","gray.400"),c=(0,_.dU)("blackAlpha.50","blackAlpha.100"),u=(0,_.dU)("gray.400","gray.600"),h=r?u:a,x=(0,_.dU)("trueblue.50","trueblue.50"),p=(0,_.dU)("gray.600","gray.400"),m=(0,q.fW)();return(0,s.jsx)(N.$,{w:"100%",py:1,variant:"link",alignItems:"flex-start",justifyContent:"flex-start",onClick:e=>{e.stopPropagation(),n()},id:"checklist-item-".concat(i),textDecoration:"none",color:h,_hover:{textDecoration:"none",color:d,bgColor:c},fontSize:"sm",fontWeight:"medium",css:{"--checklist-item-highlight-color":x},className:r?"highlight-animation":"",children:(0,s.jsxs)(D.B,{direction:"row",alignItems:"center",spacing:2,w:"100%",children:[(0,s.jsx)(l.az,{w:"fit-content",color:r?u:h,children:r?(0,s.jsx)(F.g,{icon:G.e68,fixedWidth:!0}):(0,s.jsx)(F.g,{icon:G.Nfw,fixedWidth:!0})}),(0,s.jsxs)(z.E,{pos:"relative",children:[r&&(0,s.jsx)(l.az,{position:"absolute",top:"50%",insetInlineStart:0,width:"100%",height:"2px",boxShadow:"0 1px rgba(255,255,255,0.3)",className:r?"strike-animation":"",background:p}),t.title,o&&(0,s.jsx)(l.az,{display:"inline-block",marginInlineStart:2,className:m?"pointer-animation-rtl":"pointer-animation-ltr",lineHeight:0,fontSize:"2xl",position:"absolute",top:"50%",transform:"translateY(-50%)",children:(0,s.jsx)("span",{role:"img","aria-label":"show me how",children:m?"\uD83D\uDC49":"\uD83D\uDC48"})})]})]})})},nL=e=>{let{onMinimizeClick:t,onListItemClick:n,completedSteps:i,steps:r}=e,{progress:o,stepCount:a,totalSteps:d}=em(),u=(0,_.dU)("gray.400","gray.600"),h=(0,_.dU)("blackAlpha","whiteAlpha");return(0,s.jsxs)(l.az,{children:[(0,s.jsx)(l.az,{position:"absolute",top:1,insetInlineEnd:2,zIndex:3,children:(0,s.jsx)(M.K,{variant:"ghost",color:"currentColor",colorScheme:h,isRound:!1,size:"xs",icon:(0,s.jsx)(F.g,{icon:tR.AJu,fixedWidth:!0}),"aria-label":"Minimize",onClick:t})},"onboarding-checklist-popover-minimize-button"),(0,s.jsx)(nz.D,{border:"0 none",children:(0,s.jsxs)(D.B,{spacing:2,children:[(0,s.jsxs)(D.B,{direction:"row",alignItems:"baseline",justifyContent:"flex-start",children:[(0,s.jsx)(P.D,{size:"sm",fontWeight:"bold",children:(0,s.jsx)(c.x6,{id:"ZDIydz"})}),(0,s.jsx)(z.E,{fontSize:"xs",color:u,children:(0,s.jsx)(c.x6,{id:"llY0P5",values:{totalSteps:d,0:String(a)}})})]}),(0,s.jsx)(er.k,{size:"sm",colorScheme:"green",value:o,isAnimated:!0,borderRadius:"full"})]})}),(0,s.jsx)(O.e,{children:(0,s.jsx)(D.B,{spacing:4,w:"100%",children:(0,s.jsx)(D.B,{spacing:1,w:"100%",children:r.map(e=>{let[t,r]=e,o=i[t],l=Object.entries(i).find(e=>{let[t,n]=e;return!n}),a=l&&l[0]===t;return(0,s.jsx)(nP,{item:r,onClick:()=>{n(t)},itemKey:t,isCompleted:o,showPointer:a},t)})})})})]})};n(50405);let nN=ex(),nM=e=>{let{onEditClick:t}=e,[n,i]=(0,ea.M)(ed.E.onboardingChecklistSteps,eh),r=(0,Y.rd)(),o=(0,p.useMemo)(()=>Object.entries(nN),[]),a=(0,q.fW)(),{isOpen:d,onOpen:u,onClose:h,onToggle:x}=(0,ez.j)({id:"onboarding-checklist-popover"}),{isOpen:m,onOpen:f,onClose:g}=(0,ez.j)({id:"attached-helper-popover"}),[j,b]=(0,p.useState)(null),y=null!==j&&nN[j]||null,{rectAttrs:C}=Q({selector:null==y?void 0:y.maskSelector}),{rectAttrs:w}=Q({selector:'[data-id="'.concat(ef,'"]')}),E=C||w,k=(0,p.useCallback)(e=>{(0,B.v)(tY.VV.ONBOARDING_CHECKLIST_WIDGET_ITEM_VIEWED,{item:e}),b(e);let t=nN[e];(null==t?void 0:t.actionBefore)&&t.actionBefore(),requestAnimationFrame(()=>{f()})},[f]),S=(0,p.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"btn";j&&((0,B.v)(tY.VV.ONBOARDING_CHECKLIST_WIDGET_ITEM_COMPLETED,{item:j,method:e}),b(null),g(),i({...n,[j]:!0}))},[n,g,j,i]),O=!!(m&&y),{reward:L}=(0,nA.bS)("confettiOriginator","confetti"),{reward:M}=(0,nA.bS)("checklist-item-createFirstGamma","confetti"),{isChecklistComplete:V}=em();(0,p.useEffect)(()=>{V&&((0,B.v)(tY.VV.ONBOARDING_CHECKLIST_WIDGET_COMPLETED),setTimeout(()=>{L()},500))},[V,L]),(0,p.useEffect)(()=>v.R.on("toggleOpen",e=>{let{behavior:t="toggle",skipTracking:n=!1}=e;if(!n){let e={open:tY.VV.ONBOARDING_CHECKLIST_WIDGET_OPENED,close:tY.VV.ONBOARDING_CHECKLIST_WIDGET_CLOSED,toggle:d?tY.VV.ONBOARDING_CHECKLIST_WIDGET_CLOSED:tY.VV.ONBOARDING_CHECKLIST_WIDGET_OPENED};(0,B.v)(e[t])}({open:()=>{u(),V&&i(eh)},close:h,toggle:x})[t]()}),[V,d,h,u,x,i]),(0,p.useEffect)(()=>{let e=document.querySelector('[data-id="'.concat(n_,'"]')),t=null==e?void 0:e.closest(".chakra-popover__popper");t&&(C?t.style.pointerEvents="none":t.style.pointerEvents="auto",y?t.style.zIndex="1":t.style.zIndex="popover")},[y,C]);let G=(0,p.useCallback)(()=>{null!=y&&y.skipCompleteStepOnMaskClick||S("mask")},[S,y]);(0,p.useEffect)(()=>{d&&!n.createFirstGamma&&(i({...eh,createFirstGamma:!0}),(0,B.v)(tY.VV.ONBOARDING_CHECKLIST_WIDGET_ITEM_COMPLETED,{item:"createFirstGamma",method:"auto"}),M())},[n.createFirstGamma,i,M,d]);let F=(0,p.useCallback)(()=>{(0,B.v)(tY.VV.ONBOARDING_CHECKLIST_WIDGET_CLOSED),h()},[h]),K=ee(r),J=(0,_.dU)("gray.500","gray.400");return(0,s.jsxs)(W.L8,{isDark:r,children:[(0,s.jsxs)(T.A,{isOpen:d,placement:"top",gutter:8,children:[(0,s.jsx)(A.d,{children:(0,s.jsx)(eg,{})}),(0,s.jsx)(I.Z,{children:(0,s.jsx)(R.h,{"data-id":n_,marginInlineEnd:H.uA,...K,children:V?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(nI.q,{fontSize:"xxs",zIndex:3,onClick:h}),(0,s.jsxs)(D.B,{align:"center",justify:"flex-start",direction:"column",textAlign:"start",spacing:4,py:6,pb:4,px:4,children:[(0,s.jsxs)(D.B,{spacing:2,children:[(0,s.jsx)(P.D,{size:"lg",id:"confettiOriginator",children:(0,s.jsx)("span",{role:"img","aria-label":"confetti",children:"\uD83C\uDF89"})}),(0,s.jsx)(P.D,{size:"lg",variant:"fancy",textAlign:"start",children:(0,s.jsx)(c.x6,{id:"KQBnUP"})}),(0,s.jsx)(z.E,{fontSize:"sm",children:(0,s.jsx)(c.x6,{id:"hAMA9K",values:{GAMMA_PROPER_NOUN:eu.On}})})]}),(0,s.jsxs)(D.B,{flexDirection:"column",justifyContent:"center",alignContent:"center",spacing:2,w:"100%",children:[(0,s.jsx)(N.$,{as:nT.N,width:"100%",href:"/create",variant:"solid",target:"_blank",size:"sm",textDecoration:"none !important",onClick:()=>{(0,B.v)(tY.VV.ONBOARDING_CHECKLIST_WIDGET_COMPLETION_MODAL_CTA_CLICKED,{cta:"create"})},children:(0,s.jsx)(c.x6,{id:"WudVHw"})}),(0,s.jsx)(N.$,{width:"100%",variant:"plain",size:"sm",onClick:()=>{(0,B.v)(tY.VV.ONBOARDING_CHECKLIST_WIDGET_COMPLETION_MODAL_CTA_CLICKED,{cta:"edit"}),h(),t()},children:(0,s.jsx)(c.x6,{id:"bObOD4"})})]}),(0,s.jsx)(z.E,{fontSize:"xs",color:J,children:(0,s.jsx)(c.x6,{id:"sapBOc",components:{0:(0,s.jsx)(ec.u,{})}})})]})]}):(0,s.jsx)(nL,{onMinimizeClick:F,onListItemClick:k,completedSteps:n,steps:o})})})]}),(0,s.jsxs)(I.Z,{children:[(0,s.jsxs)(T.A,{strategy:"fixed",isOpen:O,lazyBehavior:"unmount",closeOnBlur:!1,placement:C?"end-start":"top",isLazy:!0,gutter:8,modifiers:[{name:"computeStyles",options:{gpuAcceleration:!1}},{name:"detectOverflow",phase:"beforeWrite",requiresIfExists:["offset"],enabled:!0,fn:e=>{let{state:t}=e,n=(0,U.A)(t,{boundary:"clippingParents"}),i=n.top>0||n.bottom>0||n.left>0||n.right>0,r=t.elements.popper.getBoundingClientRect();return(null==w?void 0:w.top)&&i&&(t.styles.popper={...t.styles.popper,right:a?"auto":"0px",top:"-".concat(8,"px"),left:a?"0px":"auto",bottom:"auto",transform:"translate3d(0px, ".concat(w.top-r.height,"px, 0px)"),marginInlineEnd:H.uA}),t}}],children:[(0,s.jsx)(A.d,{children:(0,s.jsx)(l.az,{position:"absolute",pointerEvents:"none",top:"".concat(null==E?void 0:E.top,"px"),left:"".concat(null==E?void 0:E.left,"px"),width:"".concat(null==E?void 0:E.width,"px"),height:"".concat(null==E?void 0:E.height,"px")})}),y&&j&&O&&(0,s.jsx)(I.Z,{children:(0,s.jsx)(R.h,{w:"400px",...K,children:(0,s.jsx)(nD,{item:y,itemKey:j,onButtonClick:()=>{S("btn")}})})})]}),j&&(0,s.jsx)(en,{selector:(null==y?void 0:y.maskSelector)||"",onClickTargetElement:G,rectAttrs:C||null,lockScroll:!0})]})]})};var nV=n(89102),nG=n(10264),nF=n(63341),nW=n(18528),nU=n(72821),nB=n(48310),nH=n(33473),nq=n(81575),nK=n(33854),nJ=n(56154),nY=n(2940),nX=n.n(nY),n$=n(64162),nZ=n(85888);let nQ=nX()(()=>parseFloat(getComputedStyle(document.documentElement).fontSize)),n0=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,{fontSize:t,defaultContentWidth:n}=(0,eo.GV)(el.Uu);return n1({zoomLevel:e,docSettingsFontSize:t,defaultContentWidth:n,viewportScaleFactor:(0,n$.t)(),theme:(0,eo.GV)(el.SJ)})},n1=e=>{let{docSettingsFontSize:t,defaultContentWidth:n,zoomLevel:i=1,viewportScaleFactor:r,theme:s}=e,o=(0,C.Xb)(),{cardWidthEms:l,baseFontSize:a}=(0,nZ.S)({fontSize:t,contentWidth:n,theme:s,isMobileDevice:o});return r*a*nQ()*i*l};var n6=n(95580),n2=n(69588);let n5={portrait:{max:1,min:.4},landscape:{max:1,min:.5}};function n3(e,t){var n;let i=e&&getComputedStyle(e).getPropertyValue(t);return i?parseInt(null===(n=i.match(/\d+/))||void 0===n?void 0:n[0],10):0}let n4=e=>{let{cardWrapperWidth:t,cardWrapperLeftPaddingNum:n,cardWrapperRightPaddingNum:i}=e;return t-n-i},n8=()=>{let{max:e,min:t}=n5[(0,eo.GV)(el.fX)||"landscape"]||n5.landscape;return{max:e,min:t}},n7=e=>{let{editor:t,editorWrapperDiv:n,aspectRatioValue:i}=e,r=(0,eo.jL)(),s=(0,b.u)("doc-zoom"),{max:o,min:l}=n8(),a=(0,p.useCallback)(e=>{e<o&&e>l?r((0,el.Ye)({zoomLevel:e})):e>=o?r((0,el.Ye)({zoomLevel:o})):e<=l&&r((0,el.Ye)({zoomLevel:l}))},[r,o,l]),d=(0,eo.GV)((0,eY.lp)("left")),c=(0,eo.GV)((0,eY.lp)("right")),u=(0,eo.GV)(el.yh),h=t&&(0,n6.jB)(t,0),x=n0(),m=(0,p.useCallback)(()=>{try{if(!n||!i||!s)return;document.body.classList.add(n2.Ur);let e=function(e,t){let n=null==e?void 0:e.querySelector(".card-wrapper"),i=n3(n,"padding-top"),r=n3(n,"padding-bottom"),s=null==n?void 0:n.clientWidth,o=n3(n,"padding-left"),l=n3(n,"padding-right");return{editorHeight:t.clientHeight,cardWrapperTopPaddingNum:i,cardWrapperBottomPaddingNum:r,cardWrapperWidth:s,cardWrapperLeftPaddingNum:o,cardWrapperRightPaddingNum:l}}(h,n);if(0===e.cardWrapperWidth)return;let t=n4(e),r=t/i,o=function(e){let{editorHeight:t,cardWrapperTopPaddingNum:n,cardWrapperBottomPaddingNum:i}=e;return t-n-i}(e);if(r-o>-10){let e=o*i,t=Math.round(e/x*100);a(t/100)}else{let e=Math.round(t/x*100);a(e/100)}requestAnimationFrame(()=>{document.body.classList.remove(n2.Ur)})}catch(e){nJ.Cp(e),console.error(e)}},[n,i,s,h,x,a]);(0,p.useEffect)(()=>{u&&m()},[u,m]),(0,p.useEffect)(()=>{u&&tl()(m,200)()},[u,m,d,c]),(0,p.useEffect)(()=>(u&&window.addEventListener("resize",m),u||window.removeEventListener("resize",m),()=>{window.removeEventListener("resize",m)}),[m,u])},n9=[1.4,1.3,1.2,1.1,1,.9,.8,.7,.6,.5],ie=e=>{let{editor:t,editorWrapperDiv:n,aspectRatioValue:i}=e,r=(0,Y.rd)(),o=(0,eo.jL)(),l=(0,eo.GV)(el.Uu),a=(0,nK.u)("scaleToFit"),d=(0,eo.GV)(el.sA),c=(0,eo.GV)(el.We),h=(0,eo.GV)(el.yh),x=a&&l.scaleContentToFit;n7({editor:t,editorWrapperDiv:n,aspectRatioValue:i});let m=e=>{o((0,el.Ye)({zoomLevel:e}))},f=e=>{o((0,el.us)({enabled:e}))};return((0,p.useEffect)(()=>{let e="social"===d.formatType,t="fluid"!==l.cardDimensions&&"deck"===d.formatType;e||t||x?o((0,el.us)({enabled:!0})):"fluid"===l.cardDimensions&&(o((0,el.Ye)({zoomLevel:1})),o((0,el.us)({enabled:!1})))},[o,d.formatType,l.cardDimensions,x]),x)?null:(0,s.jsx)(W.L8,{isDark:r,children:(0,s.jsxs)(nF.W,{children:[(0,s.jsx)(nW.I,{w:"fit-content",as:N.$,position:"relative",size:"xs",minWidth:"46px",maxW:"46px",borderRadius:"full",fontSize:"11px",px:"1",sx:{"font-variant-numeric":"tabular-nums"},children:"".concat(Math.round(100*c),"%")}),(0,s.jsx)(nU.c,{children:(0,s.jsxs)(nB.i,{value:h?"fit":"".concat(c),onChange:e=>{if("fit"===e){f(!0);return}m(parseFloat(e)),f(!1)},children:[n9.map(e=>(0,s.jsxs)(nH.k,{value:"".concat(e),children:[Math.round(100*e),"%"]},e)),"fluid"!==l.cardDimensions&&(0,s.jsx)(nq.N,{}),"fluid"!==l.cardDimensions&&(0,s.jsx)(nH.k,{value:"fit",children:u.Ru._({id:"u4iXQi"})})]})})]})})},it=e=>{let{editor:t,editorWrapperDiv:n,aspectRatioValue:i}=e,r=(0,b.u)("doc-zoom"),o=(0,b.u)("editorOnboardingFlow"),l="checklistWidget"===o;return(0,s.jsx)(nV.x,{zIndex:l?"popover":void 0,children:(0,s.jsxs)(D.B,{direction:"column",alignItems:"flex-end",children:[r&&(0,s.jsx)(ie,{editor:t,editorWrapperDiv:n,aspectRatioValue:i}),(0,s.jsxs)(D.B,{direction:"row",children:[l&&(0,s.jsx)(nM,{onEditClick:()=>{null==t||t.commands.focusDelayed()}}),(0,s.jsx)(nG.P,{showTourReplay:"originalTour"===o,showOnboardingChecklist:l})]})]})})};var ii=n(14608),ir=n(59742),is=n(9746),io=n(65446),il=n(18658),ia=n(82680),id=n(8796),ic=n(69e3),iu=n(17723),ih=n(68228),ix=n(1771),ip=n(34185),im=n(3365),ig=n(5336),ij=n(40408),iv=n(23051),ib=n(38684);let iy=p.createContext({enabled:!1,registerEditor:(e,t)=>{},getAllCards:()=>[],userMessage:"",setUserMessage:e=>{}});function iC(){return(0,p.useContext)(iy)}let iw=e=>{let{children:t}=e,n=(0,p.useRef)(new Map),i=(0,p.useRef)(""),r=(0,p.useRef)((e,t)=>{n.current.set(e,t)}),o=(0,p.useRef)(()=>Array.from(n.current.values()).map(e=>{var t,n;return null===(n=e.state.doc.firstChild)||void 0===n?void 0:null===(t=n.content.toJSON())||void 0===t?void 0:t[0]}).filter(Boolean)),l=(0,p.useCallback)(e=>{i.current=e},[]);return(0,s.jsx)(iy.Provider,{value:{enabled:!0,registerEditor:r.current,getAllCards:o.current,userMessage:i.current,setUserMessage:l},children:t})};var iE=n(45214),ik=n(96742),iS=n(76228),iI=n(80900);let iT=e=>{let{cardId:t,onClick:n}=e,i=(0,eo.GV)((0,iE.qw)(t)),r=(0,eo.GV)(el.SJ);return i?(0,s.jsxs)(D.B,{zIndex:1,mt:"4.5em",width:"180px",bg:"whiteAlpha.500",border:"1px solid",borderColor:"blackAlpha.300",borderRadius:"lg",p:4,sx:{"*":{"backdrop-filter":"none !important","-webkit-backdrop-filter":"none !important"}},children:[i.variants.map(e=>{if(!e)return null;let{label:o,card:l,id:a}=e;return(0,s.jsx)(iA,{theme:r,isSelected:i.selected===a,label:o,card:l,onClick:()=>{n({cardId:t,variationId:a})}},a)}),i.variants.length<2&&(0,s.jsx)(L.o,{children:(0,s.jsx)(t8.y,{})})]}):null},iA=e=>{let{label:t,card:n,theme:i,isSelected:r=!1,onClick:l=()=>{}}=e,a=(0,p.useMemo)(()=>(0,iI.Ol)({docFlags:{cardLayoutsEnabled:!0}},[n]),[n]);return(0,s.jsxs)(D.B,{align:"start",children:[(0,s.jsx)(o.s,{borderRadius:"md",bg:"white",shadow:r?"outline":"md",overflow:"hidden",cursor:"pointer",_hover:{bg:"trueblue.50"},transitionProperty:"common",transitionDuration:"fast",onClick:l,children:(0,s.jsx)(o.s,{sx:ij.o,css:{"--editor-font-size":"0.15rem","--editor-width":"150px"},justifyContent:"center",alignItems:"top",pointerEvents:"none",children:(0,s.jsx)(ij.S,{content:a,theme:i,isThumbnail:!0})})}),(0,s.jsxs)(z.E,{fontSize:"sm",children:[r&&(0,s.jsx)(iS.S,{boxSize:3,mr:2}),t]})]})},i_="ai-wizard-editor-root",iR=e=>{let{doc:t,cards:n,theme:i=(0,ip.N)()}=e,r=(0,ib.fS)(i),l=(0,ix.Mw)(i),a=(0,ib.FD)(r,l),d=(0,eo.jL)(),{registerEditor:c}=iC();return((0,p.useEffect)(()=>()=>{d((0,iE.cL)())},[d]),t)?(0,s.jsxs)(o.s,{bg:"gray.100",overflowY:"auto",overflowX:"hidden",justifyContent:"flex-start",alignContent:"center",alignItems:"center",alignSelf:"stretch",direction:"column",width:"100%",height:"100%",position:"relative",className:i_,...a,children:[(0,s.jsx)(iv.s,{}),n.map((e,n)=>{var i;let r=null===(i=e.attrs)||void 0===i?void 0:i.id;return r?(0,s.jsx)(iO,{doc:t,cardId:r,cardIndex:n,cardJSON:e,onCreate:e=>{c(r,e)}},r):null})]}):null},iO=e=>{let{cardId:t,cardIndex:n,cardJSON:i,doc:r,onCreate:l}=e,a=(0,eo.jL)(),[d,c]=(0,p.useState)(null),{userMessage:u}=iC(),h=(0,ik.F)({editor:d});(0,p.useEffect)(()=>{d&&h({doc:d.state.doc,cardId:t,message:u})},[h,d,t,n,u]);let x=(0,p.useMemo)(()=>(0,im.Ol)({docFlags:{cardLayoutsEnabled:!0}},[i]),[i]),m=(0,eo.GV)((0,iE.vE)(t));(0,tQ.Vg)(()=>{if(!d||!m)return;let e=(0,ty.W0)(d,t);e&&d.commands.command(t=>{let{tr:n}=t,i=ic.bP.fromJSON(d.schema,m.card);return n.replaceWith(e.pos,e.pos+e.node.nodeSize,i),!0})},[d,m,t],[m]);let f=(0,p.useCallback)(e=>{let{cardId:n,variationId:i}=e;d&&n===t&&a((0,iE.S6)({cardId:t,variantId:i}))},[a,d,t]);return(null==r?void 0:r.id)?(0,s.jsxs)(o.s,{className:"ai-variation-editor-".concat(t),alignItems:"flex-start",sx:ij.o,my:-8,children:[(0,s.jsx)(iT,{cardId:t,onClick:f}),(0,s.jsx)(ig.b,{initialContent:x,onCreate:e=>{let{editor:t}=e;c(t),l(t)},doc:r,docId:r.id,scrollingParentSelector:".".concat(i_),readOnly:!0,isStatic:!0,animationsEnabled:!1,extensions:[],shouldSupportMenus:!1})]}):null};var iD=n(90754);let iz=e=>{let{isOpen:t,onClose:n,onOpen:i}=(0,iD.E)({id:"cardSuggestionDrawer"}),r=(0,eo.GV)(el.SJ),[o]=(0,p.useState)(()=>(0,id.U1)({reducer:eo.Ki}));return(0,s.jsx)(m.Kq,{store:o,children:(0,s.jsx)(iP,{...e,isOpen:t,onClose:n,onOpen:i,theme:r})})},iP=(i=e=>{let{doc:t,editor:n,theme:i,isOpen:r,onClose:o,onOpen:l}=e,[a,d]=(0,p.useState)([]),[u,h]=(0,p.useState)(null),{getAllCards:x,setUserMessage:m}=iC(),f=(0,p.useCallback)(()=>{o(),d([]),h(null)},[o]),g=(0,p.useCallback)(()=>{if(f(),!n)return;let e={type:"document",content:x()};console.log("[handleConfirm] contentToUse",e);let t=1,i=n.state.doc.nodeSize-2,r=(0,ty.W0)(n,u);if(r){i=(t=r.pos)+r.node.nodeSize;let n=e.content.find(e=>{var t;return(null===(t=e.attrs)||void 0===t?void 0:t.id)===u});if(!n){console.warn("[handleConfirm] Count not find card to use");return}e=n}n.commands.command(r=>{let{tr:s}=r;return s.replaceRangeWith(t,i,ic.bP.fromJSON(n.schema,e)),!0})},[f,n,u,x]),j=(0,p.useCallback)(async(e,t,n)=>{l(),h(t),d(e.toJSON().content[0].content.filter(e=>{var n;return null===t||(null===(n=e.attrs)||void 0===n?void 0:n.id)===t})),m(n)},[l,m]);return(0,p.useEffect)(()=>{if(n)return ih.R.on("openSuggestionEditor",e=>{let{cardId:t,userMessage:i}=e;j(n.view.state.doc,t,i)})},[n,j]),(0,s.jsxs)(ii._,{placement:"bottom",onClose:o,isOpen:r,trapFocus:!0,isFullHeight:!0,children:[(0,s.jsx)(ir.m,{}),(0,s.jsxs)(is.z,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,s.jsx)(io.s,{zIndex:"10",backgroundColor:"white",mr:2,shadow:"md"}),(0,s.jsx)(il.c,{p:0,h:"100%",children:a.length>0&&t?(0,s.jsx)(iR,{doc:t,cards:a,theme:i}):(0,s.jsx)(iu.Yh,{})}),(0,s.jsx)(ia.j,{borderTop:"1px solid #000",borderColor:"gray.200",children:(0,s.jsxs)(tt.e,{spacing:4,children:[(0,s.jsx)(N.$,{variant:"ghost",onClick:o,children:(0,s.jsx)(c.x6,{id:"dEgA5A"})}),(0,s.jsx)(N.$,{variant:"solid",onClick:g,children:(0,s.jsx)(c.x6,{id:"7VpPHA"})})]})})]})]})},(0,p.memo)(e=>(0,s.jsx)(iw,{children:(0,s.jsx)(i,{...e})})));var iL=n(9335),iN=n(18651),iM=n(45930),iV=n(78358),iG=n(37881);let iF={src:"/_next/static/media/Sal-Fishing-2x.1a2d0290.png"};var iW=n(13166),iU=n(11718),iB=n(56005),iH=n.n(iB);let iq=e=>{let{count:t,onClose:n,commentStatusFilter:i,setCommentStatusFilter:r}=e,l=i===nw.EB6.Open?u.Ru._({id:"Kz1TxG"}):u.Ru._({id:"kywJax"});return(0,s.jsxs)(o.s,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:16,tabIndex:0,outline:"none",children:[(0,s.jsx)(o.s,{flex:1,children:(0,s.jsxs)(te.z,{spacing:4,children:[(0,s.jsx)(tz.a,{children:(0,s.jsx)(c.x6,{id:"eiUA4k",values:{count:t}})}),(0,s.jsxs)(nF.W,{closeOnSelect:!0,children:[(0,s.jsx)(nW.I,{as:N.$,size:"sm",rightIcon:(0,s.jsx)(iU.D,{}),children:iH()(l)}),(0,s.jsx)(nU.c,{zIndex:3,children:(0,s.jsxs)(nB.i,{defaultValue:i,title:u.Ru._({id:"0cVgUw"}),type:"radio",children:[(0,s.jsx)(nH.k,{onClick:()=>r(nw.EB6.Open),value:"open",children:(0,s.jsx)(c.x6,{id:"1TNIig"})}),(0,s.jsx)(nH.k,{onClick:()=>r(nw.EB6.Closed),value:"closed",children:(0,s.jsx)(c.x6,{id:"D87pha"})})]})})]})]})}),(0,s.jsx)(ek.J,{onClick:n,"data-comment-feed-close-button":!0})]})};var iK=n(39225),iJ=n(79246),iY=n(6201);let iX=e=>{let{user:t,editor:n}=e,[i,r]=(0,p.useState)(()=>{let e=(0,iJ.tq)(n,nc.S5);return e&&e.length?e[0]:(0,iJ.CD)(()=>nc.S5,n,"")});(0,p.useEffect)(()=>{if(i&&n)return()=>{var e,t;null===(e=(t=n.commands).createDraftComment)||void 0===e||e.call(t,i)}},[i,n]);let o=(0,iY.Zb)({draftComment:i,clearDraftComment(){var e,t,s,o;i&&(null===(s=(o=n.commands).removeDraftComments)||void 0===s||s.call(o,[i]));let l=(0,iJ.CD)(()=>nc.S5,n,"");null===(e=(t=n.commands).createDraftComment)||void 0===e||e.call(t,l),r(l)},editor:n}),l=(0,p.useCallback)(e=>{let{editor:t}=e;r(e=>e?{...e,json:t.view.state.doc.toJSON(),text:t.view.state.doc.textContent}:e)},[]);return(0,s.jsx)(iK.h,{draftComment:i,user:t,onCommentDraftUpdate:l,onCommentSave:o,commentIdToHighlight:null})},i$=()=>({today:u.Ru._({id:"ecUA8p"}),thisWeek:u.Ru._({id:"yByRxz"}),earlier:u.Ru._({id:"HPqZkW"})}),iZ=e=>{var t;let{onClose:n,editor:i}=e,r=(0,eo.GV)(el.Jo),{isConnected:a}=(0,g.u)(),[d,u]=(0,p.useState)(nw.EB6.Open),h=null==r?void 0:r.comments,x=null==r?void 0:null===(t=r.comments)||void 0===t?void 0:t.filter(e=>e.status===d),m=(0,eo.GV)(el.wC),f=(0,X.Iy)("comment",r)&&a,{user:v}=(0,X.ur)(),b=(0,j.h6)(r,v),y=(0,p.useMemo)(()=>(0,iW.WP)({items:x||[],sortBy:iW.VJ,latestTimeGetterFn:iW.wS}),[x]);return h&&r&&i?(0,s.jsxs)(o.s,{direction:"column",h:"100%",overflowX:"hidden",className:iM.V,w:"100%",children:[(0,s.jsx)(iq,{commentStatusFilter:d,setCommentStatusFilter:u,count:(null==x?void 0:x.length)||0,onClose:n}),(0,s.jsxs)(o.s,{direction:"column",className:"comments-list",flex:1,overflowY:"auto",tabIndex:0,outline:"none",children:[(0,s.jsx)(eq.r,{description:(0,s.jsx)(c.x6,{id:"pQvCbR"}),isConnected:a,mx:6}),b&&!v&&r&&(0,s.jsx)(iG.W,{doc:r,accessLink:b}),f&&(0,s.jsx)(l.az,{px:6,py:2,children:(0,s.jsx)(iX,{user:v,editor:i})}),!(null==x?void 0:x.length)&&(0,s.jsxs)(tA.T,{align:"center",p:6,textAlign:"center",spacing:8,children:[(0,s.jsx)(l.az,{w:"80%",maxW:"300px",mb:6,alignContent:"center",children:(0,s.jsx)(iN._,{src:iF.src,width:"640px",alt:"Sal, the Gamma mascot, fishing extraterrestrially"})}),(0,s.jsxs)(l.az,{children:[(0,s.jsx)(P.D,{size:"xs",mb:2,children:"open"===d?(0,s.jsx)(c.x6,{id:"W7i5f5"}):(0,s.jsx)(c.x6,{id:"mpDN1V"})}),(0,s.jsx)(z.E,{fontSize:"sm",children:(0,s.jsx)(c.x6,{id:"iB9OEi"})})]})]}),Object.entries(y).filter(e=>{let[,t]=e;return t.length}).map(e=>{let[t,l]=e;return(0,s.jsxs)(o.s,{direction:"column",children:[(0,s.jsx)(W._x,{px:6,pt:4,pb:2,position:"sticky",top:-2,bg:"white",zIndex:2,children:i$()[t]}),(0,s.jsx)(o.s,{direction:"column",children:l.map(e=>(0,s.jsx)(iV.h,{instanceType:"feed",userCanComment:f,editor:i,comment:e,selfUser:v,docId:null==r?void 0:r.id,editorMode:m,onClose:n,isRootComment:!0,pt:6,px:6,pb:4},e.id))})]},t)})]})]}):null},iQ=e=>{let{closePanel:t}=e,{editor:n}=(0,tT.m)();return(0,p.useEffect)(()=>{let e=e=>{let{open:n}=e;n&&t()};return iL.LF.on(iL.DN.POPUP_COMMENT_TOGGLED,e),()=>{iL.LF.on(iL.DN.POPUP_COMMENT_TOGGLED,e)}},[t]),(0,s.jsx)(tD.Z,{bgColor:"white","data-panelid":"comment-feed-panel",children:(0,s.jsx)(iZ,{onClose:t,editor:n})})};iQ.panelPosition="right",iQ.panelName="comment-feed";let i0=()=>{let{togglePanel:e,isPanelOpen:t}=eZ(iQ);return{toggleCommentsPanel:e,isCommentsPanelOpen:t}};var i1=n(12567),i6=n(53898),i2=n(34747),i5=n.n(i2),i3=n(33916),i4=n(30358);let i8=()=>{var e,t;let n=(0,eo.GV)(el.Jo),{user:i}=(0,i4.ur)(),r=(0,i4.Iy)("manage",n)&&!!i,s=null==n?void 0:null===(e=n.docGenerateInput)||void 0===e?void 0:e.docGeneration;if(n&&s&&(null===(t=n.createdBy)||void 0===t?void 0:t.id)===(null==i?void 0:i.id)&&r)return(0,w.o0)(s)};var i7=n(90290),i9=n(84607),re=n(39761),rt=n(8723);let rn=e=>{let{onClose:t}=e;return(0,s.jsxs)(D.B,{flex:1,align:"center",justify:"center",p:6,spacing:6,children:[(0,s.jsx)(iN._,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/b4b04402416f4ec8b5c1dc24f4c2a3d6/optimized/Sal-Spaceship-Riding.png",px:12}),(0,s.jsx)(rt.q,{children:(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"jVQv+Q"})})}),(0,s.jsx)(N.$,{variant:"ghost",colorScheme:"blackAlpha",leftIcon:(0,s.jsx)(F.g,{icon:G.Jyw}),onClick:t,children:(0,s.jsx)(c.x6,{id:"pqZJT2"})})]})},ri=()=>(0,s.jsxs)(i7.F,{status:"warning",mt:12,minH:20,flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",borderRadius:"lg",borderWidth:"1px",children:[(0,s.jsx)(i9.X,{children:(0,s.jsx)(c.x6,{id:"rvbk/4"})}),(0,s.jsx)(re.T,{children:(0,s.jsx)(c.x6,{id:"XNkIFY"})})]});var rr=n(76166),rs=n(63633),ro=n(81570);let rl="40px",ra=e=>{let{value:t,onChange:n,onSubmit:i,isLoading:r,editor:o,resetMessages:l}=e;(0,np.lC)(o);let{selection:a,doc:d}=o.state,h=d.textBetween(a.from,a.to,"\n"),x=(0,eH.ez)("unlimited_credits"),m=(0,p.useRef)(null),[f,g]=(0,p.useState)(!1),j=a instanceof ro.nh,v=a instanceof ro.U3,b=j&&"card"===a.node.type.name,y=a.empty||b?u.Ru._({id:"XrfE9D"}):j?u.Ru._({id:"CsUli9"}):v&&h?u.Ru._({id:"+NPPZN",values:{0:function(e,t){return e.length>50?e.slice(0,50)+"...":e}(h,0)}}):u.Ru._({id:"/fY1js"}),C=(0,p.useCallback)(()=>{m.current&&(m.current.style.height=rl,m.current.style.height="".concat(m.current.scrollHeight,"px"))},[]);return(0,p.useEffect)(()=>(o.on("selectionUpdate",C),()=>{o.off("selectionUpdate",C)}),[o,C]),(0,p.useEffect)(()=>{f?C():setTimeout(()=>{g(!0),C()},400)},[f,y,C,t]),(0,s.jsxs)(te.z,{align:"end",children:[(0,s.jsx)(rr.M,{size:"md",children:(0,s.jsx)(rs.T,{"data-gamma-child-tiptap-editor":!0,id:"ai-chat-input",h:rl,minH:rl,ref:m,resize:"none",maxH:f?32:rl,bg:"white",shadow:"md",autoFocus:!0,placeholder:y,value:t,onKeyPress:e=>{"Enter"!==e.key||!(t.length>0)||r||e.shiftKey||(e.preventDefault(),i())},onChange:e=>n(e.target.value),paddingInlineEnd:12})}),(0,s.jsx)(W.Tz,{placement:"top",label:(0,s.jsxs)(tA.T,{spacing:0,children:[(0,s.jsx)(c.x6,{id:"4k2VbT"}),!x&&(0,s.jsx)(z.E,{color:"gray.400",children:(0,s.jsx)(c.x6,{id:"jxCfNz",components:{0:(0,s.jsx)(tO.G,{type:"chatSuggestion",ml:0})}})}),(0,s.jsx)(W.iM,{shortcut:"Enter"})]}),children:(0,s.jsx)(M.K,{"aria-label":"Send message",isDisabled:!t||r,size:"sm",h:rl,w:rl,variant:"solid",icon:(0,s.jsx)(F.g,{icon:tR.fmP,fixedWidth:!0}),onClick:i})})]})};var rd=n(66113),rc=n(56897),ru=n(33e3);let rh=e=>{let{editor:t,scrollSelector:n,onClose:i}=e,[r,l]=(0,p.useState)(""),a=(0,b.u)("openAiStatus"),d=(0,eo.jL)(),u=(0,K.O2)("editor"),h=(0,eo.CU)(),x=(0,eo.GV)(rc.Lt),m=(0,eo.GV)(rc.Wp),[f,g]=(0,p.useState)(null),j=(0,p.useCallback)(()=>(0,rc.Lt)(h.getState()),[h]),v=(0,p.useCallback)(e=>{let t={timestamp:Date.now(),...e};d((0,rc.tj)({message:t}))},[d]),y=(0,p.useCallback)(()=>{d((0,rc.cL)())},[d]),{status:w,sendMessage:E}=(0,ru.g)({addMessage:v,getMessageHistory:j,editor:t});(0,p.useEffect)(()=>{let e=n&&document.querySelector(n);e&&requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight})},[n,x]);let k="idle"!==w;(0,p.useEffect)(()=>{if(!m.length||k)return;let{task:e,id:t}=m[0];!1===e.submit?l(e.message):E({message:e.message}),d((0,rc.nD)({id:t}))},[k,E,d,m]);let S=(0,p.useCallback)(()=>{if(!f||!t)return;let e=document.querySelector('[data-card-id="'.concat(f,'"]')),n=(0,K.cH)(e,100);null!=n&&n.yAxisInView||u.scrollElementIntoView({element:e})},[t,u,f]),I=(0,p.useCallback)(e=>{S(),E({message:e})},[S,E]),T=(0,p.useCallback)(()=>{I(r),l("")},[I,r]),A=(0,tK.tO)(T,"chatSuggestion",J.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_CHAT);(0,p.useEffect)(()=>{if(!t)return;let e=()=>{let e=(0,tW.hT)(t.state.doc,t.state.selection.from);e&&g(e.node.attrs.id)};return e(),t.on("selectionUpdate",e),()=>{t.off("selectionUpdate",e)}},[t]);let _=i8();return t?"DOWN"===a?(0,s.jsx)(rn,{onClose:i}):(0,s.jsxs)(o.s,{direction:"column",h:"100%",w:"100%",px:6,pb:2,children:["DEGRADED"===a&&(0,s.jsx)(ri,{}),(0,s.jsx)(rd.Mf,{scrollSelector:n,messages:x,editor:t,sendMessage:I,isLoading:k,onClose:i}),(0,s.jsxs)(D.B,{pos:"sticky",bottom:0,py:2,pt:4,bg:"gray.50",children:[(0,s.jsx)(ra,{editor:t,value:r,onChange:l,onSubmit:A,isLoading:k,resetMessages:y}),(0,s.jsx)(i3.f,{modalId:"ai-credits-modal-message-list",variant:"ghost",justify:"flex-end",segmentEvent:J.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_CHAT})]}),(0,s.jsxs)(tt.e,{position:"absolute",top:1,insetInlineStart:4,variant:"ghost",colorScheme:"blackAlpha",children:[(0,s.jsx)(W.Tz,{label:(0,s.jsx)(c.x6,{id:"5eg0kp"}),placement:"top",children:(0,s.jsx)(M.K,{color:"currentColor","aria-label":"reset-chat",icon:(0,s.jsx)(F.g,{icon:G.XAi}),onClick:y,isRound:!0})}),_&&(0,s.jsx)(W.Tz,{label:(0,s.jsx)(c.x6,{id:"pC3anp",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}}),placement:"top",children:(0,s.jsx)(M.K,{color:"currentColor","aria-label":"source-prompt",icon:(0,s.jsx)(F.g,{icon:G.LjI}),as:i5(),href:_,target:(0,C.sX)()?"_self":"_blank",isRound:!0})})]})]}):null},rx=e=>{let{onClose:t}=e;return(0,s.jsx)(o.s,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:8,tabIndex:0,outline:"none",position:"absolute",top:0,children:(0,s.jsx)(ek.J,{"data-design-partner-close-button":!0,position:"absolute",top:2,insetInlineEnd:6,zIndex:1,onClick:t})})},rp="design-partner-panel-wrapper",rm=()=>{let{togglePanel:e,isPanelOpen:t}=eZ(rf),{editor:n}=(0,tT.m)(),i=(0,b.u)("aiChat"),r=(0,eo.jL)();(0,p.useEffect)(()=>()=>{r((0,rc.cL)())},[]);let s=(0,eo.GV)(el.nD);return(0,p.useEffect)(()=>{!s&&t&&e()},[s,t,e]),(0,p.useEffect)(()=>{var e,i;n&&(null===(e=(i=n.commands).setSalOpen)||void 0===e||e.call(i,t))},[n,t]),(0,p.useEffect)(()=>{if(i)return i6.R.on("toggle",t=>{let{config:n}=t;e(n)})},[e,i]),(0,p.useEffect)(()=>{if(i)return iL.LF.on("queueDesignPartnerTask",t=>{r((0,rc.UT)({task:t})),e({disableTransition:!1,override:"open"}),console.log("queueDesignPartnerTask",t)})},[r,i,e]),(0,p.useEffect)(()=>{if(!i||!s)return;let t=(0,i1.Ay)("mod+shift+S");return e1.WC.on("keydown","DESIGN_PARTNER_PANEL",n=>!!t(n)&&(e(),!0))},[e,i,s]),{isDesignPartnerPanelOpen:t}},rf=e=>{let{closePanel:t}=e,{editor:n}=(0,tT.m)();return(0,p.useEffect)(()=>e1.WC.on("keydown","DESIGN_PARTNER_PANEL",e=>!!document.activeElement.closest('[data-panelid="design-partner-panel"]')&&"Escape"===e.key&&(t(),!0)),[t]),(0,s.jsx)(tD.Z,{bgColor:"gray.50","data-panelid":"design-partner-panel",borderInlineStartWidth:"1px",children:(0,s.jsxs)(o.s,{direction:"column",h:"100%",overflowY:"auto",overflowX:"hidden",className:rp,w:"100%",children:[(0,s.jsx)(rx,{onClose:t}),(0,s.jsx)(rh,{editor:n,scrollSelector:".".concat(rp),onClose:t})]})})};rf.panelPosition="right",rf.panelName="chat";let rg=e=>{let{disabled:t=!1,docId:n}=e;if(!t)return null;let i="https://metabase.internal.gamma.app/question/1558-workspace-lookup-by-id?org_id=none&doc_id=".concat(n);return(0,s.jsxs)(o.s,{direction:"row",bg:"red.500",color:"white",py:3,px:4,align:"center",fontSize:"sm",children:[(0,s.jsxs)(tA.T,{flex:"1",align:"start",spacing:0,children:[(0,s.jsxs)(z.E,{fontWeight:"bold",children:["This ",eu.TP," is disabled."]}),(0,s.jsx)(z.E,{opacity:"0.7",fontSize:"xs",children:"It is only visible to Gamma support personnel. For more information, check the admin site."})]}),(0,s.jsx)(N.$,{variant:"plain",size:"sm",mr:4,rightIcon:(0,s.jsx)(F.g,{icon:G.Ju_}),onClick:()=>{i&&window.open(i,"_blank")},children:"Admin page"})]})};var rj=n(78872),rv=n(27559),rb=n(31223),ry=n(21036),rC=n(87825),rw=n(59774),rE=n(96869);let rk=["90%","360px"],rS=e=>{let{onClose:t}=e,[n,i]=(0,p.useState)(!0);return(0,p.useEffect)(()=>{setTimeout(()=>{i(!1)},3e3)},[]),(0,s.jsxs)(l.az,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",p:4,w:rk,maxW:rk,position:"relative",children:[(0,s.jsx)(ek.J,{size:"md",onClick:t,position:"absolute",insetEnd:1,top:1}),(0,s.jsxs)(D.B,{direction:"row",spacing:3,justify:"center",w:"100%",alignItems:"center",children:[(0,s.jsx)(l.az,{color:"trueblue.300",children:(0,s.jsx)(F.g,{icon:rE.ArK,size:"2x",className:n?"fa-bounce":void 0})}),(0,s.jsxs)(D.B,{spacing:0,direction:"column",flex:1,textAlign:"left",children:[(0,s.jsx)(z.E,{fontSize:"sm",color:"gray.600",children:(0,s.jsx)(c.x6,{id:"eoDgVo"})}),(0,s.jsx)(z.E,{fontSize:"md",children:(0,s.jsx)(c.x6,{id:"p7dFyi"})})]})]})]})},rI="switch-from-mobile-to-desktop-toast",rT=()=>{let e=(0,eE.d)(),t=(0,eo.GV)(nf.Jo),n=(0,p.useRef)(!1),i=(0,K.O2)("editor"),[r]=(0,p.useState)(()=>(0,w.sF)().source===rw.MH),[s]=(0,p.useState)(()=>r&&(0,C.Xb)());(0,p.useEffect)(function(){if(!(0,C.Xb)()||!s)return;let t="body"===i.scrollSelector?document.documentElement:document.querySelector(i.scrollSelector),r=()=>{t&&(0,C.Xb)()&&(null==t?void 0:t.scrollTop)>=(null==t?void 0:t.scrollHeight)/4&&s&&!e.isActive(rI)&&!n.current&&(n.current=!0,e({id:rI,position:"top",render:e=>{let{onClose:t}=e;return rS({onClose:t})},isClosable:!0,duration:null,containerStyle:{minWidth:"100%",display:"flex",justifyContent:"center"}}))};return window.addEventListener("scroll",r,!0),()=>{window.removeEventListener("scroll",r,!0),e.isActive(rI)&&e.close(rI)}},[t,i.scrollSelector,s,e])};var rA=n(55640),r_=n(86074);let rR={title:(0,s.jsx)(c.x6,{id:"DD5mqk"}),description:(0,s.jsx)(c.x6,{id:"8BmWcz"}),status:"error",position:"top",isClosable:!0},rO=e=>{var t;let{doc:n,site:i,path:r}=e,o=(0,eE.d)(),a=(0,eo.jL)(),d=(0,eo.GV)(ta.aK),u=(0,r_.rB)(),[h]=(0,rA.b0Z)(),[x]=(0,rA.w$N)(),[m]=(0,rA._Su)(),f=(0,eo.GV)(ta.le),g=null==n?void 0:n.id,j=(0,tu.bO)({domain:null==i?void 0:null===(t=i.domains)||void 0===t?void 0:t[0],path:r}),v=null==i?void 0:i.id,b=(0,p.useCallback)(async()=>{if(g){if(u){o(rR);return}(0,ta.wb)(a)(!0),await (0,tu.fb)(g),await x({variables:{id:g},refetchQueries:["GetDoc","GetSite"]}).then(()=>{o({render:function(){return(0,s.jsx)(l.az,{color:"white",p:3,bg:"green.500",shadow:"md",borderRadius:"md",children:(0,s.jsxs)(te.z,{spacing:4,children:[(0,s.jsx)(l.az,{children:(0,s.jsx)(F.g,{icon:G.QRE})}),(0,s.jsx)(z.E,{fontWeight:"semibold",children:(0,s.jsx)(c.x6,{id:"V6Byuz"})}),j&&(0,s.jsx)(N.$,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:j,rightIcon:(0,s.jsx)(F.g,{icon:G.Ju_}),children:(0,s.jsx)(c.x6,{id:"Zel0o2"})}),(0,s.jsx)(ek.J,{onClick:()=>o.closeAll()})]})})},status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(e=>{o({title:(0,s.jsx)(c.x6,{id:"DD5mqk"}),status:"error",position:"top",isClosable:!0}),console.error("Error publishing site:",e.message)}).finally(()=>{(0,ta.wb)(a)(!1)})}},[a,g,u,x,o,j]);return{publishSite:(0,p.useCallback)(async()=>{if(v){if(u){o(rR);return}(0,ta.wb)(a)(!0),f&&await (0,tu.fb)(f),await h({variables:{id:v},update:(e,t)=>{let{data:n}=t,i=null==n?void 0:n.publishSite;i&&i.routes.forEach(t=>{e.updateQuery({query:rA.iVk,variables:{id:t.docId}},e=>{var n,i,r;return(e||console.log("%c Publish doc _data is undefined or null","color: red; font-size: 16px"),null==e?void 0:e.doc)?{doc:{...e.doc,publishedTime:null===(n=t.doc)||void 0===n?void 0:n.publishedTime,publishedSnapshotId:null===(i=t.doc)||void 0===i?void 0:i.publishedSnapshotId,currentSnapshotId:null===(r=t.doc)||void 0===r?void 0:r.currentSnapshotId}}:e})})}}).then(()=>{o({render:function(){return(0,s.jsx)(l.az,{color:"white",p:3,bg:"green.500",shadow:"md",borderRadius:"md",children:(0,s.jsxs)(te.z,{spacing:4,children:[(0,s.jsx)(l.az,{children:(0,s.jsx)(F.g,{icon:G.QRE})}),(0,s.jsx)(z.E,{fontWeight:"semibold",children:(0,s.jsx)(c.x6,{id:"V6Byuz"})}),j&&(0,s.jsx)(N.$,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:j,rightIcon:(0,s.jsx)(F.g,{icon:G.Ju_}),children:(0,s.jsx)(c.x6,{id:"Zel0o2"})}),(0,s.jsx)(ek.J,{onClick:()=>o.closeAll()})]})})},status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(e=>{o({title:(0,s.jsx)(c.x6,{id:"DD5mqk"}),description:(0,s.jsx)(c.x6,{id:"R4PZ4k"}),status:"error",position:"top",isClosable:!0}),console.error("Error publishing site:",e.message)}).finally(()=>{(0,ta.wb)(a)(!1)})}},[v,u,a,f,h,o,j]),publishDoc:b,isPublishing:d}};var rD=n(95953),rz=n(47019),rP=n(52509),rL=n(76406),rN=n(55729),rM=n(14643),rV=n(50080);let rG=e=>{let{onGenerateSuccess:t}=e,[n,i]=(0,p.useState)("createWithAI"),[r,o]=(0,p.useState)([]),[l,a]=(0,p.useState)(void 0),d=(0,p.useMemo)(()=>({goToScreen:(e,t)=>{a(null==t?void 0:t.generateId),o(e=>[...e,n]),i(e)},navEnabled:"createGenerate"!==n,webpageOnly:!0,skipThemeStep:!0,onGenerateSuccess:t}),[n,t]),c=(0,p.useMemo)(()=>{switch(n){case"createWithAI":return rL.m;case"createImport":return rP.D;case"createPaste":return rN.b;case"promptEditor":return function(){return(0,s.jsx)(rM.y,{id:l,children:(0,s.jsx)(rD.V,{})})};case"createGenerate":return function(){return l?(0,s.jsx)(rM.y,{id:l,children:(0,s.jsx)(rz.r,{autosetLocale:!1})}):(0,s.jsx)(rz.r,{autosetLocale:!0})};default:throw Error("invalid page")}},[l,n]);return(0,s.jsx)(rV.lW.Provider,{value:d,children:(0,s.jsx)(c,{})})},rF=e=>{let{isOpen:t,onClose:n}=e;return(0,s.jsx)(W.L8,{isDark:!1,children:(0,s.jsxs)(ii._,{isOpen:t,placement:"bottom",onClose:n,isFullHeight:!0,children:[(0,s.jsx)(ir.m,{}),(0,s.jsxs)(is.z,{h:"calc(var(--100vh) - 24px)",p:0,children:[(0,s.jsx)(io.s,{zIndex:"sticky"}),(0,s.jsx)(il.c,{p:0,children:(0,s.jsx)(rG,{onGenerateSuccess:n})})]})]})})},rW=e=>{var t;let{doc:n}=e,i=(0,Y.rd)(),r=(0,eE.d)(),o=null==n?void 0:null===(t=n.accessLinks)||void 0===t?void 0:t[0],l=(0,p.useMemo)(()=>(0,w.LN)({docTitle:null==n?void 0:n.title,docId:null==n?void 0:n.id,token:null==o?void 0:o.token,absolute:!0}),[n,null==o?void 0:o.token]),{onCopy:a}=(0,rj.i)(l),d=(0,p.useCallback)(()=>{(0,ry.d)({docId:null==n?void 0:n.id,source:"docWizardFooter",type:"tokenUrl"}),a(),r({title:(0,s.jsx)(c.x6,{id:"pQjjYo"}),status:"success",position:"top",duration:1e3,isClosable:!1})},[null==n?void 0:n.id,a,r]),u=i8();return(0,s.jsxs)(D.B,{spacing:4,textAlign:"center",children:[(0,s.jsx)(P.D,{size:"md",children:(0,s.jsx)(c.x6,{id:"bB+DHs"})})," ",(0,s.jsx)(N.$,{as:i5(),target:(0,C.sX)()?"_self":"_blank",variant:"solid",colorScheme:i?"blackAlpha":"whiteAlpha",leftIcon:(0,s.jsx)(F.g,{icon:G.QLR}),href:"/create",children:(0,s.jsx)(c.x6,{id:"xFxi2V"})}),u?(0,s.jsx)(N.$,{leftIcon:(0,s.jsx)(F.g,{icon:G.LjI}),variant:"plain",as:i5(),target:(0,C.sX)()?"_self":"_blank",href:u,children:(0,s.jsx)(c.x6,{id:"550oRP"})}):(0,s.jsx)(N.$,{leftIcon:(0,s.jsx)(F.g,{icon:G.CQO}),variant:"plain",onClick:d,children:(0,s.jsx)(c.x6,{id:"RGCCrg"})})]})},rU=()=>{let{isOpen:e,onClose:t,onOpen:n}=(0,iD.E)({id:"add-page-ai-modal"}),i=(0,eo.GV)(ta.Gd),r=(0,tu.dv)(i),{publishSite:o,isPublishing:l}=rO({site:i}),a=(0,Y.rd)();return(0,s.jsxs)(D.B,{spacing:4,textAlign:"center",children:[(0,s.jsx)(P.D,{size:"md",children:(0,s.jsx)(c.x6,{id:"bB+DHs"})}),(0,s.jsx)(N.$,{variant:"solid",colorScheme:a?"blackAlpha":"whiteAlpha",leftIcon:(0,s.jsx)(F.g,{icon:G.QLR}),onClick:n,children:(0,s.jsx)(c.x6,{id:"K3193W"})}),r&&(0,s.jsx)(N.$,{leftIcon:(0,s.jsx)(F.g,{icon:G.MNJ}),variant:"plain",onClick:o,isLoading:l,children:(0,s.jsx)(c.x6,{id:"2uGo/E"})}),(0,s.jsx)(rF,{isOpen:e,onClose:t})]})},rB=()=>(0,s.jsx)(D.B,{spacing:4,textAlign:"center",children:(0,s.jsx)(P.D,{size:"md",children:(0,s.jsx)(c.x6,{id:"v1HDJV"})})}),rH=e=>{var t,n;let{doc:i}=e,r=null==i?void 0:null===(n=i.docGenerateInput)||void 0===n?void 0:null===(t=n.docGeneration)||void 0===t?void 0:t.generationType;return i?r===nw.xbH.UploadPptV2?(0,s.jsx)(rB,{}):i.site?i.site&&!(0,C.Xb)()?(0,s.jsx)(rU,{}):null:(0,s.jsx)(rW,{doc:i}):null};var rq=n(75857),rK=n.n(rq),rJ=n(87809),rY=n.n(rJ),rX=n(30938),r$=n.n(rX),rZ=n(91656);let rQ=[{key:"content_quality",category:"content",label:(0,s.jsx)(c.x6,{id:"geq9gH"})},{key:"missing_content",category:"content",label:(0,s.jsx)(c.x6,{id:"n4zPFX"})},{key:"wrong_language",category:"content",label:(0,s.jsx)(c.x6,{id:"R2Ly6h"})},{key:"amount_of_text",category:"content",label:(0,s.jsx)(c.x6,{id:"pi+Tez"})},{key:"inaccurate_content",category:"content",label:(0,s.jsx)(c.x6,{id:"Qk+SyG"})},{key:"image_quality",category:"image",label:(0,s.jsx)(c.x6,{id:"ESjmDR"})},{key:"number_of_images",category:"image",label:(0,s.jsx)(c.x6,{id:"x6yr/9"})},{key:"layouts_and_templates",category:"layout",label:(0,s.jsx)(c.x6,{id:"5yz5Kl"})},{key:"theme_styling",category:"layout",label:(0,s.jsx)(c.x6,{id:"nTZNkL"})}],r0={key:"other",category:"other",label:(0,s.jsx)(c.x6,{id:"/IX/7x"})},r1=[{key:"missing_content",category:"content",label:(0,s.jsx)(c.x6,{id:"n4zPFX"})},{key:"inaccurate_content",category:"content",label:(0,s.jsx)(c.x6,{id:"04mUQ2"})},{key:"missing_images",category:"image",label:(0,s.jsx)(c.x6,{id:"CLDdsj"})},{key:"image_quality",category:"image",label:(0,s.jsx)(c.x6,{id:"ESjmDR"})},{key:"wrong-layout",category:"layout",label:(0,s.jsx)(c.x6,{id:"x2M7iY"})},{key:"colors-fonts",category:"layout",label:(0,s.jsx)(c.x6,{id:"nTZNkL"})},{key:"animations",category:"animations",label:(0,s.jsx)(c.x6,{id:"HgWdP3"})},{key:"import_speed",category:"performance",label:(0,s.jsx)(c.x6,{id:"YJPN3F"})},{key:"too-similar",category:"layout",label:(0,s.jsx)(c.x6,{id:"R5upbf"})}],r6=e=>{let{docId:t,isDark:n,generationType:i,interactionId:r}=e,o=(0,p.useMemo)(()=>{let e=i===nw.xbH.UploadPptV2?r1:rQ;return rK()(r$()(rY()(r$()(e),"category"))).concat([r0])},[i]),l=(0,p.useCallback)(e=>{(0,tq.xN)({rating:e,doc_id:t,interactionId:r,generationType:i})},[t,i,r]),a=(0,p.useCallback)((e,n,s)=>{(0,tq.EQ)({feedback:n,tags:s,rating:e,doc_id:t,generationType:i,interactionId:r})},[t,i,r]);return(0,s.jsx)(rZ.No,{feedbackTags:o,trackRating:l,trackFeedback:a,isDark:n})};var r2=n(79690),r5=n(83479),r3=n(43125);let r4=e=>{let[t]=(0,p.useState)(()=>(0,w.sF)()[e]);return(0,p.useEffect)(()=>{setTimeout(()=>{(0,r5.g5)({query:{...(0,w.sF)(),[e]:void 0},emitChange:!1})})},[]),t},r8=e=>{var t,n,i,r;let{editor:s}=e,o=(0,b.u)("editorOnboardingFlow"),l=(0,b.FY)(),a=s&&null!==(i=null===(t=(0,r3.lI)(s))||void 0===t?void 0:t.generateInfo)&&void 0!==i?i:{},d=r4("source"),c=(0,eo.GV)((0,es.A0)(null==s?void 0:s.gammaDocId)),u=null,h=!0,{user:x}=(0,X.ur)(),m=null==x?void 0:null===(n=x.settings)||void 0===n?void 0:n.needsEditorOnboarding;return(0,p.useEffect)(()=>{m&&d===rw.MH&&S.emit("triggerOnboarding",{reason:"aiGenerate"})},[m,d]),m&&l&&"checklistWidget"===o&&d===rw.MH?h=!1:d===rw.MH?c&&("complete"===c.status||"error"===c.status)&&(u=c.id,h=!0):d===r2.p&&(h=!0,u=null!==(r=a.interactionId)&&void 0!==r?r:null),{showDocWizardFooter:h,source:d,interactionId:u}},r7=(0,p.memo)(e=>{var t,n,i;let{interactionId:r}=e,l=(0,eo.GV)(nf.Jo),a=(0,Y.rd)(),d=null==l?void 0:null===(n=l.docGenerateInput)||void 0===n?void 0:null===(t=n.docGeneration)||void 0===t?void 0:t.generationType,[u,h]=(0,p.useState)(!1),x=(0,eE.d)(),m=null==l?void 0:null===(i=l.accessLinks)||void 0===i?void 0:i[0],f=(0,p.useMemo)(()=>(0,w.LN)({docTitle:null==l?void 0:l.title,docId:null==l?void 0:l.id,token:null==m?void 0:m.token,absolute:!0}),[l,null==m?void 0:m.token]),{onCopy:g}=(0,rj.i)(f);(0,p.useCallback)(()=>{(0,ry.d)({docId:null==l?void 0:l.id,source:"docWizardFooter",type:"tokenUrl"}),g(),x({title:(0,s.jsx)(c.x6,{id:"pQjjYo"}),status:"success",position:"top",duration:1e3,isClosable:!1})},[null==l?void 0:l.id,g,x]);let j=(0,p.useCallback)(()=>{h(!0)},[]);i8();let v=a?{background:"gray.900",color:"white",borderTop:"2px solid var(--chakra-colors-whiteAlpha-200)"}:{background:"white",color:void 0,borderTop:"2px solid var(--chakra-colors-blackAlpha-200)"};return l?(0,s.jsx)(W.L8,{isDark:a,children:(0,s.jsx)(o.s,{className:"chakra-dont-set-collapse","data-doc-wizard-footer":!0,w:"100%",mt:(0,C.Xb)()?void 0:"-".concat(rC.C),children:(0,s.jsx)(rv.S,{in:!u,style:{width:"100%"},unmountOnExit:!0,children:(0,s.jsx)(o.s,{pt:[10,10,20],pb:[4,4,8],w:"100%",position:"relative",...v,children:(0,s.jsx)(rb.m,{maxW:"450px",children:(0,s.jsxs)(D.B,{spacing:8,children:[(0,s.jsx)(rH,{doc:l}),(0,s.jsx)(r6,{docId:l.id,isDark:a,interactionId:r,generationType:d}),(0,s.jsx)(L.o,{pt:[0,0,4],w:"100%",children:(0,s.jsx)(N.$,{size:"sm",onClick:j,variant:"text",colorScheme:"blackAlpha",children:(0,s.jsx)(c.x6,{id:"vLyv1R"})})})]})})})})})}):null});r7.displayName="DocWizardFooterInner";let r9=e=>{let{editor:t}=e;rT();let{showDocWizardFooter:n,interactionId:i}=r8({editor:t});return n&&i?(0,s.jsx)(r7,{interactionId:i}):null};var se=n(82451),st=n.n(se),sn=n(36506);let si=e=>{let{onCloneClick:t,onSignupClick:n,isLoggedIn:i}=e;return(0,s.jsx)(l.az,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",display:"column",p:4,position:"relative",children:i?(0,s.jsxs)(te.z,{children:[(0,s.jsxs)(z.E,{mr:1,children:[(0,s.jsx)(c.x6,{id:"HMsJrS",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP},components:{0:(0,s.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,s.jsx)(N.$,{variant:"solid",onClick:t,children:(0,s.jsx)(c.x6,{id:"he3ygx"})})]}):(0,s.jsxs)(te.z,{children:[(0,s.jsxs)(z.E,{mr:1,children:[(0,s.jsx)(c.x6,{id:"FEyEJk",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP,GAMMA_PROPER_NOUN:eu.On},components:{0:(0,s.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,s.jsx)(i5(),{href:"/signup",passHref:!0,legacyBehavior:!0,children:(0,s.jsx)(N.$,{as:nT.N,onClick:n,variant:"solid",textDecoration:"none !important",children:(0,s.jsx)(c.x6,{id:"e+RpCP"})})})]})})},sr=e=>{let t=!(0,C.Xb)(),{user:n}=(0,X.ur)(),i=(0,eE.d)(),r=(0,p.useRef)(),s=(0,sn.Z)(),o=(0,p.useCallback)(()=>{e&&(null===J.zS||void 0===J.zS||J.zS.track(J.VV.EXAMPLE_SIGNUP_CLICKED,{doc_id:e.id,title:e.title}))},[e]),l=(0,p.useCallback)(()=>{s({docId:null==e?void 0:e.id,docTitle:null==e?void 0:e.title,source:"example_deck_clone_toast"})},[e,s]);(0,p.useEffect)(()=>()=>{r.current&&i.close(r.current)},[i]);let a=t&&e,d=!!n;(0,tQ.Vg)(()=>{r.current&&i.close(r.current),a&&(r.current=i({position:"bottom",render:()=>si({onCloneClick:l,isLoggedIn:d,onSignupClick:o}),isClosable:!0,duration:null}))},[e,t,l,o,a,n,i,d],[a,d])};var ss=n(51183),so=n(43167),sl=n(45760);let sa="sessionId1",sd=tj.YY.create({addStorage:()=>({user:{}}),addCommands(){return{user:e=>()=>{let t=(0,eo.KA)();return this.storage.user=st()({},this.storage.user,e),t.dispatch((0,el.vK)({sessionId:sa})),t.dispatch((0,el._)({collaborators:[this.storage.user]})),!0}}}}),sc=e=>{var t;let{docId:n,snapshotId:i,scrollingParentSelector:r,onCreate:a}=e,d=(0,eo.GV)(nf.Jo);sr(d);let[c]=(0,p.useState)(()=>[nt.Q,so.Li.configure({scrollerSelector:r}),sd,ss.wg]),{user:u,anonymousUser:h,isUserLoading:x,color:m}=(0,X.ur)(),[f,g]=(0,p.useState)(),{data:j,loading:v,error:b}=(0,nw.YDl)({variables:{docId:n,snapshotId:i},skip:!i});(0,p.useEffect)(()=>{!x&&f&&f.commands.user({id:(null==u?void 0:u.id)||h.id,color:m.value,sessionId:sa,idleSince:null,name:(null==u?void 0:u.displayName)||h.displayName||"",profileImageUrl:(null==u?void 0:u.profileImageUrl)||"",isReady:!x})},[f,u,m,x,h]);let y=j&&void 0!==j.snapshot&&!v&&d;return(0,s.jsxs)(l.az,{"data-testid":"example-static-editor-wrapper",flex:"1",height:"100%",children:[!y||b?(0,s.jsxs)(o.s,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!y&&(0,s.jsx)(t8.y,{}),b&&(0,s.jsxs)(L.o,{h:"100%",children:["There was an error loading this ",eu.TP,":"," ",b.message]})]}):(0,s.jsx)(l.az,{"data-testid":"example-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:y?1:0,children:(0,s.jsx)(th.bw,{doc:d,editorId:"main",docId:n,extensions:c,onCreate:e=>{let{editor:t}=e;g(t),setTimeout(()=>{a&&a(t)},10)},readOnly:!0,initialContent:null===(t=j.snapshot)||void 0===t?void 0:t.content.default,scrollingParentSelector:r})}),(0,s.jsx)(sl.d,{forceShow:!0,abuseReportingEnabled:!1})]})};var su=n(14979);let sh=e=>{var t;let{site:n}=e,i=null==n?void 0:null===(t=n.currentDeployment)||void 0===t?void 0:t.deploymentTime,r=(0,p.useMemo)(()=>({fromNow:(0,su.Gx)(i),calendar:(0,su.Yq)(i,"PPpp")}),[i]);return(0,s.jsx)(c.x6,{id:"ay/UB+",values:{0:r.fromNow},components:{0:(0,s.jsx)(W.Tz,{label:r.calendar,placement:"top",shouldWrapChildren:!0}),1:(0,s.jsx)(z.E,{as:"span",cursor:"pointer",style:{textDecoration:"underline"}})}})},sx=e=>{let t=(0,eo.GV)(ta.Gd),n=(0,tu.m8)(t),i=!(0,tu.dv)(t),r=(0,eo.GV)(ta.Tx),o=(0,eo.GV)(ta.vP),{icon:l,text:a,color:d}=(0,p.useCallback)(()=>e?{icon:(0,s.jsx)(F.g,{icon:G.z1G,height:13,width:13}),text:(0,s.jsx)(c.x6,{id:"mkk40+"}),color:"gray.500"}:i?{icon:(0,s.jsx)(F.g,{icon:G.DW4,height:13,width:13}),text:(0,s.jsx)(c.x6,{id:"r5OY1d"}),color:"gray.500"}:n?r>0||o?{icon:(0,s.jsx)(F.g,{icon:G.ijf,height:13,width:13}),text:(0,s.jsx)(c.x6,{id:"eVV2pl"}),color:"orange.500"}:{icon:(0,s.jsx)(F.g,{icon:G.vBH,height:13,width:13}),text:(0,s.jsx)(c.x6,{id:"Rgbxkx"}),color:"green.500"}:{icon:(0,s.jsx)(F.g,{icon:G.Bwz,height:13,width:13}),text:(0,s.jsx)(c.x6,{id:"tpB6bH"}),color:"gray.700"},[e,i,n,r,o])(),u=e?null:i?(0,s.jsx)(c.x6,{id:"u8Rqhk"}):!1===n?(0,s.jsx)(c.x6,{id:"Ys0XoA"}):r>0||o?(0,s.jsx)(c.x6,{id:"Ys0XoA"}):null,h=!1===i&&!e;return{statusText:a,statusIcon:l,statusColor:d,detailText:u,needsPublish:!n||o||r>0,lastPublishedTime:t?(0,s.jsx)(sh,{site:t}):null,publishEnabled:h}},sp=e=>{let{context:t,openSiteSettings:n}=e,i=(0,eo.GV)(ta.Gd),r=(0,r_.Gx)(),{publishSite:o,isPublishing:l}=rO({site:i}),{statusText:a,detailText:d,needsPublish:u,publishEnabled:h}=sx(l),x=(0,_.dU)(!1,!0);return("pages"!==t||u||l)&&r&&i&&(0,tu.dv)(i)?(0,s.jsx)(rb.m,{px:0,children:(0,s.jsxs)(D.B,{w:"100%",bg:x?"gray.800":"gray.50",borderRadius:"md",p:4,align:"pages"===t?"stretch":"center",direction:"pages"===t?"column":"row",spacing:"pages"===t?3:1,children:[(0,s.jsxs)(tA.T,{spacing:0,color:x?"gray.200":void 0,textAlign:"pages"===t?"center":"left",align:"pages"===t?"center":"start",children:[(0,s.jsx)(z.E,{fontWeight:"500",fontSize:"sm",children:a}),d&&(0,s.jsx)(z.E,{fontSize:"xs",textColor:"gray.500",css:{textWrap:"balance"},children:d})]}),"pages"!==t&&(0,s.jsx)(t_.h,{}),(0,s.jsx)(N.$,{flexShrink:"0",size:"sm",variant:"solid",leftIcon:(0,s.jsx)(F.g,{icon:G.MNJ}),isDisabled:!h,onClick:o,isLoading:l,children:(0,s.jsx)(c.x6,{id:"1EeNDU"})}),"pages"===t&&(0,s.jsx)(N.$,{textAlign:"left",color:x?"trueblue.200":"trueblue.600",variant:"link",size:"sm",onClick:n,flex:1,children:(0,s.jsx)(c.x6,{id:"WtsmDd"})})]})}):null};var sm=n(33683),sf=n(20731),sg=n(48637),sj=n(18588),sv=n(97482),sb=n(34363);let sy=e=>{var t;let{onClose:n,isOpen:i,site:r}=e,{replace:l}=(0,tn.useRouter)(),a=(0,eE.d)(),[d,{data:u,loading:h}]=(0,nw.GBQ)(),x=null==u?void 0:null===(t=u.archiveSite)||void 0===t?void 0:t.archived,m=(0,p.useCallback)(async()=>{if(null==r?void 0:r.id)try{await d({variables:{id:null==r?void 0:r.id}}),n()}catch(e){console.error("[DeleteGammaModal] Failed to archive site",e.message),a({title:(0,s.jsx)(c.x6,{id:"aBvGpM"}),description:(0,s.jsx)(c.x6,{id:"DVB9Jq"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}},[d,null==r?void 0:r.id,a]);return((0,p.useEffect)(()=>{x&&(n(),l("/#sites"),a({title:(0,s.jsx)(c.x6,{id:"oGP1Fe"}),description:(0,s.jsx)(c.x6,{id:"sqh0jP"}),status:"success",duration:5e3,isClosable:!0,position:"top"}))},[x,n,l,a,r]),h||x)?(0,s.jsx)(I.Z,{children:(0,s.jsx)(o.s,{w:"100%",h:"100%",zIndex:"overlay",position:"absolute",top:"0",left:"0",background:"whiteAlpha.800",flex:1,children:(0,s.jsx)(iu.Yh,{})})}):(0,s.jsxs)(sj.aF,{onClose:n,isOpen:i,size:"lg",children:[(0,s.jsx)(ir.m,{}),(0,s.jsxs)(sv.$,{children:[(0,s.jsx)(sb.r,{children:(0,s.jsx)(c.x6,{id:"cw2uO1",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}})}),(0,s.jsx)(io.s,{isDisabled:h}),(0,s.jsx)(il.c,{children:(0,s.jsxs)(D.B,{spacing:4,children:[(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"87gjhX",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}})}),(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"tOGRxi",values:{0:(null==r?void 0:r.name)?'"'.concat(null==r?void 0:r.name,'"'):""}})}),(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"MluQ97",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:eu.Ix},components:{0:(0,s.jsx)(nT.N,{color:"trueblue.500",colorScheme:"trueblue",href:"/#trash",textDecoration:"underline",isExternal:!0}),1:(0,s.jsx)(nR.p,{mx:"2px"})}})})]})}),(0,s.jsx)(ia.j,{children:(0,s.jsxs)(tt.e,{children:[(0,s.jsx)(N.$,{variant:"ghost",onClick:n,children:(0,s.jsx)(c.x6,{id:"dEgA5A"})}),(0,s.jsx)(N.$,{variant:"ghost",color:"red.600",onClick:m,isLoading:h,children:(0,s.jsx)(c.x6,{id:"cnGeoo"})})]})})]})]})},sC=e=>{let{site:t}=e,{isOpen:n,onOpen:i,onClose:r}=(0,ez.j)({id:"trash-site-modal"}),[o]=(0,nw.BL9)(),l=(0,r_.Gx)(),a=null==t?void 0:t.archived,d=(0,p.useCallback)(()=>{(null==t?void 0:t.id)&&o({variables:{id:t.id},optimisticResponse:{unarchiveSite:{id:t.id,__typename:"Site"}}})},[null==t?void 0:t.id,o]);return l&&t?a?(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{fixedWidth:!0,icon:tR.ub2}),onClick:d,children:(0,s.jsx)(c.x6,{id:"yKu/3Y"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sm.D,{color:"red.500",icon:(0,s.jsx)(F.g,{fixedWidth:!0,icon:G.yLS}),onClick:()=>{i()},children:(0,s.jsx)(c.x6,{id:"NOLglc",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}})}),n&&(0,s.jsx)(sy,{isOpen:n,onClose:r,site:t})]}):(0,s.jsx)(s.Fragment,{})},sw=e=>({[tC.w.DOC_VIEW]:{buttonLabel:"present"===e?(0,s.jsx)(c.x6,{id:"eZb+lw"}):(0,s.jsx)(c.x6,{id:"rdUucN"}),shortcutIcon:tR.ijD,shortcutKeys:(0,W.lp)("Mod+Enter"),shortcutLabel:"present"===e?(0,s.jsx)(c.x6,{id:"MF+p5R"}):(0,s.jsx)(c.x6,{id:"V76CPb"})},[tC.w.SLIDE_VIEW]:{buttonLabel:(0,s.jsx)(c.x6,{id:"ydzS9x"}),shortcutIcon:tR.APi,shortcutKeys:"Esc",shortcutLabel:(0,s.jsx)(c.x6,{id:"IkakN2"})},[tC.w.DOC_PREVIEW]:{buttonLabel:(0,s.jsx)(c.x6,{id:"ydzS9x"}),shortcutIcon:tR.APi,shortcutKeys:"Esc",shortcutLabel:(0,s.jsx)(c.x6,{id:"nN6ipi"})}});var sE=n(78141),sk=n(73524),sS=n(59025),sI=n(69646),sT=n(46896),sA=n(45864);let s_=(0,i1.Ay)("mod+Enter"),sR=(0,i1.Ay)("Esc"),sO=(0,i1.Ay)("mod+Esc"),sD=(0,i1.Ay)("shift+mod+Enter"),sz=e=>function(t){t((0,el.mF)({attached:!1})),t((0,el.iY)({mode:e}))},sP=(e,t)=>{let n=document.querySelector(t);if(!n)return;let i=n.getBoundingClientRect();e.commands.scrollToNodeWithPin(document.elementFromPoint(i.width/2,100),100)},sL=e=>{let{editorWrapperEl:t,scrollingParentSelector:n}=e,i=(0,eo.jL)(),[r,s]=(0,p.useState)(!1),[o,l]=(0,p.useState)(!1),{editor:a}=(0,t4.mi)(),d=(0,eo.GV)(el.wC),c=(0,p.useRef)(d);(0,p.useEffect)(()=>{c.current=d},[d]);let u=(0,eo.GV)(el.Zi),h=(0,eo.GV)(el.QF),x=(0,eo.GV)(sk.AO),m=(0,J.st)(),f=(0,p.useCallback)(e=>{a&&!a.isDestroyed&&(e===tC.w.SLIDE_VIEW?((0,sI.jL)(a.state.doc,i),(0,sT.Hy)(a,!1),a.commands.spotlightCurrentCard()):(a.commands.turnOffSpotlight(!0),sP(a,n)),i(sz(e)))},[i,a,n]),g=(0,p.useCallback)(()=>{try{var e,t,n,i;if(null===(e=document.body)||void 0===e?void 0:e.requestFullscreen){null===(n=document.body)||void 0===n||n.requestFullscreen();return}(null===(t=document.body)||void 0===t?void 0:t.webkitRequestFullscreen)&&(null===(i=document.body)||void 0===i||i.webkitRequestFullscreen())}catch(e){console.debug("[PresentBlock] Error entering fullscreen:",e)}},[]),j=(0,p.useCallback)(()=>{try{if(document.fullscreenElement){document.exitFullscreen();return}document.webkitCurrentFullScreenElement&&document.webkitExitFullscreen&&document.webkitExitFullscreen()}catch(e){console.debug("[PresentBlock] Error exiting fullscreen:",e)}},[]),y=(0,b.u)("realUserMetrics"),{recordExitSlideModePerformance:C,recordEnterSlideModePerformance:w}=(0,sS.td)(y),E=(0,p.useCallback)(e=>{let{fullscreen:t=!1,presentAction:n="present"}=e;c.current!==tC.w.SLIDE_VIEW&&(f("preview"===n?tC.w.DOC_PREVIEW:tC.w.SLIDE_VIEW),t&&g(),null==m||m.trackDocEvent(J.VV.PRESENT_MODE_ENTERED,{presentAction:n}),w({isFullscreen:t}),i((0,el.Ye)({zoomLevel:1})),setTimeout(()=>{document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()}))},[f,g,m,w,i]),k=(0,p.useCallback)(()=>{c.current!==tC.w.DOC_VIEW&&(v.R.emit("isInOnboardingChecklistPresentMode",!1),f(tC.w.DOC_VIEW),r&&j(),null==m||m.trackDocEvent(J.VV.PRESENT_MODE_EXITED),C({isFullscreen:r}))},[f,r,j,C,c,m]);return(0,p.useEffect)(()=>{let e=()=>{null!==document.fullscreenElement||o||k(),null!==document.webkitCurrentFullScreenElement||o||k(),s(e=>!e),l(!1)};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e)}},[o,k,j]),(0,sE.w)(()=>{a&&!a.isDestroyed&&d===tC.w.DOC_VIEW&&requestAnimationFrame(()=>{let e=a.state.selection;e instanceof sA.J&&a.commands.command(t=>{let{tr:n}=t;return n.setSelection(e.createSelectionNear()),!0})})},[a,d]),(0,p.useEffect)(()=>e1.WC.on("keydown","PRESENT_BLOCK",e=>{var t,n,i;let r=c.current===tC.w.SLIDE_VIEW,s=c.current===tC.w.DOC_VIEW;if(!x){if(s_(e)){if(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),E({fullscreen:!1}),!0}if(sD(e)){if(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),E({fullscreen:!0}),!0}if(sO(e)&&r)return k(),!0;if(sR(e)&&!s&&!u&&!h){if(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.closest("[data-gamma-child-tiptap-editor]"))return;return k(),!0}}}),[E,k,g,u,h,t,x]),{enterSlideView:E,exitSlideView:k,enterFullscreen:g,exitFullscreen:j,exitedFullscreenByClick:o,isFullscreen:r,setIsFullscreen:s,setExitedFullscreenByClick:l}},sN=e=>{let{editorWrapperEl:t,scrollingParentSelector:n}=e,i=(0,eo.GV)(el.wC),r=(0,b.u)("presentFullScreen"),{shortcutIcon:o,shortcutKeys:l,buttonLabel:a}=sw("present")[i],{enterSlideView:d,exitSlideView:c}=sL({editorWrapperEl:t,scrollingParentSelector:n});return(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:o,fixedWidth:!0}),command:l,onClick:()=>{i===tC.w.SLIDE_VIEW?c():d({fullscreen:r,presentAction:"present"})},children:a})};var sM=n(70323),sV=n(78776),sG=n(62230),sF=n(49614),sW=n(10628);let sU="gray.700";var sB=n(69648);let sH=e=>{let{error:t,refetch:n,...i}=e;return(0,s.jsx)(l.az,{px:6,py:4,...i,children:(0,s.jsxs)(i7.F,{p:6,status:"error",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",children:[(0,s.jsx)(sB._,{mr:0,boxSize:"30px",alignSelf:"center"}),(0,s.jsx)(i9.X,{mt:4,mb:2,fontSize:"md",children:(0,s.jsx)(c.x6,{id:"uNQm3r"})}),(0,s.jsx)(re.T,{maxWidth:"md",children:t.message}),(0,s.jsx)(N.$,{mt:4,onClick:()=>n(),children:(0,s.jsx)(c.x6,{id:"6gRgw8"})})]})})};var sq=n(28478);let sK=()=>u.Ru._({id:"QbrUIo"}),sJ=()=>u.Ru._({id:"FbBkvL"}),sY=e=>{let{isAnalyticsLoading:t,hasError:n,view:i,setView:r,description:l}=e;return n?(0,s.jsx)(sb.r,{children:(0,s.jsx)(c.x6,{id:"ZlwDi6"})}):(0,s.jsxs)(o.s,{direction:"column",flex:1,children:[(0,s.jsx)(sb.r,{children:t?(0,s.jsx)(sX,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.x6,{id:"ZlwDi6"}),(0,s.jsxs)(tA.T,{align:"stretch",spacing:4,children:[(0,s.jsx)(z.E,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:l}),(0,s.jsxs)(sq.B,{children:[(0,s.jsx)(sq.Q,{children:(0,s.jsx)(N.$,{leftIcon:(0,s.jsx)(F.g,{icon:tR.q9c,"aria-label":sK()}),variant:"ghost",fontWeight:"600",bg:"deckView"===i?"trueblue.50":"transparent",color:"deckView"===i?"trueblue.500":sU,onClick:()=>r("deckView"),children:sK()})}),(0,s.jsx)(sq.Q,{children:(0,s.jsx)(N.$,{leftIcon:(0,s.jsx)(F.g,{icon:tR.Mkm,"aria-label":sJ()}),variant:"ghost",fontWeight:"600",bg:"cardEngagement"===i?"trueblue.50":"transparent",color:"cardEngagement"===i?"trueblue.500":sU,onClick:()=>r("cardEngagement"),children:sJ()})})]})]})]})}),(0,s.jsx)(io.s,{})]})},sX=()=>(0,s.jsxs)(tA.T,{align:"stretch",spacing:4,children:[(0,s.jsx)(sG.E,{h:12,width:"30%"}),(0,s.jsx)(sG.E,{h:4,width:"80%"})]});var s$=n(1602),sZ=n.n(s$),sQ=n(39402);let s0=e=>{let{degree:t,alpha:n=1,startColor:i="#ECC94B",endColor:r="#38A169"}=e;if(Number.isNaN(t))return sZ()("#e5e0df").toHex8String();let s=sZ()(i).toHsl(),o=sZ()(r).toHsl();return sZ()({h:(0,sQ.Cc)(s.h,o.h,t),s:(0,sQ.Cc)(s.s,o.s,t),l:(0,sQ.Cc)(s.l,o.l,t),a:n}).toHex8String()},s1=(e,t)=>e.reduce((e,n)=>(e[n.cardId]=n[t],e),{}),s6=(e,t)=>{let n=0;for(let r in e){var i;n+=null!==(i=t[r])&&void 0!==i?i:0,n+=s6(e[r],t)}return n},s2=(e,t)=>{let n=0;for(let r in e){var i;n=Math.max((null!==(i=t[r])&&void 0!==i?i:0)+s6(e[r],t),n)}return n};var s5=n(39324),s3=n.n(s5);let s4=e=>{let{cardsViewed:t,totalCards:n}=e,i=s0({degree:t/n}),r=n>0;return(0,s.jsxs)(te.z,{spacing:3,children:[(0,s.jsxs)(o.s,{flex:1,position:"relative",children:[(0,s.jsx)(er.k,{h:4,flex:1,borderRadius:"sm",value:t,max:r?n:void 0,bg:"gray.200",sx:{"> div":{bg:i}}}),r&&t===n&&(0,s.jsx)(s7,{top:0,right:0,transform:"translate(50%,-50%)",position:"absolute"})]}),(0,s.jsx)(z.E,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",children:r?"".concat(t,"/").concat(n):(0,s.jsx)(c.x6,{id:"8Va3Pt"})})]})},s8=e=>{let{cardCount:t}=e,n=(0,p.useMemo)(()=>s3()(1,t),[t]);return(0,s.jsxs)(te.z,{spacing:3,filter:"blur(3px)",children:[(0,s.jsx)(o.s,{flex:1,position:"relative",children:(0,s.jsx)(er.k,{h:4,flex:1,borderRadius:"sm",value:n,max:t,bg:"gray.300",sx:{"> div":{bg:"gray.300"}}})}),(0,s.jsxs)(z.E,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",color:"gray.600",children:[n,"/",t]})]})},s7=e=>{let{...t}=e;return(0,s.jsx)(l.jl,{bg:"green.500",size:"18px",border:"2px solid white",color:"white",...t,children:(0,s.jsx)(F.g,{icon:tR.e68,"aria-label":u.Ru._({id:"y886Ns"}),size:"xs"})})},s9=e=>t=>(0,sQ.Cc)(0,100,t/e),oe=e=>{let{cards:t,isColorized:n=!1,scaleToMax:i=!1,includeChildren:r,showViewersPercent:o=!1,leftLabel:a,rightLabel:d,tooltipLabel:c,cardLookupTable:u,onAnalyticsPanelClose:h}=e,x=s9(r?s2(t,u):Math.max(...Object.values(u))),m=(0,p.useCallback)(e=>x(e),[x]);return(0,s.jsxs)(l.az,{mt:6,mb:4,children:[(0,s.jsxs)(te.z,{mb:3,children:[(0,s.jsx)(te.z,{children:(0,s.jsx)(W._x,{children:a})}),(0,s.jsx)(t_.h,{}),(0,s.jsx)(te.z,{children:(0,s.jsx)(W.Tz,{placement:"top",label:c,children:(0,s.jsx)(te.z,{children:(0,s.jsx)(W._x,{borderBottom:"0.125em dashed",borderBottomColor:"gray.400",children:d})})})})]}),(0,s.jsx)(l.az,{width:"100%",children:Object.entries(t).map(e=>{var t;let[l,a]=e;return(0,s.jsx)(ot,{id:l,childCards:a,percentage:null!==(t=u[l])&&void 0!==t?t:0,calculatePercentageScale:m,isColorized:n,cardLookupTable:u,scaleToMax:i,includeChildren:r,showViewersPercent:o,onAnalyticsPanelClose:h},l)})})]})},ot=e=>{let{id:t,cardLookupTable:n,childCards:i,percentage:r,calculatePercentageScale:a,isColorized:d,scaleToMax:u,includeChildren:h,showViewersPercent:x,onAnalyticsPanelClose:m}=e,[f,g]=(0,p.useState)(!1),j=(0,p.useCallback)(()=>{g(!f)},[f]),{title:v}=(0,tM.d)({cardId:t}),b=Object.values(i).length>0,y=0===r,C=h?r+s6(i,n):r,w=f?C:0,E=u?a(C):Math.min(100,w),k=f?r:C,S=u?a(k):Math.min(100,k),I={startColor:"#F6AD55",endColor:"#68D391"},T=d?s0({degree:E/100,...I}):"trueblue.50",A=d?s0({degree:S/100,...I}):"trueblue.100";return(0,s.jsxs)(D.B,{children:[(0,s.jsx)(o.s,{direction:"column",children:(0,s.jsxs)(o.s,{h:8,px:2,bg:"gray.100",borderRadius:"md",position:"relative",overflow:"hidden",alignItems:"center",_focusWithin:{shadow:"outline"},children:[(0,s.jsxs)(te.z,{pos:"absolute",zIndex:1,children:[b&&(0,s.jsx)(M.K,{"aria-label":"expand-card",size:"xs",variant:"ghost",isRound:!0,colorScheme:"blackAlpha",icon:(0,s.jsx)(F.g,{icon:G.XkK}),transform:f?"rotate(90deg)":"",onClick:j,_focus:{shadow:"none"}}),!b&&(0,s.jsx)(o.s,{w:6,justifyContent:"center",alignItems:"center",children:y?(0,s.jsx)(W.Tz,{label:(0,s.jsx)(c.x6,{id:"s+PDNe"}),children:(0,s.jsx)(l.az,{color:"blackAlpha.500",children:(0,s.jsx)(F.g,{icon:tR.k6j,size:"sm"})})}):(0,s.jsx)(l.az,{color:"blackAlpha.300",fontSize:"xx-small",children:(0,s.jsx)(F.g,{icon:tR.ZPt,size:"sm"})})}),(0,s.jsx)(z.E,{color:y?"blackAlpha.500":void 0,noOfLines:1,children:v||(0,s.jsx)(c.x6,{id:"wja8aL"})})]}),(0,s.jsxs)(l.az,{position:"absolute",w:"100%",height:"100%",top:0,left:0,pointerEvents:"none",children:[(0,s.jsx)(l.az,{position:"absolute",h:"100%",bg:y?"blackAlpha.200":T,w:"".concat(E,"%")}),(0,s.jsx)(l.az,{transitionProperty:"all",transitionDuration:"normal",position:"absolute",h:"100%",bg:y?"blackAlpha.300":A,w:"".concat(S,"%")})]}),d&&100===r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t_.h,{}),(0,s.jsx)(s7,{alignSelf:"center",zIndex:1})]})]})}),(0,s.jsx)(l.az,{pl:8,children:b&&Object.entries(i).map(e=>{var t;let[i,r]=e;return(0,s.jsx)(rv.S,{in:f,children:(0,s.jsx)(ot,{id:i,childCards:r,percentage:null!==(t=n[i])&&void 0!==t?t:0,cardLookupTable:n,calculatePercentageScale:a,scaleToMax:u,isColorized:d,includeChildren:h,showViewersPercent:x,onAnalyticsPanelClose:m})},i)})})]})},on=()=>(0,s.jsx)(D.B,{spacing:2,children:(0,s.jsx)(c.x6,{id:"QXJTby",components:{0:(0,s.jsx)(z.E,{}),1:(0,s.jsx)(z.E,{}),2:(0,s.jsx)(z.E,{})}})}),oi=e=>{let{timeInMS:t}=e;return void 0===t?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(c.x6,{id:"yXHI9B",values:{timeInSeconds:t/1e3}})},or=(e,t)=>"viewTimePercent"===e?{chartDescription:(0,s.jsx)(c.x6,{id:"dpTE1c",values:{viewerCount:t}}),leftLabel:(0,s.jsx)(c.x6,{id:"ml51m3"}),rightLabel:(0,s.jsx)(c.x6,{id:"8R7bfR"})}:{chartDescription:(0,s.jsx)(c.x6,{id:"b2VMTo",values:{viewerCount:t}}),leftLabel:(0,s.jsx)(c.x6,{id:"kTgCTO"}),rightLabel:(0,s.jsx)(c.x6,{id:"AKDcmS"})},os=e=>{let{docId:t,viewerFilter:n,currentViewerFilterCount:i,onAnalyticsPanelClose:r}=e,o=(0,eo.CU)().getState(),a=(0,el.Ev)(o),{data:d,error:u,loading:h,refetch:x}=(0,nw.NI5)({variables:{docId:t}}),[m,f]=(0,p.useState)("viewTimePercent"),{chartDescription:g,rightLabel:j,leftLabel:v}=or(m,i),y="viewersOnly"===n?"viewers":"everyone",C=(0,b.u)("cardViewedThreshold"),w=(0,p.useMemo)(()=>{var e;return(null==d?void 0:null===(e=d.docCardsStats)||void 0===e?void 0:e[y])||[]},[null==d?void 0:d.docCardsStats,y]),E=(0,p.useMemo)(()=>s1(w,m),[w,m]),k=(0,p.useCallback)(()=>f("viewTimePercent"),[]),S=(0,p.useCallback)(()=>f("viewersPercent"),[]);return(0,s.jsxs)(l.az,{children:[(0,s.jsxs)(te.z,{my:4,children:[(0,s.jsx)(N.$,{leftIcon:(0,s.jsx)(F.g,{icon:G.a$,"aria-label":"Time spend"}),variant:"ghost",fontWeight:"600",bg:"viewTimePercent"===m?"trueblue.50":"transparent",color:"viewTimePercent"===m?"trueblue.500":sU,onClick:k,children:(0,s.jsx)(c.x6,{id:"XyvAeS"})}),(0,s.jsx)(N.$,{leftIcon:(0,s.jsx)(F.g,{icon:tR.Bi7,"aria-label":"Percent viewed"}),variant:"ghost",fontWeight:"600",bg:"viewersPercent"===m?"trueblue.50":"transparent",color:"viewersPercent"===m?"trueblue.500":sU,onClick:S,children:(0,s.jsx)(c.x6,{id:"vXtpAZ"})})]}),(0,s.jsx)(ol,{description:g}),u&&(0,s.jsx)(sH,{error:u,refetch:x}),h&&!u&&(0,s.jsx)(oo,{}),!h&&!u&&(0,s.jsx)(oe,{cards:a.tree,cardLookupTable:E,scaleToMax:"viewTimePercent"===m,isColorized:"viewersPercent"===m,includeChildren:"viewTimePercent"===m,showViewersPercent:"viewersPercent"===m,rightLabel:j,leftLabel:v,tooltipLabel:"viewTimePercent"===m?(0,s.jsx)(on,{}):(0,s.jsx)(oi,{timeInMS:C}),onAnalyticsPanelClose:r})]})},oo=e=>{let{includeDescription:t=!1}=e;return(0,s.jsx)(o.s,{direction:"column",mt:6,mb:4,children:(0,s.jsxs)(tA.T,{align:"stretch",children:[t&&(0,s.jsx)(sG.E,{h:5,mb:3,w:"70%"}),[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(sG.E,{h:8},t))]})})},ol=e=>{let{description:t}=e;return(0,s.jsx)(z.E,{color:sU,children:t})};var oa=n(22128),od=n(66288),oc=n(31659),ou=n(95033),oh=n(70652),ox=n(76069),op=n(90534),om=n(56377),of=n(48574),og=n(70403),oj=n(40074),ov=n.n(oj);let ob=e=>{let{uniqueViewers:t,docCreatedDate:n}=e,i=(0,b.u)("cardViewedThreshold");return(0,s.jsx)(od.d,{children:(0,s.jsxs)(oc.Tr,{children:[(0,s.jsx)(oy,{label:(0,s.jsx)(c.x6,{id:"LZHJAq",values:{uniqueViewers:t}}),tooltip:(0,s.jsx)(c.x6,{id:"aaiIlJ",values:{docCreatedDate:n}}),width:"40%"}),(0,s.jsx)(oy,{label:(0,s.jsx)(c.x6,{id:"pRGfP3"}),width:"35%"}),(0,s.jsx)(oy,{label:(0,s.jsx)(c.x6,{id:"QfqHuz"}),tooltip:(0,s.jsx)(oi,{timeInMS:i}),width:"25%"})]})})},oy=e=>{let{label:t,width:n,tooltip:i}=e,r=(0,s.jsx)(ou.Th,{w:n,children:(0,s.jsx)(z.E,{display:"inline",borderBottom:i?"0.125em dashed":void 0,borderBottomColor:i?"gray.400":void 0,children:t})});return i?(0,s.jsx)(W.Tz,{placement:"top",label:i,children:r}):r},oC=["Yesterday at 11:02 am","Today at 12:55 pm","Dec 12, 2020, 10:19 pm","Apr 14, 2023, 4:30 pm","Jan 1, 2021, 12:03 am","Dec 7, 1984, 12:03 am","May 14, 2002, 3:56 pm"],ow=e=>{let{viewers:t,currentViewerFilterCount:n,docCreatedDate:i,creatorId:r,contributors:o,cardCount:l,handleTableRowClick:a,hasIndividualAnalytics:d}=e,{user:c}=(0,X.ur)(),h=d?t:ov()(t,e=>{var t;return[(null===(t=e.user)||void 0===t?void 0:t.id)===(null==c?void 0:c.id)?0:1,-e.lastOpened]}).slice(0,3);return(0,s.jsx)(oh.K,{children:(0,s.jsxs)(ox.X,{colorScheme:"blackAlpha",children:[(0,s.jsx)(ob,{uniqueViewers:n,docCreatedDate:i}),(0,s.jsx)(op.N,{children:h.map((e,n)=>{let{user:i,lastOpened:h,visitorId:x}=e,p=(null==i?void 0:i.id)===r,m=o.some(e=>e.user.id===(null==i?void 0:i.id)),f=i?i.displayName+(i.id===(null==c?void 0:c.id)?" "+u.Ru._({id:"dDUgzP"}):"")||"":u.Ru._({id:"VmjbJY"}),g=h?iH()((0,iW.OG)(h)):u.Ru._({id:"/JO3xr"}),j={name:f,id:(null==i?void 0:i.id)||x||"",email:null==i?void 0:i.email,isCreator:p,isContributor:m,profileImg:null==i?void 0:i.profileImageUrl,lastOpened:g},v=n===t.length-1,b=(null==i?void 0:i.id)===(null==c?void 0:c.id),y=!d&&!b;return(0,s.jsxs)(oc.Tr,{cursor:"pointer",onClick:()=>a(j),_hover:{bg:"blackAlpha.50"},borderBottom:"none",children:[(0,s.jsx)(om.Td,{borderBottom:v?"0 none":void 0,children:(0,s.jsx)(oE,{name:f,email:null==i?void 0:i.email,profileImg:null==i?void 0:i.profileImageUrl,isContributor:m,isCreator:p,isAnonymous:!i})}),(0,s.jsx)(om.Td,{borderBottom:v?"0 none":void 0,children:y?(0,s.jsx)(z.E,{fontSize:"sm",filter:"blur(3px)",color:"gray.600",children:oC[n%oC.length]}):(0,s.jsx)(z.E,{fontSize:"sm",children:g})}),(0,s.jsx)(om.Td,{borderBottom:v?"0 none":void 0,children:y?(0,s.jsx)(s8,{cardCount:l}):(0,s.jsx)(s4,{cardsViewed:e.cardsViewed||0,totalCards:l||0})})]},(null==i?void 0:i.id)||x)})})]})})},oE=e=>{let{name:t,profileImg:n,email:i="",isCreator:r=!1,isContributor:o=!1,isAnonymous:l=!1,...a}=e;return(0,s.jsxs)(te.z,{...a,children:[(0,s.jsx)(of.e,{size:"sm",name:t,src:n}),(0,s.jsxs)(D.B,{spacing:.5,children:[(0,s.jsxs)(z.E,{children:[t,l&&(0,s.jsx)(W.qT,{label:(0,s.jsx)(c.x6,{id:"VHgG8W",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}}),ml:2})]}),(0,s.jsxs)(te.z,{mt:1,children:[(0,s.jsx)(z.E,{fontSize:"sm",color:"gray.500",children:i}),(r||o)&&(0,s.jsx)(og.vw,{size:"sm",transform:"translate(0, 1.5px)",children:r?(0,s.jsx)(c.x6,{id:"UE2beD"}):(0,s.jsx)(c.x6,{id:"3L51iw"})})]})]})]})},ok=e=>{var t,n,i,r;let{user:o,onBackClick:a,docId:d,onAnalyticsPanelClose:u}=e,h=(0,eo.CU)().getState(),x=(0,el.Ev)(h),{data:m,error:f,loading:g,refetch:j}=(0,nw.NI5)({variables:{docId:d,userId:o.id},skip:!d||!o.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),v=null!==(r=null==m?void 0:null===(n=m.docCardsStats)||void 0===n?void 0:null===(t=n.everyone)||void 0===t?void 0:t.length)&&void 0!==r?r:0,b=null==m?void 0:null===(i=m.docCardsStats)||void 0===i?void 0:i.cardCount,y=(0,p.useMemo)(()=>{var e;return(null==m?void 0:null===(e=m.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==m?void 0:m.docCardsStats]),C=(0,p.useMemo)(()=>s1(y,"viewTimePercent"),[y]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sb.r,{children:(0,s.jsx)(N.$,{"aria-label":"Back",leftIcon:(0,s.jsx)(oa.g,{}),variant:"ghost",onClick:a,children:(0,s.jsx)(c.x6,{id:"iH8pgl"})})}),(0,s.jsx)(io.s,{}),(0,s.jsx)(sM.c,{}),(0,s.jsx)(il.c,{children:(0,s.jsxs)(l.az,{children:[(0,s.jsx)(oS,{user:o,showLastOpened:!0}),b&&(0,s.jsx)(ol,{description:(0,s.jsx)(c.x6,{id:"YJOrjl",values:{cardsViewed:v,totalCards:b}})}),g&&!f&&(0,s.jsx)(oo,{includeDescription:!0}),f&&(0,s.jsx)(sH,{error:f,refetch:j}),!f&&!g&&(0,s.jsx)(oe,{cards:x.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,s.jsx)(c.x6,{id:"ml51m3"}),rightLabel:(0,s.jsx)(c.x6,{id:"8R7bfR"}),cardLookupTable:C,tooltipLabel:(0,s.jsx)(on,{}),onAnalyticsPanelClose:u})]})})]})},oS=e=>{let{user:t,showLastOpened:n}=e;return(0,s.jsxs)(te.z,{align:"center",my:6,children:[(0,s.jsx)(oE,{name:t.name,profileImg:t.profileImg,email:t.email,isCreator:t.isCreator,isContributor:t.isContributor,width:n?"50%":void 0}),n&&(0,s.jsxs)(tA.T,{align:"flex-start",spacing:0,children:[(0,s.jsx)(W._x,{children:(0,s.jsx)(c.x6,{id:"pRGfP3"})}),(0,s.jsx)(z.E,{children:t.lastOpened})]})]})},oI=(e,t,n)=>"everyone"===e?u.Ru._({id:"1IE7uf",values:{everyone:t}}):"viewersOnly"===e?u.Ru._({id:"r/tA4Y",values:{viewersOnly:n}}):u.Ru._({id:"V9JX7d"}),oT={everyone:tR.USd,viewersOnly:tR.pS3,accessLinkOnly:tR.wic},oA=e=>{let{selected:t,handleMenuItemChange:n,everyoneCount:i,viewersOnlyCount:r}=e;return(0,s.jsxs)(nF.W,{children:[(0,s.jsx)(nW.I,{leftIcon:(0,s.jsx)(F.g,{size:"xs",icon:oT[t]}),as:N.$,size:"md",rightIcon:(0,s.jsx)(F.g,{size:"xs",icon:G.Jt$}),children:oI(t,i,r)}),(0,s.jsx)(nU.c,{zIndex:2,maxW:"380px",children:(0,s.jsxs)(nB.i,{defaultValue:t,value:t,onChange:e=>{Array.isArray(e)||n(e)},children:[(0,s.jsx)(nH.k,{value:"everyone",isDisabled:0===i,children:(0,s.jsxs)(o.s,{align:"center",children:[(0,s.jsx)(F.g,{icon:oT.everyone,size:"xs"}),(0,s.jsxs)(l.az,{ml:3,children:[(0,s.jsx)(z.E,{children:oI("everyone",i,r)}),(0,s.jsx)(z.E,{fontSize:"sm",color:"gray.500",children:(0,s.jsx)(c.x6,{id:"c5ESvc",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}})})]})]})}),(0,s.jsx)(nH.k,{value:"viewersOnly",isDisabled:0===r,children:(0,s.jsxs)(o.s,{align:"center",children:[(0,s.jsx)(F.g,{icon:oT.viewersOnly,size:"xs"}),(0,s.jsxs)(l.az,{ml:3,children:[(0,s.jsx)(z.E,{children:oI("viewersOnly",i,r)}),(0,s.jsx)(z.E,{fontSize:"sm",color:"gray.500",children:(0,s.jsx)(c.x6,{id:"5hKO48",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}})})]})]})}),!1]})})]})};var o_=n(69670),oR=n(13847),oO=n(62722),oD=n(32598),oz=n(33780),oP=n(28466),oL=n(77447),oN=n(6228),oM=n(4300),oV=n(34992),oG=n(36227),oF=n(21404),oW=n(14356),oU=n(50089),oB=n(12418),oH=n(59135);let oq={top:55,right:20,bottom:40,left:24},oK=e=>Math.round(e).toString(),oJ=e=>Math.max(...e.map(e=>(0,oW.A)(e.toString(),{fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600"})||0)),oY={backgroundColor:"var(--chakra-colors-blackAlpha-800)",color:"var(--chakra-colors-gray-100)",fontFamily:"Inter, sans-serif",boxShadow:"var(--chakra-shadows-4)",fontSize:"var(--chakra-fontSizes-xs)",borderRadius:"var(--chakra-radii-sm)",fontWeight:"var(--chakra-fontWeights-semibold)",borderWidth:"1px",borderColor:"black",paddingRight:"var(--chakra-space-1-5)",paddingLeft:"var(--chakra-space-1-5)",paddingTop:"var(--chakra-space-0-5)",paddingBottom:"var(--chakra-space-0-5)",zIndex:"var(--chakra-zIndex-tooltip)",minWidth:"60px",lineHeight:"var(--chakra-lineHeights-base)"},oX="var(--chakra-colors-gray-500)",o$="var(--chakra-colors-gray-200)",oZ=e=>e.map(e=>e.x),oQ=e=>e.map(e=>e.y),o0=e=>{let{width:t,height:n,margin:i=oq,chartData:r,TooltipInner:o,showZero:a,shouldRoundYValues:d,showMaxAndMiddle:c,barColor:u,customTooltipStyles:h,onClick:x=()=>{}}=e,{showTooltip:m,tooltipOpen:f,tooltipLeft:g,tooltipTop:j,tooltipData:v,hideTooltip:b}=(0,oU.A)(),y=(0,p.useRef)(),C=(0,p.useRef)();(0,p.useEffect)(()=>()=>{y.current&&clearTimeout(y.current),C.current&&clearTimeout(C.current)},[]);let w=oQ(r),E=Math.max(...w),k=[E,Math.round(E/2)],S=oJ(c?k:w),I=i.left+S,T=t-I-i.right,A=n-i.top-i.bottom,_={...oB.k,...oY,...h},R=(0,p.useMemo)(()=>(0,oM.A)({range:[0,T],domain:oZ(r),padding:.3}),[T,r]),O=(0,p.useMemo)(()=>(0,oV.A)({range:[A,0],round:!0,domain:[0,E]}),[A,E]),D=a?O(Math.min(...w.filter(e=>0!==e))):A,z=a&&A-D>6;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.az,{children:(0,s.jsxs)("svg",{width:t,height:n,children:[(0,s.jsx)("rect",{x:0,y:0,rx:4,width:t,height:n,fill:"var(--chakra-colors-gray-100)"}),(0,s.jsx)(oL.A,{top:i.top,left:I,children:r.map(e=>{var t,n;let i=e.y,r=e.x,o="bar-".concat(r,"-").concat(i),l=R.bandwidth(),d=A-(null!==(t=O(i))&&void 0!==t?t:0),c=z&&0===d?6:d,h=null!==(n=R(r))&&void 0!==n?n:0,p=A-c;return(0,s.jsxs)(oL.A,{children:[(0,s.jsx)(oG.A,{x:h,y:p,width:l,height:c,radius:5,topLeft:!0,topRight:!0,fill:a&&0===i?o$:u,onMouseLeave:()=>{y.current=window.setTimeout(()=>{b()},300)},onMouseMove:t=>{y.current&&clearTimeout(y.current);let n=(0,oP.A)(t);m({tooltipData:e,tooltipTop:null==n?void 0:n.y,tooltipLeft:null==n?void 0:n.x})},onClick:t=>x(t,e)}),(0,s.jsx)(oF.A,{x:h,y:0,width:l,height:Math.max(0,A-c),opacity:0,onMouseLeave:()=>{C.current=window.setTimeout(()=>{b()},300)},onMouseMove:t=>{C.current&&clearTimeout(C.current);let n=(0,oP.A)(t);m({tooltipData:e,tooltipTop:null==n?void 0:n.y,tooltipLeft:null==n?void 0:n.x})}})]},o)})}),(0,s.jsx)(oD.A,{top:i.top,left:I,scale:O,stroke:o$,strokeWidth:2,tickValues:c?k:void 0,numTicks:c?void 0:2,hideZero:!0,tickFormat:d?oK:void 0,tickLength:6,tickStroke:o$,tickLabelProps:()=>({fill:oX,textAnchor:"end",fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:"0.33em",dx:-4})}),(0,s.jsx)(oz.A,{top:A+i.top,left:I,scale:R,stroke:o$,numTicks:4,tickStroke:o$,tickLabelProps:()=>({fill:oX,textAnchor:"middle",fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:4}),strokeWidth:2,tickLength:6})]})}),f&&v&&(0,s.jsx)(oH.A,{top:j,left:g,style:_,children:(0,s.jsx)(o,{x:v.x,y:v.y})})]})},o1=e=>{let{chartTitle:t,TooltipInner:n,showZero:i=!0,shouldRoundYValues:r=!0,showMaxAndMiddle:o=!0,data:a,barColor:d="var(--chakra-colors-trueblue-200)",customTooltipStyles:c,onClick:u=()=>{},...h}=e;return(0,s.jsxs)(l.az,{position:"relative",height:"300px",...h,children:[(0,s.jsx)(z.E,{size:"xs",color:"gray.500",fontWeight:"600",position:"absolute",top:3,left:"50%",transform:"translateX(-50%)",children:t}),(0,s.jsx)(oN.A,{children:e=>{let{width:t,height:l}=e;return t<10?null:(0,s.jsx)(o0,{width:t,height:l,showZero:i,chartData:a,barColor:d,customTooltipStyles:c,onClick:u,TooltipInner:n,shouldRoundYValues:r,showMaxAndMiddle:o})}})]})},o6=(e,t)=>{let n="LLL d",i=new Date;i.setDate(i.getDate()-t+1);let r=[];for(let s=0;s<t;s++){let t=new Date(i);t.setDate(t.getDate()+s);let o=function(e,t){if(arguments.length<1)throw TypeError("1 argument required, but only ".concat(arguments.length," present"));var n=(0,o_.A)(e);if(!(0,oR.A)(n))throw RangeError("Invalid time value");var i=t||{},r=null==i.format?"extended":String(i.format),s=null==i.representation?"complete":String(i.representation);if("extended"!==r&&"basic"!==r)throw RangeError("format must be 'extended' or 'basic'");if("date"!==s&&"time"!==s&&"complete"!==s)throw RangeError("representation must be 'date', 'time', or 'complete'");var o="",l="",a="extended"===r?"-":"";if("time"!==s){var d=(0,oO.A)(n.getDate(),2),c=(0,oO.A)(n.getMonth()+1,2),u=(0,oO.A)(n.getFullYear(),4);o="".concat(u).concat(a).concat(c).concat(a).concat(d)}if("date"!==s){var h=n.getTimezoneOffset();if(0!==h){var x=Math.abs(h),p=(0,oO.A)(Math.floor(x/60),2),m=(0,oO.A)(x%60,2);l="".concat(h<0?"+":"-").concat(p,":").concat(m)}else l="Z";var f=(0,oO.A)(n.getHours(),2),g=(0,oO.A)(n.getMinutes(),2),j=(0,oO.A)(n.getSeconds(),2),v=""===o?"":"T",b=[f,g,j].join("extended"===r?":":"");o="".concat(o).concat(v).concat(b).concat(l)}return o}(t,{representation:"date"}),l=e.find(e=>e.date===o);l?r.push({x:(0,su.Yq)(l.date,n),y:l.uniqueVisitors?l.uniqueVisitors:0}):r.push({x:(0,su.Yq)(o,n),y:0})}return r},o2=e=>{let{viewData:t,dayCount:n}=e,i=o6(t,n);return(0,s.jsx)(o1,{data:i,my:3,chartTitle:(0,s.jsx)(c.x6,{id:"mSEibf"}),TooltipInner:o5})},o5=e=>{let{x:t,y:n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z.E,{children:t}),(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"6MKtHx",values:{y:n}})})]})},o3=e=>e.every(e=>0===e.uniqueVisitors),o4=(e,t)=>t&&t.dailyViews?"everyone"===e?t.dailyViews.everyone?t.dailyViews.everyone:[]:"viewersOnly"===e&&t.dailyViews.viewers?t.dailyViews.viewers:[]:[],o8=(e,t,n)=>{var i,r,s;if(!n)return 0;let o=null!==(r=n.uniqueViewers)&&void 0!==r?r:0,l=null!==(s=null===(i=e.editors)||void 0===i?void 0:i.length)&&void 0!==s?s:0;return"everyone"===t?o:"viewersOnly"===t?Math.max(0,o-l):0},o7=e=>{var t,n;let{doc:i,handleSharePanelOpen:r,onAnalyticsPanelClose:l,canShare:a}=e,{loading:d,data:h,error:x,refetch:m}=(0,nw.Y0k)({variables:{memoId:i.id},skip:!i.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),{user:f}=(0,X.ur)(),[g,j]=(0,p.useState)("deckView"),[v,b]=(0,p.useState)(null),[y,C]=(0,p.useState)("everyone"),w=(0,su.Yq)(i.createdTime,"PPP"),E=i.title||(0,s.jsx)(c.x6,{id:"wja8aL"}),k=(null==h?void 0:h.memoStats.viewers)||[],S=(null==h?void 0:null===(t=h.memoStats.dailyViews)||void 0===t?void 0:t.dayCount)||0,I=o4(y,null==h?void 0:h.memoStats),T=(0,eH.ez)("individual_analytics",i.organization),{openUpsellModal:A}=(0,sW.I)(),_=o3(I),R=k.filter(e=>{var t;return"everyone"===y||!(null===(t=i.editors)||void 0===t?void 0:t.some(t=>{var n,i;return(null===(n=e.user)||void 0===n?void 0:n.id)===(null===(i=t.user)||void 0===i?void 0:i.id)}))}),O=o8(i,y,null==h?void 0:h.memoStats),z=(0,p.useCallback)(e=>{C(e)},[]),L=(0,p.useCallback)(e=>{j(e)},[]),M=(0,p.useCallback)(e=>{if(!T&&e.id!==(null==f?void 0:f.id)){A({segmentEvent:J.VV.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS});return}b(e)},[A,T,f]),V=(0,p.useCallback)(()=>{b(null)},[]),G=void 0!==x;return(0,s.jsxs)(s.Fragment,{children:[v&&(0,s.jsx)(ok,{user:v,onBackClick:V,docId:i.id,onAnalyticsPanelClose:l}),!v&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sY,{hasError:G,isAnalyticsLoading:d,setView:L,view:g,description:(0,s.jsx)(c.x6,{id:"uEtUah",values:{docTitle:E,docCreatedDate:w}})}),G&&(0,s.jsx)(sH,{error:x,refetch:m}),!G&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sM.c,{}),(0,s.jsxs)(il.c,{children:[d&&(0,s.jsx)(o9,{}),!d&&k.length<=1&&a&&(0,s.jsx)(le,{handleSharePanelOpen:r}),!d&&(0,s.jsxs)(D.B,{direction:"column",mt:4,spacing:4,children:[(0,s.jsxs)(o.s,{direction:"row",justify:"space-between",align:"center",children:[(0,s.jsx)(P.D,{as:"h2",size:"md",children:"cardEngagement"===g?sJ():sK()}),(0,s.jsx)(oA,{selected:y,handleMenuItemChange:z,everyoneCount:o8(i,"everyone",null==h?void 0:h.memoStats),viewersOnlyCount:o8(i,"viewersOnly",null==h?void 0:h.memoStats)})]}),"deckView"===g&&_&&(0,s.jsx)(lt,{handleSharePanelOpen:r,dayCount:S}),"deckView"===g&&!_&&(0,s.jsx)(o2,{viewData:I,dayCount:S}),"cardEngagement"===g&&(0,s.jsx)(os,{docId:i.id,viewerFilter:y,currentViewerFilterCount:O,onAnalyticsPanelClose:l}),(0,s.jsx)(ow,{creatorId:(null===(n=i.createdBy)||void 0===n?void 0:n.id)||"",viewers:R,currentViewerFilterCount:O,docCreatedDate:w,contributors:i.editors||[],cardCount:(null==h?void 0:h.memoStats.cardCount)||0,handleTableRowClick:M,hasIndividualAnalytics:T}),R.length>3&&!T&&(0,s.jsx)(N.$,{variant:"ghost",size:"sm",color:"gray.600",colorScheme:"gray",onClick:()=>A({segmentEvent:J.VV.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS}),children:(0,s.jsx)(c.x6,{id:"BKBX4n",values:{0:R.length-3}})}),!T&&(0,s.jsx)(sF.c,{title:(0,s.jsx)(c.x6,{id:"h5AmZ4"}),segmentEvent:J.VV.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS,description:u.Ru._({id:"GYgPBy"})})]})]})]})]})]})},o9=()=>(0,s.jsxs)(o.s,{direction:"column",py:2,children:[(0,s.jsx)(sG.E,{h:10,width:"40%",mb:4}),(0,s.jsx)(sG.E,{h:40,mb:4}),(0,s.jsx)(tA.T,{align:"stretch",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(sG.E,{h:12},t))})]}),le=e=>{let{handleSharePanelOpen:t}=e;return(0,s.jsx)(o.s,{p:3,px:4,mt:2,bg:"gray.100",color:sU,borderRadius:"base",children:(0,s.jsxs)(o.s,{align:"baseline",fontSize:"sm",children:[(0,s.jsx)(l.az,{pr:2,children:(0,s.jsx)(F.g,{icon:tR.X46,"aria-label":"user-icon",size:"sm"})}),(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"FNMh4I",components:{0:(0,s.jsx)(z.E,{as:"button",onClick:t,textDecoration:"underline",fontWeight:"600",color:"gray.800"})}})})]})})},lt=e=>{let{handleSharePanelOpen:t,dayCount:n}=e;return(0,s.jsxs)(i7.F,{my:4,p:6,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",colorScheme:"gray",children:[(0,s.jsx)(l.jl,{size:"30px",bg:"gray.500",children:(0,s.jsx)(F.g,{icon:tR.Vf1,color:"white"})}),(0,s.jsx)(i9.X,{mt:4,mb:2,fontSize:"md",children:(0,s.jsx)(c.x6,{id:"2OzAI5"})}),n>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(re.T,{maxWidth:"sm",children:(0,s.jsx)(c.x6,{id:"qQLmo7",values:{dayCount:n}})}),(0,s.jsx)(N.$,{mt:4,onClick:t,children:(0,s.jsx)(c.x6,{id:"6Jkfdh",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}})})]})]})},ln=e=>{var t,n,i,r,o,a;let{doc:d,onAnalyticsPanelClose:u}=e,h=(0,eo.CU)().getState(),x=(0,el.Ev)(h),{user:m}=(0,X.ur)(),{data:f,error:g,loading:j,refetch:v}=(0,nw.NI5)({variables:{docId:d.id,userId:null==m?void 0:m.id},skip:!(null==m?void 0:m.id),pollInterval:9e5,notifyOnNetworkStatusChange:!0}),b=null!==(a=null==f?void 0:null===(n=f.docCardsStats)||void 0===n?void 0:null===(t=n.everyone)||void 0===t?void 0:t.length)&&void 0!==a?a:0,y=null==f?void 0:null===(i=f.docCardsStats)||void 0===i?void 0:i.cardCount,C=(0,p.useMemo)(()=>{var e;return(null==f?void 0:null===(e=f.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==f?void 0:f.docCardsStats]),w=(0,p.useMemo)(()=>s1(C,"viewTimePercent"),[C]);if(!m)return null;let E=m.id===(null===(r=d.createdBy)||void 0===r?void 0:r.id),k=null===(o=d.editors)||void 0===o?void 0:o.some(e=>e.user.id===m.id),S={name:m.displayName,id:m.id,profileImg:m.profileImageUrl,email:m.email,isContributor:k,isCreator:E};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(sb.r,{children:[(0,s.jsx)(c.x6,{id:"ZlwDi6"}),(0,s.jsx)(z.E,{fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",color:"gray.500",noOfLines:1,children:d.title||(0,s.jsx)(c.x6,{id:"wja8aL"})})]}),(0,s.jsx)(io.s,{}),(0,s.jsx)(sM.c,{}),(0,s.jsx)(il.c,{children:(0,s.jsxs)(l.az,{children:[(0,s.jsx)(oS,{user:S}),void 0!==y&&(0,s.jsx)(ol,{description:(0,s.jsx)(c.x6,{id:"YJOrjl",values:{cardsViewed:b,totalCards:y}})}),j&&!g&&(0,s.jsx)(oo,{includeDescription:!0}),g&&(0,s.jsx)(sH,{error:g,refetch:v,px:0}),!g&&!j&&(0,s.jsx)(oe,{cards:x.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,s.jsx)(c.x6,{id:"ml51m3"}),rightLabel:(0,s.jsx)(c.x6,{id:"8R7bfR"}),cardLookupTable:w,tooltipLabel:(0,s.jsx)(on,{}),onAnalyticsPanelClose:u}),(0,s.jsxs)(i7.F,{children:[(0,s.jsx)(sB._,{}),(0,s.jsx)(c.x6,{id:"Znuvj3",values:{GAMMA_PROPER_NOUN:eu.On,GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}})]})]})})]})},li=(0,sV.A)(e=>{let{doc:t,mode:n,isAnalyticsPanelOpen:i,onAnalyticsPanelClose:r,onSharePanelOpen:l}=e,a=(0,e2.h5)({base:"sm",md:"2xl",lg:"4xl"}),d=!!l&&"full"==n,u=(0,p.useCallback)(()=>{l&&(l(),r())},[l,r]);return(0,s.jsx)(W.L8,{isDark:!1,children:(0,s.jsxs)(sj.aF,{onClose:r,isOpen:i,size:a,blockScrollOnMount:!1,children:[(0,s.jsx)(ir.m,{}),(0,s.jsxs)(sv.$,{mx:2,minW:0,children:["full"===n?(0,s.jsx)(o7,{doc:t,handleSharePanelOpen:u,onAnalyticsPanelClose:r,canShare:d}):(0,s.jsx)(ln,{doc:t,onAnalyticsPanelClose:r}),(0,s.jsx)(sM.c,{my:4}),(0,s.jsx)(ia.j,{children:(0,s.jsxs)(o.s,{justifyContent:d?"space-between":"flex-end",flex:1,children:[d&&(0,s.jsx)(N.$,{leftIcon:(0,s.jsx)(F.g,{icon:G.t5Z}),variant:"ghost",onClick:u,children:(0,s.jsx)(c.x6,{id:"6Jkfdh",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}})}),(0,s.jsx)(N.$,{variant:"solid",onClick:r,children:(0,s.jsx)(c.x6,{id:"DPfwMq"})})]})})]})]})})}),lr=e=>{let{doc:t,mode:n}=e,i=(0,J.st)(),{isOpen:r,onClose:o,onOpen:l}=(0,iD.E)({id:"analyticsPanelDisclosure"}),a=(0,p.useCallback)(()=>{null==i||i.track(J.VV.DOC_ANALYTICS_VIEWED,{docId:null==t?void 0:t.id,source:"toolbar_doc_menu",type:"personal"}),l()},[i,null==t?void 0:t.id,l]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.q9c,fixedWidth:!0}),onClick:a,children:(0,s.jsx)(c.x6,{id:"ZlwDi6"})}),t&&r&&(0,s.jsx)(li,{doc:t,isAnalyticsPanelOpen:r,onAnalyticsPanelClose:o,mode:n})]})},ls=e=>{let{toggleCommentsPanel:t}=e;return(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.DN2,fixedWidth:!0}),onClick:t,children:(0,s.jsx)(c.x6,{id:"VbyRUy"})})};var lo=n(27670),ll=n(49547),la=n(22218),ld=n(26833),lc=n(88771);let lu=e=>{let{label:t,initialValue:i="",updateValue:r,helperText:o,language:a,...d}=e,[c,u]=(0,p.useState)(i),[h,x]=(0,p.useState)(null),m=(0,tQ.lW)(r,100),[f,g]=(0,p.useState)();(0,p.useEffect)(()=>{"css"===a?Promise.all([n.e(3881),n.e(9587),n.e(1963)]).then(n.bind(n,51963)).then(e=>{g(e.css())}):"html"===a&&Promise.all([n.e(3881),n.e(9587),n.e(1963),n.e(7213),n.e(891)]).then(n.bind(n,891)).then(e=>{g(e.html())})},[a]),(0,tQ.Vg)(()=>{x(null),m(c)},[c,m],[c]);let j=[f].filter(Boolean);return(0,s.jsxs)(ll.MJ,{isInvalid:!!h,children:[(0,s.jsx)(la.l,{children:t}),h&&(0,s.jsx)(ld.Wt,{children:h}),o&&(0,s.jsx)(ll.eK,{children:o}),(0,s.jsx)(l.az,{border:"1px solid",borderColor:"gray.200",fontSize:"md",position:"relative",children:(0,s.jsx)(p.Suspense,{fallback:(0,s.jsx)("span",{}),children:(0,s.jsx)(lc.j,{value:c,extensions:j,onChange:u,...d})})})]})};var lh=n(36830);let lx=(0,p.memo)(e=>{let{isOpen:t,onClose:n,editor:i}=e,r=(0,lh.N)(i),{bodyStart:o}=(0,eo.GV)(el.BP),l=(0,p.useCallback)(e=>{null==i||i.commands.updateNestedAttributesAtPos(0,{customCode:{bodyStart:e}})},[i]);return(0,s.jsx)(W.L8,{isDark:!1,children:(0,s.jsxs)(ii._,{returnFocusOnClose:!1,isOpen:t,placement:"right",onClose:n,size:"lg",children:[(0,s.jsx)(ir.m,{background:"none"}),(0,s.jsxs)(is.z,{onKeyDown:r,"data-testid":"custom-code-drawer",motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,s.jsx)(io.s,{}),(0,s.jsx)(sb.r,{children:(0,s.jsx)(c.x6,{id:"E16GGw"})}),(0,s.jsx)(il.c,{overflowX:"hidden",children:(0,s.jsx)(lu,{label:u.Ru._({id:"fC5kYg"}),helperText:u.Ru._({id:"0AZNtw"}),initialValue:o,updateValue:l,language:"html",height:"600px"})}),(0,s.jsx)(ia.j,{children:(0,s.jsx)(N.$,{w:"100%",variant:"solid",onClick:n,children:(0,s.jsx)(c.x6,{id:"DPfwMq"})})})]})]})})});lx.displayName="CustomCodeDrawer";let lp=e=>{let{editor:t}=e,{isOpen:n,onOpen:i,onClose:r}=(0,iD.E)({id:"codeEditor"});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.jTw,fixedWidth:!0}),onClick:i,children:(0,s.jsxs)(te.z,{children:[(0,s.jsx)(c.x6,{id:"cnlGIm"}),(0,s.jsx)(t_.h,{}),(0,s.jsx)(lo.E,{colorScheme:"green",ml:2,children:(0,s.jsx)(c.x6,{id:"YBt9YP"})})]})}),(0,s.jsx)(lx,{editor:t,isOpen:n,onClose:r})]})},lm=e=>{let{doc:t}=e,[n]=(0,nw.fQ5)(),[i]=(0,nw.u6W)(),r=(0,p.useCallback)(e=>()=>{if(!t.id)return;let r={id:t.id};e?n({variables:r,optimisticResponse:{archiveDoc:{...r,archived:e,__typename:"Doc"}}}):i({variables:r,optimisticResponse:{unarchiveDoc:{...r,archived:e,__typename:"Doc"}}})},[n,t.id,i]);return t.archived?(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.IbX,fixedWidth:!0}),onClick:r(!1),children:(0,s.jsx)(c.x6,{id:"yKu/3Y"})}):(0,s.jsx)(sm.D,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,s.jsx)(F.g,{icon:G.yLS,fixedWidth:!0}),onClick:r(!0),children:(0,s.jsx)(c.x6,{id:"NOLglc",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}})})};var lf=n(66820),lg=n(77563),lj=n(75961);let lv=e=>{var t,n;let{doc:i}=e,r=(null==i?void 0:i.createdTime)&&(0,lf.A)((0,lg.A)(i.createdTime),"PPP"),o=(0,lj.B)(null==i?void 0:i.title);return(0,s.jsxs)(l.az,{px:4,py:2,maxW:"300px",children:[(0,s.jsx)(z.E,{noOfLines:6,children:o}),(0,s.jsx)(z.E,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(c.x6,{id:"jlWdji",values:{createdTime:r}})}),(0,s.jsx)(W.Tz,{label:null==i?void 0:null===(t=i.createdBy)||void 0===t?void 0:t.email,children:(0,s.jsx)(z.E,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(c.x6,{id:"t490IT",values:{0:null==i?void 0:null===(n=i.createdBy)||void 0===n?void 0:n.displayName}})})})]})},lb=e=>{let{doc:t,editor:n}=e,i=(0,sn.Z)(),r=(0,p.useCallback)(()=>{if(!n)return;let e=n.getJSON();i({docId:t.id,initialContent:e,source:"editor_toolbar_doc_menu_duplicate",newWindow:!(0,C.sX)()})},[t.id,i,n]);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.jPR,fixedWidth:!0}),onClick:r,children:(0,s.jsx)(c.x6,{id:"0Fcoqv",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}})})})};var ly=n(55575);let lC=()=>(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.mHA,fixedWidth:!0}),onClick:()=>{ly.R.emit("openSharePanel",{view:"export"})},children:(0,s.jsx)(c.x6,{id:"U8WPSi"})}),lw=e=>{let{site:t,path:n}=e,i=(0,tu.jY)({site:t,path:n});return i?(0,s.jsx)(W.Tz,{label:(0,s.jsx)(c.x6,{id:"kcKqQj"}),placement:"top",children:(0,s.jsx)(M.K,{ml:-1,href:i,as:i5(),target:"_blank","aria-label":u.Ru._({id:"WklWxF"}),variant:"ghost",color:"gray.500",size:"xs",icon:(0,s.jsx)(F.g,{icon:G.fLi}),pointerEvents:"auto",onClick:e=>{e.stopPropagation()}})}):null},lE=e=>{var t,n;let{doc:i,site:r,showCreatedInfo:o}=e,a=(0,lj.B)(null==i?void 0:i.title),d=null===(t=r.routes)||void 0===t?void 0:t.find(e=>e.docId===i.id),u=(0,tu.SG)(i,r);return(0,s.jsxs)(l.az,{px:4,pb:2,maxW:"300px",children:[(0,s.jsxs)(te.z,{align:"start",children:[(0,s.jsx)(z.E,{noOfLines:2,children:a}),u&&(0,s.jsx)(lw,{site:r,path:null==d?void 0:d.path})]}),d&&(0,s.jsx)(lk,{path:d.path}),o&&"createdTime"in i&&(0,s.jsx)(z.E,{fontSize:"sm",color:"gray.500",noOfLines:1,mt:2,children:(0,s.jsx)(c.x6,{id:"oJFw5Q",values:{0:(0,su.Bo)(i.createdTime)}})}),"createdBy"in i&&o&&(0,s.jsx)(z.E,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(c.x6,{id:"t490IT",values:{0:null==i?void 0:null===(n=i.createdBy)||void 0===n?void 0:n.displayName}})})]})},lk=e=>{let{path:t}=e;return"/"===t?(0,s.jsx)(z.E,{fontSize:"sm",color:"gray.500",children:(0,s.jsx)(c.x6,{id:"wFCbbC"})}):(0,s.jsx)(z.E,{fontFamily:"mono",fontSize:"sm",color:"gray.500",children:t})},lS=e=>{let{onClick:t,icon:n,label:i}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(sm.D,{icon:n||(0,s.jsx)(F.g,{icon:G.BH7,fixedWidth:!0}),onClick:t||(()=>{ly.R.emit("openPageSetup","cards")}),children:i||(0,s.jsx)(c.x6,{id:"Kx2GmY"})})})},lI=e=>{let{site:t}=e,n=(0,lf.A)((0,lg.A)(t.createdTime),"PPP");return(0,s.jsxs)(l.az,{px:4,pb:2,maxW:"300px",children:[(0,s.jsx)(z.E,{noOfLines:6,children:t.name}),(0,s.jsx)(z.E,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(c.x6,{id:"jlWdji",values:{createdTime:n}})})]})};var lT=n(14291),lA=n(88808),l_=n(20671),lR=n(32849);let lO=e=>{let{onClose:t,domainName:n,onDelete:i,isDeleting:r}=e;return(0,s.jsxs)(sj.aF,{isOpen:!0,onClose:t,trapFocus:!1,size:"xl",isCentered:!0,closeOnOverlayClick:!1,children:[(0,s.jsx)(ir.m,{}),(0,s.jsxs)(sv.$,{children:[(0,s.jsx)(sb.r,{children:(0,s.jsx)(D.B,{spacing:0,children:(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"T3exbL",values:{domainName:n}})})})}),(0,s.jsx)(il.c,{children:(0,s.jsx)(D.B,{spacing:4,children:(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"DkFGZj"})})})}),(0,s.jsx)(ia.j,{children:(0,s.jsxs)(tt.e,{children:[(0,s.jsx)(N.$,{isDisabled:r,variant:"ghost",colorScheme:"gray",onClick:t,children:(0,s.jsx)(c.x6,{id:"dEgA5A"})}),(0,s.jsx)(N.$,{variant:"hazardous",isLoading:r,onClick:i,loadingText:u.Ru._({id:"EF2EU9"}),children:(0,s.jsx)(c.x6,{id:"cnGeoo"})})]})})]})]})};var lD=n(11395),lz=n(65513),lP=n(85146),lL=n(6256);let lN=e=>{let{code:t,data:n}=e;switch(t){case nw.sYx.AddARecord:return(0,s.jsx)(c.x6,{id:"ZIfa5n",values:{0:n.ip},components:{0:(0,s.jsx)("strong",{}),1:(0,s.jsx)(lL.C,{})}});case nw.sYx.AddCnameRecordSubdomain:return(0,s.jsx)(c.x6,{id:"edcjuc",values:{0:n.subdomain,1:n.cnameDomain},components:{0:(0,s.jsx)("strong",{}),1:(0,s.jsx)(lL.C,{}),2:(0,s.jsx)(lL.C,{})}});case nw.sYx.EditCnameRecordSubdomain:return(0,s.jsx)(c.x6,{id:"ngCUo8",values:{0:n.subdomain,1:n.cnameDomain},components:{0:(0,s.jsx)(lL.C,{}),1:(0,s.jsx)("strong",{}),2:(0,s.jsx)(lL.C,{})}});case nw.sYx.RemoveARecord:return(0,s.jsx)(c.x6,{id:"GLzRh5",values:{0:n.ip},components:{0:(0,s.jsx)("strong",{}),1:(0,s.jsx)(lL.C,{})}});case nw.sYx.RemoveAaaaRecord:return(0,s.jsx)(c.x6,{id:"g1KLfp",values:{0:n.ip},components:{0:(0,s.jsx)("strong",{}),1:(0,s.jsx)(lL.C,{})}});case nw.sYx.AddCnameRecordWww:return(0,s.jsx)(c.x6,{id:"Hb2/CF",values:{0:n.cnameDomain},components:{0:(0,s.jsx)("strong",{}),1:(0,s.jsx)(lL.C,{})}});case nw.sYx.EditCnameRecordWww:return(0,s.jsx)(c.x6,{id:"LmV2TD",values:{0:n.cnameDomain},components:{0:(0,s.jsx)(lL.C,{}),1:(0,s.jsx)("strong",{}),2:(0,s.jsx)(lL.C,{})}});case nw.sYx.ContactGammaSupport:return(0,s.jsx)(c.x6,{id:"Wr1wrv",values:{GAMMA_PROPER_NOUN:eu.On}});case nw.sYx.SslModeFullCloudflare:return(0,s.jsx)(c.x6,{id:"D61i6v"});case nw.sYx.CheckDnsCloudflare:return(0,s.jsx)(c.x6,{id:"gYfbYc"})}return(0,s.jsx)(s.Fragment,{})};var lM=n(5978);let lV=e=>{let{isOpen:t,onClose:n,domain:i,siteId:r}=e,o=(0,eE.d)(),l=null==i?void 0:i.name,a=null==l?void 0:l.split(".")[0].split("-").slice(-1)[0],[d,h]=(0,p.useState)(null==l?void 0:l.split(".")[0].split("-").slice(0,-1).join("-")),x=null==l?void 0:l.split(".").slice(1).join("."),[m,{loading:f}]=(0,nw.g1r)(),g=(0,p.useCallback)(()=>{m({variables:{input:{siteId:r,name:d}}}).then(()=>{o({title:(0,s.jsx)(c.x6,{id:"oMgC5V"}),description:(0,s.jsx)(c.x6,{id:"tIBLtD"}),duration:3e3,position:"top",isClosable:!1,status:"success"}),n()}).catch(e=>{o({title:(0,s.jsx)(c.x6,{id:"YoFYYT"}),description:(0,s.jsx)(c.x6,{id:"Wd0ucu"}),duration:3e3,position:"top",isClosable:!1,status:"error"}),console.error("[BuiltInDomainEditModal] Failed to change domain name:",e)})},[m,r,d,o,n]);return(0,s.jsxs)(sj.aF,{isOpen:t,onClose:n,size:"md",closeOnOverlayClick:!1,children:[(0,s.jsx)(ir.m,{}),(0,s.jsxs)(sv.$,{children:[(0,s.jsx)(sb.r,{children:(0,s.jsx)(c.x6,{id:"VMKg48"})}),(0,s.jsx)(io.s,{}),(0,s.jsx)(il.c,{children:(0,s.jsxs)(ll.MJ,{children:[(0,s.jsxs)(te.z,{children:[(0,s.jsx)(l_.p,{value:d,onKeyDown:e=>{"Enter"===e.key&&g()},onChange:e=>{h((0,lM.Fw)(e.target.value))},placeholder:u.Ru._({id:"dcSbw0"})}),(0,s.jsxs)(la.l,{whiteSpace:"nowrap",children:["-",a,".",x]})]}),(0,s.jsx)(ll.eK,{lineHeight:"normal",children:(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"bvN4Vx"})})})]})}),(0,s.jsxs)(ia.j,{children:[(0,s.jsx)(N.$,{onClick:n,mr:3,variant:"ghost",children:(0,s.jsx)(c.x6,{id:"dEgA5A"})}),(0,s.jsx)(N.$,{variant:"solid",onClick:g,isLoading:f,isDisabled:d.length<3,children:(0,s.jsx)(c.x6,{id:"tfDRzk"})})]})]})]})},lG={pending:{tooltip:(0,s.jsx)(c.x6,{id:"/BjVEU"}),badgeText:(0,s.jsx)(c.x6,{id:"bl9677"}),badgeColorScheme:"yellow"},failed:{tooltip:(0,s.jsx)(c.x6,{id:"7Bj3x9"}),badgeText:(0,s.jsx)(c.x6,{id:"7Bj3x9"}),badgeColorScheme:"red"}},lF=e=>{let{status:t,onClick:n}=e;if("verified"===t)return null;let{tooltip:i,badgeText:r,badgeColorScheme:o}=lG[t];return(0,s.jsx)(W.Tz,{label:i,placement:"top",children:(0,s.jsx)(lo.E,{display:"flex",justifyContent:"center",colorScheme:o,cursor:n?"pointer":"default",onClick:n||void 0,children:r})})},lW=e=>{var t,n,i;let{domain:r,onDomainSetupClick:o,path:a,onDeleteClick:d,numDomains:h,siteId:x}=e,m=(0,tu.bO)({domain:r,path:a}),f=(0,eE.d)(),g=!r.builtin,j=r.builtin,v=g&&("verified"!==r.status||"verified"===r.status&&h>1),[b]=(0,nw.MyE)(),{data:y}=(0,nw.SmF)({variables:{name:r.name},skip:r.builtin||"failed"===r.status}),C=(0,p.useCallback)(async()=>{await b({variables:{id:r.id}}),f({title:(0,s.jsx)(c.x6,{id:"LIAJwx"}),status:"success",duration:3e3,position:"top",isClosable:!0})},[b,r.id,f]),{isOpen:w,onOpen:E,onClose:k}=(0,ez.j)({id:"edit-domain-modal"});return(0,s.jsxs)(lD.Z,{variant:"outline",children:[(0,s.jsx)(lz.b,{children:(0,s.jsxs)(D.B,{spacing:1,children:[(0,s.jsxs)(te.z,{children:[(0,s.jsx)(D.B,{children:"verified"===r.status?(0,s.jsx)(W.Tz,{label:m,placement:"top",children:(0,s.jsx)(N.$,{as:nT.N,variant:"link",href:m,wordBreak:"break-all",target:"_blank",rightIcon:(0,s.jsx)(l.az,{ms:2,children:(0,s.jsx)(F.g,{icon:tR.Ju_,size:"xs"})}),whiteSpace:"normal",children:r.name})}):(0,s.jsx)(z.E,{children:r.name})}),(0,s.jsx)(t_.h,{}),(0,s.jsx)(te.z,{children:(0,s.jsx)(lF,{status:r.status,onClick:"failed"===r.status?C:null})}),(0,s.jsxs)(tt.e,{children:[j&&(0,s.jsx)(W.Tz,{label:(0,s.jsx)(c.x6,{id:"VMKg48"}),placement:"top",children:(0,s.jsx)(M.K,{onClick:E,"aria-label":u.Ru._({id:"VMKg48"}),size:"sm",variant:"ghost",icon:(0,s.jsx)(F.g,{icon:G.MT7})})}),g&&(0,s.jsx)(W.Tz,{label:(0,s.jsx)(c.x6,{id:"UqSZMD"}),placement:"top",children:(0,s.jsx)(M.K,{onClick:()=>{o(r.name)},"aria-label":u.Ru._({id:"UqSZMD"}),size:"sm",variant:"ghost",colorScheme:"blackAlpha",icon:(0,s.jsx)(F.g,{icon:G.mEO})})}),v&&(0,s.jsx)(W.Tz,{label:(0,s.jsx)(c.x6,{id:"C2YqXi"}),placement:"top",children:(0,s.jsx)(M.K,{onClick:()=>{d(null==r?void 0:r.id)},"aria-label":u.Ru._({id:"C2YqXi"}),size:"sm",variant:"hazardous",icon:(0,s.jsx)(F.g,{icon:G.sjs})})})]})]}),j&&(0,s.jsx)(l.az,{children:(0,s.jsxs)(z.E,{fontSize:"xs",color:"gray.500",as:"span",children:[(0,s.jsx)(c.x6,{id:"gDP3Mn",values:{GAMMA_PROPER_NOUN:eu.On}})," ",(0,s.jsx)(W.qT,{label:(0,s.jsx)(c.x6,{id:"ABSkTP",values:{GAMMA_PROPER_NOUN:eu.On}})})]})}),(null==y?void 0:y.checkDomain)&&(null===(t=y.checkDomain.actions)||void 0===t?void 0:t.length)&&(null===(i=y.checkDomain)||void 0===i?void 0:null===(n=i.dns)||void 0===n?void 0:n.status)!==nw.mXm.Ok&&(0,s.jsxs)(D.B,{spacing:2,fontSize:"xs",color:"gray.500",children:[(0,s.jsxs)(z.E,{children:[(0,s.jsx)(c.x6,{id:"ezr3/E"})," "]}),(0,s.jsx)(lP.Xy,{ps:"0",spacing:"2",children:((null==y?void 0:y.checkDomain.actions)||[]).map((e,t)=>(0,s.jsx)(lP.ck,{sx:{code:{fontSize:"xxs",bg:"gray.100",color:"gray.800"}},children:lN(e)},e.code+t))})]})]})}),(0,s.jsx)(lV,{isOpen:w,onClose:k,domain:r,siteId:x})]})};var lU=n(83073);let lB=()=>{let e=(0,p.useRef)(!1),[t,n]=(0,p.useState)(()=>void 0!==window.entri);return(0,tQ.nW)("https://cdn.goentri.com/entri.js",{predicate:()=>void 0===window.entri,onload:()=>{n(!0),e.current=!0}}),{entriReady:t}};var lH=n(73893),lq=n(32899),lK=n(79775),lJ=n(4022);let lY=async()=>{if(!window.entri)throw Error("Entri not found");return fetch("/api/domains/connectToken").then(e=>e.json()).then(e=>{if(!e.auth_token)throw Error("No auth token returned");return e.auth_token})},lX=async e=>{let{firstName:t,lastName:n,email:i,locale:r}=e,s=await lY();if(!window.entri)throw Error("Entri not found");let{dnsRecords:o}=(0,tu.oX)(""),l={applicationId:"gamma",applicationName:"Gamma",token:s,dnsRecords:o,sellVersion:"v2",...lq.of.get("entriV3")?{sellVersion:"v3",locale:r,whiteLabel:{theme:{primary:"#f7f3f2",onPrimary:"#3c3838",secondary:"#2208cc",onSecondary:"#ffffff",headerBackground:"#F2E7DE",interactive:"#2208cc",premiumBadge:"#d5ceff",onPremiumBadge:"#110466",priceBadge:"#C6F6D5",onPriceBadge:"#22543D",activating:"#2208cc",onActivating:"#ffffff"},sell:{flowTarget:"_blank",overlayScreenHeight:"60%",partnerName:"Gamma",partnerLogo:"".concat(lH.$.FRONTEND_URL,"/").concat(lK.A.src),partnerIcon:"".concat(lH.$.FRONTEND_URL,"/").concat(lJ.A.src),contact:{firstName:t,lastName:n,email:i}}}}:{}};return console.log("[launchEntri] Purchasing Entri with config",l),window.entri.purchaseDomain(l),lZ()},l$=async(e,t)=>{let n=await lY(),{domain:i,dnsRecords:r}=(0,tu.oX)(e),s={applicationId:"gamma",token:n,prefilledDomain:i,dnsRecords:r,locale:t};return console.log("[launchEntri] Launching Entri with config",s),window.entri.showEntri(s),lZ()},lZ=()=>new Promise((e,t)=>{let n=i=>{if(window.removeEventListener("onEntriClose",n),i.detail.success)e(i.detail);else{var r,s;let e=null==i?void 0:null===(r=i.detail)||void 0===r?void 0:r.error;if(!e||(null===(s=e.details)||void 0===s?void 0:s.includes("Please refresh")))return t();let n=e.title||"",o=e.details||"",l=n&&o?": ":"";t("".concat(n).concat(l).concat(o).trim()||void 0)}};window.addEventListener("onEntriClose",n,!1)}),lQ=e=>{let{siteId:t}=e,n=(0,J.st)(),{user:i}=(0,i4.ur)(),r=(0,lU.O)(),{entriReady:o}=lB(),l=(0,eE.d)(),[a,d]=(0,p.useState)(!1),[u,{loading:h}]=(0,nw.yuV)(),x=(0,p.useCallback)(async()=>{t&&(d(!0),lX({firstName:(null==i?void 0:i.firstName)||"",lastName:(null==i?void 0:i.lastName)||"",email:(null==i?void 0:i.email)||"",locale:r}).then(e=>{if(e&&"purchase"===e.setupType&&e.domain){let i=e.domain;null==n||n.track(J.VV.SITE_DOMAIN_PURCHASED,{domain:i,siteId:t}),u({variables:{input:{name:i,siteId:t,method:nw.hbC.Purchase}}}).then(()=>{null==n||n.track(J.VV.SITE_DOMAIN_ADDED,{domain:i,siteId:t,source:"entriSell"}),l({title:(0,s.jsx)(c.x6,{id:"5Ae0kE"}),description:(0,s.jsx)(c.x6,{id:"HqV46b"}),status:"success",duration:3e3,isClosable:!0,position:"top"})}).catch(e=>{console.error("[DomainListWrapper] error adding domain error",e),l({title:(0,s.jsx)(c.x6,{id:"JXFM3z"}),description:(null==e?void 0:e.message)&&e.message,status:"error",duration:null,position:"top",isClosable:!0})})}}).catch(e=>{console.error("[DomainListWrapper] entriPurchaseDomain error",e),l({title:e?(0,s.jsx)(c.x6,{id:"H7PVmT"}):(0,s.jsx)(c.x6,{id:"vr6nIz"}),description:e||void 0,status:"error",duration:e?null:3e3,position:"top",isClosable:!0})}).finally(()=>{d(!1)}))},[u,n,t,l,i,r]);return t?(0,s.jsx)(N.$,{variant:"outline",size:"md",onClick:x,isLoading:a,isDisabled:!o,children:(0,s.jsx)(c.x6,{id:"+VODT0"})}):null},l0=e=>{let{isOpen:t,onClose:n,domainName:i,onTransferConfirm:r,onTransferCancel:o,domainToTransfer:l,isTransferring:a}=e,d=(0,p.useCallback)(()=>{o(),n()},[n,o]),u=(0,p.useCallback)(async()=>{r(),n()},[n,r]);return l?(0,s.jsx)(W.L8,{isDark:!1,children:(0,s.jsxs)(sj.aF,{isOpen:t,onClose:d,size:"lg",children:[(0,s.jsx)(ir.m,{}),(0,s.jsxs)(sv.$,{children:[(0,s.jsx)(sb.r,{children:(0,s.jsx)(c.x6,{id:"hqplvI"})}),(0,s.jsx)(io.s,{}),(0,s.jsx)(il.c,{children:(0,s.jsxs)(D.B,{spacing:2,children:[(0,s.jsx)(z.E,{children:l.siteArchived?(0,s.jsx)(c.x6,{id:"SeHn75",values:{domainName:i,0:l.siteName}}):(0,s.jsx)(c.x6,{id:"tX38ij",values:{domainName:i,0:l.siteName}})}),(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"rKH6wM"})})]})}),(0,s.jsxs)(ia.j,{children:[(0,s.jsx)(N.$,{variant:"ghost",mr:3,onClick:d,children:(0,s.jsx)(c.x6,{id:"yz7wBu"})}),(0,s.jsx)(N.$,{isLoading:a,variant:"hazardous",onClick:u,children:(0,s.jsx)(c.x6,{id:"vTZxnA"})})]})]})]})}):(0,s.jsx)(s.Fragment,{})},l1=e=>{var t;let{site:n,path:i,onDomainSetupClick:r,onAddDomain:o,isAddingDomain:l,refetchSites:a}=e,d=(0,b.u)("purchaseDomain"),h=(0,eE.d)(),{currentWorkspace:x}=(0,X.ur)(),[m,f]=(0,p.useState)(),[g,j]=(0,p.useState)(),[v,y]=(0,p.useState)(""),{isOpen:C,onOpen:w,onClose:E}=(0,ez.j)({id:"delete-domain-modal"}),{isOpen:k,onOpen:S,onClose:I}=(0,iD.E)({id:"transferDomainModal"}),[T,{loading:A}]=(0,nw.D3l)({fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),_=n.domains.find(e=>e.id===m),R=(0,tu.zC)(v)&&void 0===n.domains.find(e=>e.name===v),[O,{loading:P}]=(0,nw.InM)(),[L,{loading:M}]=(0,nw.OyM)(),[V,G]=(0,p.useState)(void 0),F=(0,p.useCallback)(async e=>{var t;let i=await T({variables:{name:e,workspaceId:null==x?void 0:x.id}}),r=null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.domains,s=null==r?void 0:r[0];if(n&&s){j(s),S();return}o(e),j(void 0),y("")},[null==x?void 0:x.id,T,o,S,n]);(0,tQ.Vg)(()=>{m?G(null==_?void 0:_.name):G(void 0)},[m,null==_?void 0:_.name],[m]);let U=(0,p.useCallback)(()=>{E(),f(()=>void 0)},[E]),B=(0,p.useCallback)(async()=>{_&&(await O({variables:{id:m}}),await a(),h({title:(0,s.jsx)(c.x6,{id:"V4fbcv",values:{0:_.name}}),status:"success",duration:3e3,position:"top",isClosable:!0}),U())},[a,O,m,_,U,h]),H=(0,lR.ez)("custom_domains"),q=H&&d,K=(0,tu.H3)(n.domains),Y=(0,p.useCallback)(()=>{j(void 0)},[]),$=(0,p.useCallback)(async()=>{g&&(await L({variables:{id:null==g?void 0:g.id,siteId:n.id},refetchQueries:["GetSite"]}),h({title:(0,s.jsx)(c.x6,{id:"dHhDGG",values:{0:g.name}}),position:"top",status:"success",duration:5e3}),y(""),j(void 0))},[g,n.id,h,L]);return(0,s.jsxs)(D.B,{spacing:8,p:2,children:[H&&(0,s.jsxs)(D.B,{spacing:4,mb:2,children:[q&&(0,s.jsxs)(D.B,{children:[(0,s.jsx)(z.E,{fontSize:"md",children:(0,s.jsx)(c.x6,{id:"gBiND0"})}),(0,s.jsx)(lQ,{siteId:null==n?void 0:n.id})]}),(0,s.jsxs)(D.B,{children:[(0,s.jsx)(z.E,{children:q?(0,s.jsx)(c.x6,{id:"9UtMWk"}):(0,s.jsx)(c.x6,{id:"ssWCSl"})}),(0,s.jsxs)(te.z,{children:[(0,s.jsx)(l_.p,{bg:"white",placeholder:(null==n?void 0:null===(t=n.domains)||void 0===t?void 0:t.length)?u.Ru._({id:"jt/2Ky"}):u.Ru._({id:"1y9z1r"}),value:v,onChange:e=>y(e.target.value),onKeyDown:e=>{"Enter"===e.key&&R&&(e.preventDefault(),F(v))}}),(0,s.jsx)(D.B,{children:(0,s.jsx)(W.Tz,{label:(0,s.jsx)(c.x6,{id:"aUB5ST"}),placement:"top",shouldWrapChildren:!0,isDisabled:R,children:(0,s.jsx)(N.$,{isDisabled:!R,variant:"plain",onClick:()=>{F(v)},isLoading:l||A,children:(0,s.jsx)(c.x6,{id:"EdEpYN"})})})})]})]})]}),(0,s.jsxs)(D.B,{spacing:2,children:[(0,s.jsx)(c.x6,{id:"bwl+tv"}),K.map(e=>(0,s.jsx)(lW,{domain:e,onDomainSetupClick:r,path:i,onDeleteClick:e=>{f(e),w()},numDomains:n.domains.length||0,siteId:n.id},e.id))]}),!H&&(0,s.jsx)(sF.c,{segmentEvent:J.VV.GAMMA_PRO_UPSELL_DOMAINS,title:(0,s.jsx)(c.x6,{id:"m6aLo0"}),description:(0,s.jsx)(c.x6,{id:"xFELnF",values:{GAMMA_PRO_PROPER_NOUN:eu.Ol,GAMMA_PROPER_NOUN:eu.On}})}),C&&(0,s.jsx)(lO,{onClose:U,onDelete:B,domainName:V,isDeleting:P}),(0,s.jsx)(l0,{isOpen:k,onClose:I,onTransferCancel:Y,domainName:v,domainToTransfer:g,onTransferConfirm:$,isTransferring:M})]})};var l6=n(7910);let l2=e=>{let{isOpen:t,onClose:n,domainName:i,onDomainConfirmed:r}=e,[l,a]=(0,p.useState)("initial"),d=(0,lU.O)(),{entriReady:u}=lB(),[h,x]=(0,p.useState)(!1),m=(0,eE.d)(),{dnsRecords:f,isRootDomain:g,subdomain:j}=(0,p.useMemo)(()=>(0,tu.oX)(i||""),[i]);return(0,s.jsx)(W.L8,{isDark:!1,children:(0,s.jsxs)(sj.aF,{isOpen:t,onClose:n,size:"3xl",trapFocus:!1,children:[(0,s.jsx)(ir.m,{}),(0,s.jsxs)(sv.$,{children:[(0,s.jsx)(sb.r,{children:(0,s.jsx)(c.x6,{id:"YSyDVG",values:{domainName:i,GAMMA_PROPER_NOUN:eu.On}})}),(0,s.jsx)(io.s,{}),(0,s.jsxs)(il.c,{children:["initial"===l&&(0,s.jsx)(lD.Z,{variant:"filled",children:(0,s.jsx)(lz.b,{children:(0,s.jsxs)(D.B,{spacing:4,py:4,mx:"auto",children:[(0,s.jsxs)(D.B,{spacing:2,children:[(0,s.jsxs)(D.B,{spacing:1,children:[(0,s.jsx)(z.E,{textAlign:"center",fontSize:"2xl",children:(0,s.jsx)(F.g,{icon:G.Bwz,size:"lg"})}),(0,s.jsx)(z.E,{fontWeight:"semibold",fontSize:"lg",textAlign:"center",children:(0,s.jsx)(c.x6,{id:"w5l5pM"})})]}),(0,s.jsx)(z.E,{textAlign:"center",maxW:"unset",children:(0,s.jsx)(c.x6,{id:"aV1OpM",values:{GAMMA_PROPER_NOUN:eu.On}})})]}),(0,s.jsx)(o.s,{align:"center",justify:"center",w:"100%",children:(0,s.jsxs)(D.B,{w:64,maxW:"100%",children:[(0,s.jsx)(N.$,{size:"md",variant:"solid",isDisabled:!u,isLoading:h,onClick:()=>{i&&(x(!0),l$(i,d).then(e=>{console.log("[ENTRI] Successfully setup domain",e),null==r||r({domainName:i,source:"automatic"})}).catch(e=>{e&&nJ.Cp("[entri.showEntri] Error setting up domain: ".concat(e)),m({title:e?(0,s.jsx)(c.x6,{id:"l/2jzv"}):(0,s.jsx)(c.x6,{id:"FZ1Qqq"}),description:e,status:"error",duration:3e3,isClosable:!0,position:"top"})}).finally(()=>{x(!1)}))},children:(0,s.jsx)(c.x6,{id:"qu+sXe"})}),(0,s.jsxs)(te.z,{children:[(0,s.jsx)(sM.c,{}),(0,s.jsx)(z.E,{color:"gray.600",children:(0,s.jsx)(c.x6,{id:"BzEFor"})}),(0,s.jsx)(sM.c,{})]}),(0,s.jsx)(N.$,{size:"md",variant:"plain",onClick:()=>{a("manualSetup")},children:(0,s.jsx)(c.x6,{id:"ANIrop"})})]})})]})})}),"manualSetup"===l&&(0,s.jsx)(lD.Z,{variant:"filled",children:(0,s.jsx)(lz.b,{children:(0,s.jsxs)(D.B,{spacing:6,children:[(0,s.jsx)(z.E,{fontWeight:"semibold",fontSize:"lg",children:(0,s.jsx)(c.x6,{id:"L5N7HX"})}),(0,s.jsxs)(ox.X,{variant:"simple",children:[(0,s.jsx)(od.d,{children:(0,s.jsxs)(oc.Tr,{children:[(0,s.jsx)(ou.Th,{children:(0,s.jsx)(c.x6,{id:"6YtxFj"})}),(0,s.jsx)(ou.Th,{children:(0,s.jsx)(c.x6,{id:"+zy2Nq"})}),(0,s.jsx)(ou.Th,{isNumeric:!0,children:(0,s.jsx)(c.x6,{id:"HKH+W+"})})]})}),(0,s.jsx)(op.N,{children:(f||[]).map(e=>(0,s.jsxs)(oc.Tr,{children:[(0,s.jsx)(om.Td,{fontFamily:"mono",children:e.host}),(0,s.jsx)(om.Td,{fontFamily:"mono",children:e.type}),(0,s.jsx)(om.Td,{isNumeric:!0,fontFamily:"mono",children:e.value})]},e.value))})]}),(0,s.jsxs)(i7.F,{status:"info",colorScheme:"orange",children:[(0,s.jsx)(sB._,{}),(0,s.jsxs)(D.B,{children:[(0,s.jsx)(z.E,{fontWeight:"bold",fontSize:"md",children:(0,s.jsx)(c.x6,{id:"NxHkkp"})}),(0,s.jsxs)(lP._J,{ps:"4",spacing:"2",children:[g?1===l6.Wc.length?(0,s.jsx)(lP.ck,{children:(0,s.jsx)(c.x6,{id:"wz2Cgq",values:{0:l6.Wc[0]},components:{0:(0,s.jsx)(lL.C,{colorScheme:"gray"}),1:(0,s.jsx)(lL.C,{colorScheme:"gray"})}})}):(0,s.jsx)(lP.ck,{children:(0,s.jsx)(c.x6,{id:"+kOqFW",values:{0:l6.Wc.slice(0,-1).map(e=>(0,s.jsx)(lL.C,{colorScheme:"gray",children:e},e)),1:l6.Wc.slice(-1)[0]},components:{0:(0,s.jsx)(lL.C,{colorScheme:"gray"}),1:(0,s.jsx)(te.z,{display:"inline",divider:(0,s.jsx)("span",{children:", "})}),2:(0,s.jsx)(lL.C,{colorScheme:"gray"})}})}):null,g&&(0,s.jsx)(lP.ck,{children:(0,s.jsx)(c.x6,{id:"vLov0O",components:{0:(0,s.jsx)(lL.C,{colorScheme:"gray"}),1:(0,s.jsx)(lL.C,{colorScheme:"gray"})}})}),(0,s.jsx)(lP.ck,{children:(0,s.jsx)(c.x6,{id:"Jmb6Yp",values:{subdomain:j,GAMMA_SITES_HOST:l6._o},components:{0:(0,s.jsx)(lL.C,{colorScheme:"gray"}),1:(0,s.jsx)(lL.C,{colorScheme:"gray"}),2:(0,s.jsx)(lL.C,{colorScheme:"gray"})}})})]})]})]}),r&&(0,s.jsxs)(te.z,{justifyContent:"space-between",children:[(0,s.jsx)(N.$,{variant:"plain",onClick:()=>a("initial"),children:(0,s.jsx)(c.x6,{id:"iH8pgl"})}),(0,s.jsx)(N.$,{variant:"solid",onClick:()=>{n(),null==r||r({domainName:i,source:"manual"})},size:"md",mx:"auto",children:(0,s.jsx)(c.x6,{id:"RyhVuk"})})]})]})})})]}),(0,s.jsx)(ia.j,{})]})]})})},l5=e=>{let{children:t,shouldWrap:n=!1}=e;return n?(0,s.jsx)(rb.m,{py:16,maxW:"container.md",children:t}):(0,s.jsx)(s.Fragment,{children:t})},l3=e=>{let{showHeadings:t=!0}=e,n=(0,J.st)(),i=(0,eo.GV)(ta.Gd),r=(0,eE.d)(),{refetch:l}=(0,rA.DL0)({variables:{id:null==i?void 0:i.id},fetchPolicy:"cache-first",skip:!(null==i?void 0:i.id)}),{isOpen:a,onOpen:d,onClose:u}=(0,iD.E)({id:"domainSetupModal"}),h=null==i?void 0:i.domains.find(e=>"pending"===e.status),[x,m]=(0,p.useState)(null),[f,{loading:g}]=(0,rA.yuV)(),[j,v]=(0,p.useState)();(0,p.useEffect)(()=>{if(!h)return;let e=setInterval(()=>{l()},1e4);return()=>{clearInterval(e)}},[h,l,i]);let b=(0,p.useCallback)(e=>{v(e),d()},[d]),y=(0,p.useCallback)(e=>{let{domainName:t,source:o}=e;"addDomain"===x&&f({variables:{input:{siteId:null==i?void 0:i.id,name:t,method:"automatic"===o?rA.hbC.Automatic:rA.hbC.Manual}}}).then(()=>{null==n||n.track(J.VV.SITE_DOMAIN_ADDED,{domain:t,siteId:null==i?void 0:i.id,source:o}),r({title:(0,s.jsx)(c.x6,{id:"p8Oc6N"}),description:(0,s.jsx)(c.x6,{id:"HqV46b"}),status:"success",duration:3e3,isClosable:!0,position:"top"}),u()}).catch(e=>{let t=(0,lA.vI)(e).some(e=>"max_domains_reached"===e);r({title:t?(0,s.jsx)(c.x6,{id:"634yzf"}):(0,s.jsx)(c.x6,{id:"HugOMA"}),description:t?(0,s.jsx)(c.x6,{id:"aMKkZK"}):(0,s.jsx)(c.x6,{id:"PZCqeW"}),status:"error",isClosable:!0,position:"top"})})},[f,n,x,u,null==i?void 0:i.id,r]);return console.debug("%cDomainsPanel debug","background-color: #cc00ff",{site:i}),(0,s.jsx)(o.s,{w:"100%",flex:1,direction:"column",mt:4,children:(0,s.jsxs)(l5,{shouldWrap:t,children:[t&&(0,s.jsxs)(D.B,{spacing:1,mb:4,children:[(0,s.jsx)(P.D,{children:(0,s.jsx)(c.x6,{id:"AZ4xlc"})}),(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"KuoJwF"})})]}),i?(0,s.jsx)(l1,{site:i,onDomainSetupClick:b,onAddDomain:e=>{d(),v(e),m("addDomain")},isAddingDomain:g,refetchSites:l}):(0,s.jsx)(iu.Yh,{}),a&&j&&(0,s.jsx)(l2,{domainName:j,isOpen:a,onClose:()=>{u(),m(null)},onDomainConfirmed:x?y:null})]})})};var l4=n(15672),l8=n(74327),l7=n(4977),l9=n(67656);let ae={src:"/_next/static/media/no-navbar.e9d28333.png"},at={src:"/_next/static/media/top-navbar.97a69a83.png"};var an=n(61077);let ai=e=>{let{gtmContainerId:t,setGtmContainerId:n}=e;return(0,s.jsxs)(ll.MJ,{children:[(0,s.jsx)(te.z,{justifyContent:"center",children:(0,s.jsxs)(la.l,{display:"flex",flex:"1",m:0,mt:2,children:[(0,s.jsx)(c.x6,{id:"d4WWfP"}),(0,s.jsx)(W.qT,{ms:2,label:(0,s.jsx)(c.x6,{id:"gmEwbH"})}),(0,s.jsx)(t_.h,{}),(0,s.jsx)(N.$,{"aria-label":"Learn more about Google Tag Manager",alignSelf:"flex-end",as:"a",px:1,textDecoration:"underline",variant:"ghost",href:"https://support.google.com/tagmanager/answer/6103696?hl=en",target:"_blank",size:"sm",rightIcon:(0,s.jsx)(nR.p,{ms:-1}),children:(0,s.jsx)(c.x6,{id:"zwWKhA"})})]})}),(0,s.jsxs)(o.s,{sx:{".gtm-prefix::before":{content:'"GTM\\2009-"'}},children:[(0,s.jsx)(o.s,{className:"gtm-prefix",position:"absolute",alignItems:"center",color:(null==t?void 0:t.length)?"gray.800":"gray.500",fontWeight:"400",h:10,ps:4}),(0,s.jsx)(l_.p,{pl:16,placeholder:"XXXXXX",value:t||"",onChange:e=>{n(an.W.sanitize(e.currentTarget.value).replace(/[\W_]+/g,"").toUpperCase().slice(0,10))}})]})]})},ar=e=>{let{pixelId:t,setPixelId:n}=e;return(0,s.jsxs)(ll.MJ,{children:[(0,s.jsx)(te.z,{justifyContent:"center",children:(0,s.jsxs)(la.l,{display:"flex",flex:"1",m:0,children:[(0,s.jsx)(c.x6,{id:"163jQp"}),(0,s.jsx)(W.qT,{ms:2,label:(0,s.jsx)(c.x6,{id:"mynmm2",components:{0:(0,s.jsx)("span",{"aria-label":"arrow-right",role:"img"})}})}),(0,s.jsx)(o.s,{mx:2,mb:1.5,alignItems:"center",children:(0,s.jsx)(lo.E,{colorScheme:"green",children:(0,s.jsx)(c.x6,{id:"isRobC"})})}),(0,s.jsx)(t_.h,{}),(0,s.jsx)(N.$,{"aria-label":"Learn more about the Meta Pixel",alignSelf:"flex-end",as:"a",px:1,textDecoration:"underline",variant:"ghost",href:"https://developers.facebook.com/docs/meta-pixel/get-started",target:"_blank",size:"sm",rightIcon:(0,s.jsx)(nR.p,{ms:-1}),children:(0,s.jsx)(c.x6,{id:"zwWKhA"})})]})}),(0,s.jsx)(o.s,{children:(0,s.jsx)(l_.p,{ps:4,placeholder:"12345*****67890",value:t||"",onChange:e=>{n(an.W.sanitize(e.currentTarget.value).replace(/[\W_]+/g,"").toUpperCase().slice(0,20))}})})]})},as=e=>{let t=(0,eo.GV)(ta.Gd);return t?(0,s.jsx)(ao,{site:t,...e}):null},ao=e=>{let{site:t,showHeadings:n=!0,doc:i}=e,r=(0,eE.d)(),l=(0,b.u)("sitesNav"),[a,d]=(0,p.useState)(t.name),[h,x]=(0,p.useState)(t.gtmContainerId),[m,f]=(0,p.useState)(t.metaPixelId),[g,j]=(0,p.useState)(t.navEnabled),[v,y]=(0,p.useState)(!1),[C,w]=(0,p.useState)(!1),[E,k]=(0,p.useState)(null),{currentWorkspace:S}=(0,X.ur)(),[I]=(0,nw.vlJ)(),T=(0,p.useCallback)(async()=>{if(!(null==t?void 0:t.id))return;y(!0);let e={siteId:t.id,name:a,navEnabled:g,gtmContainerId:h||null,metaPixelId:m||null};!g||(null==t?void 0:t.navContent)||(e.navContent=(0,tm.aG)()),await I({variables:{input:e}}),r({title:(0,s.jsx)(c.x6,{id:"bZn5Ok"}),status:"success",isClosable:!0,position:"top"}),y(!1)},[h,m,a,g,t,r,I]),A=(0,p.useCallback)(async e=>{(null==t?void 0:t.id)&&(w(!0),await I({variables:{input:{siteId:t.id,faviconUrl:e}}}),r({title:e?(0,s.jsx)(c.x6,{id:"64GEyu"}):(0,s.jsx)(c.x6,{id:"/K2cLG"}),status:"success",isClosable:!0,position:"top"}),w(!1))},[null==t?void 0:t.id,r,I]),_=(0,p.useMemo)(()=>{let e=h||void 0,n=(null==t?void 0:t.gtmContainerId)||void 0,i=m||void 0,r=(null==t?void 0:t.metaPixelId)||void 0;return a!==(null==t?void 0:t.name)||g!==(null==t?void 0:t.navEnabled)||e!==n||i!==r},[t,a,g,h,m]);return(0,s.jsxs)(o.s,{w:"100%",flex:1,direction:"column",px:2,children:[(0,s.jsxs)(l5,{shouldWrap:n,children:[n&&(0,s.jsx)(P.D,{fontSize:"3xl",letterSpacing:"tight",fontWeight:"800",mb:12,children:(0,s.jsx)(c.x6,{id:"Tz0i8g"})}),(0,s.jsxs)(D.B,{spacing:4,mt:6,children:[(0,s.jsxs)(ll.MJ,{children:[(0,s.jsx)(te.z,{justifyContent:"center",children:(0,s.jsx)(la.l,{flex:"1",children:(0,s.jsx)(c.x6,{id:"Lve3H6"})})}),(0,s.jsx)(l_.p,{onChange:e=>{d(e.currentTarget.value)},placeholder:u.Ru._({id:"ZiMSMQ"}),value:a})]}),(0,s.jsxs)(ll.MJ,{children:[(0,s.jsx)(te.z,{justifyContent:"center",children:(0,s.jsx)(la.l,{flex:"1",children:(0,s.jsx)(c.x6,{id:"+Qaboy"})})}),(0,s.jsx)(o.s,{h:"150px",w:"100%",position:"relative",justify:"center",align:"center",children:(null==t?void 0:t.faviconUrl)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.s,{align:"center",justify:"center",w:"128px",h:"128px",border:"1px solid var(--chakra-colors-blackAlpha-200)",children:(0,s.jsx)(iN._,{src:null==t?void 0:t.faviconUrl,maxW:"100px",maxH:"100px",borderRadius:"sm"})}),(0,s.jsx)(W.Tz,{label:(0,s.jsx)(c.x6,{id:"XyBdok"}),children:(0,s.jsx)(M.K,{zIndex:2,position:"absolute",top:0,right:0,isRound:!0,isDisabled:C,size:"sm",icon:(0,s.jsx)(F.g,{icon:G.yLS}),"aria-label":u.Ru._({id:"XyBdok"}),onClick:()=>A(null)})})]}):C||E===l7.A.Uploading?(0,s.jsx)(t8.y,{}):(0,s.jsx)(l8.Zc,{orgId:null==S?void 0:S.id,uploadType:"icon",editType:"icon",dropHereText:u.Ru._({id:"hVCCpY",values:{0:"%{browse}"}}),customHeight:"150px",customFontSize:"xs",onUploadStart:()=>{k(l7.A.Uploading)},onUploadSuccess:async(e,t)=>{let{src:n,uploadResultStep:i}=e;"optimized"===i&&(await A(n),k(l7.A.Done))},onUploadFailed:e=>{k(l7.A.Error),r({title:(0,s.jsx)(c.x6,{id:"aECahe"})}),console.error("[Site SettingsPanel] Favicon upload error",e)},sx:{width:"100%",".uppy-Root":{border:"1px solid var(--chakra-colors-gray-200)",borderRadius:"md",width:"100%"},".uppy-DragDrop-label":{fontSize:"xs",color:"gray.500"},".uppy-DragDrop--isDragDropSupported":{border:"none"},".uppy-DragDrop-arrow":{transform:"scale(0.85)"}}})}),(0,s.jsx)(z.E,{fontSize:"xs",color:"gray.500",mt:2,children:(0,s.jsx)(c.x6,{id:"ifTGl2"})})]}),l&&(0,s.jsxs)(ll.MJ,{children:[(0,s.jsx)(te.z,{justifyContent:"center",children:(0,s.jsx)(la.l,{flex:"1",children:(0,s.jsx)(c.x6,{id:"UxKoFf"})})}),(0,s.jsxs)(l4.r,{columns:2,spacing:6,flex:1,children:[(0,s.jsx)(al,{name:u.Ru._({id:"Nom9QG"}),src:at.src,isSelected:g,onClick:()=>{j(!0)}}),(0,s.jsx)(al,{name:u.Ru._({id:"BvDFuc"}),src:ae.src,isSelected:!g,onClick:()=>{j(!1)}})]})]}),(0,s.jsx)(ai,{gtmContainerId:h,setGtmContainerId:x}),(0,s.jsx)(ar,{pixelId:m,setPixelId:f}),i&&(0,s.jsx)(l9.w,{label:(0,s.jsx)(c.x6,{id:"SDyz5I"}),segmentEvent:tY.VV.GAMMA_PRO_UPSELL_SITE_REMOVE_WATERMARK,doc:i})]})]}),(0,s.jsx)(o.s,{w:"100%",flex:1,direction:"column",pos:"sticky",bottom:0,children:(0,s.jsxs)(o.s,{mx:-2,flex:1,mb:-2,py:4,bg:"white",children:[(0,s.jsx)(t_.h,{}),(0,s.jsx)(N.$,{variant:"solid",isDisabled:!_,onClick:T,isLoading:v,children:(0,s.jsx)(c.x6,{id:"tfDRzk"})})]})})]})},al=e=>{let{name:t,src:n,onClick:i,isSelected:r,...o}=e;return(0,s.jsxs)(D.B,{p:2,bg:r?"trueblue.50":"transparent",_hover:{bg:"trueblue.50",cursor:"pointer"},borderRadius:"md",spacing:2,...o,transitionProperty:"common",transitionDuration:"normal",onClick:i,children:[(0,s.jsx)(l.az,{height:"80px",bg:"gray.50",borderRadius:"md",borderWidth:"1px",overflow:"hidden",children:n&&(0,s.jsx)(iN._,{src:n,width:"100%",height:"100%",objectFit:"contain",borderRadius:"md"})}),(0,s.jsxs)(te.z,{children:[r&&(0,s.jsx)(l.az,{children:(0,s.jsx)(F.g,{icon:G.e68})}),(0,s.jsx)(z.E,{fontSize:"sm",fontWeight:"500",children:t})]})]})},aa=(0,p.memo)(e=>{let{editor:t}=e,{bodyStart:n}=(0,eo.GV)(el.BP),i=(0,p.useCallback)(e=>{null==t||t.commands.updateNestedAttributesAtPos(0,{customCode:{bodyStart:e}})},[t]);return(0,s.jsx)(o.s,{w:"100%",flex:1,direction:"column",p:2,pt:6,children:(0,s.jsx)(lu,{label:u.Ru._({id:"fC5kYg"}),helperText:u.Ru._({id:"0AZNtw"}),initialValue:n,updateValue:i,language:"html",height:"600px"})})});aa.displayName="CustomCodePanel";let ad=(0,p.memo)(e=>{let{selectedPanel:t,setSelectedPanel:n}=e,i=(0,b.u)("docCustomCode");return(0,s.jsx)(D.B,{spacing:4,children:(0,s.jsx)(D.B,{spacing:8,children:(0,s.jsxs)(tt.e,{variant:"ghost",size:"sm",borderRadius:"full",w:"100%",children:[(0,s.jsx)(N.$,{borderRadius:"md",leftIcon:(0,s.jsx)(F.g,{icon:G.y5z,fixedWidth:!0}),"data-website-panel-active-view-button":"domains",colorScheme:"domains"===t?"trueblue":"gray",bg:"domains"===t?"trueblue.100":void 0,onClick:()=>n("domains"),flex:1,children:(0,s.jsx)(c.x6,{id:"AZ4xlc"})}),(0,s.jsx)(N.$,{borderRadius:"md",leftIcon:(0,s.jsx)(F.g,{icon:G.BH7,fixedWidth:!0}),"data-website-panel-active-view-button":"website",colorScheme:"website"===t?"trueblue":"gray",bg:"website"===t?"trueblue.100":void 0,onClick:()=>n("website"),flex:1,children:(0,s.jsx)(c.x6,{id:"Tz0i8g"})}),i&&(0,s.jsx)(N.$,{borderRadius:"md",leftIcon:(0,s.jsx)(F.g,{icon:G.jTw,fixedWidth:!0}),"data-website-panel-active-view-button":"code",colorScheme:"code"===t?"trueblue":"gray",bg:"code"===t?"trueblue.100":void 0,onClick:()=>n("code"),flex:1,children:(0,s.jsx)(c.x6,{id:"E16GGw"})})]})})})});ad.displayName="SettingsPanelHeader";var ac=n(99742);let au=e=>{var t;let{title:n,site:i}=e,r="/".concat((0,lM.Fw)(n||"untitled"));return(null==i?void 0:null===(t=i.routes)||void 0===t?void 0:t.find(e=>e.path===r))&&(r="".concat(r,"-").concat((0,ac.Ak)(6))),r},ah={variant:"outline",transitionProperty:"all",transitionDuration:"normal",cursor:"pointer",boxShadow:"none",tabIndex:0,_hover:{shadow:"lg",borderColor:"trueblue.300",bg:"trueblue.50"},_focusVisible:{boxShadow:"none",outline:"none"},_focus:{boxShadow:"outline"}},ax=e=>{let{sites:t}=e,n=(0,eo.GV)(el.Jo),i=(0,J.st)(),{currentWorkspace:r}=(0,X.ur)(),[l]=(0,nw.Imo)(),[a,d]=(0,p.useState)(!1),u=(0,eE.d)(),{push:h,reload:x}=(0,tn.useRouter)(),m=(0,p.useCallback)(async e=>{if(!n)return;d(!0);let o=null==t?void 0:t.find(t=>t.id===e),a=n.id;if(!(null==r?void 0:r.id)){console.error("[MoveToSiteModal] No currentWorkspace found");return}let h=au({title:n.title,site:o});if(await (0,tu.fb)(a),!a){console.error("[MoveToSiteModal] No docId found");return}null==i||i.track(J.VV.DOC_MOVED_TO_SITE,{doc_id:a,site_id:e}),l({variables:{input:{siteId:e,docId:a,path:h}},refetchQueries:["GetSite"]}).then(()=>{(0,w.pF)({docId:a}),console.debug("[MoveToSiteModal] Doc moved to site. Adding route then navigating to editor",a),u({position:"top",title:(0,s.jsx)(c.x6,{id:"oMgC5V"}),description:(0,s.jsx)(c.x6,{id:"rYG2u6"}),status:"success",duration:5e3}),x()}).catch(e=>{u({position:"top",title:"Error",description:e.message,status:"error",duration:5e3}),d(!1)}).finally(()=>{d(!1)})},[i,null==r?void 0:r.id,n,x,l,t,u]);return(0,s.jsxs)(s.Fragment,{children:[a&&(0,s.jsx)(o.s,{w:"100",h:"400px",maxH:"30vh",children:(0,s.jsx)(iu.Yh,{})}),!a&&(0,s.jsxs)(D.B,{spacing:4,children:[(0,s.jsx)(D.B,{pt:2,pb:2,children:(0,s.jsxs)(z.E,{fontSize:"sm",letterSpacing:"normal",color:"gray.600",fontWeight:"500",children:[(0,s.jsx)(c.x6,{id:"1osTfm",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP},components:{0:(0,s.jsx)("strong",{})}})," ",(0,s.jsxs)(nT.N,{href:"https://help.gamma.app/en/articles/8429268-how-to-publish-your-page-to-a-custom-domain",textDecoration:"underline",isExternal:!0,color:"trueblue.500",children:[(0,s.jsx)(c.x6,{id:"Px95UX"}),(0,s.jsx)(nR.p,{mx:"2px"})]})," "]})}),t&&t.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z.E,{fontSize:"sm",letterSpacing:"normal",color:"gray.600",fontWeight:"500",children:(0,s.jsx)(c.x6,{id:"kjbPb3",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}})}),null==t?void 0:t.map(e=>(0,s.jsx)(lD.Z,{onClick:()=>m(e.id),onKeyPress:t=>{"Enter"===t.key&&m(e.id)},...ah,children:(0,s.jsx)(lz.b,{children:(0,s.jsxs)(te.z,{children:[(0,s.jsx)(D.B,{spacing:0,children:(0,s.jsxs)(te.z,{children:[e.faviconUrl&&(0,s.jsx)(iN._,{w:"4",src:e.faviconUrl}),(0,s.jsx)(z.E,{fontWeight:"600",children:e.name})]})}),(0,s.jsx)(t_.h,{}),(0,s.jsx)(F.g,{icon:G.dmS})]})})},e.id))]})]})]})},ap=()=>{let{isOpen:e,onOpen:t,onClose:n}=(0,iD.E)({id:"MoveToSiteDisclosure"}),{currentWorkspace:i}=(0,X.ur)(),{data:r,loading:o}=(0,nw._qT)({variables:{workspaceId:null==i?void 0:i.id},skip:!(null==i?void 0:i.id),fetchPolicy:"cache-first"}),l=null==r?void 0:r.sites;return o?(0,s.jsx)(t8.y,{size:"xs"}):l&&0===l.length?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.$,{variant:"plain",onClick:t,colorScheme:"trueblue",children:(0,s.jsx)(c.x6,{id:"hsMvVQ"})}),(0,s.jsxs)(sj.aF,{isOpen:e,onClose:n,size:"3xl",children:[(0,s.jsx)(ir.m,{}),(0,s.jsxs)(sv.$,{children:[(0,s.jsx)(sb.r,{children:(0,s.jsx)(c.x6,{id:"i4b0iJ"})}),(0,s.jsx)(io.s,{}),(0,s.jsx)(il.c,{maxH:"80vh",overflowY:"auto",children:(0,s.jsx)(ax,{sites:l})}),(0,s.jsx)(ia.j,{children:(0,s.jsx)(N.$,{mr:3,onClick:n,children:(0,s.jsx)(c.x6,{id:"yz7wBu"})})})]})]})]})},am=e=>{let{onEnable:t,isLoading:n}=e;return(0,s.jsxs)(D.B,{align:"center",justify:"center",spacing:4,flex:1,p:6,mt:8,bg:"gray.50",borderRadius:"md",children:[(0,s.jsx)(iN._,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/9f0b4d71d10f4d388e50febe89bb1853/optimized/Sal-Chill-Cloud.svg",w:"200px"}),(0,s.jsx)(P.D,{fontFamily:"p22-mackinac-pro",fontWeight:"700",size:"md",textAlign:"center",css:{textWrap:"pretty"},children:(0,s.jsx)(c.x6,{id:"0864Ii",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}})}),(0,s.jsx)(z.E,{fontSize:"sm",children:(0,s.jsx)(c.x6,{id:"JOJtWL",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP},components:{0:(0,s.jsx)("strong",{}),1:(0,s.jsx)("strong",{}),2:(0,s.jsx)("code",{})}})}),(0,s.jsxs)(D.B,{w:"100%",children:[(0,s.jsx)(N.$,{variant:"solid",onClick:t,isLoading:n,children:(0,s.jsx)(c.x6,{id:"oL6HHo"})}),(0,s.jsx)(ap,{})]}),(0,s.jsx)(N.$,{as:nT.N,variant:"ghost",isExternal:!0,href:"https://help.gamma.app/en/articles/8429268-how-to-publish-your-page-to-a-custom-domain",rightIcon:(0,s.jsx)(F.g,{icon:G.vMs,size:"sm"}),children:(0,s.jsx)(c.x6,{id:"Px95UX"})})]})};var af=n(60674),ag=n(75669);let aj=(0,af.P)(l.az),av={initial:{opacity:0,translateY:-40},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:40},transition:{duration:.3}},ab=e=>{let{isLoading:t,onChange:n,isChecked:i,isDisabled:r,enabledText:d,disabledText:c}=e;return(0,s.jsxs)(o.s,{cursor:r?"not-allowed":"pointer",className:(0,a.cx)("gamma-switch-container",t&&"loading",i?"active":""),opacity:r?.6:1,children:[(0,s.jsx)(l.az,{as:"label",className:"text",fontSize:"sm",justifyContent:"center",htmlFor:"gamma-checkbox",position:"relative",overflow:"hidden",children:(0,s.jsx)(ag.N,{initial:!1,children:t?(0,s.jsx)(aj,{as:"span",position:"absolute",...av,children:(0,s.jsx)(t8.y,{size:"sm"})},"loading"):i?(0,s.jsx)(aj,{as:"span",position:"absolute",...av,children:d},"checked"):(0,s.jsx)(aj,{as:"span",position:"absolute",...av,children:c},"unchecked")})}),(0,s.jsxs)(l.az,{as:"label",className:"switch",pointerEvents:r?"none":"auto",children:[(0,s.jsx)("input",{id:"gamma-checkbox",type:"checkbox",onChange:n,disabled:t||r}),(0,s.jsx)("span",{className:"slider round"})]})]})},ay=(0,V.i7)({"0%":{transform:"scale(1)",opacity:1},"50%":{transform:"scale(1.7)",opacity:0},"100%":{transform:"scale(1)",opacity:0}}),aC=(0,V.i7)({"0%":{transform:"scale(1)",opacity:1},"15%":{transform:"scale(1)",opacity:1},"60%":{transform:"scale(1.7)",opacity:0},"100%":{transform:"scale(1)",opacity:0}}),aw=(0,V.i7)({"0%":{transform:"scale(1)"},"30%":{transform:"scale(1)"},"50%":{transform:"scale(1.05)"},"70%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),aE=e=>{let{icon:t,showDisabled:n=!1,shouldPulse:i=!1,bg:r="gray.200",color:o="gray.800"}=e;return(0,s.jsx)(l.jl,{color:o,textAlign:"center",bg:r,size:8,opacity:n?.5:1,position:"relative",animation:i?"".concat(aw," 2.7s infinite"):"none",sx:{":before":i?{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",content:"''",boxShadow:"inset 0 0 0 3px #6910D166",transition:"transform 0.2s, opacity 0.2s",animation:"".concat(ay," 2.7s infinite")}:{},":after":i?{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",content:"''",boxShadow:"inset 0 0 0 2px #6910D133",transition:"transform 0.2s, opacity 0.2s",animation:"".concat(aC," 2.7s infinite")}:{}},children:n?(0,s.jsxs)("span",{className:"fa-stack",children:[(0,s.jsx)(F.g,{icon:G.$Dv,className:"fa-stack-1x"}),(0,s.jsx)(F.g,{icon:t,className:"fa-stack-1x"})]}):(0,s.jsx)(F.g,{size:"1x",icon:t})})},ak=e=>{let{isLoading:t=!1,site:n,onChange:i,disabledText:r,doc:a}=e,d=(0,tu.dv)(n),u=(0,r_.mL)(),h=(0,X.Iy)("manage",a),x=u||h,p=!!(t||r||!x),m=(0,tu.m8)(n),f=x?r||(t?(0,s.jsx)(c.x6,{id:"mkk40+"}):d?(0,s.jsx)(c.x6,{id:"f4CBNf"}):(0,s.jsx)(c.x6,{id:"5G4vd5"})):(0,s.jsx)(c.x6,{id:"Z2uNdQ"});return n?(0,s.jsxs)(te.z,{w:"100%",justify:"space-between","data-testid":"toggle-website-settings",children:[(0,s.jsx)(l.az,{children:(0,s.jsxs)(o.s,{alignItems:"center",children:[(0,s.jsx)(aE,{shouldPulse:m,bg:m?"#6910D1":"gray.200",color:m?"white":"gray.800",icon:m?G.LIr:G.Bwz}),(0,s.jsxs)(l.az,{ml:3,children:[(0,s.jsx)(te.z,{children:(0,s.jsx)(z.E,{children:m?(0,s.jsx)(c.x6,{id:"MuDTSp"}):d?(0,s.jsx)(c.x6,{id:"AAm5jh"}):(0,s.jsx)(c.x6,{id:"HzFHhy"})})}),(0,s.jsx)(o.s,{align:"center",children:(0,s.jsx)(te.z,{spacing:1,align:"center",children:(0,s.jsx)(z.E,{fontSize:"xs",color:"gray.500",css:{textWrap:"balance"},children:n&&m?(0,s.jsx)(sh,{site:n}):d?(0,s.jsx)(c.x6,{id:"N4VTXP"}):(0,s.jsx)(c.x6,{id:"1bmqGL"})})})})]})]})}),(0,s.jsx)(l.az,{children:(0,s.jsx)(W.Tz,{label:f,placement:"top",shouldWrapChildren:!0,children:(0,s.jsx)(ab,{isChecked:d,isDisabled:p,isLoading:t,onChange:i})})})]}):null},aS=e=>{var t,n;let{doc:i,isOpen:r,onOpen:l,onPublishSettingsClose:a}=e,d=(0,eE.d)(),u=(0,eo.jL)(),h=(0,eo.GV)(ta.Gd),x=(0,eo.GV)(ta.df),{editor:m}=(0,t4.mi)(),{currentWorkspace:f}=(0,X.ur)(),[g,j]=(0,p.useState)(!1),[v]=(0,nw.Ybb)(),[b]=(0,nw.yqC)(),[C]=(0,nw.Xcb)(),[w]=(0,nw.LTv)(),[E,k]=(0,p.useState)("domains"),S=i.id,I=i.title,T=null==f?void 0:f.id,A=null==i?void 0:null===(t=i.theme)||void 0===t?void 0:t.id,_=!1==!!i.site?null:(null===(n=i.site)||void 0===n?void 0:n.enabled)?"enabled":"disabled",R=!!h,O=(null==h?void 0:h.archived)?(0,s.jsx)(c.x6,{id:"VAyYv6"}):null,{query:D}=(0,tn.useRouter)();(0,y.o)("showDomains"),(0,p.useEffect)(()=>{let e=ly.R.on("openSiteSettings",e=>{k(e),l()});return()=>{e()}},[l]),(0,p.useEffect)(()=>{"true"===D.showDomains&&ly.R.emit("openSiteSettings","domains")},[]);let z=(0,p.useCallback)(async()=>{if(T){j(!0),w({variables:{id:S,themeId:null}});try{await v({variables:{input:{workspaceId:T,name:I,themeId:A,routes:[{docId:S,path:"/"}]}},refetchQueries:["GetDoc"]}).then(e=>{let{data:t}=e;(0,ta.wC)(u)({site:null==t?void 0:t.createSite,docId:S})})}catch(e){console.error("[WebsiteSettingsModal] Failed to create site",e.message),d({title:(0,s.jsx)(c.x6,{id:"Pdboh4"}),description:(0,s.jsx)(c.x6,{id:"8wxFbh"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{j(!1)}}},[v,u,S,I,A,d,w,T]),P=(0,p.useCallback)(async()=>{if(x){j(!0);try{await b({variables:{id:x},update:(e,t)=>{let{data:n}=t;e.updateQuery({query:nw.iVk,variables:{id:S}},e=>e&&e.doc?{...e,doc:{...e.doc,site:null==n?void 0:n.disableSite}}:e)}})}catch(e){console.error("[WebsiteSettingsModal] Failed to deactivate site",e.message),d({title:(0,s.jsx)(c.x6,{id:"ksq4sM"}),description:(0,s.jsx)(c.x6,{id:"VE0YVl"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{j(!1)}}},[b,S,x,d]),L=(0,p.useCallback)(async()=>{if(x){j(!0);try{await C({variables:{id:x},update:(e,t)=>{let{data:n}=t;e.updateQuery({query:nw.iVk,variables:{id:S}},e=>e&&e.doc?{...e,doc:{...e.doc,site:null==n?void 0:n.enableSite}}:e)}})}catch(e){console.error("[WebsiteSettingsModal] Failed to re-activate site",e.message),d({title:(0,s.jsx)(c.x6,{id:"aQnYTJ"}),description:(0,s.jsx)(c.x6,{id:"E2sPQM"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{j(!1)}}},[S,C,x,d]),N=(0,p.useCallback)(()=>{null===_?z():"enabled"===_?P():"disabled"===_&&L()},[z,P,L,_]);return(0,s.jsx)(W.L8,{isDark:!1,children:(0,s.jsx)(ii._,{isOpen:r,onClose:a,size:"md",trapFocus:!1,blockScrollOnMount:!1,children:(0,s.jsxs)(is.z,{p:0,shadow:"xl",children:[(0,s.jsxs)(sb.r,{children:[(0,s.jsx)(c.x6,{id:"WtsmDd"})," ",(0,s.jsx)(lo.E,{colorScheme:"green",ml:2,fontSize:"sm",letterSpacing:"normal",children:(0,s.jsx)(c.x6,{id:"YBt9YP"})})]}),(0,s.jsx)(io.s,{}),(0,s.jsxs)(il.c,{children:[(0,s.jsxs)(tA.T,{spacing:4,align:"stretch",children:[(0,s.jsx)(ak,{isLoading:g,site:h,doc:i,onChange:N,disabledText:O}),R&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sp,{context:"settings"}),(0,s.jsx)(sM.c,{}),"disabled"===_&&(0,s.jsxs)(i7.F,{status:"warning",mb:6,children:[(0,s.jsx)(sB._,{}),(0,s.jsx)(c.x6,{id:"CHu+l0"})]}),(0,s.jsxs)(o.s,{direction:"column",children:[(0,s.jsx)(ad,{selectedPanel:E,setSelectedPanel:k}),"website"===E?(0,s.jsx)(as,{showHeadings:!1,doc:i}):"domains"===E?(0,s.jsx)(l3,{showHeadings:!1}):"code"===E?(0,s.jsx)(aa,{editor:m}):null]})]})]}),!h&&(0,s.jsx)(am,{onEnable:N,isLoading:g})]})]})})})},aI=e=>{let{doc:t,label:n=(0,s.jsx)(c.x6,{id:"sAalO9"}),showUpsellBadge:i}=e,{isOpen:r,onClose:o,onOpen:a}=(0,iD.E)({id:"PublishSettingsDisclosure"}),{openUpsellModal:d}=(0,sW.I)(),u=(0,p.useCallback)(()=>d({segmentEvent:J.VV.GAMMA_PRO_UPSELL_SITE_ADD_CUSTOM_DOMAIN}),[d]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.Bwz,fixedWidth:!0}),onClick:i?u:a,children:(0,s.jsxs)(te.z,{justifyContent:"space-between",alignItems:"center",children:[n,i&&(0,s.jsx)(l.az,{children:(0,s.jsx)(lT.zL,{})})]})}),t&&(0,s.jsx)(aS,{isOpen:r,onOpen:a,doc:t,onPublishSettingsClose:o})]})};var aT=n(19727),aA=n(57812),a_=n(92515),aR=n(5377),aO=n(38256),aD=n(82354);let az=(e,t)=>{let n=[],i=e=>{if(t(e)&&n.push(e),e.content)for(let t of e.content)i(t)};return i(e),n},aP=()=>({today:u.Ru._({id:"ecUA8p"}),thisWeek:u.Ru._({id:"yByRxz"}),earlier:u.Ru._({id:"HGg4T/"})}),aL=()=>(0,s.jsxs)(D.B,{children:[(0,s.jsx)(sG.E,{w:"max(350px, 30%)",h:10}),(0,s.jsx)(sG.E,{w:"max(320px, 22%)",h:5})]}),aN=e=>{let{createdTime:t,editors:n,isLatest:i,onClick:r,showPaywall:a,paywallCount:d}=e;if(!n||!n.length)return(0,s.jsx)(s.Fragment,{});let u=a?"linear-gradient(rgb(0, 0, 0) 15%, transparent 100%)":"",h=(0,s.jsxs)(aT.o,{flexDirection:"row",borderRadius:"base",style:{WebkitMaskImage:u,maskImage:u},border:"none",isDisabled:a,opacity:"1 !important",onClick:r,alignItems:"flex-start",width:"100%",textAlign:"left",children:[(0,s.jsxs)(o.s,{w:"100%",direction:"column",children:[(0,s.jsx)(z.E,{fontSize:"sm",children:iH()((0,iW.OG)(t))}),(0,s.jsx)(z.E,{fontSize:"xs",flex:1,children:n[0].displayName})]}),i&&(0,s.jsx)(lo.E,{colorScheme:"green",py:"0.5",fontSize:"0.65em",children:(0,s.jsx)(c.x6,{id:"wL3cK8"})})]});return a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(W.Tz,{placement:"top",isDisabled:!a,label:a?(0,s.jsx)(c.x6,{id:"PYTBm5",values:{paywallCount:d}}):void 0,children:(0,s.jsx)(l.az,{mb:4,children:h})}),(0,s.jsx)(sF.c,{isNarrow:!0,segmentEvent:J.VV.GAMMA_PRO_UPSELL_CALLOUT_CHANGE_HISTORY,description:(0,s.jsx)(c.x6,{id:"mVKYtH"})})]}):h},aM=e=>{var t;let n=[];return{groupedSnapshots:(0,p.useMemo)(()=>(0,iW.WP)({items:e,sortBy:"createdTime"}),[e]),paywalledSnapshotId:null===(t=n[0])||void 0===t?void 0:t.id,paywallCount:n.length}},aV=e=>{let{groupedSnapshots:t,paywalledSnapshotId:n,paywallCount:i,onClick:r,showFetchMore:o,onFetchMoreClick:l,isFetchingMore:a}=e;return(0,s.jsxs)(aA.w,{w:"100%",children:[Object.entries(t).filter(e=>{let[,t]=e;return t.length}).map((e,t)=>{let[o,l]=e;return(0,s.jsxs)(p.Fragment,{children:[(0,s.jsx)(W._x,{px:4,py:2,mx:0,mt:2,children:aP()[o]}),l.map((e,o)=>{let{createdTime:l,editors:a,id:d}=e;return(0,s.jsx)(aN,{onClick:()=>r(d),isLatest:0===t&&0===o,createdTime:l,editors:a,showPaywall:n===d,paywallCount:i},d)})]},o)}),o&&(0,s.jsx)(N.$,{isLoading:a,onClick:l,children:(0,s.jsx)(c.x6,{id:"yQ2kGp"})})]})},aG=()=>(0,s.jsxs)(aA.w,{w:"100%",children:[(0,s.jsx)(sG.E,{h:16}),(0,s.jsx)(sG.E,{h:16,mt:2}),(0,s.jsx)(sG.E,{h:16,mt:2}),(0,s.jsx)(sG.E,{h:16,mt:2}),(0,s.jsx)(sG.E,{h:16,mt:2}),(0,s.jsx)(sG.E,{h:16,mt:2}),(0,s.jsx)(sG.E,{h:16,mt:2}),(0,s.jsx)(sG.E,{h:16,mt:2})]}),aF=e=>{let{title:t,createdBy:n,createdTime:i,numSnapshots:r}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z.E,{mt:1,children:(0,s.jsx)(c.x6,{id:"yf//Op",values:{numSnapshots:r,0:(0,su.Bo)(i),1:(0,su.Bo)(i)}})}),(0,s.jsx)(z.E,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:(0,s.jsx)(c.x6,{id:"JVHTIo",values:{title:t,0:(null==n?void 0:n.displayName)?null==n?void 0:n.displayName:"Unknown",1:(0,su.Yq)(i,"PPp")}})})]})},aW="snapshot-editor-root",aU=e=>{let{id:t,doc:n,content:i}=e,r=(0,p.useMemo)(()=>{if(i)return az(i,e=>e.type===aD.Qs).map(e=>{var t;return{__typename:"Card",id:(null===(t=e.attrs)||void 0===t?void 0:t.id)||"",docId:n.id,title:(0,aR.getCardTitle)(e),createdTime:n.createdTime,updatedTime:n.updatedTime,archived:!1}})},[i,n]);return(0,s.jsx)(th.u5,{reduxData:{cards:r},initialContent:i,doc:n,docId:n.id,scrollingParentSelector:".".concat(aW),isInsideDrawer:!0},t)},aB=e=>{var t;let{isOpen:n,onClose:i,doc:r}=e,a=(0,eE.d)(),{getCollaborativeEditorInstance:d}=(0,t4.mi)(),[u,h]=(0,p.useState)(!1),[x,{data:m}]=(0,nw.qob)();(0,tQ.Vg)(()=>{x({variables:{id:r.id}})},[r.id,x,n],[n]);let f=null==m?void 0:null===(t=m.doc)||void 0===t?void 0:t.currentSnapshotId,{loading:g,data:j,called:v,fetchMore:b}=(0,nw.XSN)({variables:{docId:r.id,first:25},skip:!r||!n,fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),[y,{loading:C,data:w}]=(0,nw.Wzf)({nextFetchPolicy:"cache-only"}),E=(null==j?void 0:j.snapshots.edges.map(e=>e.node))||[],{groupedSnapshots:k,paywalledSnapshotId:S,paywallCount:I}=aM(E),T=null==j?void 0:j.snapshots.pageInfo,A=!!(!S&&v&&(null==T?void 0:T.hasNextPage)&&(null==T?void 0:T.endCursor)),_=(0,p.useCallback)(()=>{(null==T?void 0:T.hasNextPage)&&(null==T?void 0:T.endCursor)&&(h(!0),b({variables:{after:T.endCursor}}).finally(()=>{h(!1)}))},[b,null==T?void 0:T.endCursor,null==T?void 0:T.hasNextPage]),R=E[0];(0,p.useEffect)(()=>{(null==R?void 0:R.id)&&y({variables:{snapshotId:R.id,docId:r.id}})},[r.id,y,null==R?void 0:R.id]);let O=(0,lj.B)(null==r?void 0:r.title),D="createdBy"in r?r.createdBy:void 0,z=null==r?void 0:r.createdTime,P=null==w?void 0:w.snapshot,L=P&&P.id===f,M=(0,no.A)(aO.H4);return(0,s.jsx)(W.L8,{isDark:!1,children:(0,s.jsxs)(ii._,{placement:"bottom",onClose:i,isOpen:n,trapFocus:!0,isFullHeight:!0,blockScrollOnMount:!1,children:[(0,s.jsx)(ir.m,{}),(0,s.jsxs)(is.z,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,s.jsx)(io.s,{}),(0,s.jsxs)(sb.r,{borderBottom:"1px solid #000",borderColor:"gray.200",children:[g&&(0,s.jsx)(aL,{}),!g&&r&&E&&(0,s.jsx)(aF,{numSnapshots:(null==E?void 0:E.length)||0,createdBy:D,createdTime:z,title:O})]}),(0,s.jsx)(il.c,{p:0,h:"100%",children:(0,s.jsxs)(o.s,{direction:"row",h:"100%",children:[(0,s.jsx)(l.az,{p:2,w:"17rem",overflowY:"auto",bg:"gray.50",children:(0,s.jsxs)(a_.t,{variant:"soft-rounded",orientation:"vertical",size:"md",children:[g&&(0,s.jsx)(aG,{}),!g&&E&&(0,s.jsx)(aV,{onClick:e=>{y({variables:{snapshotId:e,docId:r.id}})},groupedSnapshots:k,paywalledSnapshotId:S,paywallCount:I,showFetchMore:A,onFetchMoreClick:_,isFetchingMore:u})]})}),(0,s.jsx)(o.s,{flex:1,bg:"gray.100",overflowY:"scroll",justifyContent:"center",alignContent:"center",alignItems:"flex-start",width:"100%",height:"100%",className:aW,css:{"--editor-width":"100%","--editor-font-size":M},children:(0,s.jsxs)(o.s,{direction:"column",position:"relative",width:"100%",height:"100%",children:[(0,s.jsx)(iv.s,{}),(!P||C)&&(0,s.jsx)(iu.Yh,{}),P&&!C&&(0,s.jsx)(aU,{id:P.id,doc:r,content:null==P?void 0:P.content.default})]})})]})}),(0,s.jsx)(ia.j,{borderTop:"1px solid #000",borderColor:"gray.200",bg:"var(--drawer-bg)",zIndex:1,children:(0,s.jsxs)(tt.e,{spacing:4,children:[(0,s.jsx)(N.$,{variant:"ghost",onClick:i,children:(0,s.jsx)(c.x6,{id:"dEgA5A"})}),(0,s.jsx)(W.Tz,{label:L?(0,s.jsx)(c.x6,{id:"HJo72u"}):(0,s.jsx)(c.x6,{id:"sonTm1"}),shouldWrapChildren:!0,children:(0,s.jsx)(N.$,{variant:"solid",isDisabled:!P||L,onClick:()=>{var e;if(!P)return;let t=null==E?void 0:null===(e=E.find(e=>e.id===P.id))||void 0===e?void 0:e.createdTime,n=d();if(!n)return;n.commands.setContent(P.content.default,!0);let{annotationsAbsolute:r}=P.content;r?n.commands.restoreAnnotations(r):n.commands.clearAnnotations(),i(),a({title:(0,s.jsx)(c.x6,{id:"7ovf4C"}),description:(0,s.jsx)(c.x6,{id:"DTim6X",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP,0:t?(0,su.Yq)(t,"PPp"):"selected snapshot"}}),status:"success",duration:5e3,isClosable:!0})},children:(0,s.jsx)(c.x6,{id:"yKu/3Y"})})})]})})]})]})})},aH=e=>{let{doc:t}=e,{isOpen:n,onClose:i,onOpen:r}=(0,iD.E)({id:"snapshotsDrawer"});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.a$,fixedWidth:!0}),onClick:r,children:(0,s.jsx)(c.x6,{id:"6Z5x06"})}),t&&(0,s.jsx)(aB,{doc:t,isOpen:n,onClose:i})]})},aq=()=>{let e=i8();return e?(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.LjI,fixedWidth:!0}),as:nT.N,textDecoration:"none !important",href:e,target:(0,C.sX)()?"_self":"_blank",children:(0,s.jsx)(c.x6,{id:"7U0bM7"})}):null},aK=()=>(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.fyG,fixedWidth:!0}),onClick:()=>iL.LF.emit(iL.DN.OPEN_THEME_DRAWER,{}),children:(0,s.jsx)(c.x6,{id:"90/Rx7"})}),aJ=e=>{let{editor:t}=e,n=(0,p.useCallback)(()=>{t&&t.commands.undo()},[t]);return(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.V3T,fixedWidth:!0}),onClick:n,command:(0,W.lp)("Mod+Z"),children:(0,s.jsx)(c.x6,{id:"9uI/rE"})})},aY=e=>{let{doc:t,toggleCommentsPanel:n,editorWrapperEl:i,scrollingParentSelector:r}=e,{isConnected:o,isInOfflineMode:a}=(0,g.u)(),d=(0,b.u)("editDocAI"),{user:u}=(0,X.ur)(),h=(0,X.Iy)("view",t),x=(0,X.Iy)("comment",t),p=(0,X.Iy)("edit",t),m=(0,X.Iy)("manage",t),f=(0,eo.GV)(ta.Gd),j=(0,r_.zm)(),v=(0,eo.GV)(el.wC)===tC.w.SLIDE_VIEW,{editor:y}=(0,tT.m)(),C=(0,eo.GV)(el.nD),w=!!d||!m,E=!!u&&w&&!t.site,k=!!d&&x,S=!!(u&&0!==u.workspaceMemberships.length&&!t.site),I=h&&!!u,T=(0,b.u)("docCustomCode")&&p,A=p&&y;if(!o){let e=A&&a&&!f,i=C&&a&&!f,r=k&&a&&!f,o=i||e||r;return(0,s.jsx)(aX,{children:(0,s.jsxs)(sg.r,{children:[f?(0,s.jsx)(l.az,{pt:2,children:(0,s.jsx)(lI,{site:f})}):(0,s.jsx)(lv,{doc:t}),o&&(0,s.jsx)(nq.N,{}),i&&(0,s.jsx)(aJ,{editor:y}),e&&(0,s.jsx)(lS,{}),r&&(0,s.jsx)(ls,{toggleCommentsPanel:n})]})})}let _=t.site?(0,s.jsx)(c.x6,{id:"gKmuNS"}):void 0;return(0,s.jsxs)(nU.c,{zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"360px",overflow:"auto",children:[(0,s.jsxs)(sg.r,{children:[f?(0,s.jsx)(lE,{doc:t,site:f}):(0,s.jsx)(lv,{doc:t}),(0,s.jsx)(nq.N,{}),C&&(0,s.jsx)(aJ,{editor:y}),p&&(0,s.jsx)(aH,{doc:t}),t.site&&(0,s.jsx)(sN,{editorWrapperEl:i,scrollingParentSelector:r}),(0,s.jsx)(aq,{}),j&&!v&&(0,s.jsx)(aK,{}),A&&(0,s.jsx)(lS,{}),I&&(0,s.jsx)(lC,{}),T&&(0,s.jsx)(lp,{editor:y})]}),f?(0,s.jsx)(nq.N,{}):null,(0,s.jsxs)(sg.r,{children:[f&&(0,s.jsx)(lI,{site:f}),f?null:(0,s.jsx)(nq.N,{}),k&&(0,s.jsx)(ls,{toggleCommentsPanel:n}),E&&(0,s.jsx)(lr,{doc:t,mode:m?"full":"personal"}),m&&(0,s.jsx)(aI,{doc:t,label:_}),S&&(0,s.jsx)(lb,{doc:t,editor:y}),m&&(0,s.jsx)(sC,{site:f}),!t.site&&m?(0,s.jsx)(lm,{doc:t}):null]})]})},aX=e=>{let{children:t}=e;return(0,s.jsxs)(nU.c,{zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"360px",overflow:"auto",children:[(0,s.jsx)(eq.r,{description:(0,s.jsx)(c.x6,{id:"0CAvhs"}),isConnected:!1,maxWidth:"300px"}),t]})},a$=e=>{let{length:t,idealLength:n,maxLength:i}=e;return(0,s.jsxs)(z.E,{fontSize:"xs",color:t>=i?"red.400":"gray.500",children:[t>=i&&(0,s.jsx)(F.g,{icon:tR.QJT})," ",t,"/",n]})};var aZ=n(22844),aQ=n(22938),a0=n(67489);let a1=(e,t)=>{var n;return null==e?void 0:null===(n=e.routes.find(e=>e.docId===t))||void 0===n?void 0:n.path},a6=e=>{let{openOtherDocModal:t}=e,n=(0,_.dU)("gray.200","gray.600"),i=(0,eE.d)(),[r,o]=(0,p.useState)(!1),a=(0,lR.Fd)(),d=(0,eo.GV)(nf.Jo),u=(0,eo.GV)(ta.Gd),[h,{loading:x}]=(0,nw.Imo)(),m=a1(u,null==d?void 0:d.id),[f,g]=(0,p.useState)(()=>(0,tu.nx)(m||"")),[j,v]=(0,p.useState)(()=>(0,tu.nx)(m||"")),b=(0,tu.Gu)({routes:(null==u?void 0:u.routes)||[],path:(0,tu.wK)(f),docId:null==d?void 0:d.id}),y=!!b,C=j!==f&&!y,w=(0,p.useCallback)(()=>{g(j)},[j]),E=(0,p.useCallback)(()=>{if(!C)return;if(!(null==u?void 0:u.id)||!(null==d?void 0:d.id)){console.error("Missing site or doc");return}let e=(0,tu.GM)(f);h({variables:{input:{siteId:u.id,docId:d.id,path:e}},refetchQueries:["GetSite"]}).then(()=>{v((0,tu.nx)(e)),g((0,tu.nx)(e)),o(!0)}).catch(e=>{i({status:"error",title:(0,s.jsx)(c.x6,{id:"dl5vwx"}),description:e.message}),console.error("[UrlSlugForm] Error setting route",e.message)})},[C,null==d?void 0:d.id,f,h,null==u?void 0:u.id,i]);return a?(0,s.jsxs)(D.B,{children:[(0,s.jsx)(D.B,{direction:"row",children:(0,s.jsxs)(z.E,{children:[(0,s.jsx)(c.x6,{id:"dq8+qI"})," "]})}),(0,s.jsx)(t_.h,{}),(0,s.jsx)(D.B,{spacing:2,children:(0,s.jsx)(te.z,{spacing:1,children:(0,s.jsxs)(ll.MJ,{as:"fieldset",isInvalid:y,children:[(0,s.jsx)(te.z,{children:(0,s.jsxs)(rr.M,{children:[(0,s.jsx)(aQ.G6,{children:"/"}),(0,s.jsx)(l_.p,{isDisabled:x,flex:2,value:f,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),E())},onChange:e=>{g((0,lM.Fw)(e.currentTarget.value))},borderColor:n}),(0,s.jsx)(a0.s,{in:C,unmountOnExit:!0,children:(0,s.jsx)(l.az,{ml:2,children:(0,s.jsxs)(tt.e,{w:"100%",children:[(0,s.jsx)(N.$,{variant:"solid",isLoading:x,isDisabled:y,onClick:E,children:(0,s.jsx)(c.x6,{id:"tfDRzk"})}),(0,s.jsx)(N.$,{onClick:w,children:(0,s.jsx)(c.x6,{id:"dEgA5A"})})]})})})]})}),b?(0,s.jsx)(ld.Wt,{justifyContent:"flex-end",alignItems:"flex-start",children:(0,s.jsx)(z.E,{fontSize:"xs",children:(0,s.jsx)(c.x6,{id:"DQaTdC",components:{0:(0,s.jsx)(nT.N,{textDecoration:"underline",onClick:()=>t&&t(b.docId)})}})})}):(0,s.jsxs)(D.B,{spacing:2,children:[(0,s.jsx)(ll.eK,{fontSize:"sm",children:(0,s.jsx)(c.x6,{id:"ZMlbHK"})}),r&&(0,s.jsxs)(i7.F,{status:"warning",variant:"left-accent",fontSize:"sm",children:[(0,s.jsx)(sB._,{}),(0,s.jsx)(re.T,{children:(0,s.jsx)(c.x6,{id:"ZyBxCy"})})]})]})]})})})]}):(0,s.jsx)(s.Fragment,{})},a2=e=>{var t;let{inModal:n=!1,openOtherDocModal:i}=e,{editor:r}=(0,tT.m)(),{isInOfflineMode:o}=(0,g.u)(),l=(0,p.useCallback)((e,t)=>{null==r||r.commands.updateNestedAttributesAtPos(0,{settings:{[e]:t}})},[r]),{metaDescription:a}=(0,eo.GV)(el.Uu),d=(0,eo.GV)(el.Jo),h=(0,eo.GV)((0,aZ.Jn)(null==d?void 0:d.id)),x=(0,eo.GV)(aZ.E5),[m,f]=(0,p.useState)(()=>(null==d?void 0:d.title)||""),[j,v]=(0,p.useState)(()=>a||""),b=d&&!!d.site&&(0,tu.dv)(d.site),[y]=(0,nw.cGn)(),C=(0,p.useCallback)(e=>{d&&y({variables:{id:d.id,title:e,titleEdited:!0}})},[d,y]),w=(0,tQ.lW)(C,300),E=(0,p.useCallback)(e=>{f(e.target.value.substring(0,l6.tS)),w(e.target.value.substring(0,l6.tS))},[w]),k=(0,p.useCallback)(e=>{l("metaDescription",e)},[l]),S=(0,tQ.lW)(k,300),I=null==d?void 0:null===(t=d.titleCard)||void 0===t?void 0:t.previewUrl,T=(0,eH.nk)(null==d?void 0:d.organization),A=(0,eD.E)(m||h,T),R=(0,eD.C)(j||x,T),O=(0,_.dU)("gray.200","gray.600");return(0,s.jsxs)(D.B,{spacing:4,children:[(0,s.jsxs)(ll.MJ,{children:[(0,s.jsxs)(te.z,{justifyContent:"center",children:[(0,s.jsx)(la.l,{flex:"1",children:(0,s.jsx)(c.x6,{id:"MHrjPM"})}),(0,s.jsx)(a$,{length:m.length||0,idealLength:l6.GF,maxLength:l6.tS})]}),(0,s.jsx)(l_.p,{value:m,placeholder:h||u.Ru._({id:"bTzMt5"}),_placeholder:{opacity:1,color:"gray.500"},onKeyDown:e=>{"Enter"===e.key&&C(m)},onChange:E,isDisabled:o,"data-title-input":!0,borderColor:O})]}),(null==d?void 0:d.site)&&(0,s.jsx)(a6,{openOtherDocModal:i}),(0,s.jsxs)(ll.MJ,{children:[(0,s.jsxs)(te.z,{justifyContent:"center",children:[(0,s.jsx)(la.l,{flex:"1",pt:0,children:(0,s.jsx)(c.x6,{id:"Nu4oKW"})}),(0,s.jsx)(a$,{length:j.length||0,idealLength:l6.Od,maxLength:l6.Lj})]}),(0,s.jsx)(rs.T,{rows:n?2:4,value:j,placeholder:(null==x?void 0:x.trim())||u.Ru._({id:"2VBqT4"}),onChange:e=>{v(e.target.value.substring(0,l6.Lj)),S(e.target.value.substring(0,l6.Lj))},borderColor:O})]}),(0,s.jsx)(a5,{previewTitle:A,previewDescription:R,screenshotUrl:I,isInOfflineMode:o,isSiteOn:b,inModal:n}),!o&&(0,s.jsx)(l9.w,{label:(0,s.jsx)(c.x6,{id:"SDyz5I"}),segmentEvent:tY.VV.GAMMA_PRO_UPSELL_PAGE_SETUP_REMOVE_WATERMARK,doc:d})]})},a5=e=>{let{previewTitle:t,previewDescription:n,screenshotUrl:i,isInOfflineMode:r,isSiteOn:o,inModal:l}=e,a=(0,Y.rd)();return(0,s.jsxs)(D.B,{p:4,pt:3,bg:a?"gray.800":"gray.100",borderRadius:"md",direction:l?"row":"column",spacing:3,children:[(0,s.jsxs)(D.B,{spacing:2,flex:1,children:[(0,s.jsx)(z.E,{size:"sm",children:(0,s.jsx)(c.x6,{id:"h8sMnd"})}),(0,s.jsx)(a3,{title:t,description:n,screenshotUrl:i,isOffline:r})]}),o&&(0,s.jsxs)(D.B,{spacing:2,flex:1,pl:l?3:void 0,pt:l?void 0:3,borderLeft:l?"1px solid":void 0,borderTop:l?void 0:"1px solid",borderColor:a?"gray.700":"gray.200",children:[(0,s.jsx)(z.E,{size:"sm",children:(0,s.jsx)(c.x6,{id:"d3xOlk"})}),(0,s.jsx)(a4,{title:t,description:n,screenshotUrl:i,isOffline:r}),(0,s.jsx)(z.E,{fontSize:"sm",color:"gray.500",children:(0,s.jsx)(c.x6,{id:"Ubf8D8"})})]})]})},a3=e=>{let{title:t,description:n,screenshotUrl:i,isOffline:r}=e,o=(0,Y.rd)();return(0,s.jsxs)(l.az,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:o?"gray.700":"gray.200",borderRadius:"md",overflow:"hidden",children:[(0,s.jsx)(nO.g,{ratio:1200/630,bg:"gray.300",borderBottom:"1px solid",borderColor:"gray.200",children:(0,s.jsx)(l.az,{bgColor:"gray.200",bgImage:"url(".concat(i,")"),backgroundSize:"cover",position:"relative",children:r&&(0,s.jsx)(F.g,{icon:G.seF,size:"lg"})})}),(0,s.jsxs)(D.B,{px:4,py:3,spacing:1,children:[(0,s.jsx)(z.E,{color:"gray.800",fontSize:"md",fontWeight:"bold",noOfLines:2,children:t}),(0,s.jsx)(z.E,{color:"gray.800",fontSize:"xs",noOfLines:2,children:n})]})]})},a4=e=>{let{title:t,description:n}=e;return(0,s.jsxs)(D.B,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",px:4,py:3,spacing:1,pos:"relative",children:[(0,s.jsx)(z.E,{color:"blue.600",fontSize:"lg",lineHeight:1.3,noOfLines:2,children:t}),(0,s.jsx)(z.E,{color:"gray.700",fontSize:"sm",noOfLines:3,children:n})]})},a8=e=>{let{onPageMetadataModalClose:t,isPageMetadataModalOpen:n,openOtherDocModal:i}=e,r=(0,Y.rd)();return(0,s.jsx)(W.L8,{isDark:r,children:(0,s.jsxs)(sj.aF,{onEsc:t,isOpen:n,onClose:t,size:"3xl",returnFocusOnClose:!1,children:[(0,s.jsx)(ir.m,{}),(0,s.jsxs)(sv.$,{color:r?"white":"gray.800",bg:r?"gray.900":"white",mx:2,borderColor:r?"gray.700":"gray.200",children:[(0,s.jsx)(sb.r,{children:(0,s.jsx)(c.x6,{id:"aBZSpm"})}),(0,s.jsx)(io.s,{"data-share-panel-close-button":!0,onClick:e=>{e.preventDefault(),t()}}),(0,s.jsx)(sM.c,{}),(0,s.jsx)(il.c,{children:(0,s.jsx)(a2,{inModal:!0,openOtherDocModal:i})}),(0,s.jsx)(sM.c,{}),(0,s.jsx)(ia.j,{children:(0,s.jsx)(N.$,{onClick:e=>{e.preventDefault(),t()},variant:"solid",children:(0,s.jsx)(c.x6,{id:"DPfwMq"})})})]})]})})},a7=e=>{let{children:t,currentEditorDocId:n}=e,[i,r]=(0,p.useState)({docId:null,pendingOpenFn:null}),{push:o}=(0,tn.useRouter)();(0,p.useEffect)(()=>{let{docId:e,pendingOpenFn:t}=i;e===n&&t&&(t(),r({docId:null,pendingOpenFn:null}))},[n,i]);let l=async(e,t)=>{if(e!==n){let n=(0,w.pF)({docId:e});await o(n),r({docId:e,pendingOpenFn:t})}else t()};return(0,s.jsx)(s.Fragment,{children:t(l)})},a9=e=>{let{isDisabled:t,onClick:n,isPublishing:i}=e;return(0,s.jsx)(W.Tz,{placement:"top",label:(0,s.jsx)(c.x6,{id:"Bq2yPr"}),shouldWrapChildren:!0,isDisabled:!t,children:(0,s.jsx)(sm.D,{icon:(0,s.jsx)(l.az,{children:(0,s.jsx)(F.g,{icon:G.OFY,fixedWidth:!0})}),onClick:n,closeOnSelect:!1,isDisabled:i||t,children:(0,s.jsxs)(o.s,{direction:"row",w:"100%",justify:"space-between",align:"center",children:[(0,s.jsx)(c.x6,{id:"jNnwuI"}),i&&(0,s.jsx)(t8.y,{size:"xs"})]})})})},de=e=>{let{title:t,path:n}=e;return(0,s.jsxs)(s.Fragment,{children:[t?"".concat(t," "):"",n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(lL.C,{as:"span",fontFamily:"mono",children:n})," "]})]})},dt=e=>{let{onClose:t,doc:n,site:i,path:r}=e,{push:o}=(0,tn.useRouter)(),[l,{loading:a}]=(0,nw.QO)(),d=(0,eE.d)(),u=(0,eo.GV)(ta.le),h=(0,p.useCallback)(async()=>{if((null==n?void 0:n.id)&&i){if(await l({variables:{id:n.id},refetchQueries:["GetSite","GetDoc"]}),d({title:(0,s.jsx)(c.x6,{id:"oMgC5V"}),description:(0,s.jsx)(c.x6,{id:"gw6aHP",components:{0:(0,s.jsx)(de,{title:null==n?void 0:n.title,path:r})}}),status:"success",duration:1e4,position:"top",isClosable:!0}),u===n.id){let e=(0,w.BV)({site:i,docId:n.id});e&&await o(e)}t()}},[null==n?void 0:n.id,null==n?void 0:n.title,i,u,l,d,r,t,o]);return(0,s.jsx)(W.L8,{isDark:!1,children:(0,s.jsxs)(sj.aF,{onClose:t,isOpen:!0,size:"xl",children:[(0,s.jsx)(ir.m,{}),(0,s.jsxs)(sv.$,{children:[(0,s.jsx)(sb.r,{children:(0,s.jsx)(c.x6,{id:"kbKU/5"})}),(0,s.jsx)(io.s,{isDisabled:a}),(0,s.jsx)(il.c,{children:(0,s.jsxs)(D.B,{spacing:4,children:[(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"YOtIqx",values:{0:null==n?void 0:n.title,1:r&&(0,s.jsx)(lL.C,{as:"span",fontFamily:"mono",colorScheme:"blackAlpha",children:r})}})}),(0,s.jsx)(z.E,{color:"red.500",children:(0,s.jsx)(c.x6,{id:"2xOCJW"})})]})}),(0,s.jsx)(ia.j,{children:(0,s.jsxs)(tt.e,{children:[(0,s.jsx)(N.$,{variant:"ghost",onClick:t,children:(0,s.jsx)(c.x6,{id:"dEgA5A"})}),(0,s.jsx)(N.$,{variant:"hazardous",onClick:h,isLoading:a,children:(0,s.jsx)(c.x6,{id:"O1M1zi"})})]})})]})]})})},dn=e=>{var t;let{site:n,doc:i,path:r}=e,{isOpen:o,onOpen:a,onClose:d}=(0,ez.j)({id:"confirm-remove-page-modal"}),u=(null==n?void 0:n.routes)&&(null==n?void 0:null===(t=n.routes)||void 0===t?void 0:t.length)>1;return(0,s.jsxs)(s.Fragment,{children:[o&&(0,s.jsx)(dt,{site:n,doc:i,path:r,onClose:d}),(0,s.jsx)(W.Tz,{placement:"top",isDisabled:u,label:(0,s.jsx)(c.x6,{id:"PBFhJK"}),shouldWrapChildren:!0,children:(0,s.jsx)(sm.D,{color:"red.500",isDisabled:!u,icon:(0,s.jsx)(l.az,{children:(0,s.jsx)(F.g,{icon:G.yLS,fixedWidth:!0})}),onClick:a,children:(0,s.jsx)(c.x6,{id:"cnGeoo"})})})]})},di=e=>{let{site:t,doc:n,route:i,isTopToolbar:r=!1,hasChanges:o,onToggleOffline:a,...d}=e,u=(0,sf.U)(),{editor:h}=(0,tT.m)(),{replace:x}=(0,tn.useRouter)(),{isConnected:m}=(0,nw.utY)(),f=(null==n?void 0:n.id)&&(0,tu.OF)({site:t,docId:n.id}),{publishDoc:g,isPublishing:j}=rO({doc:n,site:t,path:f}),v=(0,tu.dv)(t),b=(0,eo.GV)(el.Jo),y=(0,X.Iy)("edit",b),C=(0,X.Iy)("edit",b),E=(0,X.Iy)("manage",b),k=(0,r_.Gx)(),S=(0,eo.GV)(el.nD),T=(0,p.useCallback)(()=>{(null==n?void 0:n.id)&&u({path:"".concat((0,tu.GM)(i.path),"-copy"),siteId:t.id,routes:t.routes,sourceDocId:n.id})},[u,null==n?void 0:n.id,i.path,t.id,t.routes]),{isOpen:A,onClose:_,onOpen:R}=(0,iD.E)({id:"page-metadata-modal"});return m?(0,s.jsx)(I.Z,{children:n&&(0,s.jsx)(nU.c,{...d,zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"380px",overflow:"auto",children:(0,s.jsx)(a7,{currentEditorDocId:null==b?void 0:b.id,children:e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(lE,{doc:n,site:t,showCreatedInfo:!0}),(0,s.jsx)(nq.N,{}),C&&h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.n2$,fixedWidth:!0}),onClick:()=>e(i.docId,R),children:(0,s.jsx)(c.x6,{id:"aBZSpm"})}),(0,s.jsx)(a8,{isPageMetadataModalOpen:A,onPageMetadataModalClose:_,openOtherDocModal:t=>e(t,R)})]}),C&&h&&(0,s.jsx)(lS,{onClick:()=>e(i.docId,()=>ly.R.emit("openPageSetup","cards"))})," ",(0,s.jsx)(nq.N,{}),k&&!i.offline&&(o||j)&&(0,s.jsx)(a9,{onClick:g,isDisabled:!v,isPublishing:j}),(0,s.jsx)(sm.D,{icon:(0,s.jsx)(l.az,{children:(0,s.jsx)(F.g,{icon:tR.qtl,fixedWidth:!0})}),onClick:()=>{x((0,w.pF)({docId:n.id,preview:!0}),void 0,{shallow:!0})},children:(0,s.jsx)(c.x6,{id:"rdUucN"})}),!!a&&(0,s.jsx)(sm.D,{onClick:a,icon:(0,s.jsx)(l.az,{children:(0,s.jsx)(F.g,{icon:i.offline?G.A4h:G.buE,fixedWidth:!0})}),children:i.offline?(0,s.jsx)(c.x6,{id:"i/zQgj"}):(0,s.jsx)(c.x6,{id:"ySCSAn"})}),(0,s.jsx)(nq.N,{}),C&&h&&(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.jPR,fixedWidth:!0}),onClick:T,children:(0,s.jsx)(c.x6,{id:"IVskn1"})}),S&&r&&(0,s.jsx)(aJ,{editor:h}),y&&r&&(0,s.jsx)(aH,{doc:n}),E&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(nq.N,{}),(0,s.jsx)(dn,{site:t,doc:n,path:f})]})]})})})}):(0,s.jsx)(aX,{})},dr=e=>{if(!e)return{path:"untitled-page",title:u.Ru._({id:"kveQAJ"})};if(0===e.filter(e=>e.path.startsWith("/untitled-page")).length)return{title:u.Ru._({id:"kveQAJ"}),path:"untitled-page"};let t=Math.max(...e.map(e=>{let[t,n]=e.path.match(/^\/untitled-page-?(\d+)/)||["","1"];return Number(n)}));return{title:u.Ru._({id:"kveQAJ"})+" "+String(t+1),path:"untitled-page-".concat(t+1)}},ds=e=>{let{site:t}=e,n=(0,sf.U)(),{isOpen:i,onClose:r,onOpen:o}=(0,iD.E)({id:"add-page-ai-modal"}),[l,a]=(0,p.useState)(!1),d=(0,p.useCallback)(()=>{o()},[o]),h=(0,p.useCallback)(()=>{let{path:e}=dr(null==t?void 0:t.routes);a(!0),n({path:(0,tu.GM)(e),siteId:null==t?void 0:t.id,routes:null==t?void 0:t.routes}).then(()=>{a(!1)})},[n,null==t?void 0:t.id,null==t?void 0:t.routes]);return(0,s.jsxs)(nF.W,{children:[(0,s.jsx)(W.Tz,{label:u.Ru._({id:"yLRlZm"}),placement:"bottom",children:(0,s.jsx)(nW.I,{as:M.K,isRound:!0,size:"xs",isLoading:l,onFocus:e=>e.preventDefault(),"data-testid":"add-page",icon:(0,s.jsx)(F.g,{icon:G.QLR}),sx:{span:{flexGrow:0}}})}),(0,s.jsx)(I.Z,{children:(0,s.jsx)(nU.c,{maxW:"350px",zIndex:"tooltip",children:(0,s.jsxs)(sg.r,{title:u.Ru._({id:"yLRlZm"}),children:[(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:tR.p7g,fixedWidth:!0}),onClick:d,children:(0,s.jsxs)(te.z,{align:"flex-start",children:[(0,s.jsxs)(D.B,{spacing:0,children:[(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"OppH33"})}),(0,s.jsx)(z.E,{fontSize:"xs",color:"gray.500",children:(0,s.jsx)(c.x6,{id:"P/o+t+"})})]}),(0,s.jsx)(t_.h,{}),(0,s.jsx)(lo.E,{h:"fit-content",colorScheme:"trueblue",ml:2,children:(0,s.jsx)(c.x6,{id:"jsQZMk"})})]})}),(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.QLR,fixedWidth:!0}),onClick:h,children:(0,s.jsxs)(D.B,{spacing:0,children:[(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"SSZKB9"})}),(0,s.jsx)(z.E,{fontSize:"xs",color:"gray.500",children:(0,s.jsx)(c.x6,{id:"S65lUr"})})]})})]})})}),(0,s.jsx)(rF,{isOpen:i,onClose:r})]})},dl=e=>{if(!e)return{path:"untitled-page",title:u.Ru._({id:"kveQAJ"})};if(0===e.filter(e=>e.path.startsWith("/untitled-page")).length)return{title:u.Ru._({id:"kveQAJ"}),path:"untitled-page"};let t=Math.max(...e.map(e=>{let[t,n]=e.path.match(/^\/untitled-page-?(\d+)/)||["","1"];return Number(n)}));return{title:u.Ru._({id:"kveQAJ"})+" "+String(t+1),path:"untitled-page-".concat(t+1)}},da=e=>{let{isOpen:t,onClose:n,site:i}=e,r=(0,sf.U)(),[o,l]=(0,p.useState)(()=>dl(null==i?void 0:i.routes).title),[a,d]=(0,p.useState)(()=>dl(null==i?void 0:i.routes).path),h=(0,p.useRef)(null),[x,m]=(0,p.useState)(!1),f=((null==i?void 0:i.routes.map(e=>e.path))||[]).includes("/".concat(a)),g=(0,_.dU)("gray.900","gray.50"),j=(0,p.useCallback)(()=>{x||f||(m(!0),r({title:o,path:(0,tu.GM)(a),siteId:null==i?void 0:i.id,routes:null==i?void 0:i.routes}).then(()=>{m(!1),n()}))},[r,f,x,n,a,null==i?void 0:i.id,null==i?void 0:i.routes,o]);return((0,p.useEffect)(()=>{t&&setTimeout(()=>{h.current&&h.current.select()},50)},[t]),i)?(0,s.jsxs)(sj.aF,{isOpen:t,onClose:n,size:"xl",children:[(0,s.jsx)(ir.m,{}),(0,s.jsxs)(sv.$,{color:g,children:[(0,s.jsx)(sb.r,{children:(0,s.jsxs)(D.B,{children:[(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"yLRlZm"})}),(0,s.jsx)(z.E,{fontSize:"sm",color:"gray.500",fontWeight:"normal",letterSpacing:"normal",children:(0,s.jsx)(c.x6,{id:"7TUZvz"})})]})}),(0,s.jsx)(io.s,{}),(0,s.jsx)(il.c,{children:(0,s.jsxs)(D.B,{spacing:4,children:[(0,s.jsxs)(ll.MJ,{children:[(0,s.jsxs)(te.z,{justifyContent:"center",children:[(0,s.jsx)(la.l,{flex:"1",children:(0,s.jsx)(c.x6,{id:"MHrjPM"})}),(0,s.jsx)(a$,{length:o.length||0,idealLength:l6.GF,maxLength:l6.tS})]}),(0,s.jsx)(l_.p,{ref:h,value:o,onChange:e=>{l(e.target.value),d((0,lM.Fw)(e.target.value))},_placeholder:{opacity:1,color:"gray.500"},onKeyDown:e=>{"Enter"===e.key&&j()}})]}),(0,s.jsxs)(ll.MJ,{isInvalid:f,children:[(0,s.jsx)(te.z,{justifyContent:"center",children:(0,s.jsx)(la.l,{flex:"1",children:(0,s.jsx)(c.x6,{id:"dq8+qI"})})}),(0,s.jsxs)(rr.M,{children:[(0,s.jsx)(aQ.G6,{children:"/"}),(0,s.jsx)(l_.p,{fontFamily:"mono",value:a,onKeyDown:e=>{"Enter"===e.key&&j()},onChange:e=>{d((0,lM.Fw)(e.target.value))},placeholder:u.Ru._({id:"bTzMt5"}),_placeholder:{opacity:1,color:"gray.500"}})]}),f&&!x&&(0,s.jsx)(ld.Wt,{children:(0,s.jsx)(c.x6,{id:"hw1fjn"})})]})]})}),(0,s.jsx)(ia.j,{children:(0,s.jsxs)(tt.e,{children:[(0,s.jsx)(N.$,{colorScheme:"gray",variant:"ghost",onClick:n,children:(0,s.jsx)(c.x6,{id:"dEgA5A"})}),(0,s.jsx)(N.$,{onClick:j,isDisabled:f,variant:"solid",isLoading:x,children:(0,s.jsx)(c.x6,{id:"yLRlZm"})})]})})]})]}):(0,s.jsx)(s.Fragment,{})},dd=e=>{let{site:t}=e,{isOpen:n,onClose:i,onOpen:r}=(0,ez.j)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.az,{bgColor:"gray.50",textAlign:"center",p:4,m:2,children:[(0,s.jsx)(z.E,{fontSize:"sm",children:(0,s.jsx)(c.x6,{id:"6TCEnS"})}),(0,s.jsx)(z.E,{fontSize:"sm",mt:2,fontWeight:"bold",children:(0,s.jsx)(nT.N,{color:"trueblue.600",href:"#",onClick:r,children:(0,s.jsx)(c.x6,{id:"S0WoXy"})})})]}),n&&(0,s.jsx)(da,{isOpen:n,onClose:i,site:t})]})},dc=e=>{let{icon:t,isSelected:n,children:i,href:r}=e,o=(0,p.useRef)(null),a=(0,_.dU)("gray.600","gray.50"),d=(0,_.dU)("trueblue.50","whiteAlpha.100"),c=(0,_.dU)("gray.900","gray.50"),u=(0,_.dU)("blackAlpha.50","whiteAlpha.100"),h=(0,_.dU)("gray.600","gray.50"),x=(0,_.dU)("trueblue.400","trueblue.200");(0,p.useEffect)(()=>{if(!n||!(null==o?void 0:o.current))return;let{inView:e}=(0,K.cH)(o.current)||{};e||o.current.scrollIntoView()},[n]);let m=(0,p.useCallback)(e=>{e.target.closest('[data-id="sidebar-item-menu-button"]')&&e.preventDefault(),e.target.closest('[data-id="sidebar-item-menu-list"]')&&e.stopPropagation()},[]);return(0,s.jsx)(i5(),{href:r,passHref:!0,shallow:!0,children:(0,s.jsx)(N.$,{ref:o,onClick:m,variant:"ghost",justifyContent:"flex-start",fontWeight:"500",w:"100%",size:"sm",color:n?c:a,bgColor:n?d:"transparent",_hover:{bgColor:n?d:u,color:n?c:h},h:"auto",py:1.5,px:2,role:"group",children:(0,s.jsxs)(te.z,{alignItems:"start",justify:"flex-start",w:"100%",spacing:2,children:[(0,s.jsx)(l.az,{color:n?x:a,mt:"0.2em",w:4,children:t}),(0,s.jsx)(D.B,{flex:1,direction:"row",minW:0,align:"start",justifyContent:"flex-start",children:i})]})})})},du=e=>{let{title:t,children:n}=e;return(0,s.jsxs)(te.z,{justify:"space-between",children:[(0,s.jsx)(z.E,{fontSize:"sm",fontWeight:"600",px:1,py:1.5,color:"gray.500",children:t}),n&&n]})},dh=(e,t,n)=>n?(0,s.jsx)(t8.y,{size:"xs"}):e?(0,s.jsx)(F.g,{icon:G.hLE,fixedWidth:!0}):t?(0,s.jsx)(F.g,{icon:G.Eur,fixedWidth:!0}):(0,s.jsx)(F.g,{icon:G.A4h,fixedWidth:!0}),dx=e=>{let{site:t,isSelected:n,doc:i,route:r,hasChanges:o,onToggleOffline:a}=e,d=(0,_.dU)("trueblue.50","whiteAlpha.200"),c=(0,_.dU)("trueblue.100","whiteAlpha.200");return(0,s.jsx)(nF.W,{modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["right"]}}],children:e=>{let{isOpen:u}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(nW.I,{"data-id":"sidebar-item-menu-button",ml:3,as:M.K,isRound:!0,variant:"ghost",py:2,size:"xs",_hover:{bgColor:n?c:d},icon:(0,s.jsx)(l.az,{className:"ellipsis-icon",transitionProperty:"common",transitionDuration:"normal",_groupHover:{opacity:1},_hover:{opacity:1},_active:{opacity:1},opacity:u?1:0,children:(0,s.jsx)(F.g,{icon:G.Dwc,fixedWidth:!0})})}),(0,s.jsx)(I.Z,{children:(0,s.jsx)(di,{site:t,doc:i,route:r,hasChanges:o,"data-id":"sidebar-item-menu-list",onToggleOffline:a})})]})}})},dp=e=>{var t;let{route:n,isHome:i,isSelected:r}=e,{docId:l,doc:a}=n,d=(0,tQ.En)(),u=(0,eo.GV)(ta.Gd),h=(0,eo.GV)((0,ta.B4)(l)),x=(0,p.useRef)(null),m=(0,eo.GV)(ta.le),[f,{loading:g}]=(0,nw.Imo)(),j=dh(i,h,g),v="currentColor",b=(0,_.dU)("gray.500","gray.400"),y=(0,_.dU)("trueblue.400","trueblue.200"),C=(0,p.useCallback)(async()=>{if(!(null==a?void 0:a.id)||!u)return;let e=!(null==n?void 0:n.offline);await f({variables:{input:{siteId:u.id,docId:a.id,offline:e,path:null==n?void 0:n.path}}})},[null==a?void 0:a.id,n,f,u]);(0,p.useEffect)(()=>{if(!x.current||m!==l)return;let{inView:e}=(0,K.cH)(x.current)||{};e||x.current.scrollIntoView()},[m,l]);let E=(0,w.pF)({docId:l});return(0,s.jsxs)(dc,{icon:j,"data-sidebar-doc":l,isSelected:r,href:E,children:[(0,s.jsxs)(D.B,{flex:1,spacing:"3px",alignItems:"flex-start",justifyContent:"flex-start",w:"100%",minW:0,children:[(0,s.jsx)(z.E,{textAlign:"left",color:r?y:v,noOfLines:2,maxW:"100%",whiteSpace:"normal",children:(0,lj.B)(null===(t=n.doc)||void 0===t?void 0:t.title)}),(0,s.jsxs)(te.z,{color:b,children:[h&&!n.offline?(0,s.jsx)(W.Tz,{label:(0,s.jsxs)(D.B,{spacing:1,children:[(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"cFW7WD"})}),(0,s.jsx)(z.E,{fontSize:"xs",color:"whiteAlpha.700",children:(0,s.jsx)(c.x6,{id:"qliBJ3"})})]}),placement:"top",children:(0,s.jsx)(o.s,{bg:r?y:v,minW:1.5,minH:1.5,borderRadius:"full"})}):null,(0,s.jsx)(z.E,{mt:"-1px",textAlign:"left",noOfLines:1,fontFamily:i?void 0:"mono",fontSize:"xs",whiteSpace:"normal",wordBreak:"break-all",dir:"ltr",children:i?(0,s.jsx)(c.x6,{id:"i0qMbr"}):n.path})]})]}),C&&d&&u&&(0,s.jsx)(dx,{site:u,doc:a,route:n,hasChanges:h,isSelected:r,onToggleOffline:C})]})},dm=()=>{let e=(0,eo.GV)(ta.Gd),{openSiteSettings:t}=(0,nS.ip)(),n=(0,eo.GV)(ta.le),{onlineRoutes:i,offlineRoutes:r}=(0,p.useMemo)(()=>{let t=((null==e?void 0:e.routes)?[...e.routes]:[]).sort(function(e,t){return e.path<t.path?-1:e.path>t.path?1:0}).sort((e,t)=>"/"===e.path?-1:"/"===t.path?1:0);return{onlineRoutes:t.filter(e=>!e.offline),offlineRoutes:t.filter(e=>e.offline)}},[null==e?void 0:e.routes]);return e?(0,s.jsxs)(D.B,{spacing:2,w:"100%",p:0,children:[(0,s.jsx)(sp,{context:"pages",openSiteSettings:()=>t("website")}),(0,s.jsxs)(du,{title:(0,s.jsx)(c.x6,{id:"wRR604"}),children:[(0,s.jsx)(t_.h,{}),(0,s.jsx)(ds,{site:e})]}),(0,s.jsxs)(D.B,{spacing:1,px:0,children:[0===i.length&&(0,s.jsx)(dd,{site:e}),i.map(e=>{let t=e.docId===n;return(0,s.jsx)(dp,{route:e,isHome:"/"===e.path,isSelected:t},e.id)}),r.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(du,{title:(0,s.jsx)(c.x6,{id:"1DdXjE"})}),r.map(e=>{let t=e.docId===n;return(0,s.jsx)(dp,{route:e,isHome:"/"===e.path,isSelected:t},e.id)})]})]})]}):(0,s.jsx)(s.Fragment,{})},df=()=>{let e=(0,Y.rd)();return(0,s.jsx)(W.L8,{isDark:e,children:(0,s.jsx)(tD.Z,{bg:e?"gray.900":"white",borderRight:"1px solid",borderColor:e?"gray.800":"gray.200","data-panelid":"pages-panel",overflowX:"hidden",px:6,pt:4,children:(0,s.jsx)(dm,{})})})};df.panelPosition="left",df.panelName="pages";let dg=()=>{let{togglePanel:e,isPanelOpen:t}=eZ(df,(0,r_.Gx)()),n=(0,m.d4)(el.wC),i=(0,eo.GV)(ta.Gd),{editor:r}=(0,t4.mi)(),s=(0,eo.GV)(ti.og),o=!!(i&&!(null!==s)&&i.routes.length>1&&r);return(0,tQ.Vg)(()=>{o&&e({override:"open",disableTransition:!1})},[e,o],[o]),(0,p.useEffect)(()=>{n!==tC.w.DOC_VIEW&&e({override:"closed",disableTransition:!0})},[n,e]),{togglePagesPanel:e,isPagesPanelOpen:t}};var dj=n(35436),dv=n(22470);let db=[{transform:"translateX(0px)"},{transform:"translateX(10px)"},{transform:"translateX(0px)"},{transform:"translateX(-10px)"},{transform:"translateX(0px)"},{transform:"translateX(10px)"},{transform:"translateX(0px)"},{transform:"translateX(-10px)"},{transform:"translateX(0px)"}],dy={duration:400,easing:"ease-in-out"},dC=e=>{var t;let{docId:n}=e,{onClose:i}=(0,ez.j)(),{onPasswordSubmitted:r}=(0,tT.m)(),[l,a]=(0,p.useState)(!1),[d,h]=(0,p.useState)(""),[x,m]=(0,p.useState)(!1),[f,g]=(0,p.useState)(""),j=(0,p.useRef)(null),[v,{data:b}]=(0,nw.tS1)();(0,p.useEffect)(()=>{v({variables:{docId:n}})},[n,v]);let y=(0,p.useCallback)(()=>{x||null==r||r(d).then(e=>{var t;let[n]=e;(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.doc)?m(!0):(j.current&&j.current.animate(db,dy),g(u.Ru._({id:"jvNV6s",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}})))})},[d,x,g,m,r]);return(0,s.jsxs)(sj.aF,{isOpen:!0,onClose:i,isCentered:!0,size:"xl",children:[(0,s.jsx)(ir.m,{}),(0,s.jsxs)(sv.$,{ref:j,p:8,children:[(0,s.jsx)(sb.r,{children:(0,s.jsxs)(D.B,{alignItems:"center",children:[(0,s.jsx)(of.e,{src:(null==b?void 0:null===(t=b.publicDoc)||void 0===t?void 0:t.logoUrl)||dv.A.src,size:"lg"}),(0,s.jsx)(P.D,{children:(0,s.jsx)(c.x6,{id:"GZ6qi2"})}),(0,s.jsx)(z.E,{fontSize:"md",letterSpacing:"normal",fontWeight:"500",children:(0,s.jsx)(c.x6,{id:"rp/zfh"})})]})}),(0,s.jsx)(il.c,{display:"flex",flexDirection:"column",alignItems:"center",children:(0,s.jsx)(D.B,{as:"form",spacing:4,onSubmit:e=>{e.preventDefault(),d.length&&y()},w:"100%",children:(0,s.jsxs)(ll.MJ,{isInvalid:!!f,children:[(0,s.jsx)(la.l,{children:(0,s.jsx)(c.x6,{id:"8ZsakT"})}),(0,s.jsxs)(rr.M,{children:[(0,s.jsx)(l_.p,{type:l?"text":"password",placeholder:"Enter the password",value:d,onChange:e=>{h(e.target.value)},borderColor:f?"red":"gray.200"}),(0,s.jsx)(dj.t,{children:(0,s.jsx)(M.K,{variant:"ghost",size:"sm",onClick:()=>a(!l),"aria-label":u.Ru._({id:"tniYMG"}),icon:l?(0,s.jsx)(F.g,{icon:G.k6j}):(0,s.jsx)(F.g,{icon:G.pS3}),_focus:{outline:"none"}})})]}),f&&(0,s.jsx)(ld.Wt,{children:f}),!f&&(0,s.jsx)(ll.eK,{color:"gray.600",children:(0,s.jsx)(c.x6,{id:"tSTf2H",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}})})]})})}),(0,s.jsx)(ia.j,{flex:1,w:"100%",children:(0,s.jsx)(o.s,{flex:1,align:"center",justify:"center",textAlign:"center",children:(0,s.jsx)(N.$,{w:"100%",variant:"solid",isDisabled:!d.length,onClick:y,children:(0,s.jsx)(c.x6,{id:"xGVfLh"})})})})]})]})},dw=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",n=(0,eo.jL)(),i=(0,K.O2)("editor"),r=eX(),s=(0,eo.GV)(el.kn,tN()),o=(0,eo.GV)(el.FI,tN()),l=!!(null==o?void 0:o.pos);(0,p.useEffect)(()=>{if(!e)return;let t=tl()(()=>{s&&n((0,el.mF)({attached:!1}))},500,{leading:!0}),i=(0,$.Ei)({topOffset:100,requiredCookie:"spotlightScrollDebug=true"});return document.addEventListener("wheel",t,!0),()=>{i(),t.cancel(),document.removeEventListener("wheel",t,!0)}},[e,n,s,l,t]);let a=(0,eo.GV)(el.e4,tN());(0,p.useEffect)(()=>{if(!e||a)return;let t=tl()(()=>{if(i.inProgress)return;let t=(0,n6.MY)(e,100,r);if(!t){console.debug("[useHandleScrollAndSelectionChange][handleScroll] Unable to find topPosPct.");return}n((0,el.m7)(t))},250,{trailing:!0,maxWait:500}),s=tl()(()=>{if(e.state.selection instanceof sA.J)return;let t=document.querySelector(i.scrollSelector||""),r=null==t?void 0:t.getBoundingClientRect(),s=e.state.selection.from,o=(0,n6.jB)(e,s);if(!t||!r||!o){console.debug("[useHandleScrollAndSelectionChange][handleSelectionChange] missing data",{domNodeToUse:o});return}let l=o.getBoundingClientRect(),a=parseFloat(((e.view.coordsAtPos(s).top-l.y)/l.height).toFixed(2));n((0,el.m7)({pos:s,pct:a}))},250,{trailing:!0,maxWait:500});return t(),e.on("selectionUpdate",s),window.addEventListener("scroll",t,!0),()=>{e.off("selectionUpdate",s),window.removeEventListener("scroll",t,!0)}},[e,n,i,a,r])},dE=()=>{let e=(0,eE.d)(),t=(0,eo.jL)();return(0,p.useCallback)(n=>{let{collaborator:i,localIsFollowing:r,localIsAttached:l}=n,a={attached:!0};r?l?a.following=null:e.closeAll():(a.following=i.sessionId,e.closeAll(),e({duration:2e3,position:"bottom",render:function(){return(0,s.jsxs)(o.s,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,s.jsx)(of.e,{size:"sm",src:i.profileImageUrl,border:"solid 2px ".concat(i.color),color:sZ()(i.color).isDark()?"white":"black",bg:i.color}),(0,s.jsx)(z.E,{ml:2,children:(0,s.jsx)(c.x6,{id:"lULvWe",values:{0:i.name}})})]})}})),console.debug("[CollaboratorsPanel] Clicked on collaborator ".concat(i.name,". Setting following to ").concat(a)),t((0,el.mF)(a))},[e,t])},dk=e=>{let{editor:t,collaborators:n,user:i}=e,r=(0,p.useRef)(!1),s=dE(),o=new URLSearchParams(window.location.search),l=o.get("following_id"),a=o.get("follow_on_start");(0,p.useEffect)(()=>{if(r.current||!a||(null==i?void 0:i.id)===l||!t)return;let e=n.find(e=>e.id===l);e&&(s({collaborator:e,localIsAttached:!1,localIsFollowing:!1}),r.current=!0)},[l,a,t,n,i,s])},dS="sessionId1",dI=tj.YY.create({addStorage:()=>({user:{}}),addCommands(){return{user:e=>()=>{let t=(0,eo.KA)();return this.storage.user=st()({},this.storage.user,e),t.dispatch((0,el.vK)({sessionId:dS})),t.dispatch((0,el._)({collaborators:[this.storage.user]})),!0}}}}),dT=e=>{var t;let{docId:n,snapshotId:i,scrollingParentSelector:r,onCreate:a,theme:d,hideMadeWithGammaBadge:c=!1}=e,[u]=(0,p.useState)(()=>[nt.Q,so.Li.configure({scrollerSelector:r}),dI,ss.wg]),{user:h,isUserLoading:x,anonymousUser:m,color:f}=(0,X.ur)(),[g]=(0,ea.M)(ed.E.gammaDocPasswords,{}),[j,v]=(0,p.useState)(),{data:b,loading:y,error:C}=(0,nw.YDl)({variables:{docId:n,snapshotId:i,password:g[n]},skip:!i}),w=(0,eo.GV)(nf.Jo);(0,p.useEffect)(()=>{!x&&j&&j.commands.user({id:(null==h?void 0:h.id)||m.id,color:f.value,sessionId:dS,idleSince:null,name:(null==h?void 0:h.displayName)||m.displayName||"",profileImageUrl:(null==h?void 0:h.profileImageUrl)||"",isReady:!x})},[j,h,f,x,m]);let E=b&&void 0!==b.snapshot&&!y&&w;return(0,s.jsxs)(l.az,{"data-testid":"public-static-editor-wrapper",flex:"1",height:"100%",children:[!E||C?(0,s.jsxs)(o.s,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!E&&(0,s.jsx)(t8.y,{}),C&&(0,s.jsxs)(L.o,{h:"100%",children:["There was an error loading this ",eu.TP,":"," ",C.message]})]}):(0,s.jsx)(l.az,{"data-testid":"public-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:E?1:0,children:(0,s.jsx)(th.bw,{doc:w,editorId:"main",docId:n,theme:d||void 0,extensions:u,onCreate:e=>{let{editor:t}=e;v(t),setTimeout(()=>{a&&a(t)},10)},readOnly:!0,initialContent:null===(t=b.snapshot)||void 0===t?void 0:t.content.default,scrollingParentSelector:r})}),j&&(0,s.jsx)(tk,{editor:j,backoffFactor:2}),!c&&(0,s.jsx)(sl.d,{docWorkspace:null==w?void 0:w.organization})]})},dA={[tC.w.DOC_VIEW]:"doc",[tC.w.SLIDE_VIEW]:"present",[tC.w.DOC_PREVIEW]:"preview"},d_=Object.fromEntries(Object.entries(dA).map(e=>{let[t,n]=e;return[n,t]})),dR=e=>{let t=(0,m.wA)(),n=(0,w.sF)().mode,i=(0,eo.GV)(el.wC),r=(0,p.useCallback)(e=>{let t=e||i,{mode:n}=(0,w.sF)(),r=dA[t];n!==r&&(0,r5.g5)({query:{...(0,w.sF)(),mode:r},emitChange:!1})},[i]);(0,sE.w)(r,[i]),(0,p.useEffect)(()=>r5.uE.on("changed",()=>r()),[r]),(0,tQ.Vg)(function(){if(!e)return;let i=d_[n],{cardId:s}=(0,w.$9)();i===tC.w.SLIDE_VIEW&&(s?(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCardById:",s),e.commands.spotlightCardById(s)):(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCurrentCard"),e.commands.spotlightCurrentCard())),i&&t((0,el.iY)({mode:i})),r(i)},[e,t,n,r],[e])};var dO=n(119),dD=n.n(dO),dz=n(80245);let dP=(e,t)=>e.docChanged?(0,dz.A)(e).flatMap(n=>{let i={from:n.newStart,to:n.newEnd};return function(e,t,n){let i=[];if(t.from===t.to){let n=e.nodeAt(t.from);n&&i.push({node:n,pos:t.from})}return e.nodesBetween(t.from,t.to,(e,t)=>{n(e)&&i.push({node:e,pos:t})}),i}(e.doc,i,t)}):[];var dL=n(387);let dN="disable-card-size-animations",dM=()=>{let e=(0,eo.GV)(el.yh),t=(0,eo.GV)(el.We),n=(0,eo.GV)(el.Uu),i=(0,eE.d)(),{min:r}=n8(),[o,l]=(0,p.useState)(null),[a,d]=(0,p.useState)(null);return(0,p.useEffect)(()=>{t<=r&&n.scaleContentToFit&&(a&&i.close(a),l(i({title:(0,s.jsx)(c.x6,{id:"IxUcyZ"}),description:(0,s.jsx)(c.x6,{id:"v9rGLj"}),status:"info",position:"top",duration:3e3})))},[t,n.scaleContentToFit,r,i,a]),(0,p.useEffect)(()=>{if(o&&t>r&&n.scaleContentToFit){i.close(o);let e=i({title:(0,s.jsx)(c.x6,{id:"oWpmCA"}),description:(0,s.jsx)(c.x6,{id:"S0DQn7"}),status:"success",position:"top",duration:3e3});l(null),d(e)}},[o,n.scaleContentToFit,r,i,t]),!e||t<=r},dV=e=>{let{editor:t}=e,n=(0,eo.CU)(),i=(0,n$.t)(),r=dM(),s=(0,p.useCallback)(e=>{var s;let{transaction:o}=e;if(!o.docChanged||o.getMeta("scaleContentToFit")||(0,dL.he)(o)||r)return;let l=null===(s=(0,r3.iS)(o.doc))||void 0===s?void 0:s.attrs.settings;if(!l||!(null==l?void 0:l.scaleContentToFit))return;if(o.steps.some(e=>"attr"in e&&"settings"===e.attr&&l.scaleContentToFit&&"fluid"!==l.cardDimensions)||(0,dL.Xq)(o)){let e=(0,tj.Nx)(o.doc,{from:0,to:o.doc.lastChild.nodeSize},ty.jg);requestAnimationFrame(()=>{e.forEach(e=>{let{node:r}=e;dG({id:r.attrs.id,editor:t,cardFontScale:r.attrs.fontScale,isTopLayout:"top"===r.attrs.layout,docSettingsFromTransaction:l,viewportScaleFactor:i,store:n})})});return}let a=dP(o,ty.jg);a.length&&a.forEach(e=>{let{node:r}=e;dF({id:r.attrs.id,editor:t,cardFontScale:r.attrs.fontScale,isTopLayout:"top"===r.attrs.layout,docSettingsFromTransaction:l,viewportScaleFactor:i,store:n})})},[t,n,i,r]);return(0,p.useEffect)(()=>{if(t&&!t.isThumbnail)return t.on("update",s),()=>{t.off("update",s)}},[t,s]),null},dG=async e=>{let{id:t,editor:n,cardFontScale:i,isTopLayout:r,docSettingsFromTransaction:s,viewportScaleFactor:o,store:l}=e;if(!n)return;let a=(0,ty.W0)(n,t);if(!a)return;let d=(0,n6.jB)(n,a.pos);if(!d)return;let c=dW({cardElt:d,cardFontScale:i,isTopLayout:r,docSettingsFromTransaction:s,viewportScaleFactor:o,store:l});c!==i&&n.chain().updateAttributesAtPos(a.pos,{fontScale:c}).setMeta("scaleContentToFit",!0).setMeta("addToHistory",!1).run()},dF=eM()(dG,250,{leading:!0}),dW=e=>{let{cardElt:t,cardFontScale:n,isTopLayout:i,docSettingsFromTransaction:r,viewportScaleFactor:s,store:o}=e,l=(0,el.We)(o.getState()),a=(0,el.SJ)(o.getState()),d=1,c=null==t?void 0:t.querySelector("[data-card-id]"),u=null==t?void 0:t.querySelector("[data-card-body]"),h=dU({docSettingsFromTransaction:r,zoomLevel:l,viewportScaleFactor:s,theme:a});if(!c||!u||!h)return n||d;if(Math.abs(h-function(e,t){let n=e.querySelector('[data-layout-item-id="body"]'),i=null==n?void 0:n.querySelector("[data-node-view-content]"),r=e.querySelector('[data-layout-item-id="accent"]');if(t&&r){let e=r.clientHeight,t=null==i?void 0:i.clientHeight;return t?t+e:0}return(null==i?void 0:i.clientHeight)||0}(t,i))<1.01*h-h/1.01)return n;for(document.body.classList.add(dN),d+=.05;d>aD.o5&&(d=dD()(d-.05,2),c.style.setProperty("--card-font-scale",d.toString()),!(u.scrollHeight<=1.01*h)););return document.body.classList.remove(dN),requestAnimationFrame(()=>{c.style.removeProperty("--card-font-scale")}),d},dU=nX()(function(e){let{docSettingsFromTransaction:t,zoomLevel:n,viewportScaleFactor:i,theme:r}=e,s=null==t?void 0:t.cardDimensions,o=s?d.VM[s]:16/9;if(o)return n1({zoomLevel:n,docSettingsFontSize:null==t?void 0:t.fontSize,defaultContentWidth:null==t?void 0:t.defaultContentWidth,viewportScaleFactor:i,theme:r})/o});var dB=n(31201),dH=n(90406),dq=n(12408),dK=n(2250),dJ=n(35987),dY=n(59707),dX=n(83060);let d$=e=>{let{isOpen:t,onClose:n,onSaveSuccess:i,docId:r}=e,o=(0,eE.d)(),l=(0,p.useRef)(null),[a,d]=(0,p.useState)(""),[u,{loading:h}]=(0,nw.cGn)(),x=()=>{u({variables:{id:r,title:a}}).then(()=>{d(()=>""),i()}).catch(e=>{console.error(e),o({title:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(c.x6,{id:"AToAqe",values:{0:e.message}})}),position:"top",status:"error"})})};return(0,s.jsxs)(sj.aF,{returnFocusOnClose:!1,onClose:n,closeOnOverlayClick:!0,isOpen:t,initialFocusRef:l,children:[(0,s.jsx)(ir.m,{}),(0,s.jsxs)(sv.$,{children:[(0,s.jsx)(sb.r,{children:(0,s.jsx)(c.x6,{id:"kq/0Sg",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}})}),(0,s.jsx)(io.s,{}),(0,s.jsx)(il.c,{children:(0,s.jsx)(l_.p,{ref:l,value:a,required:!0,placeholder:(0,lj.B)(),onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&x()}})}),(0,s.jsx)(ia.j,{children:(0,s.jsx)(D.B,{spacing:2,direction:"row",align:"center",children:(0,s.jsx)(N.$,{isLoading:h,isDisabled:h||!a||!a.length,onClick:()=>{x()},children:(0,s.jsx)(c.x6,{id:"tfDRzk"})})})})]})]})},dZ=(0,p.memo)(e=>{let{doc:t}=e,n=(0,p.useCallback)(()=>ly.R.emit("openSharePanel",{view:"invite"}),[]),{isOpen:i,onClose:r,onOpen:l}=(0,iD.E)({id:"analyticsModalDisclosure"}),{isOpen:a,onOpen:d,onClose:h}=(0,iD.E)({id:"titleModalDisclosure"}),{isInOfflineMode:x}=(0,g.u)(),m=(0,J.st)(),{user:f}=(0,X.ur)(),j=(0,X.Iy)("manage",t)&&!!f,v=(0,b.u)("editDocAI"),y=(0,p.useCallback)(()=>{t&&(t.title&&""!==t.title?n():d())},[t,n,d]),C=(0,p.useCallback)(e=>()=>{null==m||m.track(J.VV.DOC_ANALYTICS_VIEWED,{docId:null==t?void 0:t.id,source:e,type:"full"}),l()},[m,null==t?void 0:t.id,l]);return j&&t&&!v?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.s,{children:(0,s.jsx)(W.Tz,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,s.jsx)(c.x6,{id:"YaUqUV"}),children:(0,s.jsx)(dX.f,{"data-guider-highlight":"view-analytics-button","aria-label":u.Ru._({id:"YaUqUV"}),isDisabled:x,onMouseDown:dY.Fw,onClick:C("toolbar_analytics_block"),icon:(0,s.jsx)(F.g,{icon:G.q9c})})})}),a&&(0,s.jsx)(d$,{onClose:h,isOpen:a,onSaveSuccess:()=>{h(),n()},docId:null==t?void 0:t.id}),i&&(0,s.jsx)(li,{doc:t,onSharePanelOpen:y,onAnalyticsPanelClose:r,isAnalyticsPanelOpen:i,mode:"full"})]}):null});var dQ=n(98029),d0=n(85774),d1=n(31291),d6=n(67265),d2=n(91047),d5=n(6373),d3=n(89897),d4=n.n(d3),d8=n(38678),d7=n(85025);let d9=(0,af.P)(o.s),ce=e=>{let{doc:t}=e;return(0,s.jsx)(d9,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},children:(0,s.jsx)(ag.N,{initial:!1,children:(0,s.jsx)(cs,{doc:t})})})},ct=(0,p.memo)(e=>{let{doc:t}=e,{editor:n}=(0,t4.mi)(),{isConnected:i}=(0,g.u)(),r=(0,eE.d)(),o=(0,p.useRef)(null),a=(0,p.useRef)(null),[d,{loading:h}]=(0,nw.cGn)(),[x,m]=(0,p.useState)(null),[f,j]=(0,p.useState)(!1),[v,b]=(0,p.useState)(!1),y=(0,X.Iy)("edit",t),C=y?300:500,w=(0,p.useCallback)(()=>{if(!n)return"";let[e]=(0,tj.xe)(n.state.doc,ty.jg);return e&&(0,aR.getCardTitle)(e.node.toJSON())||""},[n]);(0,p.useEffect)(()=>{!t||f||h||(m(t.title||""),b(!!t.titleEdited))},[t,f,h]);let E=()=>{o.current.style.width=a.current.offsetWidth+0+"px"},k=(0,_.dU)("gray.800","gray.200");return(0,s.jsx)(W.Tz,{label:y?i?(0,s.jsx)(c.x6,{id:"2wxgft"}):(0,s.jsx)(c.x6,{id:"Cb+Bgk"}):null,"aria-label":u.Ru._({id:"2wxgft"}),children:(0,s.jsxs)(dQ.F,{value:x||"",placeholder:x||w(),isDisabled:h||!y||!i,isPreviewFocusable:y,maxW:C,width:"100%",fontWeight:"normal",onCancel:()=>{E(),j(!1)},onFocus:()=>{E(),t&&!h&&j(!0)},onChange:e=>{E(),f&&(m(e),b(!!e))},onSubmit:()=>{if(!t||h)return;j(!1);let e=x||w();d({variables:{id:t.id,title:e,titleEdited:v}}).catch(e=>{console.error(e),r({title:(0,s.jsx)(c.x6,{id:"AToAqe",values:{0:e.message}}),position:"top",status:"error"})})},children:[(0,s.jsx)(d0.l,{px:1,py:.5,display:f?"inline":"block",overflowX:"hidden",textOverflow:"ellipsis",color:v?k:"inherit"}),(0,s.jsx)(d1.j,{ref:o,px:1,py:.5,color:v?k:"inherit",maxW:C,_focus:{outline:"none",shadow:"0 0 0 2px rgb(66 153 225 / 60%)"}}),(0,s.jsx)(l.az,{ref:a,as:"span",display:"inline-block",position:"absolute",left:"-9999px",opacity:0,zIndex:-1,minW:"180px",px:1,dangerouslySetInnerHTML:{__html:d4().sanitize((x||"").replace(/\s/g,"&nbsp;"))}})]})})});ct.displayName="EditableDocTitle";let cn=e=>{let{cardId:t,isEllipsis:n,value:i,onClick:r}=e,o=(0,eo.GV)((0,aZ.F1)(t||""));return n?(0,s.jsx)(F.g,{icon:G.vHW}):t||i?(0,s.jsx)(z.E,{noOfLines:1,onClick:r,maxW:180,fontWeight:"normal",children:i||o||""}):null},ci=e=>{let{isPresentModeFlat:t}=e;return e=>{let n=(0,el.wC)(e),i=(0,el.$i)(e)||"",r=(0,el.Ev)(e).parents[i]||[];if(n!==tC.w.SLIDE_VIEW||t)return[{isHome:!0},{isDocTitle:!0}];let s=r[0],o=r[r.length-1];return[{isHome:!0},r.length>1?{cardId:s}:null,r.length>2?{isEllipsis:!0}:null,r.length>0?{cardId:o}:null,{cardId:i}]}},cr=()=>{let e=(0,b.u)("presentModeFlat");return(0,eo.GV)(ci({isPresentModeFlat:e}),(e,t)=>JSON.stringify(e)===JSON.stringify(t))},cs=(0,p.memo)(e=>{let{doc:t}=e,n=(0,q.fW)(),i=cr(),[r]=(0,d7.F)(ed.E.lastHomeUrl,"/"),{user:a}=(0,X.ur)(),{isConnected:d,isInOfflineMode:h}=(0,g.u)(),{confirmNavigation:x}=(0,t4.mi)(),{push:p}=(0,tn.useRouter)(),m=(0,e2.h5)({base:"xs",sm:"sm"}),f=(0,_.dU)("gray.500","gray.400"),j=(0,_.dU)("gray.800","gray.100");return(0,s.jsxs)(te.z,{spacing:0,as:N.$,textAlign:"left",px:0,_hover:{color:j},h:8,bg:"transparent",boxShadow:"none",border:"none",children:[(0,s.jsx)(d6.Q,{display:"flex",alignItems:"center",whiteSpace:"nowrap",size:m,spacing:["4px","8px"],separator:(0,s.jsx)(l.az,{color:"gray.300",mt:["0.2rem","0.125rem"],children:(0,s.jsx)(F.g,{icon:n?G.Wzs:G.XkK})}),children:i.map((e,n)=>{if(!e)return null;let o=n===i.length-1,{cardId:l,isEllipsis:d,isDocTitle:c,isHome:u,value:h}=e,m=u?"home":d?"ellipsis":l||h||n;if(u&&!a)return null;let g={as:i5(),href:r||"/",fontWeight:"normal","data-testid":"toolbar-home-link"};return(0,s.jsx)(d2.J,{children:(0,s.jsx)(d9,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:(0,s.jsx)(d5.w,{isCurrentPage:o,pointerEvents:o&&!c?"none":"inherit",color:o?f:"inherit",...u?{...g}:{},children:c?(0,s.jsx)(ct,{doc:t}):u?(0,s.jsx)(nT.N,{marginInlineStart:-3,as:dX.I,href:g.href,onClick:e=>{!e.shiftKey&&(e.metaKey||e.ctrlKey)||(e.preventDefault(),x().then(()=>{p(g.href)}))},marginInlineEnd:-1,children:(0,s.jsx)(F.g,{size:"1x",icon:G.v02})}):(0,s.jsx)(cn,{cardId:l,value:h,isEllipsis:d,onClick:()=>{l&&(0,d8.o)({cardId:l,method:"push"})}})})},m)},m)})}),!d&&(0,s.jsx)(W.Tz,{label:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z.E,{marginInlineEnd:2,children:(0,s.jsx)(c.x6,{id:"ysdDIA"})}),h&&(0,s.jsx)(z.E,{color:"gray.300",children:(0,s.jsx)(c.x6,{id:"+QNhGE"})})]}),"aria-label":u.Ru._({id:"IcHxhR"}),children:(0,s.jsx)(o.s,{color:"gray.500",alignItems:"center",pr:3,children:(0,s.jsx)(F.g,{icon:G.seF})})})]})});cs.displayName="BreadcrumbGroup";var co=n(23970),cl=n(67419),ca=n(31595),cd=n(72252);let cc=(0,p.createContext)(null);var cu=n(18877);let ch=e=>!e.isLayoutDirty&&e.willUpdate(!1),cx=e=>!0===e,cp=e=>cx(!0===e)||"id"===e,cm=({children:e,id:t,inheritId:n,inherit:i=!0})=>{void 0!==n&&(i=n);let r=(0,p.useContext)(cd.L),s=(0,p.useContext)(cc),[o,l]=(0,cu.C)(),a=(0,p.useRef)(null),d=r.id||s;null===a.current&&(cp(i)&&d&&(t=t?d+"-"+t:d),a.current={id:t,group:cx(i)&&r.group||function(){let e=new Set,t=new WeakMap,n=()=>e.forEach(ch);return{add:i=>{e.add(i),t.set(i,i.addEventListener("willUpdate",n))},remove:i=>{var r;e.delete(i),null===(r=t.get(i))||void 0===r||r(),t.delete(i),n()},dirty:n}}()});let c=(0,p.useMemo)(()=>({...a.current,forceRender:o}),[l]);return p.createElement(cd.L.Provider,{value:c},e)},cf=()=>{let{user:e,anonymousUser:t}=(0,X.ur)(),n=(0,m.wA)(),i=(0,eE.d)(),{editor:r}=(0,t4.mi)(),{collaborators:l,followers:a}=(0,m.d4)((0,el.iH)((null==e?void 0:e.id)||t.id));dk({editor:r,collaborators:l,user:e});let d=(0,m.d4)(el.Kc),h=(0,m.d4)(el.ys),x=(0,m.d4)(el.kn),f=(0,m.d4)(el.Ji),g=(0,m.d4)(el.QF);(0,p.useEffect)(()=>{d.forEach(e=>{i({duration:2e3,position:"bottom",render:function(){return(0,s.jsxs)(o.s,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,s.jsx)(of.e,{size:"sm",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),color:sZ()(e.color).isDark()?"white":"black",bg:e.color,ignoreFallback:!0}),(0,s.jsx)(z.E,{ml:2,children:(0,s.jsx)(c.x6,{id:"DSaSKH",values:{0:e.name}})})]})}})})},[d,i]),(0,p.useEffect)(()=>{let e=!x&&f&&!g;if(!r||!e)return;i.closeAll();let t=i({id:"detached-toast",render:()=>(0,s.jsxs)(o.s,{bg:"gray.50",p:3,px:6,m:4,justify:"flex-end",align:"center",borderRadius:"md",shadow:"md",children:[(0,s.jsx)(z.E,{size:"sm",mr:6,children:(0,s.jsx)(c.x6,{id:"PjodLp"})}),(0,s.jsxs)(tt.e,{size:"sm",alignItems:"center",children:[(0,s.jsx)(N.$,{onClick:()=>{n((0,el.mF)({attached:!0}))},variant:"solid",children:(0,s.jsx)(c.x6,{id:"f/C2ic"})}),(0,s.jsx)(W.Tz,{label:(0,s.jsx)(c.x6,{id:"5JWVnj"}),children:(0,s.jsx)(M.K,{isRound:!0,variant:"ghost",size:"xs","aria-label":u.Ru._({id:"5JWVnj"}),icon:(0,s.jsx)(co.U,{}),onClick:()=>{n((0,el.mF)({attached:!1,following:null}))}})})]})]}),position:"bottom",duration:null});return()=>{i.close(t)}},[r,x,f,g,i,n]),(0,p.useEffect)(()=>{f||!r||r.isDestroyed||n((0,el.mF)({following:null}))},[r,f,n]);let j=(0,e2.h5)({base:4,md:6,xl:8})||6,v=j/(a.length?2:1),b=j/(l.length?2:1);return(0,s.jsx)(o.s,{children:(0,s.jsxs)(te.z,{divider:(0,s.jsx)(cl.G,{borderColor:"gray.200"}),children:[a.length&&(0,s.jsx)(cj,{type:"FOLLOWERS",collaborators:a,max:b,isEveryone:0===l.length,localCollaborator:h,localIsAttached:x}),l.length&&(0,s.jsx)(cj,{type:"COLLABORATORS",collaborators:l,max:v,isEveryone:0===a.length,localCollaborator:h,localIsAttached:x})]})})};var cg=function(e){return e.FOLLOWERS="FOLLOWERS",e.COLLABORATORS="COLLABORATORS",e}(cg||{});let cj=e=>{let{collaborators:t,localCollaborator:n,localIsAttached:i,type:r,max:l,isEveryone:a}=e,d=dE(),h="FOLLOWERS"===r,x=t.length>l,p=x?t.slice(0,l-1):t,m=x?t.length-l+1:0,f=e=>{let{localIsFollowing:t,collaborator:n}=e;h||d({localIsFollowing:t,localIsAttached:i,collaborator:n})};return(0,s.jsx)(cm,{children:(0,s.jsxs)(ca.Z,{size:"sm",spacing:h?-2:0,children:[h&&(0,s.jsx)(cv,{isEveryone:a}),p.map((e,t)=>{var r;let l=(null==n?void 0:null===(r=n.memoState)||void 0===r?void 0:r.following)===e.sessionId,a=!!e.idleSince,d=!h&&(x||p.length-1!==t);return(0,s.jsx)(W.Vc,{ignoreFallback:!0,name:e.name,label:(0,s.jsxs)(o.s,{direction:"column",justify:"center",align:"center",children:[(0,s.jsx)(z.E,{children:e.name}),(0,s.jsx)(z.E,{fontSize:"xs",children:h?(0,s.jsx)(c.x6,{id:"iRohzP"}):l&&i?(0,s.jsx)(c.x6,{id:"1QTvS5"}):(0,s.jsx)(c.x6,{id:"2Ldadb"})})]}),pointerEvents:a?"none":"auto",opacity:a?.4:1,transitionProperty:"common",transitionDuration:"normal",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),nubbin:l&&i,bg:e.color,shadow:"base",color:sZ()(e.color).isDark()?"white":"black",cursor:h?"":"pointer",boxProps:d?{marginEnd:-2}:{},onClick:()=>f({localIsFollowing:l,collaborator:e})},e.sessionId)}),m>0&&(0,s.jsxs)(W.oQ,{tooltipLabel:u.Ru._({id:"25VyZX"}),onClick:e=>{var i;let r=t.find(t=>t.id===e.id);f({localIsFollowing:!!(r&&(null==n?void 0:null===(i=n.memoState)||void 0===i?void 0:i.following)===r.sessionId),collaborator:r})},avatars:t,count:m,disabled:h,children:[(0,s.jsx)(z.E,{px:2,children:h?(0,s.jsx)(c.x6,{id:"vliZud",values:{0:t.length}}):(0,s.jsx)(c.x6,{id:"sC4bhw",values:{0:t.length}})}),!h&&(0,s.jsx)(z.E,{px:2,fontSize:"sm",color:"gray.500",children:(0,s.jsx)(c.x6,{id:"miJbY4"})}),(0,s.jsx)(nq.N,{})]})]})})},cv=e=>{let{isEveryone:t}=e,[n,i]=(0,p.useState)(!1),[r,o]=(0,p.useState)(!1),[a,d]=(0,p.useState)(!1);return((0,p.useEffect)(()=>{!n&&t&&(o(!0),i(!0),setTimeout(()=>{o(!1)},3e3))},[t,n]),t)?(0,s.jsx)(l.az,{fontSize:"sm",color:"",px:2,mr:2,children:(0,s.jsx)(W.Tz,{label:(0,s.jsx)(c.x6,{id:"w7dTyp"}),isOpen:a||r,children:(0,s.jsx)(l.az,{mr:2,px:1,bg:"green.300",color:"green.900",borderRadius:"full",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:(0,s.jsx)(F.g,{icon:G.pS3})})})}):(0,s.jsx)(l.az,{fontSize:"sm",color:"gray.700",pr:4,children:(0,s.jsx)(F.g,{icon:G.pS3})})};var cb=n(13945);let cy=(0,af.P)(l.az),cC=e=>{let{commentFeedItems:t,editor:n,doc:i,user:r}=e;return n&&r?(0,s.jsx)(D.B,{p:2,children:(0,s.jsx)(ag.N,{initial:!1,children:t.map(e=>(0,s.jsx)(cy,{layout:!0,initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},bg:"gray.100",borderColor:"gray.200",borderWidth:"1px",borderRadius:"md",shadow:"sm",children:(0,s.jsx)(iV.h,{comment:e,editor:n,selfUser:r,docId:i.id,userCanComment:!1,instanceType:"notification"},e.id)},e.id))})}):null};var cw=n(24586);function cE(e,t,n,i,r,s,o){try{var l=e[s](o),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(i,r)}function ck(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var s=e.apply(t,n);function o(e){cE(s,i,r,o,l,"next",e)}function l(e){cE(s,i,r,o,l,"throw",e)}o(void 0)})}}var cS=n(26660),cI=n.n(cS),cT=n(37124);function cA(e,t,n,i,r,s,o){try{var l=e[s](o),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(i,r)}function c_(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var s=e.apply(t,n);function o(e){cA(s,i,r,o,l,"next",e)}function l(e){cA(s,i,r,o,l,"throw",e)}o(void 0)})}}function cR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function cO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cR(Object(n),!0).forEach(function(t){var i;i=n[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var cD="axios-retry";function cz(e){return!e.response&&!!e.code&&"ECONNABORTED"!==e.code&&cT(e)}var cP=["get","head","options"],cL=cP.concat(["put","delete"]);function cN(e){return"ECONNABORTED"!==e.code&&(!e.response||e.response.status>=500&&e.response.status<=599)}function cM(e){return!!e.config&&cN(e)&&-1!==cL.indexOf(e.config.method)}function cV(e){return cz(e)||cM(e)}function cG(){return 0}function cF(e){var t=e[cD]||{};return t.retryCount=t.retryCount||0,e[cD]=t,t}function cW(){return(cW=c_(function*(e,t,n,i){var r=n.retryCount<e&&t(i);if("object"==typeof r)try{return yield r,!0}catch(e){return!1}return r})).apply(this,arguments)}function cU(e,t){var n;e.interceptors.request.use(e=>(cF(e).lastRequestTime=Date.now(),e)),e.interceptors.response.use(null,(n=c_(function*(n){var{config:i}=n;if(!i)return Promise.reject(n);var{retries:r=3,retryCondition:s=cV,retryDelay:o=cG,shouldResetTimeout:l=!1}=cO(cO({},t),i[cD]),a=cF(i);if(yield function(e,t,n,i){return cW.apply(this,arguments)}(r,s,a,n)){a.retryCount+=1;var d=o(a.retryCount,n);if(e.defaults.agent===i.agent&&delete i.agent,e.defaults.httpAgent===i.httpAgent&&delete i.httpAgent,e.defaults.httpsAgent===i.httpsAgent&&delete i.httpsAgent,!l&&i.timeout&&a.lastRequestTime){var c=Date.now()-a.lastRequestTime;i.timeout=Math.max(i.timeout-c-d,1)}return i.transformRequest=[e=>e],new Promise(t=>setTimeout(()=>t(e(i)),d))}return Promise.reject(n)}),function(e){return n.apply(this,arguments)}))}cU.isNetworkError=cz,cU.isSafeRequestError=function(e){return!!e.config&&cN(e)&&-1!==cP.indexOf(e.config.method)},cU.isIdempotentRequestError=cM,cU.isNetworkOrIdempotentRequestError=cV,cU.exponentialDelay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=100*Math.pow(2,e),n=.2*t*Math.random();return t+n},cU.isRetryableError=cN;var cB=n(63113);class cH{constructor(e){(0,cw.A)(this,"host",void 0),(0,cw.A)(this,"apiKey",void 0),(0,cw.A)(this,"userToken",void 0),(0,cw.A)(this,"axiosClient",void 0),(0,cw.A)(this,"socket",void 0),(0,cw.A)(this,"socketConnected",!1),this.host=e.host,this.apiKey=e.apiKey,this.userToken=e.userToken||null,this.axiosClient=cI().create({baseURL:this.host,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.apiKey),"X-Knock-User-Token":this.userToken}}),this.socket=new cB.Socket("".concat(this.host.replace("http","ws"),"/ws/v1"),{params:{user_token:this.userToken,api_key:this.apiKey}}),cU(this.axiosClient,{retries:3,retryCondition:this.canRetryRequest,retryDelay:cU.exponentialDelay})}connectSocket(){this.socketConnected||(this.socket.connect(),this.socket.onOpen(()=>{this.socketConnected=!0}))}disconnectSocket(){this.socket.disconnect()}createChannel(e,t){return this.socket.channel(e,t)}makeRequest(e){var t=this;return ck(function*(){try{var n=yield t.axiosClient(e);return{statusCode:n.status<300?"ok":"error",body:n.data,error:void 0,status:n.status}}catch(e){return console.error(e),{statusCode:"error",status:500,body:void 0,error:e}}})()}canRetryRequest(e){return!!cU.isNetworkError(e)||!!e.response&&(e.response.status>=500&&e.response.status<=599||429===e.response.status)}}var cq=n(28985),cK=n.n(cq);function cJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function cY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cJ(Object(n),!0).forEach(function(t){(0,cw.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cJ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}!function(e){e.loading="loading",e.fetchMore="fetchMore",e.ready="ready",e.error="error"}(r||(r={}));var cX={shouldSetPage:!0,shouldAppend:!1};function c$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function cZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c$(Object(n),!0).forEach(function(t){(0,cw.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}class cQ{constructor(e,t,n){this.knock=e,this.feedId=t,(0,cw.A)(this,"apiClient",void 0),(0,cw.A)(this,"userFeedId",void 0),(0,cw.A)(this,"channelConnected",!1),(0,cw.A)(this,"channel",void 0),(0,cw.A)(this,"broadcaster",void 0),(0,cw.A)(this,"defaultOptions",void 0),(0,cw.A)(this,"store",void 0),this.apiClient=e.client(),this.feedId=t,this.userFeedId=this.buildUserFeedId(),this.store=function(e){let t;let n=new Set,i=(e,i)=>{let r="function"==typeof e?e(t):e;if(r!==t){let e=t;t=i?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,s=(e,i=r,s=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let o=i(t);function l(){let n=i(t);if(!s(o,n)){let t=o;e(o=n,t)}}return n.add(l),()=>n.delete(l)},o={setState:i,getState:r,subscribe:(e,t,i)=>t||i?s(e,t,i):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(i,r,o),o}(e=>({items:[],networkStatus:r.ready,loading:!1,metadata:{total_count:0,unread_count:0,unseen_count:0},pageInfo:{before:null,after:null,page_size:50},setLoading:t=>e(()=>({loading:t})),setNetworkStatus:t=>e(()=>({networkStatus:t,loading:t===r.loading})),setResult:function(t){var{entries:n,meta:i,page_info:s}=t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cX;return e(e=>{var t;return{items:o.shouldAppend?(t={},e.items.concat(n).reduce((e,n)=>t[n.id]?e:(t[n.id]=!0,[...e,n]),[])).sort((e,t)=>new Date(t.inserted_at).getTime()-new Date(e.inserted_at).getTime()):n,metadata:i,pageInfo:o.shouldSetPage?s:e.pageInfo,loading:!1,networkStatus:r.ready}})},setMetadata:t=>e(()=>({metadata:t})),setItemAttrs:(t,n)=>{var i=t.reduce((e,t)=>cY(cY({},e),{},{[t]:n}),{});return e(e=>({items:e.items.map(e=>i[e.id]?cY(cY({},e),i[e.id]):e)}))}})),this.broadcaster=new(cK()),this.defaultOptions=n,this.apiClient.connectSocket(),this.channel=this.apiClient.createChannel("feeds:".concat(this.userFeedId),this.defaultOptions)}listenForUpdates(){return this.channelConnected||(this.channel.join().receive("ok",()=>{this.channelConnected=!0}),this.channel.on("new-message",e=>this.onNewMessageReceived(e))),()=>{try{this.channel.leave()}catch(e){console.error("error while leaving channel",e)}}}on(e,t){this.broadcaster.on(e,t)}off(e,t){this.broadcaster.off(e,t)}getState(){return this.store.getState()}markAsSeen(e){var t=this;return ck(function*(){var n=new Date().toISOString();return t.optimisticallyPerformStatusUpdate(e,"seen",{seen_at:n},"unseen_count"),t.makeStatusUpdate(e,"seen")})()}markAsUnseen(e){var t=this;return ck(function*(){return t.optimisticallyPerformStatusUpdate(e,"unseen",{seen_at:null},"unseen_count"),t.makeStatusUpdate(e,"unseen")})()}markAsRead(e){var t=this;return ck(function*(){var n=new Date().toISOString();return t.optimisticallyPerformStatusUpdate(e,"read",{read_at:n},"unread_count"),t.makeStatusUpdate(e,"read")})()}markAsUnread(e){var t=this;return ck(function*(){return t.optimisticallyPerformStatusUpdate(e,"unread",{read_at:null},"unread_count"),t.makeStatusUpdate(e,"unread")})()}markAsArchived(e){var t=this;return ck(function*(){var{getState:n,setState:i}=t.store,r=n(),s=!0!==t.defaultOptions.include_archived,o=Array.isArray(e)?e:[e],l=o.map(e=>e.id),a=o.filter(e=>!e.seen_at).length,d=o.filter(e=>!e.read_at).length,c=cZ(cZ({},r.metadata),{},{total_count:r.metadata.total_count-o.length,unseen_count:r.metadata.unseen_count-a,unread_count:r.metadata.unread_count-d});if(s){var u=r.items.filter(e=>!l.includes(e.id));i(e=>e.setResult({entries:u,meta:c,page_info:e.pageInfo}))}else i(e=>{e.setMetadata(c),e.setItemAttrs(l,{archived_at:new Date().toISOString()})});return t.makeStatusUpdate(e,"archived")})()}markAsUnarchived(e){var t=this;return ck(function*(){return t.optimisticallyPerformStatusUpdate(e,"unarchived",{archived_at:null}),t.makeStatusUpdate(e,"unarchived")})()}fetch(){var e=arguments,t=this;return ck(function*(){var n=e.length>0&&void 0!==e[0]?e[0]:{},{setState:i,getState:s}=t.store,{networkStatus:o}=s();if(![r.loading,r.fetchMore].includes(o)){i(e=>{var t;return e.setNetworkStatus(null!==(t=n.__loadingType)&&void 0!==t?t:r.loading)});var l=cZ(cZ({},t.defaultOptions),n),a=yield t.apiClient.makeRequest({method:"GET",url:"/v1/users/".concat(t.knock.userId,"/feeds/").concat(t.feedId),params:l});if("error"===a.statusCode)return i(e=>e.setNetworkStatus(r.error)),{status:a.statusCode,data:a.error||a.body};var d={entries:a.body.entries,meta:a.body.meta,page_info:a.body.page_info};if(n.before){var c={shouldSetPage:!1,shouldAppend:!0};i(e=>e.setResult(d,c))}else if(n.after){var u={shouldSetPage:!0,shouldAppend:!0};i(e=>e.setResult(d,u))}else i(e=>e.setResult(d));return t.broadcast("messages.new",d),{data:d,status:a.statusCode}}})()}fetchNextPage(){var e=this;return ck(function*(){var{getState:t}=e.store,{pageInfo:n}=t();n.after&&e.fetch({after:n.after,__loadingType:r.fetchMore})})()}broadcast(e,t){this.broadcaster.emit(e,t)}onNewMessageReceived(e){var t=this;return ck(function*(){var{metadata:n}=e,{getState:i,setState:r}=t.store,s=i().items[0];r(e=>e.setMetadata(n)),t.fetch({before:null==s?void 0:s.__cursor})})()}buildUserFeedId(){return"".concat(this.feedId,":").concat(this.knock.userId)}optimisticallyPerformStatusUpdate(e,t,n,i){var{getState:r,setState:s}=this.store,o=Array.isArray(e)?e.map(e=>e.id):[e.id];if(i){var{metadata:l}=r(),a=t.startsWith("un")?o.length:-o.length;s(e=>e.setMetadata(cZ(cZ({},l),{},{[i]:Math.max(0,l[i]+a)})))}s(e=>e.setItemAttrs(o,n))}makeStatusUpdate(e,t){var n=this;return ck(function*(){if(Array.isArray(e)){var i=e.map(e=>e.id);return yield n.apiClient.makeRequest({method:"POST",url:"/v1/messages/batch/".concat(t),data:{message_ids:i}})}return yield n.apiClient.makeRequest({method:t.startsWith("un")?"DELETE":"PUT",url:"/v1/messages/".concat(e.id,"/").concat(t)})})()}}class c0{constructor(e){(0,cw.A)(this,"instance",void 0),this.instance=e}initialize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new cQ(this.instance,e,t)}}var c1="default";function c6(e){return"object"==typeof e?e:{subscribed:e}}class c2{constructor(e){(0,cw.A)(this,"instance",void 0),this.instance=e}getAll(){var e=this;return ck(function*(){var t=yield e.instance.client().makeRequest({method:"GET",url:"/v1/users/".concat(e.instance.userId,"/preferences")});return e.handleResponse(t)})()}get(){var e=arguments,t=this;return ck(function*(){var n=(e.length>0&&void 0!==e[0]?e[0]:{}).preferenceSet||c1,i=yield t.instance.client().makeRequest({method:"GET",url:"/v1/users/".concat(t.instance.userId,"/preferences/").concat(n)});return t.handleResponse(i)})()}set(e){var t=arguments,n=this;return ck(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||c1,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i),data:e});return n.handleResponse(r)})()}setChannelTypes(e){var t=arguments,n=this;return ck(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||c1,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i,"/channel_types"),data:e});return n.handleResponse(r)})()}setChannelType(e,t){var n=arguments,i=this;return ck(function*(){var r=(n.length>2&&void 0!==n[2]?n[2]:{}).preferenceSet||c1,s=yield i.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(i.instance.userId,"/preferences/").concat(r,"/channel_types/").concat(e),data:{subscribed:t}});return i.handleResponse(s)})()}setWorkflows(e){var t=arguments,n=this;return ck(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||c1,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i,"/workflows"),data:e});return n.handleResponse(r)})()}setWorkflow(e,t){var n=arguments,i=this;return ck(function*(){var r=(n.length>2&&void 0!==n[2]?n[2]:{}).preferenceSet||c1,s=c6(t),o=yield i.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(i.instance.userId,"/preferences/").concat(r,"/workflows/").concat(e),data:s});return i.handleResponse(o)})()}setCategories(e){var t=arguments,n=this;return ck(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||c1,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i,"/categories"),data:e});return n.handleResponse(r)})()}setCategory(e,t){var n=arguments,i=this;return ck(function*(){var r=(n.length>2&&void 0!==n[2]?n[2]:{}).preferenceSet||c1,s=c6(t),o=yield i.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(i.instance.userId,"/preferences/").concat(r,"/categories/").concat(e),data:s});return i.handleResponse(o)})()}handleResponse(e){if("error"===e.statusCode)throw Error(e.error||e.body);return e.body}}class c5{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.apiKey=e,(0,cw.A)(this,"host",void 0),(0,cw.A)(this,"userToken",void 0),(0,cw.A)(this,"apiClient",null),(0,cw.A)(this,"userId",void 0),(0,cw.A)(this,"feeds",new c0(this)),(0,cw.A)(this,"preferences",new c2(this)),this.host=t.host||"https://api.knock.app",this.apiKey&&this.apiKey.startsWith("sk_"))throw Error("[Knock] You are using your secret API key on the client. Please use the public key.")}client(){return this.userId||this.userToken||console.warn("[Knock] You must call authenticate(userId, userToken) first before trying to make a request.\n        Typically you'll see this message when you're creating a feed instance before having called\n        authenticate with a user Id and token. That means we won't know who to issue the request\n        to Knock on behalf of.\n        "),this.apiClient||(this.apiClient=new cH({apiKey:this.apiKey,host:this.host,userToken:this.userToken})),this.apiClient}authenticate(e,t){this.userId=e,this.userToken=t}teardown(){this.apiClient&&this.apiClient.disconnectSocket()}}let c3=e=>!!e.comment&&null!==e.timeout,c4=e=>{let{user:t,docId:n,docComments:i=[],pauseExiration:r=!1,duration:s=5e3}=e,o=(0,eE.d)(),l=null==t?void 0:t.id,a=(0,p.useMemo)(()=>{if(!l)return null;let e=new c5(lH.$.KNOCK_PUBLIC_KEY);return e.authenticate(l),e},[l]),[d,c]=(0,p.useState)({}),u=(0,p.useRef)(!0),h=(0,p.useRef)(r);h.current=r,(0,p.useEffect)(()=>()=>{u.current=!1},[]);let x=(0,p.useCallback)(()=>c({}),[]),m=(0,p.useCallback)(e=>{c(t=>Object.entries(t).reduce((t,n)=>{let[i,r]=n;return(!0===e?-1===r.timeout:i===e)||(t[i]=r),t},{}))},[]);(0,p.useEffect)(()=>{r||m(!0)},[m,r]),(0,p.useEffect)(()=>{Object.entries(d).forEach(e=>{let[t,{entry:n,timeout:r}]=e;if(null===r){let e=n.data.commentId,r=null==i?void 0:i.find(t=>t.id===e);if(r){let e=setTimeout(()=>{u.current&&(h.current?c(e=>{let n={...e};return n[t].timeout=-1,n}):m(t))},s);c(i=>({...i,[t]:{entry:n,comment:r,timeout:e}}))}}})},[d,i,s,m]),(0,p.useEffect)(()=>{if(!a||!n)return;let e=a.feeds.initialize(lH.$.KNOCK_FEED_ID,{source:"new-comment",status:"unseen"}),t=e.listenForUpdates();return e.on("messages.new",t=>{let{entries:i}=t,[r]=i;r.data.docId===n&&(c(e=>({...e,[r.id]:{entry:r,timeout:null}})),e.markAsSeen(r).then(()=>{console.debug("New notification marked as seen")}).catch(e=>{console.error("Unable to mark notification as seen",e)}))}),()=>{t()}},[n,o,a]);let{isConnected:f}=(0,g.u)();return(0,p.useEffect)(()=>{if(!a||!n)return;let e=a.client();f?e.connectSocket():e.disconnectSocket()},[n,f,a]),{reset:x,comments:Object.values(d).filter(c3).map(e=>e.comment)}},c8=e=>{var t;let{toggleCommentsPanel:n,isCommentsPanelOpen:i,doc:r,mode:o}=e,{user:l}=(0,X.ur)(),{editor:a}=(0,t4.mi)(),d=(0,b.u)("editDocAI"),[c,u]=(0,tQ.Mk)(),{comments:h,reset:x}=c4({user:l,docId:null==r?void 0:r.id,docComments:null==r?void 0:r.comments,pauseExiration:u}),m=!!(a&&r&&r.comments);(0,p.useEffect)(()=>{if(!m)return;let{commentId:e}=(0,w.$9)();e&&iL.LF.emit(iL.DN.OPEN_POPUP_COMMENT,{commentId:e,highlightComment:!0})},[m]),(0,p.useEffect)(()=>{(i||o===tC.w.SLIDE_VIEW)&&x()},[i,x,o]);let f=!!h.length&&!i&&o!==tC.w.SLIDE_VIEW,g=(null==r?void 0:null===(t=r.comments)||void 0===t?void 0:t.filter(e=>e.status===nw.EB6.Open).length)||0;return d&&0===g?null:(0,s.jsxs)(T.A,{isLazy:!0,lazyBehavior:"keepMounted",returnFocusOnClose:!1,isOpen:f,placement:"bottom",children:[(0,s.jsx)(ei.W,{children:(0,s.jsx)(dX.I,{onMouseDown:dY.Fw,onClick:n,icon:(0,s.jsx)(F.g,{icon:G.DN2}),isActive:i,"aria-label":i?"Hide comments":"Show comments",borderRadius:5,children:g})}),(0,s.jsx)(I.Z,{children:r&&(0,s.jsxs)(R.h,{bg:"white",shadow:"lg",border:"none",ref:c,children:[(0,s.jsx)(cb.R,{bg:"white"}),(0,s.jsx)(cC,{editor:a,user:l,commentFeedItems:h,doc:r})]})})]})},c7=()=>{let{isInOfflineMode:e}=(0,g.u)();return(0,s.jsx)(o.s,{children:(0,s.jsx)(W.Tz,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,s.jsx)(c.x6,{id:"EVnzPs"}),children:(0,s.jsx)(dX.f,{"data-guider-highlight":"design-partner-button","aria-label":"Edit with AI",colorScheme:"trueblue",variant:"plain",isDisabled:e,onClick:()=>{i6.R.emit("toggle",{})},icon:(0,s.jsx)(F.g,{icon:G.p7g})})})})};var c9=n(12917),ue=n(15326),ut=(0,n(31171).B)("div",{baseStyle:{fontSize:"0.24em",top:"50%",left:"50%",width:"100%",textAlign:"center",position:"absolute",transform:"translate(-50%, -50%)"}});ut.displayName="CircularProgressLabel";let un=(e,t)=>{let n=e.querySelector(".chakra-progress__indicator");if(!n)return;let i=(null!=t?t:0)/100,r=(null!=i?i:0)*264,s="".concat(r," ").concat(264-r);n.setAttribute("stroke-dasharray",s)},ui=e=>{let{duration:t=10,onClose:n,onMouseEnter:i,enabled:r,...o}=e,a=(0,p.useRef)(null),d=(0,_.dU)("gray.200","gray.700"),c=(0,_.dU)("trueblue.400","trueblue.300"),u=(0,_.dU)("var(--chakra-colors-gray-700)","var(--chakra-colors-gray-300)");return(0,p.useEffect)(()=>{let e,i;let s=a.current;if(!s||!r)return;un(s,0);let o=r=>{e||(e=r);let l=Math.min(100,(r-e)/(10*t));un(s,l),l<100?i=requestAnimationFrame(o):null==n||n()};return i=requestAnimationFrame(o),()=>{cancelAnimationFrame(i)}},[n,r,t]),(0,s.jsx)(l.az,{ref:a,onMouseEnter:i,cursor:"pointer",sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1,display:r?"block":"none",stroke:c},".chakra-progress__track":{display:r?"block":"none",stroke:d}},...o,children:(0,s.jsx)(ue.P,{display:"block",size:"24px",thickness:"10px",onClick:n,children:(0,s.jsx)(ut,{children:(0,s.jsx)(F.g,{icon:G.Jyw,fontSize:"14px",style:{color:u,borderRadius:"6px"}})})})})};var ur=n(86670),us=n(14452),uo=n(21450),ul=n(76546),ua=n(33630),ud=n(71797),uc=n(78821),uu=n(90854),uh=n(7225),ux=n(87122);let up=()=>{let{generate:e}=(0,tH.pt)("EditCardParallel",{}),{generate:t}=(0,tH.pt)("TranslateCardParallel",{});return(0,p.useCallback)((n,i)=>(null==i?void 0:i.key)==="edit.translate"?t({...n,variables:{...n.variables,language:n.variables.request}}):e(n),[e,t])},um=e=>{var t;let{editor:n}=e,i=up(),r=(0,eo.GV)(el.Jo),s=(0,eo.GV)(el.SJ),o=(0,eo.CU)(),l=(0,eo.GV)(iE.xI),a=(0,r3.lI)(n),d=(0,r3.zK)(a),c=(0,p.useCallback)(async e=>{var t,n,l;let{instructions:c="",inputHtml:u,operation:h}=e,x=(null===(t=a.aiOptions.imageOptions)||void 0===t?void 0:t.provider)||b.of.get("aiGeneratorDefaultImageProvider")||void 0;if(!r||!r.organization)throw Error("Doc or organization not found");let p=r.organization.id,m=(0,tq.$F)(),f=performance.now(),g=(0,tX.u)(o),j={interface:"edit-card-parallel",interactionId:m,inputContent:u,inputMessage:c,inputData:{custom:!!h,operation:null==h?void 0:h.key,operationGroup:null==h?void 0:h.group,format:d,imageProvider:x},product:(0,uc.A4)(r.organization),docId:r.id};try{let{promise:e}=i({workspaceId:r.organization.id,variables:{inputHtml:u,request:c,format:d,outline:g,imageProvider:x,model:b.of.get("editCardModel")},interactionId:m},h),t=null===(l=r.docGenerateInput)||void 0===l?void 0:null===(n=l.settings)||void 0===n?void 0:n.imageStyle;!t&&"aiGenerated"===x&&s&&(t=(0,uu.xI)(s)),(0,tq.rl)(j);let o=await e;console.log("[EditCardParallel] Response",o);let a=(0,us.dg)(o);return console.log("[EditCardParallel] Parsing HTML",a),{output:await Promise.all(a.map(async e=>(0,uo.Lm)(e,{docFormatKey:d,loadImages:!1,context:{workspaceId:p,docId:r.id,interactionId:m},imageOptions:{provider:x,generateStyle:t},theme:s}))),interactionId:m}}catch(e){throw(0,tq.tB)({...j,errorMessage:e.message,errorCode:e.code,errorName:e.name,outputMessage:"Error editing doc",latency:performance.now()-f}),e}},[d,null===(t=a.aiOptions.imageOptions)||void 0===t?void 0:t.provider,r,o,i,s]),h=(0,p.useCallback)(async e=>{let{instructions:t,operation:i}=e,r=(0,ty.aJ)(n.state.doc),s=t||(null==i?void 0:i.instructions);if(r&&s)try{o.dispatch((0,iE.Tn)(!0));let e=[];r.forEach(t=>{var r;o.dispatch((0,iE.Ic)({cardId:t.node.attrs.id,suggestions:{status:"loading",loadingMessage:null==i?void 0:null===(r=i.loadingMessage)||void 0===r?void 0:r.call(i),variants:[]}})),e.push((0,tB.K)(n,t.node))});let t=e.join();console.log("[EditCardParallel] Input HTMLParts",e);let{output:l,interactionId:a}=await c({instructions:s,operation:i,inputHtml:t});if(console.log("[EditCardParallel] New cards",l),l.length!==r.length)throw Error("[EditCardParallel] Mismatch in number of cards");let d={};r.forEach((e,t)=>{var n;let r=l[t];r.attrs=(0,ux.p5)(e.node.attrs,r.attrs),d[e.node.attrs.id]=r,o.dispatch((0,iE.Ic)({cardId:e.node.attrs.id,suggestions:{status:"done",interactionId:a,selected:"v1",operation:i,instructions:s,variants:[{label:u.Ru._({id:"HxF6Fk"}),isOriginal:!0,id:"original",card:e.node.toJSON()},{label:(null==i?void 0:null===(n=i.variationName)||void 0===n?void 0:n.call(i))||u.Ru._({id:"YledUl"}),isOriginal:!1,id:"v1",card:r}]}}))}),ug(n,d)}catch(e){console.error("[EditCardParallel] Error regenerating card",e),r.forEach(e=>{o.dispatch((0,iE.Ic)({cardId:e.node.attrs.id,suggestions:{status:"error",variants:[]}}))})}finally{o.dispatch((0,iE.Tn)(!1))}},[n,c,o]);return(0,p.useEffect)(()=>ua.R.on("translate",e=>{let{type:t,language:n}=e,i=uh.Jz.find(e=>"edit.translate"===e.key);"doc"===t&&i&&h({instructions:"".concat(n.englishName," (").concat(n.key,")"),operation:i})}),[h]),{editDoc:h,acceptAll:(0,p.useCallback)(()=>{o.dispatch((0,iE.YB)({}))},[o]),rejectAll:(0,p.useCallback)(()=>{uf(n,o.getState(),!0),o.dispatch((0,iE.YB)({}))},[n,o]),status:l}},uf=(e,t,n)=>{let i=(0,iE.yL)(t),r=e.chain();return Object.entries(i).forEach(t=>{let[i,s]=t,o=(0,ty.W0)(e,i),l=s.variants.find(e=>!!e.isOriginal===n);o&&l&&l.id!==s.selected&&r.command(t=>{let{tr:n}=t,i=ic.bP.fromJSON(e.schema,l.card),r=n.mapping.map(o.pos);return n.replaceWith(r,r+o.node.nodeSize,i),!0})}),r.run()},ug=(e,t)=>{let n=(0,ty.aJ)(e.state.doc);if(!n)return;let i=n.map(n=>{let i=t[n.node.attrs.id];if(!i){console.warn("[useGenerateCard] Card not found. It may have been deleted while generating.");return}let r=ic.bP.fromJSON(e.state.schema,i),s=(0,el.SJ)((0,eo.KA)().getState());return(0,ul.de)(e,r,s),i}).filter(e=>!!e);console.log("[replaceDocWithCardVariants] content",i),e.chain().setMeta("isEditCardVariant",!0).setMeta("cardNotesHandled",!0).insertContentAt({from:1,to:e.state.doc.nodeSize-2},i).run()},uj=()=>{let e=!!(0,eo.GV)(ta.Gd),{isOpen:t,onClose:n,onOpen:i}=(0,iD.E)({id:"TranslateDocDisclosure"}),r=(0,p.useCallback)(e=>{ua.R.emit("translate",{type:"doc",language:e}),n()},[n]);return{translateDocModal:t?(0,s.jsx)(ud.Q,{isSite:e,isFullDoc:!0,onClose:n,startTranslation:r}):null,onTranslateDocOpen:i}};var uv=n(60204);let ub=(0,af.P)(tA.T),uy=e=>{let{editor:t}=e,{isInOfflineMode:n}=(0,g.u)(),{openUpsellModal:i}=(0,sW.I)(),{editDoc:r,status:l,acceptAll:a,rejectAll:d}=um({editor:t}),h=(0,Y.rd)(),x=(0,p.useRef)(null),m=(0,p.useRef)(null),f=(0,b.u)("editCard2"),j=(0,_.dU)("gray.200","whiteAlpha.200"),[v,y]=(0,p.useState)(),C=(0,p.useCallback)(()=>y(void 0),[]),{isGammaAdminUser:w}=(0,uv.u)(),E=(0,eH.ez)("edit_doc_ai")||w,{translateDocModal:k,onTranslateDocOpen:S}=uj(),T="loading"===l,A=(0,p.useCallback)(e=>{var t;if(!E){i({segmentEvent:J.VV.GAMMA_PRO_UPSELL_CALLOUT_EDIT_DOC_AI});return}if(a(),y(e.operation||"Editing"),(null===(t=e.operation)||void 0===t?void 0:t.key)==="edit.translate"){S();return}r(e)},[a,E,r,S,i]);return f?(0,s.jsxs)(W.L8,{isDark:h,children:[(0,s.jsx)(nF.W,{placement:"bottom-end",isLazy:!0,initialFocusRef:m,onOpen:()=>{y(void 0)},children:e=>{let{onClose:t,isOpen:i}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.s,{direction:"column",children:[(0,s.jsx)(W.Tz,{label:(0,s.jsx)(c.x6,{id:"nIHiKm"}),placement:"bottom",children:(0,s.jsx)(nW.I,{as:dX.f,position:"relative",colorScheme:"trueblue","aria-label":u.Ru._({id:"nIHiKm"}),borderRadius:"md",bg:i?j:void 0,isDisabled:T||n,icon:T?(0,s.jsx)(t8.y,{size:"sm"}):(0,s.jsx)(F.g,{icon:c9.p7g})})}),(0,s.jsx)(uw,{currentOperation:v,onConfirm:a,onReject:d,onClose:C})]}),(0,s.jsx)(I.Z,{children:(0,s.jsxs)(nU.c,{"data-doc-ai-menu":!0,minWidth:"320px",width:"fit-content",maxWidth:"min(360px, 80vw)",fontFamily:"Inter, sans-serif",fontSize:"md",border:"none",children:[(0,s.jsx)(ur.u,{firstItemRef:x,inputRef:m,editCardIfAllowed:A,onClose:t,isDisabled:T,opacityFadeUpsell:!E,groups:["writing"],showCreditCosts:!1}),!E&&(0,s.jsx)(sF.c,{isNarrow:!0,mb:0,segmentEvent:J.VV.GAMMA_PRO_UPSELL_CALLOUT_EDIT_DOC_AI,title:(0,s.jsx)(c.x6,{id:"mpbrVv",values:{GAMMA_PRO_PROPER_NOUN:eu.Ol}}),description:(0,s.jsx)(c.x6,{id:"gNaWbA",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}})})]})})]})}}),k]}):null},uC={initial:{opacity:0,y:10},animate:{opacity:1,transition:{duration:.4,ease:[.21,1.02,.73,1]},y:0},exit:{opacity:0,scale:.9},transition:{duration:.4,ease:[.06,.71,.55,1]}},uw=e=>{var t,n,i;let{currentOperation:r,onConfirm:l,onReject:a,onClose:d}=e,h=(0,eo.GV)(iE.pw),[x,m]=(0,p.useState)(!0),f="Edited"===r?r:"object"==typeof r?null===(t=r.completionMessage)||void 0===t?void 0:t.call(r):(0,s.jsx)(c.x6,{id:"MRZxAn"}),g=null!==(n=h.done)&&void 0!==n?n:0,j=null!==(i=h.error)&&void 0!==i?i:0,v=!!((g||j)&&r);(0,p.useEffect)(()=>{v||m(!0)},[v]);let b={activeColor:(0,_.dU)("trueblue.500","trueblue.300"),hoverColorCloseButton:(0,_.dU)(j?"red.200":"gray.100","whiteAlpha.200"),bg:(0,_.dU)("white","gray.900"),bgError:(0,_.dU)("red.100","red.700"),textColor:(0,_.dU)("blackAlpha.800","whiteAlpha.900"),textErrorColor:(0,_.dU)("red.500","red.100"),iconColor:(0,_.dU)("blackAlpha.800","whiteAlpha.800")};return(0,s.jsx)(ag.N,{children:v&&(0,s.jsxs)(ub,{position:"absolute",bg:j?b.bgError:b.bg,borderRadius:"md",boxShadow:"md",overflow:"hidden",top:14,right:6,flexDirection:"row",spacing:2,p:2,onMouseEnter:()=>m(!1),...uC,children:[j>0?(0,s.jsxs)(te.z,{spacing:0,children:[(0,s.jsx)(o.s,{mx:2,justifyContent:"center",alignItems:"center",color:b.textErrorColor,children:(0,s.jsx)(F.g,{icon:G.QJT,size:"lg"})}),(0,s.jsxs)(tA.T,{mx:2,spacing:0,alignItems:"flex-start",children:[(0,s.jsx)(z.E,{fontSize:"sm",color:b.textErrorColor,children:(0,s.jsx)(c.x6,{id:"nwtY4N"})}),(0,s.jsx)(z.E,{fontSize:"xs",color:b.textErrorColor,children:(0,s.jsx)(c.x6,{id:"xbrcey"})})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(tA.T,{spacing:0,alignItems:"flex-start",children:[(0,s.jsxs)(o.s,{mx:2,justifyContent:"center",alignItems:"center",children:[(0,s.jsx)(F.g,{icon:c9.p7g,color:"var(--chakra-colors-trueblue-400)"}),(0,s.jsx)(z.E,{fontSize:"sm",mx:2,color:b.textColor,children:f})]}),(0,s.jsx)(o.s,{mx:2,children:(0,s.jsx)(z.E,{fontSize:"sm",color:"gray.500",children:(0,s.jsx)(c.x6,{id:"Dj1qYd",values:{doneCount:g}})})})]}),(0,s.jsxs)(tt.e,{spacing:0,children:[(0,s.jsx)(W.Tz,{label:u.Ru._({id:"I1yW7+"}),placement:"top",children:(0,s.jsx)(M.K,{"aria-label":u.Ru._({id:"yWDjkv"}),variant:"ghost",colorScheme:"gray",size:"sm",mx:1,icon:(0,s.jsx)(F.g,{icon:G.U23}),onClick:a})}),(0,s.jsx)(W.Tz,{label:u.Ru._({id:"kOU1RP"}),placement:"top",children:(0,s.jsx)(N.$,{"aria-label":u.Ru._({id:"aIcRZZ"}),variant:"plain",size:"sm",mx:1,rightIcon:(0,s.jsx)(F.g,{icon:G.FK2}),onClick:l,children:(0,s.jsx)(c.x6,{id:"PHWHEO"})})})]})]}),(0,s.jsx)(o.s,{mt:-6,mr:-1,children:(0,s.jsx)(W.Tz,{label:u.Ru._({id:"1QfxQT"}),placement:"top",shouldWrapChildren:!0,children:(0,s.jsx)(ui,{onClose:d,enabled:x&&!j,duration:30,borderRadius:"full",_hover:{bg:b.hoverColorCloseButton,color:b.textColor}})})})]},"confirm-edit-doc-toast")})},uE=(0,af.P)(l.az),uk=()=>{let e=(0,eo.GV)(el.oz),t=(0,eo.GV)(el.kn),n=e&&t;return(0,s.jsx)(ag.N,{initial:!1,children:n&&(0,s.jsx)(uE,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},position:"absolute",pointerEvents:"none",borderTop:"solid ".concat(4,"px ").concat(e.color),top:0,left:0,bottom:0,right:0,height:"var(--100vh)"})})},uS=e=>{let{doc:t,toggleCommentsPanel:n,editorWrapperEl:i,scrollingParentSelector:r}=e;return(0,s.jsxs)(nF.W,{placement:"bottom-end","data-testid":"doc-toolbar-menu",modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["left"]}}],children:[(0,s.jsx)(nW.I,{as:dX.f,borderRadius:"md",icon:(0,s.jsx)(F.g,{icon:G.vHW}),onMouseDown:dY.Fw,"data-testid":"doc-toolbar-menu-button"}),(0,s.jsx)(I.Z,{children:t&&(0,s.jsx)(aY,{doc:t,toggleCommentsPanel:n,scrollingParentSelector:r,editorWrapperEl:i})})]})},uI=e=>{let{docId:t,enabled:n,enterSlideView:i}=e,r=(0,eo.GV)(el.ys),s=(0,p.useRef)(null),o=(0,eE.d)();return(0,p.useEffect)(()=>{!n&&s.current&&s.current.close()},[n]),(0,p.useEffect)(()=>{let e=()=>{var e;null===(e=s.current)||void 0===e||e.close()};return window.addEventListener("beforeunload",e),()=>{var t;window.removeEventListener("beforeunload",e),null===(t=s.current)||void 0===t||t.close()}},[]),{handlePresentViewClick:(0,p.useCallback)(()=>{if(!t||!(null==r?void 0:r.sessionId))return;let e=(0,w.WC)({docId:t,sessionId:r.sessionId}),n=window.open(e,"present-view","popup,left=0,top=0,width=720,height=580");n?s.current=n:(o({title:"Failed to open presenter view.",description:"Please allow popups for this site and try again.",status:"error",position:"top",duration:5e3}),console.error("[usePresenterViewToggle] Failed to open presenter view")),i({fullscreen:!1})},[t,i,null==r?void 0:r.sessionId,o])}};var uT=n(83292),uA=n(44913);function u_(){let e=(0,uT._)(["\n    0% { transform: scale(1.0); filter: brightness(1.0);  }\n    3% { transform: scale(1.0); filter: brightness(1.0);  }\n    8% {  transform: scale(0.90); filter: brightness(1.30);  }\n    18% { transform: scale(1.05); filter: brightness(1.0); }\n    30% { transform: scale(1.0); filter: brightness(1.0); }\n  "]);return u_=function(){return e},e}let uR=e=>({followOnStart:!0,followingId:e}),uO=e=>{switch(e){case"edit":return u.Ru._({id:"UZN1cZ"});case"comment":return u.Ru._({id:"jFTs0A"});case"view":return u.Ru._({id:"Ya6CJ0"});default:return u.Ru._({id:"Txd1qM"})}},uD=e=>{var t,n;let{isOpen:i,onClose:r,accessLinkUrl:o,onPlayClick:a}=e,d=(0,q.fW)(),{user:h}=(0,X.ur)(),{replace:x}=(0,tn.useRouter)(),m=uR(null==h?void 0:h.id),[f]=(0,p.useState)(m),g=(0,w.an)(o,f),{user:j,color:v}=(0,X.ur)(),b=(0,eo.GV)(nf.Jo),y=null==b?void 0:null===(n=b.accessLinks)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.permission,C=(0,V.i7)(u_());return(0,s.jsx)(W.L8,{isDark:!1,children:(0,s.jsxs)(sj.aF,{isOpen:i,onClose:r,size:"lg",children:[(0,s.jsx)(ir.m,{}),(0,s.jsxs)(sv.$,{children:[(0,s.jsx)(sb.r,{children:(0,s.jsx)(c.x6,{id:"88XnIQ"})}),(0,s.jsx)(io.s,{}),(0,s.jsx)(sM.c,{}),(0,s.jsx)(il.c,{pt:"6",children:(0,s.jsxs)(D.B,{spacing:"4",children:[(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"oYTLJe",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP,0:uO(y)},components:{0:(0,s.jsx)(z.E,{as:"span",fontWeight:"bold",borderBottom:"1px dashed",borderColor:"gray.400",display:"inline-block"}),1:(0,s.jsx)(W.Tz,{label:u.Ru._({id:"8LnpqL"}),placement:"top"})}})}),(0,s.jsx)(l.az,{mb:"2",children:(0,s.jsx)(uA.X,{url:g,variant:"solid",paddingLeft:d?20:void 0})}),(0,s.jsxs)(i7.F,{children:[(0,s.jsx)(sB._,{}),(0,s.jsxs)(te.z,{flexBasis:"100%",alignItems:"top",children:[(0,s.jsx)(z.E,{fontSize:"sm",width:"100%",children:(0,s.jsx)(c.x6,{id:"EApNIe"})}),(0,s.jsxs)(l.az,{position:"relative",textShadow:"sm",children:[(0,s.jsx)(of.e,{animation:"".concat(C," 2s infinite ease-out"),name:null==j?void 0:j.displayName,src:null==j?void 0:j.profileImageUrl,size:"md",border:"solid 3px ".concat(v.value),shadow:"lg"}),(0,s.jsx)(l.az,{position:"absolute",top:"1.75rem",left:"1.75rem",outline:"0 0 2px rgba(255,255,255,1.0)",sx:{path:{stroke:"white",strokeWidth:48}},color:"black",children:(0,s.jsx)(F.g,{icon:tR.eX_,fixedWidth:!0})})]})]})]})]})}),(0,s.jsx)(ia.j,{children:(0,s.jsxs)(tt.e,{children:[(0,s.jsx)(N.$,{variant:"ghost",colorScheme:"gray",onClick:()=>{r()},children:(0,s.jsx)(c.x6,{id:"DPfwMq"})}),(0,s.jsx)(N.$,{variant:"solid",onClick:()=>{r(),a(),x(g,g,{shallow:!0})},leftIcon:(0,s.jsx)(F.g,{icon:tR.ijD}),children:(0,s.jsx)(c.x6,{id:"tbDuNX"})})]})})]})]})})},uz=e=>{var t,n,i,r;let{doc:a,docEditorType:d,isCollaborativeEditor:h,enterSlideView:x,exitSlideView:m,setExitedFullscreenByClick:f,isFullscreen:j,enterFullscreen:v,exitFullscreen:y,shouldHide:C}=e,{onOpen:w,onClose:E,isOpen:k}=(0,iD.E)({id:"meetModal"}),{user:S}=(0,X.ur)(),T=(0,eo.GV)(el.wC),A=(0,p.useRef)(T),{presentAction:_,secondaryPresentAction:R}=uP(d),O=(0,b.u)("docPreview");(0,p.useEffect)(()=>{A.current=T},[T]);let{shortcutLabel:P,shortcutIcon:L,shortcutKeys:N,buttonLabel:M}=sw(_)[T],V=null==a?void 0:null===(n=a.accessLinks)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.url,U=!!(null==a?void 0:null===(r=a.accessLinks)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:i.permission),B=(0,X.Iy)("comment",a||void 0),H=(0,X.Iy)("manage",a||void 0),q=h&&S&&V&&H,K=(0,b.u)("cardNotes"),J=T===tC.w.SLIDE_VIEW,Y=T===tC.w.DOC_VIEW,$=K&&B&&d!==t3.i.PUBLIC_STATIC,{isInOfflineMode:Z}=(0,g.u)(),{handlePresentViewClick:Q}=uI({docId:null==a?void 0:a.id,enabled:K&&J,enterSlideView:x}),ee=(0,b.u)("presentFullScreen"),et=["present"===R&&Y&&(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.vGi,fixedWidth:!0}),onClick:()=>x({fullscreen:ee,presentAction:"present"}),isDisabled:Z,children:(0,s.jsxs)(D.B,{spacing:"0",children:[(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"hXFTMR"})}),(0,s.jsx)(z.E,{fontSize:"sm",color:"gray.600",children:(0,s.jsx)(c.x6,{id:"kNbT4w"})})]})}),"preview"===R&&Y&&O&&(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.hZM,fixedWidth:!0}),onClick:()=>x({fullscreen:ee,presentAction:"preview"}),children:(0,s.jsxs)(D.B,{spacing:"0",children:[(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"t7wjm2"})}),(0,s.jsx)(z.E,{fontSize:"sm",color:"gray.600",children:(0,s.jsx)(c.x6,{id:"oVzEKG"})})]})}),q&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(W.Tz,{isDisabled:U,label:(0,s.jsx)(c.x6,{id:"zk6wKo"}),children:(0,s.jsx)(l.az,{children:(0,s.jsx)(sm.D,{onClick:()=>{var e;(null==a?void 0:null===(e=a.accessLinks)||void 0===e?void 0:e[0].permission)&&w()},isDisabled:!U||Z,icon:(0,s.jsx)(F.g,{icon:G.Gk0,fixedWidth:!0}),children:(0,s.jsx)(D.B,{spacing:"0",children:(0,s.jsx)(c.x6,{id:"z7gRub",components:{0:(0,s.jsx)(z.E,{}),1:(0,s.jsx)(z.E,{fontSize:"sm",color:"gray.600"})}})})})})}),(0,s.jsx)(uD,{isOpen:k,onClose:E,accessLinkUrl:V,onPlayClick:()=>{x({fullscreen:!1,presentAction:_})}})]})].filter(Boolean);return(0,s.jsxs)(o.s,{display:C?"none":"flex",children:[(0,s.jsxs)(tt.e,{isAttached:!0,size:"sm","data-guider-highlight":"present-button-group","data-editor-mode":J?"slide":"doc",children:[(0,s.jsx)(W.Tz,{closeOnMouseDown:!1,closeOnClick:!1,label:P,shortcut:N,children:(0,s.jsx)(dX.I,{fontWeight:"normal",size:"sm",variant:"solid",onClick:()=>{Y?x({fullscreen:ee,presentAction:_}):m()},onMouseDown:dY.Fw,icon:(0,s.jsx)(F.g,{icon:L}),"data-present-button":!0,children:M})}),(0,s.jsxs)(nF.W,{children:[(0,s.jsx)(nW.I,{variant:"solid",as:dX.f,icon:(0,s.jsx)(F.g,{icon:G.Jt$})}),(0,s.jsx)(I.Z,{children:(0,s.jsxs)(nU.c,{zIndex:"popover",children:[Y&&(0,s.jsxs)(sg.r,{title:"present"===_?u.Ru._({id:"tbDuNX"}):u.Ru._({id:"Mn9aLv"}),children:[(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.u0F,fixedWidth:!0}),command:(0,W.lp)("Mod+Enter"),onClick:()=>x({fullscreen:!1,presentAction:_}),children:(0,s.jsx)(c.x6,{id:"LRFe2O"})}),(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.ArK,fixedWidth:!0}),command:(0,W.lp)("Mod+Shift+Enter"),onClick:()=>x({fullscreen:!0,presentAction:_}),children:(0,s.jsx)(c.x6,{id:"OwIqiD"})}),$&&(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.hZM,fixedWidth:!0}),onClick:Q,isDisabled:Z,children:(0,s.jsxs)(D.B,{spacing:"0",children:[(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"T+GUKl"})}),(0,s.jsx)(z.E,{fontSize:"sm",color:"gray.600",children:(0,s.jsx)(c.x6,{id:"ACelDx"})})]})})]}),J&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:tR.APi,fixedWidth:!0}),command:(0,W.lp)("Esc"),onClick:m,children:(0,s.jsx)(c.x6,{id:"5Rfo7J"})}),($||q)&&(0,s.jsx)(nq.N,{}),$&&(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.hZM,fixedWidth:!0}),onClick:Q,children:(0,s.jsxs)(D.B,{spacing:"0",children:[(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"T+GUKl"})}),(0,s.jsx)(z.E,{fontSize:"sm",color:"gray.600",children:(0,s.jsx)(c.x6,{id:"ACelDx"})})]})})]}),et.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(nq.N,{}),(0,s.jsx)(sg.r,{title:u.Ru._({id:"+w9NSz"}),children:et})]})]})})]})]}),J&&(0,s.jsx)(o.s,{ml:J?2:0,children:(0,s.jsx)(W.Tz,{label:j?"Exit full screen":"Enter full screen",children:(0,s.jsx)(dX.f,{"aria-label":j?"Exit full screen":"Enter full screen",borderRadius:"md",icon:(0,s.jsx)(F.g,{icon:j?G.gr3:G.oZK}),onClick:j?()=>{f(!0),y()}:v})})})]})},uP=e=>{let t=(0,b.u)("docPreview"),n=e===t3.i.COLLABORATIVE&&t,i=(0,eo.GV)(el.sA).presentAction;n||"preview"!==i||(i="present");let r="present"===i?"preview":"present";return{presentAction:i,secondaryPresentAction:r}},uL=e=>{switch(e){case nw.mOX.Pending:return{icon:G.$Xz,label:u.Ru._({id:"JKsafh"})};case nw.mOX.Verified:return{icon:G.e68,label:u.Ru._({id:"DKrUGB"})};case nw.mOX.Failed:return{icon:G.S2b,label:u.Ru._({id:"ojSx8e"})}}},uN=e=>{let{domain:t,status:n,isLive:i,site:r,docId:o}=e,a=(0,tu.tO)({site:r,docId:o}),d=(0,p.useMemo)(()=>uL(n),[n]);return r&&o?(0,s.jsxs)(te.z,{color:"gray.500",pointerEvents:"none",justifyContent:"flex-start",w:"full",children:[(0,s.jsx)(W.Tz,{label:d.label,placement:"left",children:(0,s.jsx)(M.K,{variant:"ghost",size:"xs",mx:-1,mr:-2,color:"gray.500","aria-label":d.label,_hover:{bg:"transparent"},_active:{bg:"transparent"},children:(0,s.jsx)(F.g,{icon:d.icon,size:"xs",pointerEvents:"auto",fixedWidth:!0,spin:n===nw.mOX.Pending})})}),(0,s.jsx)(W.Tz,{label:t,placement:"top",openDelay:500,closeOnClick:!1,children:(0,s.jsx)(l.az,{fontSize:"xs",pointerEvents:"auto",children:uM(t,33)})}),i&&n===nw.mOX.Verified&&(0,s.jsx)(lw,{site:r,path:(0,tu.wK)(a)})]}):null},uM=(e,t)=>{if(e.length<=t)return e;let n=e.replace(/^https?:\/\//,"").split("."),i=n.slice(-2).join("."),r=n.slice(0,-2).join("."),s=t-i.length-3;if(s<=0)return i;let o=r.slice(0,s);return"".concat(o).concat("...").concat(i)},uV=e=>{let{onClick:t,doc:n,isLive:i}=e,r=null==n?void 0:n.site,o=(0,tu.H3)(null==r?void 0:r.domains),l=i?(0,s.jsx)(c.x6,{id:"3TQHDg",values:{0:o.length}}):(0,s.jsx)(c.x6,{id:"1EeNDU"});return(0,s.jsxs)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.MNJ,fixedWidth:!0}),onClick:t,alignItems:"baseline",children:[l,r&&(null==n?void 0:n.id)&&o.map(e=>(0,s.jsx)(uN,{domain:e.name,status:e.status,isLive:i,site:r,docId:n.id},e.id))]})},uG=e=>{let{doc:t}=e,{replace:n}=(0,tn.useRouter)(),{isInOfflineMode:i}=(0,nw.utY)(),r=(0,X.Iy)("manage",t),a=(0,eo.GV)(ta.Gd),d=null==t?void 0:t.id,h=(0,tu.tO)({site:a,docId:d}),{publishDoc:x,publishSite:m,isPublishing:f}=rO({doc:t,site:a,path:h}),{statusText:g,statusIcon:j,statusColor:v,lastPublishedTime:b,needsPublish:y,publishEnabled:C}=sx(f),E=a&&(0,tu.SG)(t,a),k=(0,p.useCallback)(()=>{d&&n((0,w.pF)({docId:d,preview:!0}),void 0,{shallow:!0})},[d,n]);if(!a)return null;let S=(0,eH.vT)("custom_domains");return(0,s.jsx)(o.s,{children:(0,s.jsxs)(tt.e,{isAttached:!0,size:"sm",children:[(0,s.jsx)(W.Tz,{closeOnMouseDown:!1,closeOnClick:!1,isDisabled:!C,label:y&&!f?(0,s.jsxs)(D.B,{children:[g,(0,s.jsx)(z.E,{color:"gray.400",children:(0,s.jsx)(c.x6,{id:"FmP7uY"})})]}):(0,s.jsx)(c.x6,{id:"o+bOqE"}),children:(0,s.jsx)(dX.I,{fontWeight:"normal",size:"sm",variant:"solid",onClick:m,onMouseDown:dY.Fw,isDisabled:!C||i,isLoading:f,icon:y?(0,s.jsx)(F.g,{icon:G.MNJ}):(0,s.jsx)(F.g,{icon:G.e68}),"data-publish-button":!0,children:y?(0,s.jsx)(c.x6,{id:"EEYbdt"}):(0,s.jsx)(c.x6,{id:"u3wRF+"})})}),(0,s.jsxs)(nF.W,{children:[(0,s.jsx)(nW.I,{variant:"solid",as:dX.f,isDisabled:!C||i,icon:(0,s.jsx)(F.g,{icon:G.Jt$})}),(0,s.jsx)(I.Z,{children:(0,s.jsxs)(nU.c,{zIndex:"popover",minW:"320px",maxW:"360px",children:[(0,s.jsx)(sg.r,{children:(0,s.jsxs)(tA.T,{alignItems:"flex-start",children:[(0,s.jsxs)(te.z,{px:3,pt:2,alignItems:"center",color:v,children:[j&&(0,s.jsx)(l.az,{mr:1.5,display:"inline-flex",children:j}),(0,s.jsx)(l.az,{children:(0,s.jsx)(z.E,{fontWeight:"semibold",children:g})})]}),b&&(null==t?void 0:t.site)&&(0,s.jsxs)(te.z,{pb:2,mt:-1,children:[(0,s.jsx)(t_.h,{mr:2,px:3,w:13}),(0,s.jsx)(z.E,{fontSize:"xs",color:"gray.500",children:E?b:(0,s.jsx)(c.x6,{id:"0bSVwO"})})]})]})}),r&&t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(nq.N,{}),(0,s.jsxs)(sg.r,{title:u.Ru._({id:"1EeNDU"}),children:[(0,s.jsx)(uV,{onClick:m,doc:t,isLive:!!E}),(0,s.jsx)(aI,{doc:t,label:(0,s.jsx)(c.x6,{id:"A/QS9E"}),showUpsellBadge:!S})]})]}),(0,s.jsx)(nq.N,{}),(0,s.jsx)(sg.r,{title:u.Ru._({id:"Pf2dn/"}),children:(0,s.jsx)(sm.D,{icon:(0,s.jsx)(F.g,{icon:G.OFY,fixedWidth:!0}),onClick:x,alignItems:"baseline",children:(0,s.jsx)(c.x6,{id:"szmTdw"})})}),(0,s.jsx)(nq.N,{}),(0,s.jsx)(sg.r,{title:u.Ru._({id:"rdUucN"}),children:(0,s.jsx)(W.Tz,{label:(0,s.jsx)(c.x6,{id:"aChIoL"}),children:(0,s.jsx)(l.az,{children:(0,s.jsx)(sm.D,{onClick:k,icon:(0,s.jsx)(F.g,{icon:tR.qtl,fixedWidth:!0}),alignItems:"baseline",children:(0,s.jsx)(D.B,{spacing:"0",children:(0,s.jsx)(c.x6,{id:"EEOIfz",components:{0:(0,s.jsx)(z.E,{})}})})})})})})]})})]})]})})};var uF=n(51122),uW=n(73938),uU=n(6066),uB=n(81112);let uH=e=>{var t,n;let{doc:i,showAnalytics:r=!0,showSharePublic:o=!0,showEmbed:a=!0,showButton:d=!0}=e,{isOpen:u,onClose:h,onOpen:x}=(0,iD.E)({id:"analyticsModalDisclosure"}),{isSharePanelOpen:m,onSharePanelOpen:f,onSharePanelClose:j,view:v,setView:b}=(0,uW.R)(),{isInOfflineMode:y}=(0,g.u)(),{user:C,currentWorkspace:w}=(0,X.ur)(),{editor:E}=(0,t4.mi)(),k=(0,X.Iy)("view",i),S=(0,X.Iy)("edit",i),I=(0,X.Iy)("manage",i),T=(0,J.st)(),[A,_]=(0,p.useState)("");(0,p.useEffect)(()=>ly.R.on("openSharePanel",e=>{let{view:t,options:n}=e;f(),b(t),(null==n?void 0:n.cardRangesInput)&&_(n.cardRangesInput)}),[f,b]);let R=(0,p.useCallback)(()=>{null==T||T.track(J.VV.DOC_ANALYTICS_VIEWED,{docId:null==i?void 0:i.id,source:"share_panel",type:I?"full":"personal"}),x()},[T,I,null==i?void 0:i.id,x]);if(!k||!C||!i)return null;let O=i.collaborators||[],D=i.channels||[],P=(0,uB.e7)([...O].sort((e,t)=>e.user.id===C.id?-1:t.user.id===C.id?1:0).map(e=>e.user.id===C.id?"You":e.user.displayName||"").concat(i.orgAccess?D.map(e=>{let{name:t}=e;return t||""}):[])),L=(0,uU.ZP)(i,C),N=L?(0,uU.bC)()[L]:null,M=(0,uU.D5)(i,w);return null===N?(console.error("[SharePanel] Unknown VisibilityValue for doc",i),null):(0,s.jsxs)(s.Fragment,{children:[d&&(0,s.jsx)(W.Tz,{label:(0,s.jsxs)(s.Fragment,{children:[M&&(0,s.jsx)(z.E,{fontWeight:"bold",children:(0,s.jsx)(c.x6,{id:"OS9x6e",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}})}),N.title(null==i?void 0:null===(t=i.organization)||void 0===t?void 0:t.name)?(0,s.jsx)(z.E,{children:N.title(null==i?void 0:null===(n=i.organization)||void 0===n?void 0:n.name)}):null,(0,s.jsx)(z.E,{fontSize:"xs",children:N.subtitle?N.subtitle(P||""):""})]}),children:(0,s.jsx)("span",{children:(0,s.jsx)(dX.I,{"data-guider-highlight":"share-button",onMouseDown:dY.Fw,icon:(0,s.jsx)(l.az,{children:(0,s.jsx)(uF.li,{visibility:N,isFromOtherOrg:M})}),isDisabled:!S||y,onClick:f,children:(0,s.jsx)(c.x6,{id:"Z8lGw6"})})})}),(0,s.jsx)(uF._j,{doc:i,editor:E,isSharePanelOpen:m,onSharePanelOpen:f,onSharePanelClose:j,onAnalyticsPanelOpen:R,view:v,setView:b,showAnalytics:r,showSharePublic:o,showEmbed:a,cardRangesInput:A,setCardRangesInput:_}),u&&(0,s.jsx)(li,{doc:i,onSharePanelOpen:f,onAnalyticsPanelClose:h,isAnalyticsPanelOpen:u,mode:I?"full":"personal"})]})},uq=(0,p.memo)(e=>{let{doc:t,onClick:n}=e,{isConnected:i,isInOfflineMode:r}=(0,g.u)(),l=(null==t?void 0:t.title)||"";return(0,s.jsxs)(o.s,{flex:1,w:32,children:[(0,s.jsx)(W.Tz,{label:(0,s.jsxs)(D.B,{spacing:0,children:[(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"g/+TNk"})}),(0,s.jsx)(z.E,{color:"gray.500",children:(0,s.jsx)(c.x6,{id:"ZfQLKw"})})]}),isDisabled:r,"aria-label":u.Ru._({id:"g/+TNk"}),children:(0,s.jsx)(N.$,{size:"sm",variant:"ghost",colorScheme:"gray",fontWeight:"normal",ml:-1,leftIcon:(0,s.jsx)(F.g,{icon:G.Nnc}),onClick:n,isDisabled:r,children:(0,s.jsx)(z.E,{isTruncated:!0,whiteSpace:"nowrap",textOverflow:"ellipsis",w:"100%",children:l})})}),!i&&(0,s.jsx)(W.Tz,{label:(0,s.jsxs)(D.B,{spacing:0,children:[(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"ysdDIA"})}),r&&(0,s.jsx)(z.E,{color:"gray.500",children:(0,s.jsx)(c.x6,{id:"+QNhGE"})})]}),"aria-label":u.Ru._({id:"IcHxhR"}),children:(0,s.jsx)(o.s,{color:"gray.500",alignItems:"center",mr:2,children:(0,s.jsx)(F.g,{icon:G.seF})})})]})});uq.displayName="EditableDocTitle";let uK=e=>(0,s.jsx)(uJ,{...e}),uJ=(0,p.memo)(e=>{let{doc:t,togglePagesPanel:n}=e,i=(0,q.fW)(),[r]=(0,d7.F)(ed.E.lastHomeUrl,"/"),a=(0,eo.GV)(ta.Gd),{confirmNavigation:d}=(0,t4.mi)(),{push:c}=(0,tn.useRouter)(),u={as:i5(),href:r||"/",colorScheme:"gray",fontWeight:"normal","data-testid":"toolbar-home-link"},h=(0,_.dU)("gray.800","gray.100");return(0,s.jsx)(te.z,{flex:1,children:(0,s.jsxs)(te.z,{spacing:2,divider:(0,s.jsx)(l.az,{border:"none",as:F.g,icon:i?G.Wzs:G.XkK,size:"sm",color:"gray.300"}),w:"100%",color:h,children:[(0,s.jsx)(nT.N,{as:dX.I,href:u.href,onClick:e=>{!e.shiftKey&&(e.metaKey||e.ctrlKey)||(e.preventDefault(),d().then(()=>{c(u.href)}))},marginInlineStart:-1,colorScheme:"gray",children:(0,s.jsx)(F.g,{size:"1x",icon:G.v02})}),a&&(null==a?void 0:a.routes.length)>1&&(0,s.jsx)(o.s,{flexGrow:0,flexShrink:1,children:(0,s.jsx)(z.E,{noOfLines:1,fontWeight:"normal",fontSize:"sm",children:null==a?void 0:a.name})}),(0,s.jsx)(uq,{doc:t,onClick:()=>{null==n||n()}})]})})});uJ.displayName="PageBreadcrumbGroup";let uY=e=>{let{spotlightingByBlock:t}=e,{editor:n}=(0,t4.mi)(),i=(0,p.useCallback)(()=>{t?null==n||n.commands.turnOffSpotlight():null==n||n.commands.spotlightNextBlock()},[n,t]);return(0,s.jsx)(o.s,{children:(0,s.jsx)(W.Tz,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,s.jsxs)(z.E,{whiteSpace:"nowrap",children:[t?"Turn off spotlight":"Turn on spotlight",(0,s.jsx)(z.E,{as:"span",display:"inline",color:"gray.400",ml:2,children:"S"})]}),children:(0,s.jsx)(dX.I,{colorScheme:"trueblue",variant:t?"solid":"plain",onClick:e=>{i(),e.target.blur()},icon:(0,s.jsx)(F.g,{icon:G.lnn}),children:"Spotlight"})})})};var uX=n(2735);let u$=()=>{let e=(0,eE.d)(),[t]=(0,nw.vlJ)(),n=(0,eo.GV)(ta.df),{docId:i,getCollaborativeEditorInstance:r}=(0,t4.mi)(),o=(0,eo.GV)(el.SJ),l=r(),a=(0,J.st)(),{updateDocThemeWithAccentImages:d}=(0,Y.Kt)({docId:i,editor:l}),u=(0,p.useCallback)(e=>{n&&e.id!==o.id&&t({variables:{input:{siteId:n,themeId:e.id}},update:(t,i)=>{let{data:r}=i,s=t.readFragment({id:"Theme:".concat(e.id),fragment:nw.qaq,fragmentName:"DefaultThemeFields"});t.updateQuery({query:nw.zLA,variables:{id:n}},e=>e&&e.site&&s?{...e,site:{...e.site,...null==r?void 0:r.updateSite,theme:s}}:e)}}).then(()=>{})},[n,o.id,t]),h=(0,p.useCallback)(t=>{t.id!==o.id&&d(t.id).then(()=>{null==a||a.track(J.VV.DOC_THEME_UPDATED,{doc_id:i,theme_id:t.id})}).catch(t=>{console.error(t),e({title:(0,s.jsx)(c.x6,{id:"Fulf8b",values:{0:t.message}}),position:"top",status:"error"})})},[a,o.id,i,e,d]);return(0,p.useCallback)(e=>n?u(e):h(e),[n,h,u])};var uZ=n(6402),uQ=n(24383);let u0=(0,p.memo)(e=>{let{closePanel:t}=e,n=u$(),i=(0,eo.GV)(el.SJ),r=(0,p.useCallback)(()=>{null==t||t(),iL.LF.emit(iL.DN.OPEN_PAGE_SETUP,"background")},[t]);return(0,s.jsx)(W.L8,{isDark:!1,children:(0,s.jsx)(tD.Z,{bgColor:"white",w:"100%","data-panelid":"doc-theme-drawer",pt:4,position:"relative","data-doc-theme-drawer":!0,children:(0,s.jsxs)(o.s,{direction:"column","data-testid":"doc-theme-drawer",overflowX:"hidden",w:"100%",children:[(0,s.jsx)(tz.a,{children:(0,s.jsx)(o.s,{px:6,children:(0,s.jsx)(uQ.D,{title:(0,s.jsx)(c.x6,{id:"FEr96N"}),description:(0,s.jsx)(z.E,{fontSize:"sm",fontWeight:"500",mt:"-2",letterSpacing:0,color:"gray.700",children:(0,s.jsx)(c.x6,{id:"S9uQm/"})}),closePanel:t,currentTheme:i})})}),(0,s.jsx)(o.s,{overflowY:"auto",direction:"column",h:"100%",flex:1,"data-theme-picker-scroll-container":!0,px:6,mt:4,children:(0,s.jsx)(uZ.oz,{currentTheme:i,openBackgroundPanel:r,setTheme:n})})]})})})});u0.displayName="DocThemePanelMemoized";let u1=e=>{let{closePanel:t}=e;return(0,s.jsx)(u0,{closePanel:t})};u1.displayName="DocThemePanel",u1.panelPosition="right",u1.panelName="doc-theme-drawer";let u6=()=>{let{togglePanel:e,isPanelOpen:t}=eZ(u1);return(0,p.useEffect)(()=>{let t=()=>{e({override:"open"})},n=ly.R.on("toggleThemeBlock",t),i=iL.LF.on(iL.DN.OPEN_THEME_DRAWER,t);return()=>{n(),i()}},[e]),{toggleDocThemePanel:e,isDocThemePanelOpen:t}},u2=(0,p.memo)(()=>{u6();let{getCollaborativeEditorInstance:e}=(0,tT.m)(),t=u$();return(0,s.jsx)(o.s,{children:(0,s.jsx)(uX.n,{onThemeCreated:t,getCollaborativeEditorInstance:e})})}),u5=(0,p.memo)(()=>{let{isConnected:e}=(0,nw.utY)();return(0,s.jsx)(W.Tz,{label:e?(0,s.jsx)(c.x6,{id:"JkEyR8"}):(0,s.jsx)(c.x6,{id:"GvC+mL",components:{0:(0,s.jsx)(z.E,{}),1:(0,s.jsx)(z.E,{color:"gray.300"})}}),"aria-label":u.Ru._({id:"JkEyR8"}),children:(0,s.jsx)(l.az,{children:(0,s.jsx)(dX.I,{"data-guider-highlight":"toolbar-theme-button",onClick:()=>{ly.R.emit("toggleThemeBlock",!0)},isDisabled:!e,icon:(0,s.jsx)(F.g,{icon:G.fyG}),"data-testid":"toolbar-theme-button",children:(0,s.jsx)(c.x6,{id:"FEr96N"})})})})});u5.displayName="ThemeToolbarButton";let u3=()=>{let{isConnected:e}=(0,nw.utY)();return(0,s.jsxs)(s.Fragment,{children:[e&&(0,s.jsx)(u2,{}),(0,s.jsx)(u5,{})]})};u2.displayName="ThemeDrawers";let u4=[.5,.8,.9,1,1.1,1.2,1.5,2],u8=e=>"".concat((100*e).toFixed(0),"%"),u7=()=>{let e=(0,b.u)("presentZoom"),{editor:t}=(0,t4.mi)(),n=(0,J.st)(),i=(0,m.wA)(),r=(0,eo.GV)(el.eo),o=(0,p.useCallback)(e=>{i((0,el.ed)({zoomLevel:e})),i((0,el.i)({enabled:!1})),null==n||n.track(J.VV.DOC_ZOOMED,{direction:"set",level:e})},[i,n]),l=(0,p.useCallback)(()=>{i((0,el.i)({enabled:!0}))},[i]),a=(0,p.useCallback)(()=>{let e=Math.min(aD.ih,u9(r)+.1);i((0,el.ed)({zoomLevel:e})),i((0,el.i)({enabled:!1})),null==n||n.track(J.VV.DOC_ZOOMED,{direction:"in",level:e})},[i,n,r]),d=(0,p.useCallback)(()=>{let e=Math.max(aD.At,u9(r)-.1);i((0,el.ed)({zoomLevel:e})),i((0,el.i)({enabled:!1})),null==n||n.track(J.VV.DOC_ZOOMED,{direction:"in",level:e})},[i,n,r]),h=(0,p.useCallback)(()=>{let e=aD.vN;i((0,el.ed)({zoomLevel:e})),i((0,el.i)({enabled:!1})),null==n||n.track(J.VV.DOC_ZOOMED,{direction:"reset",level:e})},[i,n]),x=(0,eo.GV)(sk.AO),f=(0,n2.Lt)();return((0,p.useEffect)(()=>{if(e)return e1.WC.on("keydown","PRESENT_BLOCK",e=>{let n=e.target instanceof HTMLElement&&(0,$.fg)(e.target);return!(x||!t||(0,n6.We)(t))&&!n&&((0,i1.Ay)("=")(e)?(a(),e.preventDefault(),!0):(0,i1.Ay)("-")(e)?(d(),e.preventDefault(),!0):(0,i1.Ay)("0")(e)?(h(),e.preventDefault(),!0):!!(0,i1.Ay)("9")(e)&&(l(),e.preventDefault(),!0))})},[x,e,t,a,d,h,l]),e)?(0,s.jsxs)(tt.e,{spacing:"0",size:"sm",variant:"ghost",isAttached:!0,borderWidth:"1px",borderRadius:"md",children:[(0,s.jsx)(W.Tz,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"-",label:u.Ru._({id:"FjkaiT"}),children:(0,s.jsx)(M.K,{"aria-label":u.Ru._({id:"FjkaiT"}),fontWeight:"normal",onClick:d,icon:(0,s.jsx)(F.g,{icon:G.EZy})})}),(0,s.jsxs)(nF.W,{closeOnSelect:!0,children:[(0,s.jsx)(W.Tz,{label:u.Ru._({id:"VZ3UQG"}),children:(0,s.jsx)(nW.I,{minW:20,as:N.$,variant:"ghost",fontWeight:"400",size:"sm",rightIcon:(0,s.jsx)(F.g,{icon:G.Jt$}),children:f?(0,s.jsx)(c.x6,{id:"R9Khdg"}):u8(r)})}),(0,s.jsxs)(nU.c,{maxW:"220px",children:[(0,s.jsx)(nB.i,{value:f?"auto":r.toString(),type:"radio",children:(0,s.jsx)(nH.k,{value:"auto",onClick:l,children:(0,s.jsxs)(te.z,{children:[(0,s.jsxs)(z.E,{children:[(0,s.jsx)(c.x6,{id:"R9Khdg"})," ",(0,s.jsx)(z.E,{as:"span",color:"gray.500",children:(0,s.jsx)(c.x6,{id:"P9Cyl9"})})]}),(0,s.jsx)(t_.h,{}),(0,s.jsx)(z.E,{as:"span",opacity:"0.6",children:"9"})]})})}),(0,s.jsx)(nq.N,{}),(0,s.jsx)(nB.i,{value:f?"auto":r.toString(),type:"radio",children:u4.map(e=>(0,s.jsx)(nH.k,{value:(e/100).toString(),onClick:()=>{o(e)},children:(0,s.jsxs)(te.z,{children:[(0,s.jsx)(z.E,{children:u8(e)}),(0,s.jsx)(t_.h,{}),e===aD.vN&&(0,s.jsx)(z.E,{as:"span",opacity:"0.6",children:"0"})]})},e))})]})]}),(0,s.jsx)(W.Tz,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"+",label:u.Ru._({id:"AWOSPo"}),children:(0,s.jsx)(M.K,{fontWeight:"normal","aria-label":u.Ru._({id:"AWOSPo"}),onClick:a,icon:(0,s.jsx)(F.g,{icon:G.QLR})})})]}):null},u9=e=>Math.round(10*e)/10,he=(0,p.memo)(function(e){let{editor:t,scrollingParentSelector:i,toggleCommentsPanel:r,isCommentsPanelOpen:l,isPagesPanelOpen:a,togglePagesPanel:d,editorWrapperEl:c,docEditorType:u,isDark:h}=e,[x]=(0,dK.U)(["(max-width: 840px)","(min-width: 841px)"]),m=(0,b.u)("editDocAI"),f=(0,e2.h5)({base:!0,lg:!1}),g=(0,eo.GV)(el.wC),j=(0,eo.GV)(nf.Jo),y=(0,eo.GV)(ta.Gd),{isGammaAdminUser:w}=(0,X.ur)(),E=(0,X.Iy)("comment",j),k=(0,r_.Gx)(),S=(0,r_.zm)(),{enabled:I}=(0,dJ.k)(t),[T,A]=(0,p.useState)(void 0),_=(0,tu.dv)(y),R="SLIDE_VIEW"!==g,O=(0,eo.GV)(el.nD),D=u===t3.i.COLLABORATIVE,z=(0,eo.GV)(el.VJ),P=(0,eo.GV)((0,eY.DP)("left")),L=(0,eo.GV)((0,eY.DP)("right")),N=(0,b.u)("aiChat"),{enterSlideView:M,exitSlideView:V,setExitedFullscreenByClick:G,isFullscreen:F,enterFullscreen:U,exitFullscreen:B}=sL({editorWrapperEl:c,scrollingParentSelector:i});window.exportToPptx=async e=>{if(!t)return;let{exportToPptx:i}=await Promise.all([n.e(8944),n.e(6018),n.e(489)]).then(n.bind(n,4863));return i(t,e)},(0,p.useEffect)(()=>v.R.on("isInOnboardingChecklistPresentMode",e=>{A(e)}),[]),(0,p.useEffect)(()=>{!1===T&&requestAnimationFrame(()=>{v.R.emit("toggleOpen",{behavior:"open",skipTracking:!0})})},[T]);let H=eF((0,p.useCallback)(e=>{let t=q.current;return!!t&&(!!(t.querySelector("[data-active]")||t.querySelector('[aria-expanded="true"]')||P||L)||e.clientY<100)},[P,L]),!z),q=(0,p.useRef)(null),K=!z||z&&H||T,J=!(0,C.Xb)(),Y=!1===m&&!x&&f&&D&&O&&N;return(0,s.jsx)(W.L8,{isDark:h,children:(0,s.jsxs)(o.s,{"data-editor-toolbar":!0,ref:q,bg:h?"gray.900":"white",borderBottomWidth:"1px",borderBottomColor:h?"gray.800":"blackAlpha.100",zIndex:nE.$.toolbar,left:0,right:0,py:1.5,alignItems:"center",p:2,pr:6,gap:2,transform:K?void 0:"translateY(-100%)",pointerEvents:"none",sx:{"&:focus-within":{marginTop:0},"> *":{pointerEvents:"auto"},"> #toolbar-spacer":{pointerEvents:"none"}},transitionProperty:"transform",transitionDuration:"normal",transitionTimingFunction:"ease-in-out","data-print-hidden":!0,children:[(0,s.jsx)(uk,{}),(0,s.jsx)(te.z,{flex:1,children:y?(0,s.jsx)(uK,{doc:j,pagesPanelEnabled:k,isPagesPanelOpen:a,togglePagesPanel:d}):(0,s.jsx)(ce,{doc:j})}),(0,s.jsxs)(te.z,{children:[!x&&(0,s.jsx)(cf,{}),!x&&!R&&(0,s.jsx)(u7,{}),!x&&!R&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(uY,{spotlightingByBlock:I})}),!x&&D&&O&&S&&(0,s.jsx)(u3,{}),(D||w)&&(0,s.jsx)(uH,{doc:j,showButton:!x}),J&&!_&&(0,s.jsx)(uz,{doc:j,isCollaborativeEditor:D,editorWrapperEl:c,scrollingParentSelector:i,enterSlideView:M,exitSlideView:V,setExitedFullscreenByClick:G,isFullscreen:F,enterFullscreen:U,exitFullscreen:B,shouldHide:x,docEditorType:u}),J&&_&&k&&(0,s.jsx)(uG,{doc:j}),D&&E&&(0,s.jsx)(c8,{doc:j,mode:g,isCommentsPanelOpen:l,toggleCommentsPanel:r}),m&&(O||w)?(0,s.jsx)(uy,{editor:t}):Y?(0,s.jsx)(c7,{}):null,!x&&D&&!_&&(0,s.jsx)(dZ,{doc:j}),!x&&(D||w)&&(0,s.jsx)(uS,{doc:j,toggleCommentsPanel:r,editorWrapperEl:c,scrollingParentSelector:i}),(0,s.jsx)(o.s,{children:(0,s.jsx)(iu.XR,{showRing:!0})})]})]})})}),ht={src:"/_next/static/media/CustomCursorPointer.288ac219.svg"},hn=e=>!!(e.target&&e.target instanceof HTMLElement&&"IFRAME"===e.target.tagName),hi=(e,t)=>{var n;let i=Math.max((null===(n=t.posAtCoords(e))||void 0===n?void 0:n.inside)||-1);if(-1!=i)try{return t.state.doc.resolve(i)}catch(e){return}},hr=e=>"card"===e.type.name?!!(0,sI.Wq)(e.attrs.id):!!((0,ss.nf)(e)||["button","buttonGroup","tableOfContents","toggleSummary"].includes(e.type.name)),hs=e=>!!(e.dataset.contentReference||e.dataset.zoomClickCapture),ho=(e,t)=>{if(!(null==t?void 0:t.nodeAfter))return!1;let n=t.nodeAfter;if("paragraph"===n.type.name)return!!(e.classList.contains("link")||e.closest(".link"));if(!(hr(n)||(0,tj.eL)(t,e=>hr(e))))return!1;if((0,dH.bi)(n.type)){let t=e.closest(".react-renderer");return!!t&&!!(hs(e)||(0,$.xX)(e,t,hs))}return"gallery"!==n.type.name||!!e.closest(".gallery-content")},hl=(0,p.memo)(e=>{let{editor:t}=e,[n,i]=(0,p.useState)(!0),r=(0,p.useRef)({x:0,y:0}),a=(0,p.useRef)(null),d=(0,p.useRef)(null),c=(0,p.useRef)(null),u=(0,p.useRef)("none"),h=(0,eo.GV)(b.Gm),x=(0,eo.GV)(el.uF),m=x[0],f=x[x.length-1],g=(0,eo.GV)(el.$i),j=(0,p.useRef)("middle"),v=(0,eo.GV)(el.eo),y=(0,eo.GV)(el.G7),C=(0,eo.GV)(e=>{var t;return!!(null===(t=(0,el.FI)(e))||void 0===t?void 0:t.pos)}),w=!1===y?Math.max(.75,v):1;j.current=g===m?"first":g===f?"last":"middle",(0,p.useEffect)(()=>{let e,n;let s=e=>{a.current&&c.current&&(a.current.style.opacity=e?"1":"0",c.current.disabled=!e)},o=()=>{cancelAnimationFrame(e),e=requestAnimationFrame(()=>{if(!a.current||!d.current)return;let e=r.current.x-30*w/2,t=r.current.y-30*w/2;a.current.style.transform="translate(".concat(e,"px, ").concat(t,"px)"),"left"===u.current&&(a.current.style.transform+=" scaleX(-1)"),s("none"!==u.current)})},l=()=>{i(!0),clearTimeout(n),n=setTimeout(()=>{i(!1),o()},2e3)},h=e=>{l(),e&&(r.current={x:e.clientX,y:e.clientY});let n=r.current.x,i=r.current.y,s=null==e?void 0:e.target;if(!t||!a.current||!c.current||!s)return;if(e&&hn(e)){u.current="none",o();return}let d=n/window.innerWidth*100;if(d>20&&d<80||i<=51||!s.closest(".ProseMirror")||C||ho(s,hi({left:n,top:i},t.view))){u.current="none",o();return}u.current=d<=20?"left":"right",o()},x=()=>{u.current="none",o()},p=e=>{hn(e)&&(u.current="none",o())},m=e=>{if(l(),!t||e.button>1||(0,dq.Qj)(t.view))return;let n=(0,eo.KA)().getState(),i=!!(0,el.YL)(n),r=(0,el.nD)(n);!i&&!r&&["left","right"].includes(u.current)&&(e.preventDefault(),e.stopPropagation(),t.commands.spotlightNextCard("left"===u.current))};return h(),document.body.addEventListener("mousemove",h),document.body.addEventListener("mouseleave",x),document.body.addEventListener("mouseup",m),document.body.addEventListener("mouseover",p),()=>{document.body.removeEventListener("mousemove",h),document.body.removeEventListener("mouseleave",x),document.body.removeEventListener("mouseup",m),document.body.removeEventListener("mouseover",p),clearTimeout(n)}},[t,w,g,C]);let E="".concat(30*w,"px"),k="".concat(30*w,"px");return(0,s.jsxs)(I.Z,{children:[(0,s.jsx)("style",{ref:c,children:"html * { cursor: none!important}"}),(0,s.jsx)(ha,{position:"left",enabled:h}),(0,s.jsx)(ha,{position:"right",enabled:h}),(0,s.jsx)(o.s,{ref:a,position:"absolute",top:"0",left:"0",alignItems:"center",justifyContent:"center",className:"gamma-custom-cursor",width:E,height:k,pointerEvents:"none",willChange:"transform",verticalAlign:"middle",zIndex:"tooltip",filter:"drop-shadow(3px 1px 2px rgb(0 0 0 / 0.1))",outline:h?"2px solid pink":void 0,children:(0,s.jsx)(l.az,{ref:d,position:"absolute",width:E,height:k,sx:{"::before":{content:'""',opacity:n?1:0,transition:"opacity 0.2s",display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundImage:"url(".concat(ht.src,")"),width:"100%",height:"100%"}}})})]})}),ha=e=>{let{position:t,enabled:n}=e;return n?(0,s.jsx)(l.az,{position:"absolute",top:"0",bottom:"0",left:"left"===t?"calc(".concat(20,"% - 1px)"):void 0,right:"right"===t?"calc(".concat(20,"% - 1px)"):void 0,width:"2px",height:"100%",zIndex:"tooltip",pointerEvents:"none",borderLeft:"2px dashed red"}):null};var hd=n(73059);let hc=e=>{let t=(0,eo.GV)(el.Er),n=(0,eo.GV)(el.ys),{handlePresentNavigationEvent:i}=(0,hd.e)(tY.Y2.PRESENTER_VIEW_POPUP);(0,p.useEffect)(()=>{if(!t)return;let r=t=>{let{payload:r}=t;if(e)try{let{payload:e}=JSON.parse(r),{action:t,eventKey:s,method:o,toSessionId:l,fromUserId:a}=e;if(l!==(null==n?void 0:n.sessionId)||a!==(null==n?void 0:n.id))return;switch(t){case"goToCard":{let{cardId:n}=e;if(!n)break;i({eventType:t,eventKey:s,method:o,payload:{cardId:n}});break}case"toggleSpotlight":case"arrowRight":case"arrowLeft":case"arrowDown":case"arrowUp":case"restart":case"toggleExpanded":case"cancelCurrentAction":i({eventType:t,eventKey:s,method:o});break;default:console.warn("[usePresenterViewMessages] Unknown message type",e)}}catch(e){console.error("[usePresenterViewMessages] Error parsing message",e)}};return t.on("stateless",r),()=>{t.off("stateless",r)}},[e,null==n?void 0:n.sessionId,null==n?void 0:n.id,i,t])},hu=e=>{let{editor:t,enabled:n}=e,i=(0,eo.jL)(),r=(0,p.useRef)(null),[s,o]=(0,p.useState)(!1),[l,a]=(0,p.useState)([0,0]),[d,c]=(0,p.useState)("bottom"),u=(0,eo.GV)(el.YL),h=(0,p.useCallback)(()=>{o(!1)},[]),x=(0,p.useCallback)(()=>{a([0,0]),c("bottom")},[]),m=(0,p.useCallback)(e=>{o(!0),a(e)},[]),f=(0,p.useCallback)(e=>{var t;e.preventDefault(),m([e.clientX,e.clientY]);let n=null===(t=r.current)||void 0===t?void 0:t.offsetHeight;if(null==n)return;let i=window.innerHeight<e.clientY+n,s=e.clientY<n;i&&!s?c("top"):i&&s?c("center"):c("bottom")},[r,m]);(0,p.useEffect)(()=>{u||o(!1)},[u]),(0,p.useEffect)(()=>{if(t&&n)return iL.LF.on(iL.DN.OPEN_PRESENT_MODE_CONTEXT_MENU,e=>{let{e:t,pos:n,cardId:r}=e;f(t),i((0,el.dd)({pos:n,cardId:r}))})},[t,n,f,i]);let g=(0,p.useMemo)(()=>{var e;let t=l[1],n=null===(e=r.current)||void 0===e?void 0:e.offsetHeight,i=n?window.innerHeight-(t+n+8):void 0,s="center"===d&&i?"translateY(".concat(i,"px)"):"top"===d?"translateY(-100%)":void 0;return{left:l[0],top:l[1],transform:s,transformOrigin:"top"}},[d,l]);return{menuRef:r,isPresentModeMenuOpen:s,onPresentModeMenuClose:h,handleContextMenu:f,menuRootStyles:g,clearPositioning:x}};var hh=n(3367),hx=n(51416),hp=n(41510);let hm=e=>{let{children:t,icon:n,onClick:i,shouldHide:r=!1,...o}=e;return r?null:(0,s.jsx)(sm.D,{icon:n,onClick:i,...o,children:t})},hf=(0,p.forwardRef)((e,t)=>{let{editor:n,isOpen:i,onClose:r,readOnly:o,clearPositioning:l,rootStyles:a}=e,[d,u]=(0,p.useState)(null),h=(0,hx.S)(t,u),{pos:x,cardId:m}=(0,eo.GV)(el.P$),{enabled:f}=(0,so.kY)(n),{editCardInPresentMode:g}=(0,hp.V)({editor:n}),j=(0,Y.rd)(),v=(0,p.useCallback)(()=>{f?null==n||n.commands.turnOffSpotlight():x?null==n||n.commands.spotlightNodeAtPos(x):m&&(null==n||n.commands.spotlightNextBlock()),r()},[f,x,m,r,null==n?void 0:n.commands]);return(0,p.useEffect)(()=>{var e;null==d||null===(e=d.parentElement)||void 0===e||e.addEventListener("contextmenu",e=>{e.preventDefault(),e.stopPropagation()})},[d]),(0,s.jsx)(I.Z,{children:(0,s.jsx)(W.L8,{isDark:j,children:(0,s.jsx)(nF.W,{isOpen:i,closeOnBlur:!1,isLazy:!0,children:(0,s.jsxs)(nU.c,{onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},zIndex:"popover",ref:h,rootProps:{style:a},w:"260px",overflowY:"auto",onTransitionEnd:()=>{i||l()},children:[(0,s.jsx)(hm,{"data-testid":"present-mode-menu-item-edit",command:(0,W.lp)("E"),shouldHide:o,icon:(0,s.jsx)(F.g,{fixedWidth:!0,icon:G.zLW}),onClick:g,children:(0,s.jsx)(c.x6,{id:"IkOuqb"})}),(0,s.jsx)(hm,{"data-testid":"present-mode-menu-item-spotlight",command:(0,W.lp)("S"),icon:(0,s.jsx)(F.g,{fixedWidth:!0,icon:G.lnn}),onClick:v,children:f?(0,s.jsx)(c.x6,{id:"CzYGrQ"}):x?(0,s.jsx)(c.x6,{id:"LoLA00"}):m?(0,s.jsx)(c.x6,{id:"X1FNEK"}):null})]})})})})});hf.displayName="PresentModeContextMenuComponent";let hg=(0,p.memo)(hf);var hj=n(81853),hv=n(76272),hb=n.n(hv),hy=n(5508),hC=n(17228),hw=n.n(hC);let hE={easeOutLinear:sQ.GA,easeOutSine:sQ.ED,easeOutCubic:sQ.p_,easeOutCirc:sQ.cY,easeOutQuad:sQ.WD,easeOutQuart:sQ.Mj,easeOutExpo:sQ.lu,bezierCustom1:hb()(.13,.97,.035,.73),bezierCustom2:hb()(.105,1.15,.15,.355)},hk={UP:"up",DOWN:"down"},hS=e=>e?+new Date-+new Date(e):1/0,hI=(e,t)=>{let n=(0,p.useMemo)(()=>new hy.Lethargy(6,120,.3,150),[]),{easing:i="easeOutCubic",touchpadFactor:r=1.5,triggerThreshold:s=1200}=t||{},o=(0,K.O2)("editor"),l=(0,eo.GV)(el.$i),a=(0,p.useRef)(null),d=(0,p.useRef)(null),c=(0,p.useRef)(null),u=(0,p.useRef)(!1),h=(0,p.useRef)(null),x=(0,p.useRef)(null),[m,f]=(0,p.useState)(!1),[g,j]=(0,p.useState)(!1),v=(0,p.useRef)({counterTarget:0,counterCurrent:0,direction:hk.DOWN}),b=(0,p.useCallback)(()=>{var e;if(!a.current)return;let{counterTarget:t}=v.current,n=t/s*100,i=(null!=n?n:0)*2.64,r="".concat(i," ").concat(264-i),o=null===(e=a.current.querySelector(".chakra-progress"))||void 0===e?void 0:e.lastElementChild,l=a.current.querySelector(".chakra-progress__indicator");l&&l.setAttribute("stroke-dasharray",r),o&&(o.innerHTML="".concat(n.toFixed(0),"%"))},[s]),y=(0,p.useCallback)(()=>{let e=c.current,t=d.current;if(!t||!e)return;let n=e.querySelector(".chakra-progress__indicator"),r=t.querySelector(".chakra-progress__indicator");if(!n||!r)return;let o=v.current.counterCurrent/s,l=(550>hS(x.current)?1:null!=o?o:0)*264,a="".concat(l," ").concat(264-l),u=Math.max(56-56*hE[i](Math.min(o,1)),0);e.style.transform="translateY(".concat(u,"px)"),t.style.transform="translateY(-".concat(u,"px)"),r.setAttribute("stroke-dasharray",a),n.setAttribute("stroke-dasharray",a)},[i,s]),C=(0,p.useCallback)(()=>{let e;if(u.current)return;let t=n=>{let i=e?n-e:0;if(e=n,.1>Math.abs(v.current.counterTarget-v.current.counterCurrent)){v.current.counterCurrent=v.current.counterTarget,y(),u.current=!1;return}v.current.counterCurrent=(0,sQ.Cc)(v.current.counterCurrent,v.current.counterTarget,hw()(60/(i?1e3/i:60)*.3,.3,1)),y(),requestAnimationFrame(t)};requestAnimationFrame(t)},[y]),w=(0,p.useCallback)(()=>{v.current.counterTarget=0,f(!1),j(!1),b(),C()},[C,b]);return(0,p.useEffect)(()=>{let t,i;if(!l||!e)return w();let a=document.querySelector((0,aD.OB)(l));if(!a)return w();let u=t=>{if(t.target.closest("[data-comments-wrapper]"))return;let l=n.check(t);if(null===c.current||null===d.current)return;let a=hS(h.current);if(a<500||a<1e3&&!1===l)return;let u=hS(x.current);if(u<500||u<1e3&&!1===l)return;let p=0===Math.abs(t.deltaY)?v.current.direction:t.deltaY>0?hk.DOWN:hk.UP;if(!("down"===p?o.isAtBottom():o.isAtTop()))return;clearTimeout(i);let m=t.wheelDeltaY?t.wheelDeltaY===-3*t.deltaY:0===t.deltaMode,g=Math.abs(void 0!==t.deltaY?t.deltaY:40)*(m?r:1);if(p!==v.current.direction){v.current.direction=p,w();return}j(p===hk.DOWN),f(p===hk.UP),v.current.counterTarget+=g,v.current.direction=p,v.current.counterTarget/s>=1?(e.commands.spotlightNextCard(p===hk.UP,p===hk.UP?"bottom":"top"),x.current=+new Date,setTimeout(()=>{w(),b()},250),setTimeout(()=>{x.current=null},1e3)):i=setTimeout(w,500),C(),b()},p=()=>{h.current=+new Date,clearTimeout(t),w(),t=setTimeout(()=>{h.current=null},1e3)};return a.addEventListener("scroll",p),a.addEventListener("wheel",u,{passive:!0}),b(),()=>{a.removeEventListener("scroll",p),a.removeEventListener("wheel",u)}},[e,n,C,i,r,s,o,b,y,w,l]),{debugRef:a,nextCardRef:c,prevCardRef:d,showNextCard:g,showPrevCard:m}},hT=e=>{let{editor:t}=e,n=(0,b.u)("debugLogging"),[i,r]=(0,p.useState)("easeOutExpo"),[o,l]=(0,p.useState)(1.5),[a,d]=(0,p.useState)(1200),{debugRef:c,nextCardRef:u,prevCardRef:h,showNextCard:x,showPrevCard:m}=hI(t,{easing:i,touchpadFactor:o,triggerThreshold:a}),{prevCard:f,nextCard:g}=(0,eo.GV)(e=>{let t=(0,el.$i)(e)||"",n=(0,el.Ev)(e),i=Object.keys((n.parents[t]||[]).reduce((e,t)=>e[t],n.tree)),r=null,s=null;return i.forEach((e,o)=>{if(e!==t)return;let l=n.parents[t];0===o?l.length&&(r={cardId:l[l.length-1],isSibling:!1}):r={cardId:i[o-1],isSibling:!0},o===i.length-1?l.length&&(s={cardId:l[l.length-1],isSibling:!1}):s={cardId:i[o+1],isSibling:!0}}),{prevCard:r,nextCard:s}},tN()),j=null==g?void 0:g.cardId,v=null==f?void 0:f.cardId,y=(0,p.useMemo)(()=>{let e=null,n=null;return t&&t.state.doc.descendants(t=>!(0,ty.jg)(t)||(t.attrs.id===v?e=t:t.attrs.id===j&&(n=t),!!(!e&&v)||!!(!n&&j))),{prev:e,next:n}},[t,j,v]);return(0,s.jsxs)(s.Fragment,{children:[n&&(0,s.jsx)(hA,{ref:c,setEasing:r,setTouchpadFactor:l,setTriggerThreshold:d}),(0,s.jsx)(h_,{ref:h,direction:"up",node:y.prev,enabled:m,offset:16}),(0,s.jsx)(h_,{ref:u,direction:"down",node:y.next,enabled:x,offset:24})]})},hA=p.forwardRef((e,t)=>{let{setEasing:n,setTouchpadFactor:i,setTriggerThreshold:r}=e;return(0,s.jsxs)(o.s,{position:"absolute",alignItems:"center",bg:"gray.100",left:2,bottom:16,zIndex:"overlay",borderRadius:"md",border:"solid 2px var(--chakra-colors-trueblue-300)",p:1,children:[(0,s.jsxs)(nF.W,{closeOnSelect:!1,children:[(0,s.jsx)(nW.I,{as:N.$,colorScheme:"trueblue",children:"Options"}),(0,s.jsxs)(nU.c,{minWidth:"240px",children:[(0,s.jsx)(W.Tz,{label:"How much total scrolling work do we need to do to trigger next/prev card?",placement:"right",children:(0,s.jsxs)(z.E,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Scroll Threshold"," ",(0,s.jsxs)("i",{children:["(default=",1200,")"]})]})}),(0,s.jsxs)(hj.Q7,{defaultValue:1200,min:100,max:1e4,precision:0,step:100,onChange:(e,t)=>r(t),children:[(0,s.jsx)(hj.OO,{}),(0,s.jsxs)(hj.lw,{children:[(0,s.jsx)(hj.Q0,{}),(0,s.jsx)(hj.Sh,{})]})]}),(0,s.jsx)(nq.N,{}),(0,s.jsx)(W.Tz,{label:"How much extra weight do we give to touchpad scroll events?",placement:"right",children:(0,s.jsxs)(z.E,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Touchpad Multiplier"," ",(0,s.jsxs)("i",{children:["(default=",1.5,")"]})]})}),(0,s.jsxs)(hj.Q7,{defaultValue:1.5,min:1,max:10,precision:1,step:.1,onChange:(e,t)=>i(t),children:[(0,s.jsx)(hj.OO,{}),(0,s.jsxs)(hj.lw,{children:[(0,s.jsx)(hj.Q0,{}),(0,s.jsx)(hj.Sh,{})]})]}),(0,s.jsx)(nq.N,{}),(0,s.jsxs)(nB.i,{defaultValue:"easeOutExpo",title:"Easing (of peek element)",type:"radio",onChange:e=>n(e),children:[(0,s.jsx)(nH.k,{value:"easeOutLinear",children:"easeOutLinear"}),(0,s.jsx)(nH.k,{value:"easeOutSine",children:"easeOutSine"}),(0,s.jsx)(nH.k,{value:"easeOutCubic",children:"easeOutCubic"}),(0,s.jsx)(nH.k,{value:"easeOutCirc",children:"easeOutCirc"}),(0,s.jsx)(nH.k,{value:"easeOutQuad",children:"easeOutQuad"}),(0,s.jsx)(nH.k,{value:"easeOutQuart",children:"easeOutQuart"}),(0,s.jsx)(nH.k,{value:"easeOutExpo",children:"easeOutExpo"}),(0,s.jsx)(nH.k,{value:"bezierCustom1",children:"bezierCustom1"}),(0,s.jsx)(nH.k,{value:"bezierCustom2",children:"bezierCustom2"})]})]})]}),(0,s.jsx)(o.s,{ref:t,direction:"column",alignItems:"center",width:"85px",ml:1,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:(0,s.jsx)(ue.P,{value:40,color:"trueblue.500",children:(0,s.jsx)(ut,{})})})]})});hA.displayName="PeekDebugger";let h_=p.forwardRef((e,t)=>{let{direction:n,enabled:i,node:r,offset:l}=e,[a,d]=(0,p.useState)(!1),[c,u]=(0,p.useState)(r);(0,p.useEffect)(()=>{d(!0);let e=setTimeout(()=>{d(!1),u(r)},550);return()=>{clearTimeout(e)}},[r]);let h=(0,p.useMemo)(()=>c?(0,aR.getCardTitle)(c.toJSON()):"",[c]),x=!!c;return(0,s.jsx)(o.s,{ref:t,pointerEvents:"none",position:"absolute",justifyContent:"center",width:"100%",zIndex:"overlay",top:"up"===n?"".concat(l,"px"):"inherit",bottom:"down"===n?"".concat(l,"px"):"inherit",children:(0,s.jsxs)(o.s,{bg:"gray.100",borderRadius:"md",boxShadow:"md",h:"".concat(40,"px"),maxWidth:"450px",justifyContent:"center",opacity:i?1:0,transition:"opacity ".concat(300,"ms ease-out"),textAlign:"center",alignItems:"center",direction:"row",px:2,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:[(0,s.jsx)(ue.P,{display:x?"block":"none",color:"trueblue.500",size:"20px",thickness:"16px",children:(0,s.jsx)(ut,{visibility:a?"visible":"hidden",children:(0,s.jsx)(F.g,{icon:G.QRE,fontSize:"14px",style:{color:"var(--chakra-colors-gray-100)",backgroundColor:"var(--chakra-colors-trueblue-500)",borderRadius:"10px"}})})}),x||"up"!==n?x||"down"!==n?null:(0,s.jsx)(F.g,{icon:G.uZL,size:"xs",color:"var(--chakra-colors-gray-600)"}):(0,s.jsx)(F.g,{icon:G.o9H,size:"xs",color:"var(--chakra-colors-gray-600)"}),(0,s.jsx)(o.s,{width:1}),(0,s.jsx)(z.E,{noOfLines:1,textOverflow:"ellipsis",overflowX:"hidden",fontSize:"md",color:x?"gray.800":"gray.600",px:2,children:x?h:"down"===n?"End of presentation":"Start of presentation"})]})})});h_.displayName="PeekCardTab";let hR=()=>{let[e,t]=(0,p.useState)(["",[],{}]),n=(0,eo.CU)();return(0,p.useEffect)(()=>n.subscribe(()=>{let e=n.getState(),i=(0,el.Ev)(e),r=(0,el.$i)(e)||"",s=i.parents[r]||[],o={};Object.keys(i.tree).forEach(e=>{let t=[],n=e=>{Object.keys(e).forEach(i=>{t.push(i),n(e[i])})};n(i.tree[e]),o[e]=t}),t([r,s,o])}),[n]),e},hO=()=>{let[e,t,n]=hR(),i=Object.keys(n);return(0,s.jsx)(te.z,{position:"fixed",bottom:0,w:"100vw",zIndex:10,background:"blackAlpha.200",px:"6px",py:"2px",align:"end",spacing:"2px",opacity:e?1:0,transitionProperty:"opacity",transitionDuration:"normal",children:i.map((r,o)=>{let l=[...t,e][0],a=i.indexOf(l),d=n[l],c=0,u=100;return e&&d&&-1===i.indexOf(e)&&(c=(d.indexOf(e)+1)/d.length*100,u=1/d.length*100),(0,s.jsx)(hP,{cardId:r,state:o===a?"current":o<=a?"prev":"next",percent:c,unit:u},r)})})},hD="var(--chakra-colors-trueblue-200)",hz="var(--chakra-colors-trueblue-100)",hP=e=>{let{cardId:t,state:n,percent:i,unit:r}=e,l="linear-gradient(to right, ".concat(hD," 0% ").concat(i,"%, ").concat("var(--chakra-colors-trueblue-300)"," ").concat(i,"% ").concat(i+r,"%, ").concat(hz," ").concat(i+r,"% 100%)");return(0,s.jsx)(o.s,{borderRadius:"2px",flex:"1",h:"6px",bg:"current"===n?l:"prev"===n?hD:hz},t)},hL=(0,i1.Ay)("Esc"),hN=e=>{let{editor:t,showNavigationControls:n}=e,[i,r]=(0,p.useState)(null),l=(0,m.d4)(el.QF),a=(0,p.useRef)(l),d=(0,m.wA)(),u=(0,np.UT)("edit"),h=(0,nK.u)("presentModeCursor"),x=(0,hh.SQ)({enabled:!l,setActiveKey:r});hc(t);let{menuRef:f,isPresentModeMenuOpen:g,onPresentModeMenuClose:j,menuRootStyles:v,clearPositioning:b}=hu({editor:t,enabled:!0});return(0,p.useEffect)(()=>(d((0,el._b)({isEditingInSlideView:!1})),()=>{d((0,el._b)({isEditingInSlideView:!1}))}),[d]),a.current=l,(0,p.useEffect)(()=>e1.WC.on("keydown","SLIDE_VIEW",e=>!!(a.current&&hL(e))&&(d((0,el._b)({isEditingInSlideView:!1})),e.preventDefault(),!0)),[d]),(0,n2.FM)(),(0,dB.j)({ref:f,enabled:g,handler(e){e instanceof MouseEvent&&2!==e.button&&j()}}),(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)(hg,{ref:f,editor:t,readOnly:!u,isOpen:g,onClose:j,clearPositioning:b,rootStyles:v}),(0,s.jsx)(hT,{editor:t}),(0,s.jsx)(hO,{}),(0,s.jsx)(o.s,{position:"absolute",inset:0,width:"100%",height:"100%",pointerEvents:"none",justify:"flex-end",children:(0,s.jsxs)(o.s,{bg:"gray.50",position:"fixed",bottom:6,right:6,p:3,px:6,justify:"flex-end",align:"center",opacity:l?1:0,pointerEvents:l?"auto":"none",transitionProperty:"opacity, transform",transitionDuration:"normal",transitionTimingFunction:"ease",transform:l?"translate(0,0)":"translate(0,100%)",borderRadius:"md",shadow:"md",zIndex:"overlay",children:[(0,s.jsx)(z.E,{size:"sm",marginEnd:3,children:(0,s.jsx)(c.x6,{id:"DjD/sG"})}),(0,s.jsx)(N.$,{size:"sm",variant:"solid",onClick:()=>d((0,el._b)({isEditingInSlideView:!1})),children:(0,s.jsx)(c.x6,{id:"DPfwMq"})})]})}),h&&!l&&(0,s.jsx)(hl,{editor:t}),n&&(0,s.jsx)(hh.Lh,{activeKey:i,spotlightingByBlock:x})]})};var hM=n(13139),hV=n(64315);let hG=nE.$.filmstrip,hF=nE.$.filmstrip-1,hW={duration:.25,delay:.75},hU={duration:.25},hB="filmstrip-root",hH=".".concat(hB),hq="filmstrip-scroller",hK=".".concat(hq),hJ=p.createContext({state:{navItemPreviewRefMap:{}},setNavItemPreviewRef:()=>{throw Error("context not initialized")}}),hY=e=>{let{children:t}=e,[n,i]=(0,p.useState)({navItemPreviewRefMap:{}}),r=(0,p.useMemo)(()=>{let e=[],t=null,r=()=>{let r;t=null;let s={...n.navItemPreviewRefMap},o=!1;for(;r=e.shift();){let[e,t]=r;s[e]!==t&&(s[e]=t,o=!0)}o&&i(e=>({...e,navItemPreviewRefMap:s}))},s=()=>{t&&(clearTimeout(t),t=null)};return(n,i)=>{s(),e.push([n,i]),t=setTimeout(r,0)}},[n.navItemPreviewRefMap]);return(0,s.jsx)(hJ.Provider,{value:{state:n,setNavItemPreviewRef:r},children:t})};function hX(){return(0,p.useContext)(hJ)}var h$=n(89489);let hZ=(0,p.createContext)(null);var hQ=n(29164),h0=n(44261),h1=n(24384);let h6=(0,p.forwardRef)(function({children:e,as:t="ul",axis:n="y",onReorder:i,values:r,...s},o){let l=(0,hQ.M)(()=>(0,af.P)(t)),a=[],d=(0,p.useRef)(!1);return(0,h$.V)(!!r,"Reorder.Group must be provided a values prop"),(0,p.useEffect)(()=>{d.current=!1}),p.createElement(l,{...s,ref:o},p.createElement(hZ.Provider,{value:{axis:n,registerItem:(e,t)=>{t&&-1===a.findIndex(t=>e===t.value)&&(a.push({value:e,layout:t[n]}),a.sort(h5))},updateOrder:(e,t,n)=>{if(d.current)return;let s=function(e,t,n,i){if(!i)return e;let r=e.findIndex(e=>e.value===t);if(-1===r)return e;let s=i>0?1:-1,o=e[r+s];if(!o)return e;let l=e[r],a=o.layout,d=(0,h1.j)(a.min,a.max,.5);return 1===s&&l.layout.max+n>d||-1===s&&l.layout.min+n<d?(0,h0.Pe)(e,r,r+s):e}(a,e,t,n);a!==s&&(d.current=!0,i(s.map(h2).filter(e=>-1!==r.indexOf(e))))}}},e))});function h2(e){return e.value}function h5(e,t){return e.layout.min-t.layout.min}var h3=n(17170),h4=n(95989);function h8(e){let t=(0,hQ.M)(()=>(0,h3.O)(e)),{isStatic:n}=(0,p.useContext)(h4.Q);if(n){let[,n]=(0,p.useState)(e);(0,p.useEffect)(()=>t.on("change",n),[])}return t}var h7=n(91943);let h9=e=>"object"==typeof e&&e.mix,xe=e=>h9(e)?e.mix:void 0;var xt=n(80471),xn=n(42220);function xi(e,t){let n=(0,hQ.M)(()=>[]);return function(e,t){var n,i;let r=h8(t()),s=()=>r.set(t());return s(),n=()=>xn.OH.update(s,!1,!0),i=()=>xn.eO.update(s),(0,xt.E)(()=>{let t=e.map(e=>e.on("change",n));return()=>{t.forEach(e=>e()),i()}}),r}(e,()=>{n.length=0;let i=e.length;for(let t=0;t<i;t++)n[t]=e[t].get();return t(n)})}var xr=n(41115);function xs(e,t=0){return(0,xr.S)(e)?e:h8(t)}let xo={Group:h6,Item:(0,p.forwardRef)(function({children:e,style:t={},value:n,as:i="li",onDrag:r,layout:s=!0,...o},l){let a=(0,hQ.M)(()=>(0,af.P)(i)),d=(0,p.useContext)(hZ),c={x:xs(t.x),y:xs(t.y)},u=function(e,t,n,i){let r="function"==typeof t?t:function(...e){let t=!Array.isArray(e[0]),n=t?0:-1,i=e[0+n],r=e[1+n],s=e[2+n],o=e[3+n],l=(0,h7.G)(r,s,{mixer:xe(s[0]),...o});return t?l(i):l}(t,void 0,void 0);return Array.isArray(e)?xi(e,r):xi([e],([e])=>r(e))}([c.x,c.y],([e,t])=>e||t?1:"unset"),h=(0,p.useRef)(null);(0,h$.V)(!!d,"Reorder.Item must be a child of Reorder.Group");let{axis:x,registerItem:m,updateOrder:f}=d;return(0,p.useEffect)(()=>{m(n,h.current)},[d]),p.createElement(a,{drag:x,...o,dragSnapToOrigin:!0,style:{...t,x:c.x,y:c.y,zIndex:u},layout:s,onDrag:(e,t)=>{let{velocity:i}=t;i[x]&&f(n,c[x].get(),i[x]),r&&r(e,t)},onLayoutMeasure:e=>{h.current=e},ref:l},e)})};var xl=n(16120),xa=n(55108);let xd=e=>{let{content:t,selection:n}=(0,xl.S)(e),i=!!(null==t?void 0:t.content),r=(0,p.useMemo)(()=>{var e;if(!i)return[];let n=t.content,r=(null==n?void 0:n[0].content)||[],s=null===(e=t.content)||void 0===e?void 0:e[0].attrs;return r.map(e=>{var t;return s&&(null===(t=e.attrs)||void 0===t?void 0:t.id)?{cardId:e.attrs.id,isDragging:!1,displayBehavior:"normal"}:null}).filter(e=>null!==e)},[t,i]),s=(0,eo.GV)(xa.j2,(e,t)=>tN()(e,t)).map(e=>r.find(t=>t.cardId===e.cardId)?{...e}:null).filter(e=>null!==e),o=(0,eo.GV)(xa.u9);return{isDragging:o,cards:o?s:r,editorContent:t,selection:n,isLoaded:i}},xc=e=>({backgroundColor:e?"gray.700":"gray.200",activeButtonColor:e?"gray.50":"trueblue.500",inactiveButtonColor:e?"gray.50":"gray.900",closeButtonColorScheme:e?"gray":"blackAlpha"}),xu=e=>{let{onClose:t,isDark:n,viewPreference:i,setViewPreference:r}=e,l="list"===i,{activeButtonColor:a,inactiveButtonColor:d,backgroundColor:h,closeButtonColorScheme:x}=xc(n),m=(0,J.st)(),f=(0,p.useCallback)(e=>()=>{r(e),null==m||m.track(J.VV.FILMSTRIP_TOGGLE_VIEW,{view:e})},[m,r]);return(0,s.jsxs)(o.s,{p:"8px",pb:"2px",children:[(0,s.jsxs)(te.z,{spacing:0,bg:h,p:.5,borderRadius:"md",children:[(0,s.jsx)(W.Tz,{label:(0,s.jsx)(c.x6,{id:"Rv+zkJ"}),children:(0,s.jsx)(N.$,{size:"xs",variant:l?"ghost":"plain",color:l?d:a,onClick:f("film"),"data-testid":"filmstrip-view-button",children:(0,s.jsx)(te.z,{children:(0,s.jsx)(F.g,{icon:G.OxR})})})}),(0,s.jsx)(W.Tz,{label:(0,s.jsx)(c.x6,{id:"5NZpX8"}),children:(0,s.jsx)(N.$,{size:"xs",variant:l?"plain":"ghost",color:l?a:d,onClick:f("list"),"data-testid":"list-view-button",children:(0,s.jsx)(te.z,{children:(0,s.jsx)(F.g,{icon:G.ITF})})})})]}),(0,s.jsx)(W.Tz,{label:(0,s.jsx)(c.x6,{id:"C8DFL7"}),shortcut:"Mod+\\",children:(0,s.jsx)(M.K,{variant:"ghost","aria-label":u.Ru._({id:"C8DFL7"}),"data-testid":"close-filmstrip-button",colorScheme:x,isRound:!0,size:"xs",icon:(0,s.jsx)(F.g,{icon:G.Jyw}),outlineOffset:"0px",marginInlineStart:"auto",onClick:e=>{e.stopPropagation(),t()},onMouseDown:dY.Fw})})]})};var xh=n(16737),xx=n(22762),xp=n(3583),xm=n(67965),xf=n(89985),xg=n(40200),xj=n.n(xg),xv=n(46108),xb=n.n(xv),xy=n(77256),xC=n(66159),xw=n(65202),xE=n(27649),xk=n(60948),xS=n(16928),xI=n(20277);let xT=(e,t)=>{let n=xp.Mj.getState(e.state).undoManager,i=n.undoStack[n.undoStack.length-1];i&&i.meta.set("filmstripState",t)},xA=e=>{let t=(0,eo.GV)(nl.Mj),n=(0,eo.GV)(nl.Nx),i=(0,eo.jL)(),r=(0,eo.CU)(),o=(0,eE.d)(),l=(0,p.useCallback)(n=>{var i;if(!e)return;let r=(0,ty.V4)(e,t);if(!r.length)return;let l=ic.FK.from(r),a=(0,xk.$R)(l,e.schema);if(!a){o({title:n?(0,s.jsx)(c.x6,{id:"33a+2Q"}):(0,s.jsx)(c.x6,{id:"FntfNT"}),status:"error",duration:3e3,position:"top"});return}null===(i=document.getSelection())||void 0===i||i.removeAllRanges(),xj()(a,{format:"text/html"});let d=xw.q.getState(e.state);d&&!n&&d.clearCutData(),o({title:n?(0,s.jsx)(c.x6,{id:"VG4BD6",values:{0:r.length,1:r.length}}):(0,s.jsx)(c.x6,{id:"GtH+14",values:{0:r.length,1:r.length}}),status:"success",duration:3e3,position:"top"})},[e,t,o]),a=(0,p.useCallback)(()=>{l(!1)},[l]),d=(0,p.useCallback)(function(){let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return;let r=(0,nl.zT)((0,eo.KA)().getState());i((0,nl.Cj)()),e.commands.deleteCardsById(t,n),xT(e,r)},[i,e,t]),h=(0,p.useCallback)(()=>{if(!e||0===t.length)return;let n="";if(1===t.length){let i=(0,ty.W0)(e,t[0]);i&&(n=(0,xf.getCardTitle)(i.node.toJSON())||"")}d();let i=n?'"'.concat(n,'"'):u.Ru._({id:"FyJPFh"}),r=o({title:(0,s.jsxs)(te.z,{children:[(0,s.jsx)(z.E,{noOfLines:1,children:(0,s.jsx)(c.x6,{id:"OJTPnC",values:{displayTitle:i,0:t.length,1:t.length}})}),(0,s.jsx)(nT.N,{textDecoration:"underline",onClick:()=>{(0,xm.tN)(e.state),o.close(r)},children:(0,s.jsx)(c.x6,{id:"9uI/rE"})})]}),status:"info",duration:3e3,position:"top"})},[d,e,t,o]),x=(0,p.useCallback)(()=>{0!==t.length&&(l(!0),d(!0))},[d,l,t]),m=(0,p.useCallback)(()=>{if(!e||0===t.length)return;let r=(0,ty.V4)(e,t);if(r.length){let t=(0,ty.W0)(e,n),l=t?t.pos+t.node.nodeSize:e.state.doc.content.size-1,a=r.map(e=>(0,td.RE)(xb()(e.toJSON()))).map(e=>(0,xE.iM)(e)),d=(0,nl.zT)((0,eo.KA)().getState());e.chain().insertContentAt(l,a,{updateSelection:!1}).command(e=>{let{tr:t}=e,n=(0,xI.s)(t.doc.resolve(l));return n&&(t=t.setSelection(n)),t.setMeta(xS._,!0),t.setMeta(xC.G,!0),!0}).scrollIntoView().run(),xT(e,d),i((0,nl.B6)({beforeCardId:null==t?void 0:t.node.attrs.id,cardCount:a.length})),o({title:(0,s.jsx)(c.x6,{id:"ClnFsQ",values:{0:r.length,1:r.length}}),status:"success",duration:3e3,position:"top"})}},[i,e,n,o,t]);return{handleAddCard:(0,p.useCallback)(()=>{if(!e)return;let t=(0,nl.Nx)((0,eo.KA)().getState()),n=(0,ty.W0)(e,t);if(!n)return;let{pos:r}=n,s=e.view.state.doc.nodeAt(r);if(!s){console.error("[Filmstrip] Cannot append card. Node unknown");return}let o=r+s.nodeSize,l=(0,xy.GO)().blankCard;(0,xy.Jb)({key:"blankCard",nodeName:"card"},tY.oU.FILMSTRIP_CARD_MENU);let a=(0,nl.zT)((0,eo.KA)().getState());e.chain().insertContentAt(o,(0,xE.iM)(l),{updateSelection:!1}).command(e=>{let{tr:t}=e,n=(0,xI.s)(t.doc.resolve(o));return n&&(t=t.setSelection(n)),t.setMeta(xS._,!0),t.setMeta(xC.G,!0),!0}).scrollIntoView().run(),xT(e,a),i((0,nl.B6)({beforeCardId:null==n?void 0:n.node.attrs.id,cardCount:1}))},[i,e]),handleCopy:a,handleCut:x,handleDelete:h,handleDuplicate:m,handleExport:(0,p.useCallback)(()=>{if(!e||0===t.length)return;let n=(0,el.uF)(r.getState()),i=t.map(e=>(n.indexOf(e)+1).toString());ly.R.emit("openSharePanel",{view:"export",options:{cardRangesInput:i.join(",")}})},[e,t,r])}},x_=e=>{let{children:t,icon:n,onClick:i,shouldHide:r=!1,...o}=e;return r?null:(0,s.jsx)(sm.D,{icon:n,onClick:i,...o,children:t})},xR=(0,p.memo)(e=>{let{isDark:t}=e;return(0,s.jsxs)(l.az,{as:"span",className:"fa-layers fa-fw",children:[(0,s.jsx)(F.g,{fixedWidth:!0,icon:G.vti}),(0,s.jsx)(F.g,{icon:tR.GEE,transform:"shrink-4 right-6 down-4",color:"var(--menu-bg, white)"}),(0,s.jsx)(F.g,{icon:tR.GEE,transform:"shrink-7 right-6 down-4"}),(0,s.jsx)(F.g,{icon:tR.QLR,color:t?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)",transform:"shrink-10 right-6 down-4"})]})});xR.displayName="AddCardIcon";let xO=(e,t)=>{if(0===e.length||!t)return null;if(1===e.length){let n=(0,ty.W0)(t,e[0]);return n?(0,aR.getCardTitle)(n.node.toJSON())||"Untitled card":null}return"Multiple cards selected"},xD=(0,p.forwardRef)((e,t)=>{let{editor:n,isOpen:i,onClose:r,readOnly:o,clearPositioning:l,rootStyles:a,isDark:d}=e,h=(0,eo.GV)(el.Jo),x=(0,eE.d)(),{handleCopy:m,handleDelete:f,handleCut:g,handleDuplicate:j,handleAddCard:v,handleExport:b}=xA(n),y=(0,eo.GV)(nl.Mj),C=1===y.length,E=(0,p.useMemo)(()=>C?(0,w.Io)({cardId:y[0],docId:null==h?void 0:h.id,isPresentMode:!1}):"",[null==h?void 0:h.id,C,y]),{onCopy:k}=(0,rj.i)(E),S=(0,p.useCallback)(()=>{k(),x({title:(0,s.jsx)(c.x6,{id:"h5GS+N"}),status:"success",duration:3e3,position:"top"})},[k,x]),I=(0,xx.K)(),T=(0,p.useMemo)(()=>xO(y,n),[n,y]),A=(0,p.useMemo)(()=>d?{"--menu-bg":"var(--chakra-colors-gray-900)","&:focus":{"--menu-bg":"var(--chakra-colors-gray-800)"}}:{},[d]);return(0,s.jsx)(nF.W,{isOpen:i,onClose:r,children:(0,s.jsxs)(nU.c,{className:"filmstrip-card-menu",onContextMenu:e=>{e.preventDefault()},zIndex:"popover",ref:t,rootProps:{style:a},w:"260px",overflowY:"auto",onTransitionEnd:()=>{i||l()},children:[T&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z.E,{pl:3,color:d?"gray.400":"gray.600",noOfLines:1,"data-testid":"filmstrip-card-menu-card-title",children:T}),(0,s.jsx)(nq.N,{})]}),(0,s.jsx)(x_,{"data-testid":"filmstrip-card-menu-item-cut",shouldHide:o,command:(0,W.lp)("Mod+X"),icon:(0,s.jsx)(F.g,{fixedWidth:!0,icon:G.XGd}),onClick:g,children:(0,s.jsx)(c.x6,{id:"cCd8Bs"})}),(0,s.jsx)(x_,{"data-testid":"filmstrip-card-menu-item-copy",shouldHide:o,command:(0,W.lp)("Mod+C"),icon:(0,s.jsx)(F.g,{fixedWidth:!0,icon:G.jPR}),onClick:m,children:(0,s.jsx)(c.x6,{id:"he3ygx"})}),(0,s.jsx)(x_,{"data-testid":"filmstrip-card-menu-item-duplicate",shouldHide:o,command:(0,W.lp)("Mod+D"),icon:(0,s.jsx)(F.g,{fixedWidth:!0,icon:G.$3n}),onClick:j,children:(0,s.jsx)(c.x6,{id:"euc6Ns"})}),(0,s.jsx)(x_,{"data-testid":"filmstrip-card-menu-item-add-card",shouldHide:o,icon:(0,s.jsx)(xR,{isDark:d}),onClick:v,sx:A,children:(0,s.jsx)(c.x6,{id:"90n2YU"})}),(0,s.jsx)(x_,{"data-testid":"filmstrip-card-menu-item-export-card",shouldHide:o,icon:(0,s.jsx)(F.g,{fixedWidth:!0,icon:G.mHA}),onClick:b,sx:A,children:1===y.length?u.Ru._({id:"xRJ+bN"}):u.Ru._({id:"eMDlJX",values:{0:y.length}})}),!o&&(0,s.jsx)(nq.N,{}),(0,s.jsx)(x_,{"data-testid":"filmstrip-card-menu-item-copy-link",shouldHide:!C,icon:(0,s.jsx)(xh.E,{isLocked:!I,isDark:d}),onClick:S,children:(0,s.jsx)(c.x6,{id:"F0YmUY"})}),(0,s.jsx)(x_,{"data-testid":"filmstrip-card-menu-item-delete",color:d?"red.300":"red.500",icon:(0,s.jsx)(F.g,{icon:G.yLS,fixedWidth:!0}),onClick:f,shouldHide:o,children:(0,s.jsx)(c.x6,{id:"cnGeoo"})})]})})});xD.displayName="FilmstripCardMenuComponent";let xz=(0,p.memo)(xD);var xP=n(13320),xL=n(11576),xN=n(43909);let xM=(0,af.P)(l.az),xV=e=>{let{isEditorFocused:t,isFilmstripSelected:n,shouldHide:i,cardId:r,isDraggingCard:l,isDragInProgress:a,index:d}=e,c=(0,eo.GV)(el.Uu),u=(0,xL.iI)(c.cardDimensions).aspectRatio,h=u?{aspectRatio:"".concat(u," / 1"),overflow:"hidden"}:void 0;return(0,s.jsxs)(o.s,{boxShadow:n?"var(--fs-item-selected-box-shadow)":t?"var(--fs-item-focused-box-shadow)":"var(--fs-item-box-shadow)",transitionProperty:"common",transitionDuration:"normal",borderRadius:"sm",overflow:"hidden",display:i?"none":void 0,css:h,children:[(0,s.jsx)(xG,{shouldFixHeight:!i&&a,cardId:r,cardAspectRatio:u}),(0,s.jsx)(ag.N,{children:!i&&!l&&(0,s.jsx)(xM,{position:"absolute",exit:{opacity:0},transition:{duration:.2},bottom:1,insetStart:1,px:1.5,borderRadius:"md",boxShadow:"base",borderWidth:"1px",borderColor:"var(--fs-item-card-number-border-color)",bg:"var(--fs-item-card-number-background-color)",color:"var(--fs-item-card-number-color)",fontWeight:600,fontSize:"xs",children:(0,s.jsx)(z.E,{children:d})},d)})]})},xG=e=>{let{cardId:t,shouldFixHeight:n}=e,{setNavItemPreviewRef:i}=hX(),r=(0,eo.GV)(el.SJ),a=(0,xP.S)(r,!1),d=(0,Y.rd)(),c=(0,xN.NC)(r),u=(0,p.useRef)(null),h=xF(u);return(0,p.useEffect)(()=>{u.current&&(n?u.current.style.height="".concat(u.current.offsetHeight,"px"):u.current.style.height="")},[n]),(0,s.jsxs)(o.s,{ref:u,className:"filmstrip-nav-item-wrapper",sx:ij.o,css:{"--editor-font-size":"calc(var(--editor-width) / ".concat(nh.s5,")"),"--thumbnail-min-height":"calc(var(--editor-width) * 0.4)"},justifyContent:"center",overflow:"hidden",pointerEvents:"none",bg:"gray.100",minH:"var(--thumbnail-min-height)",maxH:"calc(var(--editor-width) * 1.5)",w:"var(--editor-width)",children:[h?(0,s.jsx)(l.az,{pos:"absolute",bottom:"-1px",insetStart:0,w:"100%",h:"25%",bg:c,zIndex:1,css:{maskImage:"linear-gradient(to bottom, transparent 0%, black 90%)"}}):null,(0,s.jsx)("div",{className:"ProseMirror",children:(0,s.jsx)(o.s,{className:"doc-content-wrapper",direction:"column",align:"center",sx:a,inert:"true",bg:d?"gray.800":"white",children:(0,s.jsx)("div",{style:{width:"100%"},ref:e=>{e&&i(t,e)}})})})]})},xF=e=>{if(!e.current)return;let t=e.current.querySelector(".doc-content-wrapper");if(t)return t.offsetHeight>1.1*e.current.offsetHeight},xW=e=>{let{cardId:t,index:n,isEditorFocused:i,isFilmstripSelected:r,editor:a}=e,{title:d}=(0,tM.d)({cardId:t,editor:a});return(0,s.jsxs)(o.s,{className:"filmstrip-nav-item-wrapper",w:"var(--editor-width)",justifyContent:"flex-start",fontSize:"xs",borderRadius:"sm",boxShadow:r?"var(--fs-text-item-selected-box-shadow)":i?"var(--fs-item-focused-box-shadow)":"var(--fs-item-box-shadow)",color:r?"trueblue.500":void 0,transitionProperty:"common",transitionDuration:"normal",_hover:{".filmstrip-text-item-number":{display:"none"},".filmstrip-text-drag-handle":{display:"block"}},children:[(0,s.jsxs)(o.s,{alignItems:"center",bg:r?"trueblue.100":"var(--fs-text-item-card-number-bg-color)",transitionProperty:"common",transitionDuration:"normal",children:[(0,s.jsx)(l.az,{className:"filmstrip-text-item-number",w:6,fontSize:n>=1e3?"0.6rem":void 0,textAlign:"center",overflow:"hidden",whiteSpace:"nowrap",children:n}),(0,s.jsx)(l.az,{className:"filmstrip-text-drag-handle",display:"none",textAlign:"center",w:6,fontSize:"md",_hover:{cursor:"grab"},children:(0,s.jsx)(F.g,{icon:G.IMq})})]}),(0,s.jsx)(o.s,{"data-testid":"filmstrip-text-item-title",p:2,pl:"4px",flex:1,bg:r?"trueblue.50":"var(--fs-text-item-bg-color)",alignItems:"center",overflow:"hidden",transitionProperty:"common",transitionDuration:"normal",inert:"true",children:(0,s.jsx)(z.E,{noOfLines:1,children:d||(0,s.jsx)(c.x6,{id:"wja8aL"})})})]})},xU=e=>{let{filmstripItemRef:t,cardId:n,isFilmstripSelected:i,currentFocusedCard:r,isAnimating:s}=e,{editor:o}=(0,tT.m)(),l=(0,K.O2)("filmstrip"),a=(0,eo.GV)(nl.x7);(0,p.useEffect)(()=>{t.current&&n===r&&((null==o?void 0:o.isFocused)&&!s?l.scrollElementIntoView({element:t.current,offsetFromTop:120}):i&&n===a&&requestAnimationFrame(()=>{if(!t.current||!l.scroller)return;let e=l.scroller.getBoundingClientRect(),n=t.current.getBoundingClientRect(),i=n.top,r=n.bottom,s=n.height,o=0,a=t.current.closest(".reorder-item");if(a instanceof HTMLElement&&(o=a.offsetTop),r>=e.bottom){let e=Math.max(0,o+s-l.scroller.clientHeight+4);l.scrollTo({top:e})}else i<=e.top&&l.scrollTo({top:o})}))},[n,r,o,a,i,l,t,s])},xB=(0,af.P)(o.s),xH=e=>{let{card:t,index:n,isFirst:i,isEditorFocused:r,currentFocusedCard:o,isFilmstripSelected:a,readOnly:d,shouldHide:c,isDragInProgress:u,numberOfCardsDragging:h,onContextClick:x,editor:m,isAnimating:f,showTextOnly:g}=e,{cardId:j,isDragging:v}=t,b=(0,p.useRef)(null);xU({filmstripItemRef:b,cardId:j,isFilmstripSelected:a,currentFocusedCard:o,isAnimating:f});let y=(0,eo.jL)(),{previewWidth:C}=nx(),w=(0,p.useCallback)(e=>{if(!j)return;let t=e.shiftKey,n=!t&&(e.metaKey||e.ctrlKey);if(t&&!d)y((0,nl.cb)({id:j,currentFocusedCard:o}));else if(n&&!d)y((0,nl.aw)({id:j}));else{if(u)return;y((0,nl.o5)({id:j})),y((0,el.mF)({attached:!1})),m&&(0,tW.OM)({cardId:j,editor:m})}},[j,d,y,o,u,m]);return(0,s.jsxs)(l.az,{className:"filmstrip-item","data-guider-highlight":"filmstrip-item",ref:b,pos:"relative",pt:g?void 0:1,mt:g?1.5:i?void 0:1,onClick:w,onContextMenu:x,cursor:"pointer",userSelect:"none",transitionProperty:"common",transitionDuration:"normal",display:c?"none":void 0,"data-filmstrip-selected":a,"data-filmstrip-view":g?"list":"filmstrip",css:{"--editor-width":"".concat(C,"px")},children:[g&&(0,s.jsx)(xW,{cardId:j,index:n,isFilmstripSelected:a,isEditorFocused:r,editor:m}),(0,s.jsx)(xV,{shouldHide:c||g,cardId:j,index:n,isDraggingCard:v,isDragInProgress:u,isFilmstripSelected:a,isEditorFocused:r}),(0,s.jsx)(ag.N,{children:h&&(0,s.jsx)(l.az,{position:"absolute",bottom:0,left:0,transform:"translate(-50%, 50%)",children:(0,s.jsx)(xB,{initial:{scale:.5,opacity:0},exit:{scale:.5,opacity:0},animate:{scale:1,opacity:1},h:5,minW:5,px:1,borderRadius:"full",bg:"trueblue.300",color:"white",fontSize:"xs",fontWeight:600,boxShadow:"sm",justify:"center",align:"center",children:(0,s.jsx)(z.E,{children:h})},"badge-number")})})]})};var xq=n(43144),xK=n(69771),xJ=n(65053),xY=n(58599),xX=n(70184);let x$=(0,p.forwardRef)(function(e,t){let{reduxData:n,...i}=e,r=(0,xX.F)(n);return(0,s.jsx)(m.Kq,{store:r,children:(0,s.jsx)(xZ,{ref:t,...i})})}),xZ=(0,p.forwardRef)(function(e,t){let{parent:n,theme:i,portalComponent:r,parentIsStreaming:o}=e,a=(0,p.useMemo)(()=>(0,ne.C)(),[]),d=(0,eo.jL)();(0,p.useEffect)(()=>{d((0,el.Yl)({theme:i||null})),d((0,el.kd)({isAllowedToEdit:!1})),d((0,el.$j)({animationsEnabled:!1}))},[i,d]);let c=(0,xY.hG)({extensions:a,content:n.getJSON(),editable:!1});return t&&("function"==typeof t?t(c):t.current=c),c.isThumbnail=!0,(0,p.useEffect)(()=>{var e,t,i;let r=n.getJSON();if(!r||!c)return;let s=null===(t=n.state.selection)||void 0===t?void 0:null===(e=t.ranges)||void 0===e?void 0:e[0];c.commands.setContent(r),s&&c.commands.setTextSelection({from:s.$from.pos,to:s.$to.pos}),c.commands.command(()=>((0,sI.jL)(c.state.doc,d),!0)),null===(i=xK.U.getState(c.state))||void 0===i||i.compute(c.state.doc).processChanges(d)},[n,c,d]),(0,xC.J)({sourceEditor:n,targetEditor:c,isStreaming:o}),(0,s.jsx)(l.az,{className:"editor-preview-root","data-variation-preview":!0,"data-testid":"editor-preview-root",width:"100px",position:"relative",sx:xJ.q,children:(0,s.jsx)(xY.$Z,{editor:c,portalComponent:r,style:{width:"100%",height:"100%"},className:"highlight-mask"})})});var xQ=n(19534);let x0=(0,p.memo)(e=>{let{content:t,theme:n}=e,[i,r]=(0,p.useState)(!1);return((0,p.useEffect)(()=>{requestAnimationFrame(()=>{r(!0)})},[]),i)?(0,s.jsx)(ij.S,{theme:n,content:t,isThumbnail:!0,portalComponent:x6}):null}),x1=(0,p.memo)((0,p.forwardRef)((e,t)=>{let[n,i]=(0,p.useState)(!1);return((0,p.useEffect)(()=>{requestAnimationFrame(()=>{i(!0)})},[]),n)?(0,s.jsx)(x$,{...e,portalComponent:x6,ref:t}):null}));x1.displayName="TransactionalFilmstripPreviewEditor";let x6=e=>{let{renderers:t}=e,{state:{navItemPreviewRefMap:n}}=hX();return(0,s.jsx)(s.Fragment,{children:Object.entries(t).map(e=>{let[t,i]=e,r=i.props.node;if("document"===r.type.name)return null;let s=(0,xQ.jg)(r)?n[r.attrs.id]:null;return xq.createPortal(i.reactElement,s||i.element,t)})})};x0.displayName="FilmstripPreviewEditor";let x2=(0,p.memo)(e=>{let{onClose:t,isDark:n,isResizing:i,setIsResizing:r,side:a}=e,{previewWidth:d}=nx(),c=(0,p.useRef)(null),u=(0,p.useRef)(d),h=(0,p.useRef)(null),x=(0,eo.jL)(),m=(0,p.useCallback)(e=>{if(e.preventDefault(),!c.current||!u.current||!h.current)return;let{width:n,x:i}=c.current,r=(e.clientX-i)*("left"===a?1:-1);if(n+r<=30){t();return}let s=hw()(n+r,90,200);s!==u.current&&(u.current=s,h.current.innerHTML="\n          .filmstrip-nav-item-wrapper {\n            --editor-width: ".concat(s,"px;\n          }"))},[t,a]),f=(0,Z.wb)(m,30),g=(0,p.useCallback)(e=>{e.preventDefault(),c.current={x:e.clientX,width:u.current},r(!0);let t=()=>{c.current=null,h.current&&(h.current.innerHTML=""),x((0,nl.TN)({width:u.current})),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",t),requestAnimationFrame(()=>{r(!1)})};document.addEventListener("mousemove",f),document.addEventListener("mouseup",t)},[x,r,f]);return(0,s.jsxs)(o.s,{className:"filmstrip-resizer",css:{"--resizer-width":"24px","--resizer-offset":"4px","--drag-handle-width":"4px"},pos:"absolute",top:0,bottom:0,insetInlineEnd:"calc(var(--resizer-width) * -1 + var(--resizer-offset))",opacity:0,w:"var(--resizer-width)",bg:n?"whiteAlpha.200":"blackAlpha.200",h:"100%",transitionProperty:"common",transitionDuration:"normal",transitionTimingFunction:"ease",justify:"center",alignItems:"center",borderTopEndRadius:"md",borderBottomEndRadius:"md",boxShadow:"md",_hover:{cursor:"ew-resize"},onMouseDown:g,zIndex:hF,children:[(0,s.jsx)("style",{ref:h}),(0,s.jsx)(l.az,{position:"relative",insetInlineStart:"calc(var(--resizer-offset) - (var(--drag-handle-width) / 2))",bg:"white",borderRadius:"full",w:"var(--drag-handle-width)",h:"40px",opacity:i?1:.6,transitionProperty:"common",transitionDuration:"normal"})]})});x2.displayName="FilmstripResizer";let x5=e=>({"--fs-item-border-color":e?"var(--chakra-colors-whiteAlpha-300)":"var(--chakra-colors-gray-200)","--fs-text-item-selected-border-color":"var(--chakra-colors-trueblue-100)","--fs-item-box-shadow":"0 0 0 1px var(--fs-item-border-color)","--fs-item-focused-box-shadow":"0 0 0 2px var(--chakra-ring-color)","--fs-item-selected-box-shadow":"0 0 0 2px var(--chakra-colors-trueblue-300)","--fs-text-item-selected-box-shadow":"0 0 0 1px var(--fs-text-item-selected-border-color)","--fs-item-card-number-border-color":e?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-200)","--fs-item-selected-text-color":e?"var(--chakra-colors-trueblue-200)":"var(--chakra-colors-trueblue-500)","--fs-item-card-number-color":e?"var(--chakra-colors-gray-100)":"var(--chakra-colors-gray-800)","--fs-item-card-number-background-color":e?"var(--chakra-colors-gradient-dark)":"var(--chakra-colors-gradient-light)","--fs-text-item-bg-color":e?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)","--fs-text-item-card-number-bg-color":e?"var(--chakra-colors-gray-700)":"var(--chakra-colors-gray-200)"}),x3=(e,t)=>{if(!e||!t)return{id:null,pos:null};let{$from:n,from:i,to:r}=e,s=null,o=null;return n.doc.nodesBetween(i,r,(e,t)=>{let i=n.doc.resolve(t).depth;return!(!s&&(0,ty.jg)(e))||1!==i||(s=e.attrs.id,o=t,!1)}),{id:s,pos:o}},x4=()=>{var e;return!!(null===(e=document.activeElement)||void 0===e?void 0:e.closest(hH))},x8=()=>{let e=(0,p.useRef)(null),[t,n]=(0,p.useState)(!1),[i,r]=(0,p.useState)([0,0]),[s,o]=(0,p.useState)("bottom"),l=(0,eo.jL)(),a=(0,p.useCallback)(()=>{n(!1)},[]),d=(0,p.useCallback)(()=>{r([0,0]),o("bottom")},[]),c=(0,p.useCallback)(e=>{n(!0),r(e)},[]),u=(0,p.useCallback)(t=>n=>{var i;n.preventDefault(),l((0,nl.dW)({id:t})),c([n.clientX,n.clientY]);let r=null===(i=e.current)||void 0===i?void 0:i.offsetHeight;if(null==r)return;let s=window.innerHeight<n.clientY+r,a=n.clientY<r;s&&!a?o("top"):s&&a?o("center"):o("bottom")},[l,e,c]),h=(0,p.useMemo)(()=>{var t;let n=i[1],r=null===(t=e.current)||void 0===t?void 0:t.offsetHeight,o=r?window.innerHeight-(n+r+8):void 0,l="center"===s&&o?"translateY(".concat(o,"px)"):"top"===s?"translateY(-100%)":void 0;return{left:i[0],top:i[1],transform:l,transformOrigin:"top"}},[s,i]);return{menuRef:e,isFilmstripCardMenuOpen:t,onFilmstripCardMenuClose:a,handleContextMenu:u,menuRootStyles:h,clearPositioning:d}},x7=tl()(tW.OM,200),x9=e=>{let{isFocused:t,readOnly:n,firstFocusedCardId:i,editor:r,isDragging:s}=e,{handleCopy:o,handleDelete:l,handleCut:a,handleDuplicate:d}=xA(r),c=(0,eo.jL)(),u=(0,eo.CU)();(0,p.useEffect)(()=>hV.WC.on("keydown","FILMSTRIP",e=>{if(!t)return!1;switch(e.key){case"Escape":if(s)return c((0,xa.O)()),!0;return!1;case"Backspace":case"Delete":if(!n)return l(),!0;return!1;case"a":case"A":if(!n&&(e.ctrlKey||e.metaKey))return e.preventDefault(),c((0,nl.Ub)({currentFocusedCard:i})),!0;return!1;case"c":case"C":if(!n&&(e.ctrlKey||e.metaKey))return o(),!0;return!1;case"d":case"D":if(!n&&(e.ctrlKey||e.metaKey))return e.preventDefault(),d(),!0;return!1;case"x":case"X":if(!n&&(e.ctrlKey||e.metaKey))return a(),!0;return!1;case"ArrowDown":{c((0,nl.G2)({direction:"down",withShift:!n&&e.shiftKey,currentFocusedCard:i}));let t=(0,nl.Mj)(u.getState())[0];return!e.shiftKey&&r&&t&&(x7({cardId:t,editor:r}),c((0,el.mF)({attached:!1}))),!0}case"ArrowUp":{c((0,nl.G2)({direction:"up",withShift:!n&&e.shiftKey,currentFocusedCard:i}));let t=(0,nl.Mj)(u.getState())[0];return!e.shiftKey&&r&&t&&(x7({cardId:t,editor:r}),c((0,el.mF)({attached:!1}))),!0}default:return!1}}),[c,i,t,s,l,o,d,a,n,r,u])};var pe=n(65208);let pt=e=>{let t=(0,eo.CU)(),n=(0,eE.d)(),i=(0,eo.jL)();(0,p.useEffect)(()=>{let r=r=>{var o;let l=t.getState();if(!e||!x4()||!(0,el.nD)(l))return;let a=null===(o=r.clipboardData)||void 0===o?void 0:o.getData("text/html");if(!a)return;let{content:d}=(0,pe.S)(a,e.schema),u=d.content.filter(e=>(0,xQ.jg)(e));if(u.length){let t=(0,ty.W0)(e,(0,nl.Nx)(l)),o=t?t.pos+t.node.nodeSize:e.state.doc.content.size-1,a=u.map(e=>(0,td.RE)(xb()(e.toJSON()))).map(e=>(0,xE.iM)(e)),d=(0,nl.zT)((0,eo.KA)().getState());e.chain().insertContentAt(o,a,{updateSelection:!1}).command(e=>{let{tr:t}=e;t.setMeta("annotationEvent",{type:"filmstrip-paste",insertPos:o});let n=(0,xI.s)(t.doc.resolve(o));return n&&(t=t.setSelection(n)),!0}).scrollIntoView().run(),r.preventDefault(),xT(e,d),i((0,nl.B6)({beforeCardId:null==t?void 0:t.node.attrs.id,cardCount:a.length})),n({title:(0,s.jsx)(c.x6,{id:"3viq5b",values:{0:u.length,1:u.length}}),status:"success",duration:3e3,position:"top"})}};return document.addEventListener("paste",r),()=>{document.removeEventListener("paste",r)}},[i,e,t,n])};class pn{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,t){this.componentControls.forEach(n=>{n.start(e.nativeEvent||e,t)})}}let pi=()=>new pn,pr=()=>{let e=(0,hQ.M)(pi),t=(0,p.useRef)(null),n=(0,p.useRef)(),i=(0,p.useRef)(),r=(0,p.useRef)(),s=(0,p.useCallback)(e=>{if(!r.current)return;let t=po(r.current),s=e.target;if(!t||!s||void 0===n.current||void 0===i.current)return;let o=s.scrollTop-n.current.top;t.y=i.current-o},[]),o=(0,p.useCallback)((e,i)=>{var r,s;let o=t.current;if(!o)return;let l=o.getBoundingClientRect(),a=i.point.y,d=e.target;if(!(d instanceof Element))return;let c=d.closest("[draggable]"),u=null==c?void 0:c.parentElement;u&&(a<l.top+25&&(c!==u.firstElementChild||o.scrollTop>0)?o.scrollTop-=5:a>l.bottom-25&&o.scrollTop+l.height<(null!==(s=null===(r=n.current)||void 0===r?void 0:r.height)&&void 0!==s?s:o.scrollHeight)&&(o.scrollTop+=5))},[]),l=(0,p.useCallback)(()=>{let s=t.current,o=ps(e);if(!s||!o)return;r.current=o,n.current={top:s.scrollTop,height:s.scrollHeight};let l=po(o);l&&(i.current=l.y)},[e]);return{scrollerRef:t,onScroll:s,dragControls:e,onDrag:o,onDragStart:l,onDragEnd:(0,p.useCallback)(()=>{n.current=void 0,i.current=void 0,r.current=void 0},[])}},ps=e=>{try{return Array.from(e.componentControls).find(e=>e.isDragging)}catch(e){console.error("[caught] findDraggingElementControls",e);return}},po=e=>{try{return e.panSession.history[0]}catch(e){console.error("[caught] getDraggingElementStartPoint",e);return}},pl=(0,af.P)(o.s),pa=(0,af.P)(l.az),pd="data-".concat(np.rc),pc=(e,t)=>({initial:{x:e*("left"===t?-1:1)+("left"===t?-16:16)},animate:{x:0,transition:hW},exit:{x:e*("left"===t?-1:1),transition:hU}}),pu=e=>{let{onClose:t,editor:n,readOnly:i,side:r}=e,[a,d]=(0,p.useState)(null),[c,u]=(0,p.useState)(!1),[h,x]=(0,ea.M)(ed.E.filmstripViewPreference,"film"),m=(0,b.u)("transactionalFilmstrip"),f=(0,p.useRef)(null),g=(0,eo.GV)((0,es.pn)(null==n?void 0:n.gammaDocId)),{cards:j,editorContent:v,isDragging:y,selection:C,isLoaded:w}=xd(m?null!=a?a:void 0:n),{id:E}=(0,p.useMemo)(()=>x3(C,n),[n,C]),k=(0,eo.jL)(),S=(0,eo.GV)(nl.Mj),I=(0,eo.GV)(xa.Kp),T=(0,eo.GV)(xa.eH),A=(0,eo.GV)(xa.$S),[R,O]=(0,p.useState)(!1),{menuRef:D,isFilmstripCardMenuOpen:z,onFilmstripCardMenuClose:P,clearPositioning:L,handleContextMenu:N,menuRootStyles:M}=x8(),V=(0,p.useCallback)(()=>{if(P(),c){var e;null===(e=f.current)||void 0===e||e.focus()}},[c,P]),{scrollerRef:G,onScroll:F,dragControls:W,onDrag:U,onDragStart:B,onDragEnd:H}=pr(),q=(0,p.useCallback)(e=>()=>{if(O(!0),B(),G.current){let e=G.current.getBoundingClientRect().height;G.current.style.height="".concat(e,"px")}let t=S.includes(e)?S:[e];k((0,nl.IE)({selectedCardIdsToDrag:t})),k((0,xa.Em)({cardIds:j.map(e=>e.cardId),leaderCardId:e,selectedCardIds:t}))},[j,k,S,B,G]),J=(0,p.useCallback)(()=>{n&&(n.commands.rearrangeCardsById(j.map(e=>e.cardId),T),k((0,xa.O)()),H())},[j,k,n,T,H]),Y=(0,p.useCallback)(()=>{G.current&&(G.current.style.height=""),O(!1)},[G]);pt(n),x9({isFocused:c,readOnly:i,firstFocusedCardId:E,editor:n,isDragging:y}),(0,dB.j)({ref:f,handler(e){D.current&&D.current.contains(e.target)||(z&&P(),k((0,nl.gE)()))}});let X=(0,eo.GV)(el.SJ),$=(0,_.dU)("whiteAlpha.600","whiteAlpha.100"),Z=(0,_.dU)("#F9FAFBDD","gray.900"),Q=(0,_.dU)("gray.800","gray.200"),ee=(0,_.dU)("blackAlpha.400","whiteAlpha.500"),{colorMode:et}=(0,_.G6)(),en="dark"===et,ei=(0,p.useMemo)(()=>x5(en),[en]),[er,ec]=(0,p.useState)(!1),{width:eu}=nx(),eh=pc(eu,r),ex=(0,p.useMemo)(()=>{let e=T.length;return y&&e>1?e:null},[y,T.length]),[ep,em]=(0,p.useState)(!1),ef=(0,K.O2)("filmstrip");(0,p.useEffect)(()=>{ef.setScrollSelector(hK)},[ef]);let eg=(0,nu.Tq)(),ej=!!eg.src,ev=m?a:n;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.s,{pointerEvents:"none",position:"absolute","data-guider-highlight":"filmstrip",direction:"column",top:14,bottom:ej?"".concat(eg.height+2*eg.paddingY,"px"):2,justifyContent:"center",color:Q,insetInlineStart:2,children:[m?n&&(0,s.jsx)(x1,{parent:n,theme:X,parentIsStreaming:g,ref:d}):(0,s.jsx)(x0,{theme:X,content:v}),(0,s.jsxs)(l.az,{pos:"relative",pointerEvents:"auto",_hover:{".filmstrip-resizer":{opacity:ep?0:1}},maxHeight:"100%",children:[(0,s.jsxs)(pl,{ref:f,"data-guider-highlight":"filmstrip",className:hB,[pd]:!0,pos:"relative",direction:"column",zIndex:hG,...eh,onAnimationStart:()=>{em(!0)},onAnimationComplete:()=>{em(!1)},tabIndex:0,_focus:{outline:"none"},onFocus:()=>{u(!0),null==n||n.commands.blur()},onBlur:e=>{var t,n;f.current&&(null===(t=f.current)||void 0===t?void 0:t.contains(e.relatedTarget))||(null===(n=D.current)||void 0===n?void 0:n.contains(e.relatedTarget))||u(!1)},borderRadius:"md",bg:Z,borderWidth:"1px",borderColor:$,shadow:"lg",backdropFilter:"blur(20px)",maxHeight:"100%",alignSelf:"flex-start",children:[(0,s.jsx)(xu,{isDark:en,onClose:t,viewPreference:h,setViewPreference:x}),(0,s.jsx)(pa,{className:hq,"data-guider-highlight":"filmstrip-scroller",layoutScroll:!0,overflowY:"auto",position:"relative",sx:{"&::-webkit-scrollbar":{opacity:1,width:"5px"},"&::-webkit-scrollbar-track":{opacity:0,width:"5px"},"&::-webkit-scrollbar-thumb":{background:ee,borderRadius:"full"},...ei},ref:G,onScroll:F,p:"8px",pt:0,children:(0,s.jsx)(xo.Group,{onReorder:e=>{let t=e.map(e=>e.cardId);k((0,xa.je)({reorderedCardIds:t}))},values:j,axis:"y",children:ev&&n&&w&&j.map((e,t)=>{let{cardId:r,displayBehavior:o}=e,l=S.includes(r),a=A===r;return(0,s.jsx)(xo.Item,{drag:!i&&"y",value:e,onDragStart:q(r),onDragEnd:J,onDragTransitionEnd:Y,className:"reorder-item",dragControls:W,transition:{layout:{duration:er?0:void 0}},onDrag:U,style:{position:"relative",listStyle:"none"},children:(0,s.jsx)(xH,{readOnly:i,editor:ev,card:e,index:y&&void 0!==I[r]?I[r]:t+1,isFirst:0===t,shouldHide:"hidden"===o,isDragInProgress:R,isEditorFocused:E===r&&n.isFocused,isFilmstripSelected:!!l,currentFocusedCard:E,numberOfCardsDragging:a?ex:null,onContextClick:N(r),isAnimating:ep,showTextOnly:"list"===h})},r)})})})]}),(0,s.jsx)(x2,{onClose:t,isDark:en,isResizing:er,setIsResizing:ec,side:r})]})]}),n&&(0,s.jsx)(xz,{ref:D,editor:n,readOnly:i,isOpen:z,onClose:V,clearPositioning:L,rootStyles:M,isDark:en})]})},ph=()=>{let e=(0,eo.jL)(),t=(0,eo.GV)(nl.lh),n=(0,e2.h5)({base:!1,lg:!0})||!1,[i,r]=(0,p.useState)(!1),[s,o]=(0,p.useState)(!1),l=(0,p.useCallback)(()=>{e((0,nl.$B)({isOpen:!1})),e((0,nl.gE)()),o(!0)},[e]),a=(0,p.useCallback)(()=>{n||r(!0),e((0,nl.$B)({isOpen:!0}))},[n,e]),d=!n&&i;return(0,p.useEffect)(()=>{let t=!n&&!i,r=n&&!s;t?e((0,nl.$B)({isOpen:!1})):r&&e((0,nl.$B)({isOpen:!0}))},[e,n,i,s]),{onClose:l,onOpen:a,isOpen:t&&(n||!n&&d)}},px=(0,af.P)(N.$),pp=(0,p.memo)(()=>{let e=(0,q.fW)(),{editor:t}=(0,t4.mi)(),{isOpen:n,onClose:i,onOpen:r}=ph(),{isGammaAdminUser:l}=(0,uv.u)(),a=(0,np.UT)("edit"),d=(0,eo.GV)(el.nD),u=(0,Y.rd)(),[h,x]=(0,p.useState)(!1),m=(0,p.useCallback)(()=>{x(!0),setTimeout(()=>{r()}),setTimeout(()=>{x(!1)},750)},[r]);return(0,p.useEffect)(()=>v.R.on("openFilmStrip",()=>{r()}),[r]),(0,p.useEffect)(()=>hV.WC.on("keydown","FILMSTRIP",e=>!!(0,i1.Ay)("Mod+\\")(e)&&(n?i():m(),!0)),[n,i,m]),(0,s.jsx)(hY,{children:(0,s.jsx)(W.L8,{isDark:u,children:(0,s.jsx)(ag.N,{children:n?(0,s.jsx)(pu,{onClose:i,editor:t,readOnly:!l&&(!a||!d),side:e?"right":"left"},"filmstrip"):(0,s.jsx)(W.Tz,{placement:"top-end",label:(0,s.jsx)(c.x6,{id:"7ShgZt"}),isDisabled:h,shortcut:"Mod+\\",children:(0,s.jsxs)(px,{initial:{opacity:0},animate:{opacity:1,transition:hU},exit:{opacity:0,transition:hW},zIndex:hG,css:{"--trigger-height":"var(--chakra-sizes-14)"},tabIndex:-1,position:"fixed",insetInlineStart:2,top:"calc(50% - (var(--trigger-height) / 2) + var(--chakra-sizes-5))",borderRadius:"xl","data-guider-highlight":"filmstrip",h:"var(--trigger-height)",w:8,onClick:m,children:[(0,s.jsx)(hM.s6,{children:(0,s.jsx)(c.x6,{id:"7ShgZt"})}),h?(0,s.jsx)(o.s,{children:(0,s.jsx)(t8.y,{size:"sm"})}):(0,s.jsx)(F.g,{icon:G.OxR})]},"filmstrip-opener")})})})})});pp.displayName="Filmstrip";var pm=n(71792),pf=n(96502),pg=n(59835),pj=n(74451),pv=n(89932);let pb=[{key:"sm",name:()=>u.Ru._({id:"4Revpc"}),buttonText:()=>u.Ru._({id:"ZQA8ce"}),description:()=>u.Ru._({id:"N0rIpR"})},{key:"md",name:()=>u.Ru._({id:"agPptk"}),buttonText:()=>u.Ru._({id:"Tmu3kA"}),description:()=>u.Ru._({id:"3JV7Yt"})},{key:"lg",name:()=>u.Ru._({id:"k7rCa/"}),buttonText:()=>u.Ru._({id:"SMwD6s"}),description:()=>u.Ru._({id:"edeEjW"})}],py=e=>{let{fontSize:t,setFontSize:n}=e;return(0,s.jsx)(tt.e,{isAttached:!0,size:"sm",display:"flex",children:pb.map(e=>{let i=e.key===t?"trueblue.100":void 0;return(0,s.jsx)(W.Tz,{label:(0,s.jsx)(W.c8,{label:e.name(),description:e.description()}),placement:"top",children:(0,s.jsx)(N.$,{"aria-label":e.name(),px:"2.5",boxShadow:"none",variant:"plain",bg:i,onClick:()=>{n(e.key)},children:e.buttonText()})},e.key)})})};var pC=n(6303),pw=n(12664);let pE=e=>{let{hideExtraLines:t}=e;return(0,s.jsxs)(D.B,{w:"100%",py:2,px:2.5,children:[(0,s.jsx)(l.az,{w:20,h:1.5,bg:"gray.200"}),(0,s.jsxs)(te.z,{flex:"1",alignItems:"flex-start",children:[(0,s.jsx)(nO.g,{ratio:4/3,color:"gray.600",w:12,bg:"gray.200",children:(0,s.jsx)(l.az,{fontSize:"lg",children:(0,s.jsx)(F.g,{icon:G.Cyq})})}),(0,s.jsxs)(D.B,{flex:"1",spacing:"1",children:[(0,s.jsx)(l.az,{h:1,bg:"gray.200"}),(0,s.jsx)(l.az,{h:1,bg:"gray.200"}),(0,s.jsx)(l.az,{h:1,bg:"gray.200"}),(0,s.jsx)(l.az,{w:t?"80%":"100%",h:1,bg:"gray.200"}),!t&&(0,s.jsx)(l.az,{w:"80%",h:1,bg:"gray.200"})]})]})]})},pk=e=>{let{cardDimensions:t,showBackdrop:n,isWide:i,label:r,scaleCardUp:a,alignment:d}=e,c={boxShadow:"".concat(n?"sm":""),w:"".concat(i?"85%":"65%"),mx:"auto",borderRadius:"sm",bg:"white",transform:"".concat(a?"scale(1.15)":"none")};return(0,s.jsxs)(D.B,{flex:"1",alignItems:"center",sx:{"*":{transition:"all 0.2s ease"}},spacing:1.5,maxW:"50%",mx:"auto",children:[(0,s.jsx)(o.s,{bg:n?"gray.200":"white",borderWidth:"1px",borderColor:"gray.200",width:"100%",minH:32,borderRadius:"sm",alignItems:"center",py:2,overflow:"hidden",children:t.aspectRatio?(0,s.jsx)(nO.g,{...c,ratio:t.aspectRatio,children:(0,s.jsx)(l.az,{display:"flex",alignItems:d,style:{alignItems:d},children:(0,s.jsx)(pE,{hideExtraLines:i})})}):(0,s.jsx)(D.B,{...c,children:(0,s.jsx)(pE,{hideExtraLines:i})})}),(0,s.jsx)(z.E,{fontSize:"xs",color:"gray.700",children:r})]})};var pS=n(30046);let pI=e=>{let{onClick:t,isSelected:n,icon:i,label:r,description:o,tooltip:a}=e,d=(0,s.jsxs)(D.B,{cursor:"pointer",onClick:t,p:"1.5",px:"2",alignItems:"center",spacing:"0",bg:n?"trueblue.50":"gray.50",borderWidth:"1px",borderColor:n?"trueblue.500":"gray.200",color:n?"trueblue.500":"black",borderRadius:"md",minW:"100px",justifyContent:"center",children:[(0,s.jsx)(l.az,{pb:"0",fontSize:"md",children:(0,s.jsx)(F.g,{icon:i})}),(0,s.jsx)(z.E,{fontSize:"xs",w:"100%",textAlign:"center",noOfLines:1,children:r}),o&&(0,s.jsx)(z.E,{fontSize:"xs",color:"blackAlpha.600",children:o})]});return a?(0,s.jsx)(pS.m,{label:a,placement:"top",children:d}):(0,s.jsx)(s.Fragment,{children:d})},pT=e=>{let{styleTemplateKeys:t,selectedStyleTemplateKey:n,onSelectNewStyle:i,onSelectCustomStyle:r}=e;return(0,s.jsxs)(s.Fragment,{children:[t.map(e=>{let t=pw.S9[e];return(0,s.jsx)(pI,{label:t.label(),icon:t.icon,isSelected:n===e,description:t.cardDimensionsDesc(),tooltip:t.recommendedFor(),onClick:()=>i(e)},e)}),(0,s.jsx)(pI,{label:u.Ru._({id:"8Tg/JR"}),icon:G._$s,isSelected:"custom"===n,onClick:r})]})},pA=e=>{let{title:t,description:n,icon:i,children:r,value:o,onChange:l}=e;return(0,s.jsxs)(te.z,{pb:5,children:[i&&(0,s.jsx)(F.g,{icon:i,fixedWidth:!0}),(0,s.jsx)(z.E,{ml:1,children:t}),n&&(0,s.jsx)(pS.m,{label:n,placement:"top",children:(0,s.jsx)(z.E,{fontSize:"sm",cursor:"help",color:"gray.400",ml:-1,children:(0,s.jsx)(F.g,{icon:G.iW_})})}),(0,s.jsx)(t_.h,{}),r,l&&(0,s.jsx)(pg.d,{isChecked:o,onChange:e=>l(e.target.checked)})]})},p_=e=>{let{selectedStyleTemplateKey:t,newTemplateKey:n,savedVerticalAlign:i,savedDefaultContentWidth:r,savedFontSize:s,savedScaleContentToFit:o}=e,l=pw.S9[t],a=pw.S9[n],d=(null==l?void 0:l.docSettings.cardDimensions)==="fluid";return{...a.docSettings,verticalAlign:d?a.docSettings.verticalAlign:i,defaultContentWidth:d&&"custom"!==t?r:a.docSettings.defaultContentWidth,fontSize:null!=s?s:a.docSettings.fontSize,scaleContentToFit:null!=o?o:a.docSettings.scaleContentToFit}},pR=e=>{let{editor:t}=e,n=(0,p.useCallback)((e,n)=>{null==t||t.commands.updateNestedAttributesAtPos(0,{format:e,settings:n})},[t]),i=(0,p.useCallback)(e=>{null==t||t.commands.updateNestedAttributesAtPos(0,{settings:e})},[t]),r=(0,b.u)("scaleToFit"),o=(0,eo.GV)(el.Uu),{animationsEnabled:a,defaultContentWidth:d,verticalAlign:h,presentBackdrop:x,fontSize:m,cardDimensions:f,defaultFullBleed:g,scaleContentToFit:j}=o,{format:v}=(0,eo.GV)(el.zu),y=(0,r3.Bi)(),C=v||"deck",w=(0,r3.zY)(C),E=(0,r3.Wu)(o,C)||"custom",k="fluid"===f,S="custom"===E,I="full"!==g||x;return(0,s.jsxs)(D.B,{spacing:5,divider:(0,s.jsx)(sM.c,{}),children:[(0,s.jsxs)(l.az,{w:"100%",children:[(0,s.jsx)(la.l,{children:(0,s.jsx)(c.x6,{id:"oIhFvf"})}),(0,s.jsxs)(D.B,{spacing:4,children:[(0,s.jsxs)(nF.W,{children:[(0,s.jsx)(nW.I,{textAlign:"start",as:N.$,variant:"plain",size:"md",boxShadow:"none",minW:"120px",rightIcon:(0,s.jsx)(F.g,{icon:G.tdl}),leftIcon:(0,s.jsx)(F.g,{icon:w.icon}),w:"100%",children:w.name()}),(0,s.jsx)(nU.c,{children:(0,s.jsx)(nB.i,{title:"Format",children:y.map(e=>(0,s.jsxs)(sm.D,{onClick:()=>{let i=e.styleTemplates[0],r=pw.S9[i].docSettings;n(e.formatType,{styleTemplate:i,...r}),r.scaleContentToFit||t.commands.resetCardSettings({fontScale:void 0})},children:[(0,s.jsx)(F.g,{icon:e.icon,fixedWidth:!0}),(0,s.jsx)(l.az,{flex:1,ms:2,children:(0,s.jsx)(z.E,{children:e.name()})}),e.formatType===C&&(0,s.jsx)(F.g,{icon:G.e68})]},e.formatType))})})]}),(0,s.jsx)(sq.B,{children:(0,s.jsx)(pT,{styleTemplateKeys:w.styleTemplates,onSelectNewStyle:function(e){let n=p_({selectedStyleTemplateKey:E,newTemplateKey:e,savedVerticalAlign:h,savedDefaultContentWidth:d,savedFontSize:m,savedScaleContentToFit:j});i(n),n.scaleContentToFit||t.commands.resetCardSettings({fontScale:void 0})},onSelectCustomStyle:function(){i({stylesDerivedFrom:"custom"})},selectedStyleTemplateKey:E})})]}),(0,s.jsxs)(l.az,{mt:5,children:[(0,s.jsx)(rv.S,{in:S,children:(0,s.jsx)(pA,{title:u.Ru._({id:"iKM2jY"}),description:u.Ru._({id:"Q3Qdcd"}),icon:G.V4x,children:(0,s.jsx)(xL.uK,{cardDimensions:f,updateCardDimensions:e=>{let n="fluid"===e;i({cardDimensions:e,...n?{scaleContentToFit:!1}:{}}),n&&t.commands.resetCardSettings({fontScale:void 0})}})})}),(0,s.jsx)(rv.S,{in:S,children:(0,s.jsx)(pA,{title:u.Ru._({id:"lsVq2Z"}),description:u.Ru._({id:"a1DIUk"}),icon:G.Cpz,value:"full"===g,onChange:e=>{i({defaultFullBleed:e?"full":void 0}),t.commands.resetCardSettings({cardSize:"default"})}})}),(0,s.jsx)(rv.S,{in:k||S,children:(0,s.jsx)(pA,{title:u.Ru._({id:"cPp+Ef"}),icon:G.So7,children:(0,s.jsx)(pC.z,{contentWidth:d,setWidth:e=>{i({defaultContentWidth:e})},allowedWidths:"social"===v?["sm","md","lg"]:["md","lg"]})})}),(0,s.jsx)(pA,{title:u.Ru._({id:"vUBA/H"}),description:u.Ru._({id:"n68eVZ"}),icon:G.ecg,children:(0,s.jsx)(pv.c,{alignment:h,setAlignment:e=>{i({verticalAlign:e})}})}),(0,s.jsx)(pA,{title:(0,s.jsxs)(s.Fragment,{children:[r&&j?(0,s.jsx)(c.x6,{id:"heqtbT"}):(0,s.jsx)(c.x6,{id:"q3il6U"})," ",(0,s.jsx)(lo.E,{colorScheme:"trueblue",size:"sm",children:(0,s.jsx)(c.x6,{id:"YBt9YP"})})]}),icon:G.ACh,children:(0,s.jsx)(py,{fontSize:m,setFontSize:e=>{i({fontSize:e})}})}),r&&(0,s.jsx)(rv.S,{in:!k,children:(0,s.jsx)(pA,{title:(0,s.jsx)(c.x6,{id:"+BgJPb"}),description:u.Ru._({id:"8uFsVy"}),icon:G.hLQ,children:(0,s.jsx)(pg.d,{isChecked:j,onChange:e=>{i({scaleContentToFit:e.target.checked}),e.target.checked||t.commands.resetCardSettings({fontScale:void 0})}})})}),I&&(0,s.jsx)(pA,{title:u.Ru._({id:"7VfbQM"}),description:u.Ru._({id:"XZHPlI"}),icon:G.pt,children:(0,s.jsx)(pg.d,{isChecked:x,onChange:e=>i({presentBackdrop:e.target.checked})})}),(0,s.jsxs)(pA,{title:u.Ru._({id:"HgWdP3"}),description:u.Ru._({id:"fkIS5+",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}}),icon:G.xQp,children:[(0,s.jsx)(pg.d,{isChecked:(0,pj.h)({animationsEnabled:a}),onChange:e=>i({animationsEnabled:e.target.checked})}),"value="]})]})]}),(0,s.jsxs)(D.B,{children:[(0,s.jsx)(z.E,{fontSize:"xs",color:"gray.600",children:(0,s.jsx)(c.x6,{id:"ymPKi7"})}),(0,s.jsxs)(te.z,{alignItems:"flex-start",spacing:"4",children:[(0,s.jsx)(pk,{label:u.Ru._({id:"wl99H6"}),alignment:h,cardDimensions:xL.xs[f],isWide:"lg"===d,showBackdrop:"full"!==g,scaleCardUp:!1}),(0,s.jsx)(pk,{label:u.Ru._({id:"GWjDlt"}),alignment:h,cardDimensions:xL.xs[f],isWide:"lg"===d,showBackdrop:x&&"full"!==g,scaleCardUp:!x||"full"===g})]})]})]})};var pO=n(68409),pD=n(40351);let pz=e=>{let{editor:t}=e,n=(0,eo.GV)(el.SJ),i=(0,eo.GV)(el.rv),r=(0,p.useCallback)(e=>{null==t||t.commands.updateNestedAttributesAtPos(0,e)},[t]);return(0,s.jsx)(pD.A,{editor:t,background:i,updateNestedAttributes:r,defaultMessage:(0,s.jsxs)(i7.F,{children:[(0,s.jsx)(sB._,{}),(0,s.jsx)(c.x6,{id:"dyXYfJ"})]}),isDark:(0,ix.Mw)(n),isValidSource:pO.R4})},pP=e=>{let{closePanel:t}=e,[n,i]=(0,p.useState)(0),{editor:r}=(0,tT.m)(),a=(0,eo.GV)(el.sX),d=(0,lh.N)(r),u=(0,p.useCallback)((e,t)=>{null==r||r.commands.updateNestedAttributesAtPos(0,{settings:{[e]:t}})},[r]),h=(0,no.A)({base:"calc(100% - 1rem)",lg:"auto"});return r?(0,s.jsx)(W.L8,{isDark:!1,children:(0,s.jsx)(tD.Z,{bgColor:"white",w:"100%","data-panelid":"page-setup",pt:4,"data-page-setup":!0,children:(0,s.jsxs)(o.s,{direction:"column","data-testid":"page-setup-drawer",onKeyDown:d,h:h,overflowX:"hidden",w:"100%",children:[(0,s.jsxs)(o.s,{position:"relative",pb:4,px:6,children:[(0,s.jsx)(o.s,{flex:1,children:(0,s.jsx)(tz.a,{children:(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"fvaOtb"})})})}),(0,s.jsx)(ek.J,{onClick:t})]}),(0,s.jsx)(o.s,{overflowY:"auto",direction:"column",h:"100%",flex:1,pt:5,children:(0,s.jsxs)(a_.t,{variant:"soft-rounded",size:"sm",isFitted:!0,isLazy:!0,index:n,onChange:i,px:6,children:[(0,s.jsxs)(aA.w,{children:[(0,s.jsxs)(aT.o,{children:[(0,s.jsx)(l.az,{marginInlineEnd:2,children:(0,s.jsx)(F.g,{icon:G.vGi})}),(0,s.jsx)(c.x6,{id:"Ccpbzh"})]}),(0,s.jsxs)(aT.o,{children:[(0,s.jsx)(l.az,{marginInlineEnd:2,children:(0,s.jsx)(F.g,{icon:G.pt})}),(0,s.jsx)(c.x6,{id:"GtJbUa"})]}),(0,s.jsxs)(aT.o,{children:[(0,s.jsx)(l.az,{marginInlineEnd:2,children:(0,s.jsx)(F.g,{icon:G.Bwz})}),(0,s.jsx)(c.x6,{id:"rdUucN"})]})]}),(0,s.jsxs)(pm.T,{children:[(0,s.jsx)(pf.K,{p:2,mt:4,children:(0,s.jsx)(pR,{editor:r},a)}),(0,s.jsx)(pf.K,{p:2,mt:4,children:(0,s.jsx)(pz,{editor:r,updateDocSetting:u},a)}),(0,s.jsx)(pf.K,{p:2,mt:4,children:(0,s.jsx)(a2,{},a)})]})]})})]})})}):null};pP.panelPosition="right",pP.panelName="page-setup",pP.minWidth=400;let pL=()=>{let{togglePanel:e,isPanelOpen:t}=eZ(pP);return(0,p.useEffect)(()=>{let t=()=>{e({override:"open"})},n=ly.R.on("openPageSetup",t),i=iL.LF.on(iL.DN.OPEN_PAGE_SETUP,t);return()=>{n(),i()}},[e]),{togglePageSetupPanel:e,isPageSetupPanelOpen:t}};var pN=n(474),pM=n(34095);let pV=(0,i1.Ay)("mod+S"),pG=(0,i1.Ay)("mod+shift+O"),pF=()=>{let e=(0,eE.d)();(0,p.useEffect)(()=>{let t=t=>{pV(t)&&(t.preventDefault(),e.isActive("save_toast")||e({id:"save_toast",title:(0,s.jsx)(c.x6,{id:"4ebE67"}),status:"success",duration:5e3,isClosable:!0}))},n=(0,$.Ei)({requiredCookie:"cardCollapseDebug=true"});return window.addEventListener("keydown",t),()=>{null==n||n(),window.removeEventListener("keydown",t)}},[e])},pW=()=>{let e=(0,eo.CU)(),t=(0,eo.jL)(),{editor:n}=(0,t4.mi)();(0,p.useEffect)(()=>{if(!n)return;let i=i=>{if(!pG(i))return;i.preventDefault();let r=e.getState(),{cardIdMap:s,cardIds:o,memoState:{expandedCards:l}}=r.TipTap,a=(0,el.$i)(r),{total:d,expanded:c,cardIds:u}=o.reduce((e,t)=>{let n=!0===l[t],i=s.parents[t]||[],r=i.length>0,o=!a||i.includes(a);return r&&o&&(e.cardIds.push(t),e.total++,e.expanded+=n?1:0),e},{total:0,expanded:0,cardIds:[]});t((0,el.VO)({disable:!0})),setTimeout(()=>{t((0,el.VO)({disable:!1}))},100);let h=d===c;pU(n,100,!h),(0,sI.wE)(u,h)};return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}},[t,e,n])},pU=(e,t,n)=>{let i;let r=(0,K.H1)("editor");for(let t=200;t>0;t-=25){var s;let n;let o=(0,n6.ls)(e,r.scrollSelector,t);(null===(s=o.pos)||void 0===s?void 0:s.pos)&&(e.state.doc.nodeAt(o.pos.pos)?n=o.pos.pos:e.state.doc.nodeAt(o.pos.inside)&&(n=o.pos.inside),n&&(!i||n>i)&&(i=n))}if(!i){console.warn("[pinPageDuringAnimation] No result for getTopCenterIshNode");return}let o=pB(e,i,n);if(!o){console.warn("[pinPageDuringAnimation] No element for getElementToPin");return}(0,$.BX)({element:o,requiredCookie:"cardCollapseDebug=true"});let l=+new Date,a=r.scroller.scrollTop,d=(0,$.sR)(o,r.scrollSelector),c=a-d,u=c<0?0:Math.max(c+200,0),h=()=>{if(!o)return;let e=(0,$.sR)(o,r.scrollSelector);r.scroller.scroll({top:a+(e-d-u)}),+new Date-l<t&&requestAnimationFrame(h)};h()},pB=(e,t,n)=>{let i=e.state.doc.resolve(t),r=e.state.doc.nodeAt(t),s=(0,n6.jB)(e,t);if(!r){console.warn("[getElementToPin] nodeAt null for $pos",i);return}let o=(0,n6.TK)(i,()=>!0).reverse();for(o.push({start:i.start(i.depth+1),pos:t,depth:i.depth,node:r});o.length;){let t=o.shift();if(!t)continue;let i=(0,ty.jg)(t.node),r=(0,pN.X6)(t.node),l=(0,pM.hj)(t.node),a=i||t.node.isAtom?t.pos:t.start;if(s=(0,n6.jB)(e,a),!n&&i&&t.depth>2||r||l)break}for(;(null==s?void 0:s.offsetParent)===null&&s.parentElement;)s=s.parentElement;return s};var pH=n(39448),pq=n(66766),pK=n(53536),pJ=n(91526),pY=n(19033),pX=n(70288),p$=n(26813);class pZ extends pH.Rv{constructor(e){super({transform:async(t,n)=>{var i;if("data"!==t.event){n.enqueue(t);return}let{content:r}=t.data,s=r.attrs.id,o=r.content.find(e=>"cardAccentLayoutItem"===e.type);o&&(!o.attrs.background||(null===(i=o.attrs.background)||void 0===i?void 0:i.type)===p$.h.NONE)&&(o.attrs.background=(0,uo.tq)(e,s),(0,uo.wJ)(r)),n.enqueue(t)}})}}var pQ=n(10028),p0=n(79893),p1=n(52207);class p6 extends pH.Rv{async loadImage(e){let{editor:t,loadImageId:n,loadImageParams:i,cardIndex:r,cardId:s,node:o,theme:l,interactionId:a}=e,d=await (0,pQ.a)({loadImageId:n,loadImageParams:i,context:{docId:t.gammaDocId,workspaceId:t.gammaOrgId,interactionId:a}});if(this.streamingCardIndex===r){this.loadedImageAttrs[n]=(0,p0.wH)(o,d),"cardAccentLayoutItem"===o.type.name&&"error"===d.loadImageStatus&&(this.loadedImageAttrs[n]={...o.attrs,background:(0,uo.tq)(l,s)});return}requestAnimationFrame(()=>{(0,ul.AU)({editor:t,loadImageId:n,newAttrs:d,node:o,theme:l,cardId:s})})}constructor({editor:e,theme:t,interactionId:n}){super({transform:async(i,r)=>{if("data"!==i.event){r.enqueue(i);return}let{index:s,id:o}=i.data;this.streamingCardIndex=s,(0,p1.L)(i.data.content,i=>{var r;if("text"===i.type)return;let l=ic.bP.fromJSON(e.schema,{type:i.type,attrs:i.attrs}),a=(0,p0.um)(l);if(!a||"queued"!==a.loadImageStatus||!a.loadImageId||!a.loadImageParams)return;let{loadImageId:d,loadImageParams:c}=a;this.imageAttrs[d]||(this.imageAttrs[d]=l.attrs),this.loadImagePromises[d]||(this.loadImagePromises[d]=this.loadImage({editor:e,loadImageId:d,loadImageParams:c,cardIndex:s,cardId:o,theme:t,node:l,interactionId:n})),i.attrs=null!==(r=this.loadedImageAttrs[d])&&void 0!==r?r:this.imageAttrs[d]}),i.data.cardComplete&&this.streamingCardIndex++,r.enqueue(i)}}),this.streamingCardIndex=0,this.imageAttrs={},this.loadedImageAttrs={},this.loadImagePromises={}}}var p2=n(54268);let p5=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(0===t.length)throw Error("Cannot have empty path");let r=[...t],s={...e},o=s,l=0;for(;t.length>0;){if(!o.content)throw Error("Can't surround a node with children");let e=r.shift();if(0===r.length){let t=o.content.slice(0,e);t.push(n),o.content=t;break}if(l<i){let t=o.content.slice(0);t.splice(e,1,{...t[e]}),o.content=t,o=o.content[e]}else{let t=o.content.slice(0,e+1);t.splice(e,1,{...t[e]}),o.content=t,o=o.content[e]}l++}return s};class p3 extends pH.Rv{constructor(e){super({transform:async(t,n)=>{if("done"===t.event||"cancel"===t.event){n.enqueue(t);return}let i=(0,eo.KA)(),r=null;for(let s of function* e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if("text"===t.type){let e=t.text.split(" ");for(let t=0;t<e.length;t++){let s={type:"text",text:e.slice(0,t+1).join(" ")};yield p5(i,r,s,n)}return}if(!t.content){yield p5(i,r,t,n);return}let s=0;for(let o of t.content){for(let t of e(o,n,i,[...r,s]))yield t;s++}}(t.data.content,1)){if(!s)continue;r&&n.enqueue(r),r={id:t.id,event:"data",data:{...t.data,content:s,cardComplete:!1}};let o=(0,es.qy)(e)(i.getState());await p4(o)}r&&n.enqueue({...r,data:{...r.data,cardComplete:!0}})}}),this.index=0,this.startTime=performance.now()}}let p4=e=>new Promise(t=>p2.wg(t,e));var p8=n(13432);let p7=e=>{let{enabled:t,type:n}=e,i=(0,p8.O2)(n),r=(0,p.useRef)(!0);(0,p.useEffect)(()=>{if(!t)return;let e=i.scroller;if(!e)return;let n=()=>{i.isAtBottom(40)?r.current=!0:r.current=!1},s=()=>{r.current=!1};return e.addEventListener("wheel",n,{passive:!0}),e.addEventListener("touchend",n,{passive:!0}),e.addEventListener("touchstart",s,{passive:!0}),e.addEventListener("touchmove",s,{passive:!0}),()=>{e.removeEventListener("wheel",n),e.removeEventListener("touchend",n),e.removeEventListener("touchstart",s),e.removeEventListener("touchmove",s)}},[i,t]);let s=(0,p.useCallback)(()=>{r.current&&(null==i||i.scrollToBottom({behavior:"auto"}))},[i]);return(0,Z.wb)(s,100)};var p9=n(88203);let me="[CONTENT_FILTER]",mt=()=>(0,s.jsxs)(i7.F,{status:"error",variant:"solid",children:[(0,s.jsx)(sB._,{}),(0,s.jsx)(re.T,{children:(0,s.jsxs)(D.B,{children:[(0,s.jsx)("strong",{children:(0,s.jsx)(c.x6,{id:"7g5s/N"})}),(0,s.jsx)(z.E,{children:(0,s.jsx)(c.x6,{id:"Xp43Ei"})})]})})]}),mn=()=>(0,s.jsxs)(i7.F,{variant:"light",children:[(0,s.jsx)(t8.y,{size:"sm",mr:2}),(0,s.jsxs)(re.T,{children:[(0,s.jsx)("strong",{children:(0,s.jsx)(c.x6,{id:"n2cF1o"})})," ",(0,s.jsx)(c.x6,{id:"BFGwQA"})]})]}),mi=e=>{let{editor:t,content:n,cardId:i,cardIndex:r,cardComplete:s}=e,o=(0,tj.xe)(t.state.doc,e=>(0,xQ.jg)(e))[0],l=(0,tj.xe)(t.state.doc,e=>(0,xQ.jg)(e)&&e.attrs.id===i)[0];if(!o)throw Error("Doc does not have a first card");let a=l?{from:l.pos,to:l.pos+l.node.nodeSize}:0===r?{from:o.pos,to:o.pos+o.node.nodeSize}:t.state.doc.nodeSize-3;l&&(null==l?void 0:l.node.attrs.fontScale)&&(null==n?void 0:n.attrs)&&(n.attrs.fontScale=l.node.attrs.fontScale);try{if(t.commands.insertContentAt(a,n,{updateSelection:0===r}),s&&0===r){let e=(0,xI.s)(t.state.doc.resolve(o.pos));e&&t.commands.command(t=>{let{tr:n}=t;return n.setSelection(e),!0})}}catch(e){console.warn("[useCreateFromStream] ERROR updating card"),console.warn(e)}},mr=e=>{let{docId:t,aiOptions:n,store:i,generateInfo:r,editor:s,lazyImages:o}=e;if(!r.lastEventId||!r.streamId||!r.interactionId){console.error("Trying to resume stream for doc (id=".concat(t,") without lastEventId or streamId or interactionId"),{lastEventId:r.lastEventId,streamId:r.streamId,interactionId:r.interactionId});return}pJ.B.trackRequestSent(i,{interface:"wizard",streaming:!0,interactionId:r.interactionId,isResuming:!0});let{stream:l}=(0,pK.yf)({interactionId:r.interactionId,lastEventId:r.lastEventId,streamId:r.streamId,retries:3}),a={preserveLayouts:!!n.preserveLayouts,imageOptions:n.imageOptions||{},docFormatKey:(0,r3.IZ)((0,r3.lI)(s)).formatType,lazyImages:o,theme:(0,el.SJ)(i.getState())};return(0,pq.f6)({stream:l,docId:t,interactionId:r.interactionId,lastCompletedCardId:r.lastCompletedCardId,lastCompletedCardIndex:r.lastCompletedCardIndex,options:a,store:i})},ms=(e,t)=>{let n=(0,eo.GV)(el.SJ),i=(0,eo.CU)(),r=(0,eo.jL)(),s=(0,eo.GV)(el.aQ),o=(0,b.u)("streamResumingEnabled"),l=(0,b.u)("generatorLazyImages"),a=(0,p.useRef)(!1),d=(0,b.u)("generatorLazyImages"),{isStreaming:c,onStreamData:u,onStreamDone:h,onStreamError:x,onStreamStart:m,onAbortStream:f}=mo({docId:e}),g=p7({enabled:c,type:"editor"}),j=(0,p.useCallback)(async r=>{let s,o;if(!t)return;m({editor:t});let l=ml({streamResponse:r,editor:t,store:i,theme:n,docId:e}).getReader();try{for(;!(s=await l.read()).done;)if(s.value){if(a.current){console.log("[AIStream] has aborted -- no longer reading stream");break}o=s.value,"data"===o.event&&(u({value:o.data,editor:t,streamResponse:r}),g())}}catch(e){x({err:e,streamResponse:r,editor:t});return}a.current||(o&&"done"!==o.event&&console.error('[AIStream] incomplete stream: last message received is not `event="done"`',{lastMessage:o}),h({editor:t,streamResponse:r}))},[e,t,u,h,x,m,g,i,n]);(0,eK.V)(()=>{if(!t||!s||c||!e)return;let n=(0,es.A0)(e)(i.getState()),r=(0,es.kg)(i.getState());if(n){"running"===n.status&&j(n);return}if(!o||r)return;let{generateInfo:l,generateStatus:a,aiOptions:u}=(0,r3.lI)(t);if("streaming"!==a){if(new URLSearchParams(window.location.search).get("restream")){let n=mr({docId:e,aiOptions:u,generateInfo:{interactionId:l.interactionId,streamId:l.streamId,lastEventId:"0",lastCompletedCardId:null,lastCompletedCardIndex:null},editor:t,store:i,lazyImages:d});n&&j(n)}return}let h=(0,el.Jo)(i.getState());if((null==h?void 0:h.createdTime)&&Date.now()-new Date(h.createdTime).getTime()>36e5){t.commands.updateAttributesAtPos(0,{generateStatus:"done"});return}let x=mr({docId:e,generateInfo:l,editor:t,store:i,aiOptions:u,lazyImages:d});x&&j(x)},[e,t,i,s,m,x,u,h,o,j,c,l,d],[t,s]),(0,p.useEffect)(()=>()=>{let n=(0,es.A0)(e)(i.getState());t&&n&&"running"===n.status&&(a.current=!0,f({editor:t,streamResponse:n}))},[r,e,f,t,i])},mo=e=>{let{docId:t}=e,n=(0,eE.d)(),i=(0,eo.jL)(),r=(0,eo.CU)(),o=(0,b.u)("aiWizardUploadImages"),[l,a]=(0,p.useState)(!1),d=(0,b.u)("debugLogging"),u=(0,p.useRef)(null);(0,p.useEffect)(()=>()=>{u.current&&(n.close(u.current),u.current=null)},[n]);let h=(0,p.useCallback)(()=>{u.current||(u.current=n({id:"ai-generating-toast",isClosable:!1,render:()=>mn(),position:"top",duration:null}))},[n]),x=(0,p.useCallback)(e=>{let{editor:t}=e;t&&(a(!0),t.commands.setAIGenerationRunning(!0),h())},[h]),m=(0,p.useCallback)(e=>{let{editor:t,value:n,streamResponse:i}=e;if(!i||!t)return;let{id:r,cardComplete:s,index:l,content:a}=n;mi({editor:t,content:a,cardId:r,cardIndex:l,cardComplete:s}),s&&o&&(0,ul.Yp)({editor:t,cardId:r})},[o]),f=(0,p.useCallback)(e=>{var t,o,l;let{editor:h,streamResponse:x}=e;if(!h||!x)return;let p=x.id,{aiOptions:m}=(0,r3.lI)(h);a(!1),h.commands.setAIGenerationRunning(!1),h.commands.updateAttributesAtPos(0,{generateStatus:"done"});let f=(0,pX.TV)(),g=f.debugInfo();d&&console.log("[AIStream] ImageStore DEBUG",{imageStore:f,debug:g}),(0,pX.O3)(),i((0,es.m7)({id:p,status:"complete"}));let j=(0,p9.b)(h),v=new TextEncoder().encode(JSON.stringify(h.state.doc.toJSON())),b=j?j/v.byteLength:void 0;pJ.B.trackStreamComplete(r,p,{imageProvider:null===(t=m.imageOptions)||void 0===t?void 0:t.provider,numImageSearches:g.requests.length,imageSearches:g.requests,ydocToJsonRatio:b});let y=(0,el.Jo)(r.getState());y&&(null===(o=y.docGenerateInput)||void 0===o?void 0:o.id)?(0,tJ.w)((null===(l=m.imageOptions)||void 0===l?void 0:l.provider)==="aiGenerated"?"generateV2WithImages":"generateV2",y.organization,p):(0,tJ.w)("wizardCreation",null==y?void 0:y.organization,p),u.current&&n.update(u.current,{title:(0,s.jsx)(c.x6,{id:"nm7VEQ",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}}),status:"success",position:"top",duration:3e3,isClosable:!0})},[i,d,r,n]);return{isStreaming:l,onStreamStart:x,onStreamData:m,onStreamError:(0,p.useCallback)(e=>{let{err:o,editor:l,streamResponse:h}=e,x=h.id,{errorMessage:p,errorCode:m}=(0,pY._D)(o);console.error("StreamError: ",{interactionId:x,errorMessage:p,errorCode:m,stack:o.stack}),d&&console.log("StreamError: (".concat(m,") - ").concat(p),o.stack),a(!1),l.commands.setAIGenerationRunning(!1),l.commands.updateAttributesAtPos(0,{generateStatus:"done"}),(0,pX.O3)(),i((0,es.m7)({id:x,status:"error"}));let f=(0,es.U7)(x)(r.getState());if(f){let{latency:e,...n}=f;(0,tq.tB)({...n,errorName:"StreamError",errorMessage:p,errorCode:m,outputMessage:"",latency:e||performance.now()-n.startTime,isResuming:h.isResuming,docId:t})}u.current&&(p===me?n.update(u.current,{render:mt,position:"top",duration:null,isClosable:!0}):n.update(u.current,{title:(0,s.jsx)(c.x6,{id:"sbsGk/"}),status:"error",position:"top",duration:null,isClosable:!0}))},[i,t,d,r,n]),onStreamDone:f,onAbortStream:(0,p.useCallback)(e=>{let{editor:t,streamResponse:n}=e,s=n.id;a(!1),t.commands.setAIGenerationRunning(!1),pJ.B.trackStreamAbort(r,{interactionId:s,abortReason:"leave-editor"}),i((0,es.l0)({id:s}))},[i,r])}},ml=e=>{let{streamResponse:t,editor:n,store:i,docId:r,theme:s}=e,{id:o,stream:l}=t,a=!0;return l.pipeThrough(new pZ(s)).pipeThrough(new p3(t.id)).pipeThrough(new p6({editor:n,theme:s,interactionId:o})).pipeThrough(new pH.Rv({transform(e,t){if("done"===e.event&&"content_filter"===e.finishReason){t.error(Error(me));return}t.enqueue(e)}})).pipeThrough((0,pq.po)(e=>{a&&"data"===e.event&&(pJ.B.trackStreamStart(i,{interactionId:o,docId:r}),t.isResuming&&(n.commands.deleteCardsAfter(t.lastCompletedCardId||null),t.lastCompletedCardId&&(console.log("[AIStream] refetchLazyImages",t.lastCompletedCardId),(0,ul.Gc)({editor:n,lastCompletedCardId:t.lastCompletedCardId,theme:s}))),a=!1),"data"===e.event&&e.data.cardComplete&&n.commands.updateNestedAttributesAtPos(0,{generateInfo:{lastEventId:e.id,lastCompletedCardId:e.data.id,lastCompletedCardIndex:e.data.index}})}))},ma="doc_archived_warning",md=(e,t)=>{let n=(0,eE.d)(),[i]=(0,nw.u6W)(),[r]=(0,nw.BL9)(),o=null==e?void 0:e.site;(0,p.useEffect)(()=>()=>{n.close(ma)},[]),(0,p.useEffect)(()=>{if(o&&!o.archived){n.close(ma);return}!e||e.site||e.archived||n.close(ma)});let l=(0,p.useCallback)(async()=>{if((null==o?void 0:o.id)&&await r({variables:{id:o.id},optimisticResponse:{unarchiveSite:{id:o.id,__typename:"Site"}}}),!(null==e?void 0:e.id))return;let t={id:e.id};await i({variables:t,optimisticResponse:{unarchiveDoc:{...t,archived:!1,__typename:"Doc"}}}),n({title:(0,s.jsx)(c.x6,{id:"o8va6N"}),status:"success",position:"top",isClosable:!0,duration:5e3})},[null==e?void 0:e.id,n,null==o?void 0:o.id,i,r]);(0,p.useEffect)(()=>{e&&t===t3.i.COLLABORATIVE&&((null==o?void 0:o.archived)||(null==e?void 0:e.archived))&&!n.isActive(ma)&&n({id:ma,title:(0,s.jsxs)(z.E,{"data-testid":"trash-confirmation-toast",children:[(0,s.jsx)(c.x6,{id:"fkHPZu"})," ",(0,s.jsx)(nT.N,{textDecoration:"underline",onClick:l,children:(0,s.jsx)(c.x6,{id:"7wfwc0"})})]}),status:"warning",position:"top",isClosable:!1,duration:null})},[e,t,l,o,n,i])};var mc=n(33131),mu=n(43006),mh=n(50923);let mx=e=>{let{launchIntercomUI:t}=e;return function(e){let{onClose:n}=e;return(0,s.jsxs)(o.s,{p:4,color:"white",bg:"yellow.500",borderRadius:"md",alignItems:"center",position:"relative",children:[(0,s.jsx)(ek.J,{size:"sm",onClick:n,position:"absolute",insetEnd:1,top:1}),(0,s.jsx)(F.g,{icon:c9.lEd,size:"2x"}),(0,s.jsxs)(o.s,{direction:"column",ml:3,children:[(0,s.jsx)(l.az,{children:(0,s.jsx)(z.E,{lineHeight:6,fontSize:"sm",children:(0,s.jsx)(c.x6,{id:"4YARE9",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP},components:{0:(0,s.jsx)("b",{})}})})}),(0,s.jsx)(z.E,{lineHeight:6,fontSize:"sm",pt:2,children:(0,s.jsx)(c.x6,{id:"Enj8Kw",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP},components:{0:(0,s.jsx)(N.$,{as:nT.N,variant:"link",textDecoration:"underline",fontSize:"sm",onClick:()=>{t()},colorScheme:"white"})}})})]})]})}},mp="no-snapshot-warning",mm=(e,t)=>{let n=(0,mu.k)(),i=(0,eE.d)(),r=(0,mh.st)(),s=null==e?void 0:e.id,o=t===t3.i.COLLABORATIVE&&(null==e?void 0:e.currentSnapshotId)===null;(0,p.useEffect)(()=>{!o||i.isActive(mp)||(i({id:mp,render:mx({launchIntercomUI:n}),duration:null,position:"top",isClosable:!0}),null==r||r.track(J.ng.NO_CURRENT_SNAPSHOT,{docId:s}))},[r,s,n,o,i])},mf=e=>{let{togglePagesPanel:t,isPagesPanelOpen:n}=e,i=(0,eo.jL)(),r=(0,eo.CU)(),{asPath:s}=(0,tn.useRouter)(),o=(0,eo.GV)(ti.og),l=(0,p.useRef)(n),a=(0,tu.jv)(s),d=(0,p.useRef)(t);d.current=t,(0,sE.w)(()=>{let e=(0,eY.iZ)("pages")(r.getState()),t=d.current;a&&e?(t({override:"closed",disableTransition:!1}),l.current=!0):a||t({override:l.current?"open":"closed",disableTransition:!1})},[a]),(0,p.useEffect)(()=>{let e=a?(0,C.Xb)()?"mobile":o||"desktop":null;i((0,ti.ey)({previewSize:e}))},[i,a,o])};var mg=n(95372);let mj=e=>{let t=(0,mg.m)(),n=(0,eo.GV)((0,aZ.Jn)(e));(0,p.useEffect)(()=>{n&&t.cache.updateQuery({query:rA.iVk,variables:{id:e}},e=>{if(!(null==e?void 0:e.doc))return e;let t=e.doc;return t.titleEdited?e:{doc:{...t,title:n}}})},[n,t,e])};var mv=n(33684);let mb=(e,t)=>{let{isUnauthorized:n}=(0,tT.m)();(0,J.JQ)(i=>{!0!==n&&void 0!==n&&(i.track(J.VV.DOC_VIEWED,{doc_id:e}),t===t3.i.EXAMPLE_STATIC&&i.track(J.VV.EXAMPLE_VIEWED,{doc_id:e}))},[e,t,n]),(0,mv.t)();let i=(0,b.u)("realUserMetrics"),r=t===t3.i.COLLABORATIVE&&i,s=(0,b.u)("rumKeystrokeSampleRate");(0,sS.Br)(r,s)},my=e=>{let t=(0,m.wA)(),n=(0,J.st)();(0,p.useEffect)(()=>{let i;let r=()=>{let r=(0,eo.KA)().getState();i=(0,el.vy)(r),(0,sI.nO)(e),t((0,el.B6)({isEditingDisabled:!0})),null==n||n.trackDocEvent(J.VV.DOC_PRINTED)},s=()=>{t((0,el.B6)({isEditingDisabled:!1})),t((0,el.x0)({expandedCardsMap:i}))};return window.addEventListener("beforeprint",r),window.addEventListener("afterprint",s),()=>{window.removeEventListener("beforeprint",r),window.removeEventListener("afterprint",s)}},[t,e,n])},mC="doc-root",mw=(0,p.memo)(function(e){let{isConnected:t}=e;return(0,s.jsx)(o.s,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",children:t?(0,s.jsx)(c.x6,{id:"svObPT",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}}):(0,s.jsx)(eq.r,{isConnected:!1,description:(0,s.jsx)(c.x6,{id:"BBDdvg",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}}),size:"lg",bg:"none"})})}),mE=e=>{let{doc:t,user:n,docEditorType:i,editor:r,editorWrapperDiv:o,aspectRatioValue:l}=e,[a,d]=(0,p.useState)(!1),c=(0,j.h6)(t,n),u=(0,m.d4)(el.wC),h=i===t3.i.COLLABORATIVE&&!c,x=h&&u===tC.w.SLIDE_VIEW,f=i===t3.i.COLLABORATIVE&&(!n||u===tC.w.DOC_PREVIEW);return(0,p.useEffect)(()=>v.R.on("isInOnboardingChecklistPresentMode",e=>{d(e)}),[]),f?(0,s.jsx)(sl.d,{docWorkspace:null==t?void 0:t.organization}):x?(0,s.jsx)(eB,{forceShow:a}):h?(0,s.jsx)(it,{editor:r,editorWrapperDiv:o,aspectRatioValue:l}):null},mk=(0,t4.VL)(e=>{var t;let{docEditorType:n}=e,i=(0,eo.jL)(),{docId:r,isUnauthorized:c,passwordRequired:h,setCollaborativeEditorInstance:m,editor:v}=(0,t4.mi)(),y=(0,eo.GV)(nf.Jo),C=(0,eo.GV)(el.Uu),E=(0,b.u)("scaleToFit"),k="fluid"!==C.cardDimensions?d.VM[C.cardDimensions]:void 0,S=(0,eo.GV)(ta.Gd),I=(0,eo.GV)(ta.df),{isConnected:T}=(0,g.u)(),A=(0,nS.mm)(null==y?void 0:y.id),[_,R]=(0,p.useState)(null),O=(0,eo.GV)(ti.og),D=null!==O,z=(0,eo.GV)(el.wC),P=(0,eo.GV)(el.nD),{user:L}=(0,X.ur)();md(y,n),mm(y,n),ms(r,_===r?v:void 0),mj(r),mb(r,n),tc(v,n===t3.i.COLLABORATIVE),(0,mc.K)(),pF();let{editorAnimationsClass:N,editorAnimationsCSSVars:M}=(0,tx.O)({editor:v,scrollingParentSelector:".".concat(mC),disabledOverride:D});pW(),dw(v,".".concat(mC)),dR(v),t5(),my(v),(0,j.tr)(y,n===t3.i.COLLABORATIVE);let V=(0,p.useRef)(null),G=(0,Y.rd)(),F=(0,p.useMemo)(()=>(0,tp.Vx)(G),[G]),W=ng();console.debug("%c[DocEditorComponent] RENDER - ".concat(r),"background-color: gold");let{toggleCommentsPanel:U,isCommentsPanelOpen:B}=i0(),{togglePagesPanel:H,isPagesPanelOpen:q}=dg(),{isDesignPartnerPanelOpen:K}=rm();pL(),t6(),(0,p.useEffect)(()=>()=>{i((0,eY.fi)()),i((0,ta.cL)())},[i]),mf({togglePagesPanel:H,isPagesPanelOpen:q});let J=(0,tu.dv)(S)&&(null==S?void 0:S.navEnabled)&&!D&&z!==tC.w.SLIDE_VIEW,$=(0,p.useCallback)(()=>!!(v&&v.state.selection.empty),[v]),{leftPanelLifecycle:Z,rightPanelLifecycle:Q,globalPanelLifecycle:ee}=eQ(),et=(0,eH.nk)(null==y?void 0:y.organization),en=(0,eD.E)(null==y?void 0:y.title,et),ei=u.Ru._({id:"X6YCwz"}),er=u.Ru._({id:"abr3hR"}),es=nj(),ea=(0,p.useMemo)(()=>{let e=J?{"--doc-padding-top":tm.D0}:void 0;return{...F,...es,...e}},[F,es,J]),ed=(null==y?void 0:y.disabled)||(null==y?void 0:y.archived)||(null==S?void 0:S.archived)||D,ec=!(0,w.fS)(window.location.href),eu=D&&I?(0,s.jsx)(tr,{docId:r}):ec&&v?(0,s.jsx)(he,{isDark:G,editor:v,scrollingParentSelector:".".concat(mC),editorWrapperEl:V.current,docEditorType:n,isPagesPanelOpen:q,togglePagesPanel:H,isCommentsPanelOpen:B,toggleCommentsPanel:U}):null,eh=(eu?49:0)+((null==y?void 0:y.disabled)?63:0),ex=P&&E,ep=null==L?void 0:null===(t=L.settings)||void 0===t?void 0:t.needsEditorOnboarding;return(0,s.jsx)(nS.Z0.Provider,{value:A,children:(0,s.jsx)(f.UU,{children:(0,s.jsxs)(o.s,{direction:"column",h:"100%",children:[(0,s.jsx)(rg,{disabled:null==y?void 0:y.disabled,docId:r}),(0,s.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,s.jsx)(x(),{children:(0,s.jsx)("title",{children:en})}),ex&&(0,s.jsx)(dV,{editor:v}),(0,s.jsx)(iz,{doc:y,editor:v}),(0,s.jsx)(ts.X2,{isEnabledFn:$}),eu,h?(0,s.jsx)(dC,{docId:r}):c?(0,s.jsx)(mw,{isConnected:T}):(0,s.jsxs)(o.s,{id:"doc-main",direction:"row",w:"100%",h:"calc(100% - ".concat(eh,"px)"),sx:{"--editor-padding-top":"".concat(eh,"px")},"data-testid":"doc-editor-root",ref:V,children:[ep&&P&&(0,s.jsx)(eR,{docId:null==v?void 0:v.gammaDocId,editor:v}),(0,s.jsx)(e9,{panelLifecycle:Z}),(0,s.jsx)(o.s,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:(0,s.jsxs)(l.az,{flex:"1",overflowY:"auto",overflowX:"hidden",pos:"relative",minWidth:"0",h:"100%",className:(0,a.cx)(mC,N,K&&"design-partner-panel-open"),style:{"--ai-editing-label":"'".concat(ei,"'"),"--ai-generating-label":"'".concat(er,"'"),...M},sx:ea,children:[D&&(0,s.jsx)(ny,{loading:r!==_,docId:r,editor:v,previewSize:O},"".concat(r,"__preview-editor")),n===t3.i.PUBLIC_STATIC?(0,s.jsx)(dT,{docId:r,snapshotId:null==y?void 0:y.currentSnapshotId,scrollingParentSelector:".".concat(mC),onCreate:m}):n===t3.i.EXAMPLE_STATIC?(0,s.jsx)(sc,{docId:r,snapshotId:null==y?void 0:y.currentSnapshotId,scrollingParentSelector:".".concat(mC),onCreate:m}):(0,s.jsxs)(eJ.Y.Provider,{value:ee,children:[(0,s.jsx)(th.H2,{doc:y,docId:r,readOnly:ed,hideForPreview:D,onCreate:e=>{m(e),R(e.gammaDocId),e.on("destroy",()=>{R(null)})},scrollingParentSelector:".".concat(mC),animationsExtensionEnabled:!0},"".concat(r,"__collaborative-editor")),v&&(0,s.jsx)(tk,{editor:v})]}),J&&(0,s.jsx)(nk,{}),!D&&(0,s.jsx)(r9,{editor:v},r)]})}),z===tC.w.SLIDE_VIEW&&(0,s.jsx)(hN,{editor:v}),(0,s.jsx)(e7,{panelLifecycle:Q}),(0,s.jsx)(tf.A,{editorId:"main",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(mE,{doc:y,user:L,docEditorType:n,editor:v,editorWrapperDiv:V.current,aspectRatioValue:k}),W&&(0,s.jsx)(pp,{})]})})]})]})})})});var mS=n(46882),mI=n(92712),mT=n(88085);let mA=e=>{let{theme:t,onClick:n,isChecked:i,index:r,startIndex:o}=e;return(0,s.jsxs)(l.az,{gridColumnStart:r+1-o,display:o>r?"none":"block",gridRow:1,as:mI.Q,p:2,transition:"all 0.2s ease-in-out",bgColor:i?"trueblue.100":"linen.50",textAlign:"left",tabIndex:0,borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_focus:{boxShadow:i?void 0:"outline"},outline:"none",onClick:n,_hover:{bgColor:i?"trueblue.100":"gray.100"},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&n()},"data-theme-id":t.id,"data-testid":i?"current-theme-preview":void 0,cursor:"pointer",children:[(0,s.jsx)(mT.q,{theme:t}),(0,s.jsxs)(D.B,{direction:"row",spacing:1,pt:1,children:[i&&(0,s.jsx)(iS.S,{w:3,h:"auto",mr:1,color:"trueblue.700"}),(0,s.jsx)(z.E,{fontSize:"sm",noOfLines:1,"data-testid":"theme-name",color:i?"trueblue.700":void 0,children:t.name})]})]})};mA.displayName="DemoDocThemePreview";let m_="linen.50",mR=e=>{let{templateTheme:t,setTheme:i,currentThemeId:r}=e,l=(0,m.d4)(el.wC)===tC.w.SLIDE_VIEW,[a,d]=(0,p.useState)([]),[u,h]=(0,p.useState)(!1),[x,f]=(0,p.useState)(0),g=(0,e2.h5)({base:3,md:4,lg:5})||3;(0,p.useEffect)(()=>{n.e(8116).then(n.bind(n,8116)).then(e=>{d(e.GLOBAL_THEMES)})},[]);let j=[...t?[t]:[],...a.filter(e=>e.id!==(null==t?void 0:t.id))],v=(0,p.useCallback)(e=>{1===e?f(e=>e+1):f(e=>e-1)},[]);return l?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(I.Z,{children:(0,s.jsxs)(o.s,{w:"100%",position:"absolute",bottom:0,left:0,bgColor:m_,zIndex:"sticky",direction:"column",borderTop:"3px solid var(--chakra-colors-trueblue-500)",minH:12,p:2,justifyContent:"center",children:[(0,s.jsx)(o.s,{alignItems:"flex-end",justify:"flex-end",children:(0,s.jsx)(N.$,{variant:"ghost",size:"sm",rightIcon:(0,s.jsx)(F.g,{icon:u?G.tdl:G.GF6}),onClick:()=>h(e=>!e),children:u?(0,s.jsx)(c.x6,{id:"yz7wBu"}):(0,s.jsx)(c.x6,{id:"x6tIe+"})})}),(0,s.jsx)(o.s,{justify:"flex-start",align:"flex-start",bgColor:m_,w:"100%",children:u&&(0,s.jsxs)(D.B,{direction:"row",align:"center",justify:"center",w:"100%",children:[(0,s.jsx)(M.K,{"aria-label":"Left",onClick:()=>v(-1),variant:"ghost",isDisabled:0===x,icon:(0,s.jsx)(F.g,{icon:G.Uec})}),(0,s.jsx)(mS.x,{w:"100%",flex:1,overflow:"hidden",padding:2,transition:"all 0.2s ease-in-out",templateColumns:["repeat(".concat(g,", calc(100% / ").concat(g," - 1em))")],gap:"0 1em",bgColor:m_,children:j.map((e,t)=>(0,s.jsx)(mA,{index:t,startIndex:x,isChecked:e.id===r,theme:e,onClick:()=>{i(e)}},e.id))}),(0,s.jsx)(M.K,{"aria-label":"Right",variant:"ghost",isDisabled:x+g>j.length,onClick:()=>v(1),icon:(0,s.jsx)(F.g,{icon:G.vmR})})]})})]})})};var mO=n(30504);let mD=[{description:(0,s.jsx)(c.x6,{id:"gtWy3j"}),shortcut:["",""]},{description:(0,s.jsx)(c.x6,{id:"UCxK2S"}),shortcut:["",""]},{description:(0,s.jsx)(c.x6,{id:"IkakN2"}),shortcut:"Esc"},{description:(0,s.jsx)(c.x6,{id:"CgmvBu"}),shortcut:"S"},{description:(0,s.jsx)(c.x6,{id:"rEj/lx"}),shortcut:"Enter"},{description:(0,s.jsx)(c.x6,{id:"dQU33K"}),shortcut:"Mod+Shift+O"},{description:(0,s.jsx)(c.x6,{id:"K0Oq/D"}),shortcut:"R"}],mz=e=>{let{editorWrapperEl:t,scrollingParentSelector:n}=e,{enterSlideView:i,exitSlideView:r,setExitedFullscreenByClick:o,isFullscreen:l,enterFullscreen:a,exitFullscreen:d}=sL({editorWrapperEl:t,scrollingParentSelector:n}),h=(0,eo.GV)(el.wC),x=(0,p.useRef)(h);return(0,p.useEffect)(()=>{x.current=h},[h]),(0,s.jsxs)(te.z,{children:[(0,s.jsxs)(tt.e,{isAttached:!0,size:"sm",children:[(0,s.jsx)(W.Tz,{label:h===tC.w.DOC_VIEW?(0,s.jsx)(c.x6,{id:"ek5OwP",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}}):(0,s.jsx)(c.x6,{id:"43JI0J",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}}),children:(0,s.jsx)(N.$,{variant:h===tC.w.DOC_VIEW?"solid":"plain",cursor:h===tC.w.SLIDE_VIEW?"pointer":"auto",onClick:()=>{h===tC.w.SLIDE_VIEW&&r()},leftIcon:(0,s.jsx)(F.g,{icon:G.h8M}),children:(0,s.jsx)(c.x6,{id:"7Zdnlq"})})}),(0,s.jsx)(W.Tz,{label:h===tC.w.SLIDE_VIEW?(0,s.jsx)(c.x6,{id:"Zfr5aa",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}}):(0,s.jsx)(c.x6,{id:"rK6Cev",values:{GAMMA_ARTIFACT_PROPER_NOUN:eu.TP}}),children:(0,s.jsx)(N.$,{variant:h===tC.w.SLIDE_VIEW?"solid":"plain",cursor:h===tC.w.DOC_VIEW?"pointer":"auto",onClick:()=>{h===tC.w.DOC_VIEW&&i({fullscreen:!1})},leftIcon:(0,s.jsx)(F.g,{icon:G.UoT}),children:(0,s.jsx)(c.x6,{id:"FOoDGS"})})})]}),h===tC.w.SLIDE_VIEW&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sM.c,{orientation:"vertical"}),(0,s.jsx)(W.Tz,{label:l?(0,s.jsx)(c.x6,{id:"IkOhTI"}):(0,s.jsx)(c.x6,{id:"q8ARHN"}),children:(0,s.jsx)(M.K,{size:"sm","aria-label":l?u.Ru._({id:"IkOhTI"}):u.Ru._({id:"q8ARHN"}),borderRadius:"md",icon:(0,s.jsx)(F.g,{icon:l?G.gr3:G.oZK}),onClick:l?()=>{o(!0),d()}:a})}),(0,s.jsxs)(T.A,{children:[(0,s.jsx)(ei.W,{children:(0,s.jsx)(N.$,{size:"sm",variant:"plain",fontWeight:"normal",children:(0,s.jsx)(c.x6,{id:"77Emn0"})})}),(0,s.jsxs)(R.h,{border:"1px solid #eee !important",children:[(0,s.jsx)(cb.R,{}),(0,s.jsx)(nI.q,{}),(0,s.jsx)(O.e,{children:(0,s.jsx)(mO.c,{list:mD})})]})]})]})]})},mP=(0,p.memo)(function(e){let{scrollingParentSelector:t,editorWrapperEl:n}=e;(0,eo.GV)(nf.Jo);let i=(0,p.useRef)(null);return(0,s.jsx)(o.s,{ref:i,bg:"white",borderBottom:"3px solid var(--chakra-colors-trueblue-600)",position:"absolute",zIndex:"overlay",top:0,left:0,right:0,p:2,alignItems:"flex-start",justifyContent:"flex-start",pr:6,children:(0,s.jsx)(o.s,{direction:"column",w:"100%",children:(0,s.jsx)(mz,{editorWrapperEl:n,scrollingParentSelector:t})})})});var mL=n(45173),mN=n(41259);let mM=e=>{let{toggleToCPanel:t,initializeToCPanel:n,isToCPanelOpen:i}=e,{breakpoints:{xl:r}}=(0,mN.D)(),s=(0,eo.GV)(el.wC),[o,l]=(0,p.useState)(s!==tC.w.SLIDE_VIEW),[a,d]=(0,p.useState)(!1),c=(0,m.wA)();(0,tQ.Vg)(()=>{n()},[r,t,n,c],[]),(0,tQ.Vg)(()=>{s===tC.w.SLIDE_VIEW?(l(i),t({disableTransition:!1,override:"closed"})):a&&s===tC.w.DOC_VIEW&&t({disableTransition:!1,override:o?"open":"closed"})},[t,i,o,s,a],[s])},mV="doc-root",mG=(0,t4.VL)(e=>{var t;let{docEditorType:n=t3.i.COLLABORATIVE}=e,{docId:i,setCollaborativeEditorInstance:r,editor:a}=(0,t4.mi)(),d=(0,eo.GV)(nf.Jo);mb(i,n),(0,mc.K)(),pF(),pW(),dw(a,".".concat(mV)),dR(a),t5(),my(a),(0,j.tr)(d,n===t3.i.COLLABORATIVE);let c=(0,p.useRef)(null),u=null==d?void 0:d.theme,[h,m]=(0,p.useState)(()=>u),f=(0,eo.jL)(),g=(0,p.useRef)(!1),{data:v}=(0,nw.YDl)({variables:{docId:i,snapshotId:null==d?void 0:d.currentSnapshotId},skip:!(null==d?void 0:d.currentSnapshotId)}),b=null==v?void 0:null===(t=v.snapshot)||void 0===t?void 0:t.content.default;console.debug("%c[DemoDocEditorComponent] RENDER - ".concat(i),"background-color: gold"),(0,p.useEffect)(()=>{u&&!g.current&&(m(u),g.current=!0)},[u]),(0,p.useEffect)(()=>{if(!a)return;let e=null==h?void 0:h.config.accentBackgrounds;if(!e||0===e.length){b&&a.commands.setContent(b);return}a.commands.updateThemeAccentImages(e)},[a,h,b]);let{togglePanel:y,isPanelOpen:C,initPanel:w}=eZ(mL.g);mM({toggleToCPanel:y,isToCPanelOpen:C,initializeToCPanel:w}),(0,p.useEffect)(()=>()=>{f((0,eY.fi)())},[f]);let{leftPanelLifecycle:E}=eQ();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,s.jsx)(x(),{children:(0,s.jsxs)("title",{children:["".concat(d?(0,lj.B)(d.title)+" | ":""),"Gamma"]})}),(0,s.jsxs)(o.s,{id:"doc-main",direction:"row",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:c,children:[(0,s.jsx)(e9,{panelLifecycle:E}),(0,s.jsxs)(o.s,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:[a&&(0,s.jsx)(mP,{scrollingParentSelector:".".concat(mV),editorWrapperEl:c.current,setTheme:m,currentThemeId:(null==h?void 0:h.id)||(null==u?void 0:u.id),templateTheme:u}),(0,s.jsxs)(l.az,{flex:"1",overflowY:"auto",overflowX:"hidden",minWidth:"0",h:"100%",className:mV,children:[(0,s.jsx)(dT,{docId:i,snapshotId:null==d?void 0:d.currentSnapshotId,scrollingParentSelector:".".concat(mV),onCreate:r,theme:h,hideMadeWithGammaBadge:!0}),(0,s.jsx)(hN,{editor:a,showNavigationControls:!0})]})]}),(0,s.jsx)(mR,{setTheme:m,currentThemeId:(null==h?void 0:h.id)||(null==u?void 0:u.id),templateTheme:u})]})]})}),mF="body";var mW=n(82737);let mU=e=>{let t=(0,p8.O2)(e),[n,i]=(0,p.useState)("up");return(0,p.useEffect)(()=>{let e=document.querySelector(t.scrollSelector);if(!e)return;let n=(null==e?void 0:e.scrollTop)||0,r=e=>Math.abs(e-n)>0,s=e=>e>n&&!(n>0&&0===e)&&!(e>0&&0===n),o=()=>{let t=(null==e?void 0:e.scrollTop)||0;r(t)&&(i(s(t)?"down":"up"),n=t>0?t:0)},l=eM()(()=>window.requestAnimationFrame(o),500,{leading:!0});return null==e||e.addEventListener("scroll",l),()=>null==e?void 0:e.removeEventListener("scroll",l)},[t.scrollSelector]),n},mB=(0,p.memo)(()=>(0,s.jsx)(l.az,{w:"100%",h:"1px",bg:"gray.200",my:2,mx:-2,_first:{display:"none"},_last:{display:"none"}}));mB.displayName="MenuDivider";let mH=(0,p.memo)(e=>{let{icon:t,children:n,...i}=e;return(0,s.jsx)(l.az,{as:"button",w:"100%",textAlign:"left",px:2,py:2,fontWeight:"500",color:"gray.700",transition:"all 0.2s",_hover:{bg:"gray.100"},_focus:{outline:"none"},_active:{bg:"gray.200"},borderRadius:"md",...i,children:(0,s.jsxs)(te.z,{children:[t&&(0,s.jsx)(l.az,{children:t}),(0,s.jsx)(l.az,{children:n})]})})});mH.displayName="MenuItem";let mq=e=>{var t,n;let{isOpen:i,onClose:r,doc:l,editingEnabled:a}=e,{user:d}=(0,X.ur)(),{isConnected:u}=(0,nw.utY)(),h=(0,sn.Z)(),{editor:x}=(0,t4.mi)(),m=(0,lj.B)(null==l?void 0:l.title),f=(null==l?void 0:l.createdTime)&&(0,lf.A)((0,lg.A)(l.createdTime),"PPP"),g=null==l?void 0:l.id,{isOpen:j,onClose:v,onOpen:b}=(0,iD.E)({id:"analyticsPanelDisclosure"}),[y]=(0,nw.fQ5)(),[C]=(0,nw.u6W)(),w=(0,J.st)(),E=(0,X.Iy)("manage",l)&&!!d,k=(0,X.Iy)("manage",l)&&!!d,S=!!(d&&0!==d.workspaceMemberships.length),I=!!d&&k,T=(0,p.useCallback)(async()=>{if(!x)return;let e=x.getJSON();await h({docId:g,initialContent:e,source:"editor_toolbar_doc_menu_duplicate",newWindow:!1}),r()},[g,h,x,r]),A=(0,p.useCallback)(()=>{null==w||w.track(J.VV.DOC_ANALYTICS_VIEWED,{docId:g,source:"toolbar_doc_menu",type:"personal"}),b()},[w,g,b]),_=(0,p.useCallback)(e=>()=>{if(!g)return;let t={id:g};e?y({variables:t,optimisticResponse:{archiveDoc:{...t,archived:e,__typename:"Doc"}}}):C({variables:t,optimisticResponse:{unarchiveDoc:{...t,archived:e,__typename:"Doc"}}})},[y,g,C]);return(0,s.jsxs)(s.Fragment,{children:[l&&(0,s.jsx)(W.mr,{isOpen:i,onClose:r,children:(0,s.jsxs)(o.s,{w:"100%",h:i?"100%":void 0,direction:"column",children:[(0,s.jsxs)(te.z,{align:"flex-start",p:6,children:[(0,s.jsxs)(D.B,{spacing:0,children:[(0,s.jsx)(z.E,{fontSize:"2xl",fontWeight:"bold",letterSpacing:"tight",noOfLines:6,children:m}),(0,s.jsx)(z.E,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(c.x6,{id:"jlWdji",values:{createdTime:f}})}),(0,s.jsx)(W.Tz,{label:null==l?void 0:null===(t=l.createdBy)||void 0===t?void 0:t.email,children:(0,s.jsx)(z.E,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(c.x6,{id:"t490IT",values:{0:null==l?void 0:null===(n=l.createdBy)||void 0===n?void 0:n.displayName}})})})]}),(0,s.jsx)(t_.h,{}),(0,s.jsx)(ek.J,{mt:-2,onClick:e=>{e.stopPropagation(),r()}})]}),(0,s.jsxs)(D.B,{p:3,pt:0,children:[(0,s.jsx)(mB,{}),k&&(0,s.jsx)(mH,{icon:(0,s.jsx)(F.g,{icon:G.CQO,fixedWidth:!0}),onClick:()=>{r(),ly.R.emit("openSharePanel",{view:"invite"})},children:(0,s.jsx)(c.x6,{id:"iyga2M"})}),a&&(0,s.jsx)(mH,{icon:(0,s.jsx)(F.g,{icon:G.fyG,fixedWidth:!0}),onClick:()=>{r(),ly.R.emit("toggleThemeBlock",!0)},"data-testid":"mobile-theme-button",children:(0,s.jsx)(c.x6,{id:"W15e8B"})}),(0,s.jsx)(mB,{}),u&&(0,s.jsxs)(s.Fragment,{children:[I&&(0,s.jsx)(mH,{icon:(0,s.jsx)(F.g,{icon:G.q9c,fixedWidth:!0}),onClick:()=>{r(),A()},children:(0,s.jsx)(c.x6,{id:"qcxxQS"})}),S&&(0,s.jsx)(mH,{icon:(0,s.jsx)(F.g,{icon:G.jPR,fixedWidth:!0}),onClick:T,children:(0,s.jsx)(c.x6,{id:"euc6Ns"})}),E&&(0,s.jsx)(mH,{icon:(0,s.jsx)(F.g,{icon:G.mHA,fixedWidth:!0}),onClick:()=>{r(),ly.R.emit("openSharePanel",{view:"export"})},children:(0,s.jsx)(c.x6,{id:"U8WPSi"})}),k&&(0,s.jsx)(mB,{}),k?l.archived?(0,s.jsx)(mH,{icon:(0,s.jsx)(F.g,{icon:G.IbX,fixedWidth:!0}),onClick:_(!1),children:(0,s.jsx)(c.x6,{id:"yKu/3Y"})}):(0,s.jsx)(mH,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,s.jsx)(F.g,{icon:G.yLS,fixedWidth:!0}),onClick:_(!0),children:(0,s.jsx)(c.x6,{id:"1C/Yjq"})}):null]})]})]})}),l&&j&&(0,s.jsx)(li,{doc:l,isAnalyticsPanelOpen:j,onAnalyticsPanelClose:v,mode:"full"}),a&&(0,s.jsx)(u2,{})]})},mK=e=>{var t;let{doc:n,editor:i,commentsEnabled:r,editingEnabled:o,onCommentFeedOpen:l,onTocOpen:a}=e,[d]=(0,d7.F)(ed.E.lastHomeUrl,"/"),{user:c}=(0,X.ur)(),u=(0,X.Iy)("manage",n)||o,h=(null==n?void 0:null===(t=n.comments)||void 0===t?void 0:t.filter(e=>e.status===nw.EB6.Open).length)||0,x=mU("editor"),f=(0,m.d4)(el.SJ),g=(0,xN.mm)(f),j=(0,ix.Mw)(f)?"white":"gray.800",v=(0,ix.Mw)(f)?"trueblue.300":"trueblue.700",b=(0,p.useCallback)(()=>{i&&i.commands.undo()},[i]),{isOpen:y,onOpen:C,onClose:w}=(0,ez.j)();return n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(mq,{doc:n,isOpen:y,onClose:w,editingEnabled:o}),(0,s.jsxs)(te.z,{p:1,px:2,bg:"gray.50",shadow:"lg",position:"sticky",top:0,transitionProperty:"common",transitionDuration:"normal",transform:"up"==x?"translate(0px,0px)":"translate(0px,-100%)",opacity:"up"==x?1:0,zIndex:"sticky",sx:{...(0,xN.wL)(g,f,!0),border:"none",filter:"none",borderRadius:0},color:j,children:[c&&(0,s.jsx)(i5(),{href:d,passHref:!0,legacyBehavior:!0,children:(0,s.jsx)(M.K,{as:nT.N,"aria-label":"Home",color:j,_hover:{bg:"transparent",color:v},icon:(0,s.jsx)(F.g,{icon:G.v02,size:"1x"}),variant:"ghost"})}),(0,s.jsx)(z.E,{flex:1,fontSize:"sm",noOfLines:1,ml:2,color:j,children:null==n?void 0:n.title}),(0,s.jsxs)(tt.e,{variant:"ghost",children:[r&&(0,s.jsx)(N.$,{color:j,_hover:{bg:"transparent",color:v},fontSize:"sm",onClick:l,leftIcon:(0,s.jsx)(F.g,{icon:G.DN2}),children:h}),o&&(0,s.jsx)(M.K,{color:j,"aria-label":"Undo",onClick:b,_hover:{bg:"transparent",color:v},icon:(0,s.jsx)(F.g,{icon:G.U23})}),!o&&(0,s.jsx)(M.K,{color:j,"aria-label":"Open table of contents",_hover:{bg:"transparent",color:v},onClick:a,icon:(0,s.jsx)(F.g,{icon:G.ckx})}),u&&(0,s.jsx)(M.K,{color:j,"aria-label":"Open toolbar",_hover:{bg:"transparent",color:v},onClick:C,icon:(0,s.jsx)(F.g,{icon:G.Dwc})})]})]})]}):null},mJ=e=>{let{doc:t,docEditorType:n,commentsEnabled:i=!0}=e,{docId:r,setCollaborativeEditorInstance:l,editor:a}=(0,t4.mi)(),{isOpen:d,onOpen:c,onClose:u}=(0,ez.j)({id:"mobile-comment-feed-panel-drawer"}),{isOpen:h,onOpen:x,onClose:m}=(0,ez.j)({id:"mobile-toc-drawer"}),[g,j]=(0,p.useState)(null);console.debug("%c[MobileEditorWrapper] RENDER - ".concat(r),"background-color: gold");let v=(0,b.u)("mobileEditing"),y=(0,X.Iy)("edit",t),C=v&&y;return(0,s.jsx)(f.UU,{children:(0,s.jsxs)(o.s,{ref:(0,p.useCallback)(e=>j(e),[]),direction:"column",flex:1,children:[(0,s.jsx)(mK,{doc:t,editor:a,onCommentFeedOpen:c,commentsEnabled:!C&&i,editingEnabled:C,onTocOpen:x}),n===t3.i.PUBLIC_STATIC?(0,s.jsx)(dT,{docId:r,snapshotId:null==t?void 0:t.currentSnapshotId,scrollingParentSelector:mF,onCreate:l}):n===t3.i.EXAMPLE_STATIC?(0,s.jsx)(sc,{docId:r,snapshotId:null==t?void 0:t.currentSnapshotId,scrollingParentSelector:mF,onCreate:l}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(th.H2,{doc:t,docId:r,readOnly:!C,onCreate:l,scrollingParentSelector:mF}),a&&(0,s.jsx)(tk,{editor:a})]}),i&&d&&(0,s.jsx)(W.mr,{isOpen:d,onClose:u,drawerProps:{autoFocus:!1,returnFocusOnClose:!1},children:(0,s.jsx)(iZ,{onClose:u,editor:a})}),h&&(0,s.jsx)(W.mr,{isOpen:h,onClose:m,drawerProps:{returnFocusOnClose:!1},children:(0,s.jsx)(mW.M,{rootElement:g,handleClose:m})}),(0,s.jsx)(uH,{doc:t,showButton:!1}),(0,s.jsx)(tf.A,{children:(0,s.jsx)(r9,{editor:a})})]})})},mY=(0,t4.VL)(e=>{let{docEditorType:t}=e,{docId:n,isUnauthorized:i,passwordRequired:r,editor:l}=(0,t4.mi)();mb(n,t);let{editorAnimationsClass:a,editorAnimationsCSSVars:d}=(0,tx.O)({editor:l,scrollingParentSelector:mF});ms(n,l),(0,mc.K)();let c=(0,p.useRef)(null),u=(0,eo.GV)(nf.Jo);console.debug("%c[MobileDocViewerComponent] RENDER - ".concat(n),"background-color: gold");let h=t===t3.i.COLLABORATIVE;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(x(),{children:[(0,s.jsxs)("title",{children:["".concat(u?(0,lj.B)(u.title)+" | ":""),"Gamma"]}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, user-scalable=no"})]}),(0,s.jsx)(V.mL,{styles:{html:{overflowX:"hidden"},body:{overflow:"hidden scroll",WebkitOverflowScrolling:"touch"}}}),r?(0,s.jsx)(dC,{docId:n}):i?(0,s.jsxs)(o.s,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",p:6,textAlign:"center",children:["It looks like you don't have access to this"," ",eu.TP,"."]}):(0,s.jsx)(o.s,{id:"doc-main",direction:"column",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:c,flex:"1",className:a,style:{...d},children:(0,s.jsx)(mJ,{doc:u,docEditorType:t,commentsEnabled:h})})]})})},54:()=>{},50405:()=>{},62770:()=>{},63113:function(e){var t;t=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,(function(t){return e[t]}).bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){(function(t){e.exports=t.Phoenix=n(2)}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}return n}}(e,t)||s(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function l(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n.r(t),n.d(t,"Channel",function(){return S}),n.d(t,"Serializer",function(){return I}),n.d(t,"Socket",function(){return T}),n.d(t,"LongPoll",function(){return A}),n.d(t,"Ajax",function(){return _}),n.d(t,"Presence",function(){return R});var c="undefined"!=typeof window?window:null,u=("undefined"!=typeof self?self:null)||c||void 0,h="closed",x="errored",p="joined",m="joining",f="leaving",g="phx_close",j="phx_error",v="phx_join",b="phx_reply",y="phx_leave",C=[g,j,v,b,y],w="websocket",E=function(e){return"function"==typeof e?e:function(){return e}},k=function(){function e(t,n,i,r){l(this,e),this.channel=t,this.event=n,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=r,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}return d(e,[{key:"resend",value:function(e){this.timeout=e,this.reset(),this.send()}},{key:"send",value:function(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}},{key:"receive",value:function(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}},{key:"reset",value:function(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}},{key:"matchReceive",value:function(e){var t=e.status,n=e.response;e.ref,this.recHooks.filter(function(e){return e.status===t}).forEach(function(e){return e.callback(n)})}},{key:"cancelRefEvent",value:function(){this.refEvent&&this.channel.off(this.refEvent)}},{key:"cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}},{key:"startTimeout",value:function(){var e=this;this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,function(t){e.cancelRefEvent(),e.cancelTimeout(),e.receivedResp=t,e.matchReceive(t)}),this.timeoutTimer=setTimeout(function(){e.trigger("timeout",{})},this.timeout)}},{key:"hasReceived",value:function(e){return this.receivedResp&&this.receivedResp.status===e}},{key:"trigger",value:function(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}}]),e}(),S=function(){function e(t,n,i){var r=this;l(this,e),this.state=h,this.topic=t,this.params=E(n||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new k(this,v,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new O(function(){r.socket.isConnected()&&r.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(function(){return r.rejoinTimer.reset()})),this.stateChangeRefs.push(this.socket.onOpen(function(){r.rejoinTimer.reset(),r.isErrored()&&r.rejoin()})),this.joinPush.receive("ok",function(){r.state=p,r.rejoinTimer.reset(),r.pushBuffer.forEach(function(e){return e.send()}),r.pushBuffer=[]}),this.joinPush.receive("error",function(){r.state=x,r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()}),this.onClose(function(){r.rejoinTimer.reset(),r.socket.hasLogger()&&r.socket.log("channel","close ".concat(r.topic," ").concat(r.joinRef())),r.state=h,r.socket.remove(r)}),this.onError(function(e){r.socket.hasLogger()&&r.socket.log("channel","error ".concat(r.topic),e),r.isJoining()&&r.joinPush.reset(),r.state=x,r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",function(){r.socket.hasLogger()&&r.socket.log("channel","timeout ".concat(r.topic," (").concat(r.joinRef(),")"),r.joinPush.timeout),new k(r,y,E({}),r.timeout).send(),r.state=x,r.joinPush.reset(),r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()}),this.on(b,function(e,t){r.trigger(r.replyEventName(t),e)})}return d(e,[{key:"join",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;if(this.joinedOnce)throw Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}},{key:"onClose",value:function(e){this.on(g,e)}},{key:"onError",value:function(e){return this.on(j,function(t){return e(t)})}},{key:"on",value:function(e,t){var n=this.bindingRef++;return this.bindings.push({event:e,ref:n,callback:t}),n}},{key:"off",value:function(e,t){this.bindings=this.bindings.filter(function(n){return!(n.event===e&&(void 0===t||t===n.ref))})}},{key:"canPush",value:function(){return this.socket.isConnected()&&this.isJoined()}},{key:"push",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(t=t||{},!this.joinedOnce)throw Error("tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.join() before pushing events"));var i=new k(this,e,function(){return t},n);return this.canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}},{key:"leave",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=f;var n=function(){e.socket.hasLogger()&&e.socket.log("channel","leave ".concat(e.topic)),e.trigger(g,"leave")},i=new k(this,y,E({}),t);return i.receive("ok",function(){return n()}).receive("timeout",function(){return n()}),i.send(),this.canPush()||i.trigger("ok",{}),i}},{key:"onMessage",value:function(e,t,n){return t}},{key:"isLifecycleEvent",value:function(e){return C.indexOf(e)>=0}},{key:"isMember",value:function(e,t,n,i){return this.topic===e&&(!i||i===this.joinRef()||!this.isLifecycleEvent(t)||(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:t,payload:n,joinRef:i}),!1))}},{key:"joinRef",value:function(){return this.joinPush.ref}},{key:"rejoin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=m,this.joinPush.resend(e))}},{key:"trigger",value:function(e,t,n,i){var r=this.onMessage(e,t,n,i);if(t&&!r)throw Error("channel onMessage callbacks must return the payload, modified or unmodified");for(var s=this.bindings.filter(function(t){return t.event===e}),o=0;o<s.length;o++)s[o].callback(r,n,i||this.joinRef())}},{key:"replyEventName",value:function(e){return"chan_reply_".concat(e)}},{key:"isClosed",value:function(){return this.state===h}},{key:"isErrored",value:function(){return this.state===x}},{key:"isJoined",value:function(){return this.state===p}},{key:"isJoining",value:function(){return this.state===m}},{key:"isLeaving",value:function(){return this.state===f}}]),e}(),I={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode:function(e,t){return t(e.payload.constructor===ArrayBuffer?this.binaryEncode(e):JSON.stringify([e.join_ref,e.ref,e.topic,e.event,e.payload]))},decode:function(e,t){if(e.constructor===ArrayBuffer)return t(this.binaryDecode(e));var n=r(JSON.parse(e),5);return t({join_ref:n[0],ref:n[1],topic:n[2],event:n[3],payload:n[4]})},binaryEncode:function(e){var t=e.join_ref,n=e.ref,i=e.event,r=e.topic,s=e.payload,o=this.META_LENGTH+t.length+n.length+r.length+i.length,l=new ArrayBuffer(this.HEADER_LENGTH+o),a=new DataView(l),d=0;a.setUint8(d++,this.KINDS.push),a.setUint8(d++,t.length),a.setUint8(d++,n.length),a.setUint8(d++,r.length),a.setUint8(d++,i.length),Array.from(t,function(e){return a.setUint8(d++,e.charCodeAt(0))}),Array.from(n,function(e){return a.setUint8(d++,e.charCodeAt(0))}),Array.from(r,function(e){return a.setUint8(d++,e.charCodeAt(0))}),Array.from(i,function(e){return a.setUint8(d++,e.charCodeAt(0))});var c=new Uint8Array(l.byteLength+s.byteLength);return c.set(new Uint8Array(l),0),c.set(new Uint8Array(s),l.byteLength),c.buffer},binaryDecode:function(e){var t=new DataView(e),n=t.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.push:return this.decodePush(e,t,i);case this.KINDS.reply:return this.decodeReply(e,t,i);case this.KINDS.broadcast:return this.decodeBroadcast(e,t,i)}},decodePush:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),s=t.getUint8(3),o=this.HEADER_LENGTH+this.META_LENGTH-1,l=n.decode(e.slice(o,o+i));o+=i;var a=n.decode(e.slice(o,o+r));o+=r;var d=n.decode(e.slice(o,o+s));return o+=s,{join_ref:l,ref:null,topic:a,event:d,payload:e.slice(o,e.byteLength)}},decodeReply:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),s=t.getUint8(3),o=t.getUint8(4),l=this.HEADER_LENGTH+this.META_LENGTH,a=n.decode(e.slice(l,l+i));l+=i;var d=n.decode(e.slice(l,l+r));l+=r;var c=n.decode(e.slice(l,l+s));l+=s;var u=n.decode(e.slice(l,l+o));return l+=o,{join_ref:a,ref:d,topic:c,event:b,payload:{status:u,response:e.slice(l,e.byteLength)}}},decodeBroadcast:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),s=this.HEADER_LENGTH+2,o=n.decode(e.slice(s,s+i));s+=i;var l=n.decode(e.slice(s,s+r));return s+=r,{join_ref:null,ref:null,topic:o,event:l,payload:e.slice(s,e.byteLength)}}},T=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e),this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=i.timeout||1e4,this.transport=i.transport||u.WebSocket||A,this.defaultEncoder=I.encode.bind(I),this.defaultDecoder=I.decode.bind(I),this.closeWasClean=!1,this.unloaded=!1,this.binaryType=i.binaryType||"arraybuffer",this.transport!==A?(this.encode=i.encode||this.defaultEncoder,this.decode=i.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder),c&&c.addEventListener&&c.addEventListener("unload",function(e){n.conn&&(n.unloaded=!0,n.abnormalClose("unloaded"))}),this.heartbeatIntervalMs=i.heartbeatIntervalMs||3e4,this.rejoinAfterMs=function(e){return i.rejoinAfterMs?i.rejoinAfterMs(e):[1e3,2e3,5e3][e-1]||1e4},this.reconnectAfterMs=function(e){return n.unloaded?100:i.reconnectAfterMs?i.reconnectAfterMs(e):[10,50,100,150,200,250,500,1e3,2e3][e-1]||5e3},this.logger=i.logger||null,this.longpollerTimeout=i.longpollerTimeout||2e4,this.params=E(i.params||{}),this.endPoint="".concat(t,"/").concat(w),this.vsn=i.vsn||"2.0.0",this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new O(function(){n.teardown(function(){return n.connect()})},this.reconnectAfterMs)}return d(e,[{key:"protocol",value:function(){return location.protocol.match(/^https/)?"wss":"ws"}},{key:"endPointURL",value:function(){var e=_.appendParams(_.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return"/"!==e.charAt(0)?e:"/"===e.charAt(1)?"".concat(this.protocol(),":").concat(e):"".concat(this.protocol(),"://").concat(location.host).concat(e)}},{key:"disconnect",value:function(e,t,n){this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,t,n)}},{key:"connect",value:function(e){var t=this;e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=E(e)),this.conn||(this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=function(){return t.onConnOpen()},this.conn.onerror=function(e){return t.onConnError(e)},this.conn.onmessage=function(e){return t.onConnMessage(e)},this.conn.onclose=function(e){return t.onConnClose(e)})}},{key:"log",value:function(e,t,n){this.logger(e,t,n)}},{key:"hasLogger",value:function(){return null!==this.logger}},{key:"onOpen",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.open.push([t,e]),t}},{key:"onClose",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.close.push([t,e]),t}},{key:"onError",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.error.push([t,e]),t}},{key:"onMessage",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.message.push([t,e]),t}},{key:"onConnOpen",value:function(){this.hasLogger()&&this.log("transport","connected to ".concat(this.endPointURL())),this.unloaded=!1,this.closeWasClean=!1,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(function(e){return(0,r(e,2)[1])()})}},{key:"resetHeartbeat",value:function(){var e=this;this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(function(){return e.sendHeartbeat()},this.heartbeatIntervalMs))}},{key:"teardown",value:function(e,t,n){var i=this;if(!this.conn)return e&&e();this.waitForBufferDone(function(){i.conn&&(t?i.conn.close(t,n||""):i.conn.close()),i.waitForSocketClosed(function(){i.conn&&(i.conn.onclose=function(){},i.conn=null),e&&e()})})}},{key:"waitForBufferDone",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;5!==n&&this.conn&&this.conn.bufferedAmount?setTimeout(function(){t.waitForBufferDone(e,n+1)},150*n):e()}},{key:"waitForSocketClosed",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;5!==n&&this.conn&&3!==this.conn.readyState?setTimeout(function(){t.waitForSocketClosed(e,n+1)},150*n):e()}},{key:"onConnClose",value:function(e){this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),clearInterval(this.heartbeatTimer),this.closeWasClean||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(function(t){return(0,r(t,2)[1])(e)})}},{key:"onConnError",value:function(e){this.hasLogger()&&this.log("transport",e),this.triggerChanError(),this.stateChangeCallbacks.error.forEach(function(t){return(0,r(t,2)[1])(e)})}},{key:"triggerChanError",value:function(){this.channels.forEach(function(e){e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(j)})}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case 0:return"connecting";case 1:return"open";case 2:return"closing";default:return"closed"}}},{key:"isConnected",value:function(){return"open"===this.connectionState()}},{key:"remove",value:function(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter(function(t){return t.joinRef()!==e.joinRef()})}},{key:"off",value:function(e){for(var t in this.stateChangeCallbacks)this.stateChangeCallbacks[t]=this.stateChangeCallbacks[t].filter(function(t){var n=r(t,1)[0];return -1===e.indexOf(n)})}},{key:"channel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new S(e,t,this);return this.channels.push(n),n}},{key:"push",value:function(e){var t=this;if(this.hasLogger()){var n=e.topic,i=e.event,r=e.payload,s=e.ref,o=e.join_ref;this.log("push","".concat(n," ").concat(i," (").concat(o,", ").concat(s,")"),r)}this.isConnected()?this.encode(e,function(e){return t.conn.send(e)}):this.sendBuffer.push(function(){return t.encode(e,function(e){return t.conn.send(e)})})}},{key:"makeRef",value:function(){var e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}},{key:"sendHeartbeat",value:function(){if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void this.abnormalClose("heartbeat timeout");this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef})}}},{key:"abnormalClose",value:function(e){this.closeWasClean=!1,1===this.conn.readyState&&this.conn.close(1e3,e)}},{key:"flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(function(e){return e()}),this.sendBuffer=[])}},{key:"onConnMessage",value:function(e){var t=this;this.decode(e.data,function(e){var n=e.topic,i=e.event,s=e.payload,o=e.ref,l=e.join_ref;o&&o===t.pendingHeartbeatRef&&(t.pendingHeartbeatRef=null),t.hasLogger()&&t.log("receive","".concat(s.status||""," ").concat(n," ").concat(i," ").concat(o&&"("+o+")"||""),s);for(var a=0;a<t.channels.length;a++){var d=t.channels[a];d.isMember(n,i,s,l)&&d.trigger(i,s,o,l)}for(var c=0;c<t.stateChangeCallbacks.message.length;c++)(0,r(t.stateChangeCallbacks.message[c],2)[1])(e)})}},{key:"leaveOpenTopic",value:function(e){var t=this.channels.find(function(t){return t.topic===e&&(t.isJoined()||t.isJoining())});t&&(this.hasLogger()&&this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.leave())}}]),e}(),A=function(){function e(t){l(this,e),this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(t),this.readyState=0,this.poll()}return d(e,[{key:"normalizeEndpoint",value:function(e){return e.replace("ws://","http://").replace("wss://","https://").replace(RegExp("(.*)/"+w),"$1/longpoll")}},{key:"endpointURL",value:function(){return _.appendParams(this.pollEndpoint,{token:this.token})}},{key:"closeAndRetry",value:function(){this.close(),this.readyState=0}},{key:"ontimeout",value:function(){this.onerror("timeout"),this.closeAndRetry()}},{key:"poll",value:function(){var e=this;1!==this.readyState&&0!==this.readyState||_.request("GET",this.endpointURL(),"application/json",null,this.timeout,this.ontimeout.bind(this),function(t){if(t){var n=t.status,i=t.token,r=t.messages;e.token=i}else n=0;switch(n){case 200:r.forEach(function(t){return e.onmessage({data:t})}),e.poll();break;case 204:e.poll();break;case 410:e.readyState=1,e.onopen(),e.poll();break;case 403:e.onerror(),e.close();break;case 0:case 500:e.onerror(),e.closeAndRetry();break;default:throw Error("unhandled poll status ".concat(n))}})}},{key:"send",value:function(e){var t=this;_.request("POST",this.endpointURL(),"application/json",e,this.timeout,this.onerror.bind(this,"timeout"),function(e){e&&200===e.status||(t.onerror(e&&e.status),t.closeAndRetry())})}},{key:"close",value:function(e,t){this.readyState=3,this.onclose()}}]),e}(),_=function(){function e(){l(this,e)}return d(e,null,[{key:"request",value:function(e,t,n,i,r,s,o){if(u.XDomainRequest){var l=new XDomainRequest;this.xdomainRequest(l,e,t,i,r,s,o)}else{var a=new u.XMLHttpRequest;this.xhrRequest(a,e,t,n,i,r,s,o)}}},{key:"xdomainRequest",value:function(e,t,n,i,r,s,o){var l=this;e.timeout=r,e.open(t,n),e.onload=function(){var t=l.parseJSON(e.responseText);o&&o(t)},s&&(e.ontimeout=s),e.onprogress=function(){},e.send(i)}},{key:"xhrRequest",value:function(e,t,n,i,r,s,o,l){var a=this;e.open(t,n,!0),e.timeout=s,e.setRequestHeader("Content-Type",i),e.onerror=function(){l&&l(null)},e.onreadystatechange=function(){e.readyState===a.states.complete&&l&&l(a.parseJSON(e.responseText))},o&&(e.ontimeout=o),e.send(r)}},{key:"parseJSON",value:function(e){if(!e||""===e)return null;try{return JSON.parse(e)}catch(t){return console&&console.log("failed to parse JSON response",e),null}}},{key:"serialize",value:function(e,t){var n=[];for(var r in e)if(e.hasOwnProperty(r)){var s=t?"".concat(t,"[").concat(r,"]"):r,o=e[r];"object"===i(o)?n.push(this.serialize(o,s)):n.push(encodeURIComponent(s)+"="+encodeURIComponent(o))}return n.join("&")}},{key:"appendParams",value:function(e,t){if(0===Object.keys(t).length)return e;var n=e.match(/\?/)?"&":"?";return"".concat(e).concat(n).concat(this.serialize(t))}}]),e}();_.states={complete:4};var R=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e);var r=i.events||{state:"presence_state",diff:"presence_diff"};this.state={},this.pendingDiffs=[],this.channel=t,this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}},this.channel.on(r.state,function(t){var i=n.caller,r=i.onJoin,s=i.onLeave,o=i.onSync;n.joinRef=n.channel.joinRef(),n.state=e.syncState(n.state,t,r,s),n.pendingDiffs.forEach(function(t){n.state=e.syncDiff(n.state,t,r,s)}),n.pendingDiffs=[],o()}),this.channel.on(r.diff,function(t){var i=n.caller,r=i.onJoin,s=i.onLeave,o=i.onSync;n.inPendingSyncState()?n.pendingDiffs.push(t):(n.state=e.syncDiff(n.state,t,r,s),o())})}return d(e,[{key:"onJoin",value:function(e){this.caller.onJoin=e}},{key:"onLeave",value:function(e){this.caller.onLeave=e}},{key:"onSync",value:function(e){this.caller.onSync=e}},{key:"list",value:function(t){return e.list(this.state,t)}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}],[{key:"syncState",value:function(e,t,n,i){var r=this,s=this.clone(e),o={},l={};return this.map(s,function(e,n){t[e]||(l[e]=n)}),this.map(t,function(e,t){var n=s[e];if(n){var i=t.metas.map(function(e){return e.phx_ref}),a=n.metas.map(function(e){return e.phx_ref}),d=t.metas.filter(function(e){return 0>a.indexOf(e.phx_ref)}),c=n.metas.filter(function(e){return 0>i.indexOf(e.phx_ref)});d.length>0&&(o[e]=t,o[e].metas=d),c.length>0&&(l[e]=r.clone(n),l[e].metas=c)}else o[e]=t}),this.syncDiff(s,{joins:o,leaves:l},n,i)}},{key:"syncDiff",value:function(e,t,n,i){var r=t.joins,l=t.leaves,a=this.clone(e);return n||(n=function(){}),i||(i=function(){}),this.map(r,function(e,t){var i=a[e];if(a[e]=t,i){var r,l=a[e].metas.map(function(e){return e.phx_ref}),d=i.metas.filter(function(e){return 0>l.indexOf(e.phx_ref)});(r=a[e].metas).unshift.apply(r,function(e){if(Array.isArray(e))return o(e)}(d)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(d)||s(d)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}n(e,i,t)}),this.map(l,function(e,t){var n=a[e];if(n){var r=t.metas.map(function(e){return e.phx_ref});n.metas=n.metas.filter(function(e){return 0>r.indexOf(e.phx_ref)}),i(e,n,t),0===n.metas.length&&delete a[e]}}),a}},{key:"list",value:function(e,t){return t||(t=function(e,t){return t}),this.map(e,function(e,n){return t(e,n)})}},{key:"map",value:function(e,t){return Object.getOwnPropertyNames(e).map(function(n){return t(n,e[n])})}},{key:"clone",value:function(e){return JSON.parse(JSON.stringify(e))}}]),e}(),O=function(){function e(t,n){l(this,e),this.callback=t,this.timerCalc=n,this.timer=null,this.tries=0}return d(e,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.tries=e.tries+1,e.callback()},this.timerCalc(this.tries+1))}}]),e}()}])},e.exports=t()},82923:(e,t,n)=>{"use strict";n.d(t,{F:()=>r,H:()=>i});var[i,r]=(0,n(37754).q)({name:"BreadcrumbStylesContext",errorMessage:"useBreadcrumbStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Breadcrumb />\" "})},67265:(e,t,n)=>{"use strict";n.d(t,{Q:()=>h});var i=n(82923),r=n(11976),s=n(76704),o=n(63552),l=n(11403),a=n(74108),d=n(31171),c=n(14041),u=n(31085),h=(0,o.R)(function(e,t){let n=(0,l.o5)("Breadcrumb",e),{children:o,spacing:h="0.5rem",separator:x="/",className:p,listProps:m,...f}=(0,a.MN)(e),g=(0,s.a)(o),j=g.length,v=g.map((e,t)=>(0,c.cloneElement)(e,{separator:x,spacing:h,isLastChild:j===t+1})),b=(0,r.cx)("chakra-breadcrumb",p);return(0,u.jsx)(d.B.nav,{ref:t,"aria-label":"breadcrumb",className:b,__css:n.container,...f,children:(0,u.jsx)(i.H,{value:n,children:(0,u.jsx)(d.B.ol,{className:"chakra-breadcrumb__list",...m,__css:{display:"flex",alignItems:"center",...n.list},children:v})})})});h.displayName="Breadcrumb"},91047:(e,t,n)=>{"use strict";n.d(t,{J:()=>h});var i=n(6373),r=n(82923),s=n(63552),o=n(31171),l=n(31085),a=(0,s.R)(function(e,t){let{spacing:n,...i}=e,s={mx:n,...(0,r.F)().separator};return(0,l.jsx)(o.B.span,{ref:t,role:"presentation",...i,__css:s})});a.displayName="BreadcrumbSeparator";var d=n(76704),c=n(11976),u=n(14041),h=(0,s.R)(function(e,t){let{isCurrentPage:n,separator:s,isLastChild:h,spacing:x,children:p,className:m,...f}=e,g=(0,d.a)(p).map(e=>e.type===i.w?(0,u.cloneElement)(e,{isCurrentPage:n}):e.type===a?(0,u.cloneElement)(e,{spacing:x,children:e.props.children||s}):e),j={display:"inline-flex",alignItems:"center",...(0,r.F)().item},v=(0,c.cx)("chakra-breadcrumb__list-item",m);return(0,l.jsxs)(o.B.li,{ref:t,className:v,...f,__css:j,children:[g,!h&&(0,l.jsx)(a,{spacing:x,children:s})]})});h.displayName="BreadcrumbItem"},6373:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var i=n(82923),r=n(63552),s=n(31171),o=n(11976),l=n(31085),a=(0,r.R)(function(e,t){let{isCurrentPage:n,as:r,className:a,href:d,...c}=e,u=(0,i.F)(),h={ref:t,as:r,className:(0,o.cx)("chakra-breadcrumb__link",a),...c};return n?(0,l.jsx)(s.B.span,{"aria-current":"page",__css:u.link,...h}):(0,l.jsx)(s.B.a,{__css:u.link,href:d,...h})});a.displayName="BreadcrumbLink"},65513:(e,t,n)=>{"use strict";n.d(t,{b:()=>a});var i=n(59577),r=n(11976),s=n(63552),o=n(31171),l=n(31085),a=(0,s.R)(function(e,t){let{className:n,...s}=e,a=(0,i.Q)();return(0,l.jsx)(o.B.div,{ref:t,className:(0,r.cx)("chakra-card__body",n),__css:a.body,...s})})},59577:(e,t,n)=>{"use strict";n.d(t,{Q:()=>r,s:()=>i});var[i,r]=(0,n(99740).Wh)("Card")},11395:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(59577),r=n(11976),s=n(63552),o=n(74108),l=n(11403),a=n(31171),d=n(31085),c=(0,s.R)(function(e,t){let{className:n,children:s,direction:c="column",justify:u,align:h,...x}=(0,o.MN)(e),p=(0,l.o5)("Card",e);return(0,d.jsx)(a.B.div,{ref:t,className:(0,r.cx)("chakra-card",n),__css:{display:"flex",flexDirection:c,justifyContent:u,alignItems:h,position:"relative",minWidth:0,wordWrap:"break-word",...p.container},...x,children:(0,d.jsx)(i.s,{value:p,children:s})})})},38983:e=>{"use strict";e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')}}]);
//# sourceMappingURL=7253-083497ad358ab667.js.map