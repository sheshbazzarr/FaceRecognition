"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4787],{20728:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(12109),o=r(92293),a=r(69670),i=r(54260);function s(e,t){if((0,i.A)(2,arguments),!t||"object"!=typeof t)return new Date(NaN);var r="years"in t?(0,o.A)(t.years):0,s="months"in t?(0,o.A)(t.months):0,l="weeks"in t?(0,o.A)(t.weeks):0,d="days"in t?(0,o.A)(t.days):0,c="hours"in t?(0,o.A)(t.hours):0,u="minutes"in t?(0,o.A)(t.minutes):0,p="seconds"in t?(0,o.A)(t.seconds):0,m=(0,a.A)(e),f=s||r?function(e,t){(0,i.A)(2,arguments);var r=(0,a.A)(e),n=(0,o.A)(t);if(isNaN(n))return new Date(NaN);if(!n)return r;var s=r.getDate(),l=new Date(r.getTime());return(l.setMonth(r.getMonth()+n+1,0),s>=l.getDate())?l:(r.setFullYear(l.getFullYear(),l.getMonth(),s),r)}(m,s+12*r):m;return new Date((d||l?(0,n.A)(f,d+7*l):f).getTime()+1e3*(p+60*(u+60*c)))}},5577:(e,t,r)=>{r.d(t,{B:()=>S,K:()=>k});var n=r(31085),o=r(25420),a=r(2600),i=r(80853),s=r(62230),l=r(20501),d=r(24221),c=r(52177),u=r(29524),p=r(73758),m=r.n(p),f=r(14041),h=r(64225),g=r(58599),b=r(65053),x=r(38888),y=r(20869),C=r(40214),v=r(23056),j=r(61644);let w={...b.q,...C.X,...x.X0},S="ai-card-editor",k=(0,f.memo)(e=>{let{...t}=e,r=(0,h.GV)(y.n7),s=(0,u.hG)({...t,extensions:v.CJ,editorProps:{attributes:{"data-testid":"ai-content-editor"}}});s&&(s.editorId=S);let p=(0,h.GV)(y.qo),b=(0,h.GV)(y.yR);(0,f.useEffect)(()=>{s&&s.setEditable(!r)},[r,s]);let x=(0,f.useCallback)(()=>{null==s||s.chain().insertContentAt(null==s?void 0:s.state.doc.content.size,{type:"card",content:[{type:"paragraph"}]}).selectInsertedNode().run()},[s]);return(0,j.X)(s),(0,n.jsxs)(o.s,{flex:"1",direction:"column",sx:w,p:{base:2,md:3},children:[(0,n.jsx)(g.$Z,{editor:s,style:{wordBreak:"break-word",display:"flex",flexDirection:"column"}}),r&&(0,n.jsx)(a.T,{children:m()(p-b).map(e=>(0,n.jsx)(z,{},e))}),!r&&(0,n.jsx)(i.$,{boxShadow:"none",leftIcon:(0,n.jsx)(d.g,{icon:l.QLR,fixedWidth:!0}),onClick:x,children:(0,n.jsx)(c.x6,{id:"sFY+gw"})})]})});k.displayName="AICardEditor";let z=()=>(0,n.jsx)(s.E,{height:14,width:"100%",borderRadius:"md"})},40214:(e,t,r)=>{r.d(t,{X:()=>a});var n=r(68062),o=r(81700);let a={".ProseMirror":{flex:1,...n.F,...o.p},".block":{my:"0.75rem","&.first-block":{mt:"0px !important"},"&.last-block":{mb:"0px !important"}},".block-heading":{fontWeight:"bold",lineHeight:"1.25",_first:{mt:0}},h1:{fontSize:"1.5em"},h2:{fontSize:"1.25em"},h3:{fontSize:"1.125em"},"a[href]":{color:"var(--chakra-colors-trueblue-600)",textDecoration:"underline"}}},23056:(e,t,r)=>{r.d(t,{CJ:()=>eN,a4:()=>eD,ZC:()=>eE});var n=r(13236),o=r(43504),a=r(1366),i=r(72851),s=r(83683),l=r(87307),d=r(1144),c=r(98213),u=r(35864),p=r(67291),m=r(28396),f=r(15657),h=r(47687),g=r(56219),b=r(65208),x=r(46291),y=r(99364),C=r(33795),v=r(72809),j=r(12127),w=r(79893),S=r(87643),k=r(97404),z=r(44498),A=r(4977),R=r(952),D=r(29362),N=r(39933),E=r(58599),I=r(95580),P=r(17539),_=r(31085),M=r(80532),V=r(9855),T=r(27930);let F=e=>{let{node:t}=e,{uploadStatus:r}=t.attrs;return(0,_.jsx)(E.VR,{children:(0,_.jsxs)(M.az,{"data-selection-ring":!0,pos:"relative",borderRadius:"md",w:"fit-content",css:{"--media-maxH":"8em"},children:[r===A.A.Error?(0,_.jsx)(T.Pf,{w:"12em",h:"6em"}):(0,_.jsx)(V.FQ,{imageAttrs:t.attrs,"data-drag-handle":!0}),r===A.A.Uploading&&(0,_.jsx)(T.Td,{}),r==A.A.Error&&(0,_.jsx)(T.Hy,{})]})})},W=z.Ay.extend({selectable:!0,draggable:!0,expandable:!0,addNodeView:()=>(0,E.gu)(F,{update:D.z0}),renderHTML(e){let{node:t}=e,r=t.attrs,{src:n,tempUrl:o,uploadStatus:a}=r;return["img",{src:a===A.A.Error?"":n||((null==o?void 0:o.startsWith("http"))?o:""),alt:(0,R.ve)(r),meta:JSON.stringify(r.meta),resize:JSON.stringify(r.resize)}]},parseHTML:()=>[{tag:"img[src]",getAttrs:e=>{let t=e.getAttribute("src");return(0,P.md)(t)?{src:t}:{tempUrl:t}}}],addAttributes:()=>({id:(0,N.e)(j.z),src:{},tempUrl:{},uploadStatus:{},meta:{...(0,I.tb)("meta")},resize:{...(0,I.tb)("resize")}})});var G=r(98380);let L=e=>{let{selected:t}=e;return(0,_.jsx)(E.VR,{children:(0,_.jsx)(M.az,{pos:"relative",draggable:"true","data-drag-handle":!0,cursor:"grab",contentEditable:"false",position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",height:"1.25rem",color:t?"trueblue.400":"gray.400",lineHeight:"1rem",fontWeight:"800",children:"---"})})},H=/^(---|___|—-)/,O=n.bP.create({name:"sectionBreak",group:"block",atom:!0,selectable:!0,draggable:!0,parseHTML:()=>[{tag:"hr"}],renderHTML(e){let{HTMLAttributes:t}=e;return["hr",(0,n.KV)(t)]},addNodeView:()=>(0,E.gu)(L),addInputRules(){return[(0,G.wN)({find:H,type:this.type})]}});var Y=r(42215),U=r(91100),K=r(19534),X=r(81570),B=r(73686);let J=new X.k_({props:{decorations:e=>{let{doc:t}=e,r=[],n=1;return t.descendants((e,t)=>{"card"===e.type.name&&(r.push(B.NZ.node(t,t+e.nodeSize,{},{number:n,isSectionCardPluginDecoration:!0})),n++)}),0==r.length?B.zF.empty:B.zF.create(t,r)}}}),q=e=>{let t=e.find(e=>e.spec.isSectionCardPluginDecoration);return t?t.spec:{number:0,isSectionCardPluginDecoration:!0}};var Q=r(62313),Z=r(61778),$=r(25420),ee=r(9021),et=r(63341),er=r(18528),en=r(40173),eo=r(72821),ea=r(33683),ei=r(81575),es=r(20501),el=r(24221),ed=r(95986),ec=r(52177),eu=r(12327),ep=r(14041),em=r(88380),ef=r(20869),eh=r(64225),eg=r(44507),eb=r(63723);let ex={r:235,g:248,b:255},ey={r:255,g:245,b:255},eC={r:107,g:70,b:193},ev={r:43,g:108,b:176},ej=(e,t,r,n)=>n?{bg:"gray.100",text:"gray.600"}:{bg:(0,eb.tV)(ex,ey,e/Math.min(r,t)),text:(0,eb.tV)(ev,eC,e/Math.min(r,t))},ew=e=>{let{decorations:t,editor:r,getPos:n}=e,{number:o}=q(t),a=(0,eh.GV)(ef.yR),{maxCards:i,canUpgrade:s}=(0,em.Zq)(),l=o>i,d=o===a,c=ej(o,a,i,l),u=(0,ep.useCallback)(()=>{let e=n(),t=r.view.state.doc.nodeAt(e);if(!t){console.error("[SectionCardView] Cannot append card. Node unknown");return}let o=e+t.nodeSize;r.chain().insertContentAt(o,{type:"card",content:[{type:"paragraph"}]}).focus().selectInsertedNode().run()},[r,n]),p=(0,ep.useCallback)(()=>{r.commands.selectNodeAtPos(n())},[r,n]),m=(0,ep.useCallback)(()=>{let e=n(),t=r.view.state.doc.nodeAt(e);if(!t){console.error("[SectionCardView] Cannot delete card. Node unknown");return}r.chain().deleteRange({from:e,to:e+t.nodeSize}).selectInsideNodeAtPos(e).focus().run()},[r,n]),f=(0,ep.useCallback)(()=>{let e=n();if(!r.view.state.doc.nodeAt(e)){console.error("[SectionCardView] Cannot focus card. Node unknown");return}r.chain().selectInsideNodeAtPos(e).focus().run()},[r,n]),h=(0,S.DM)(t);return(0,_.jsxs)(E.VR,{role:"group",children:[(0,_.jsxs)(Q.z,{className:"card",border:"1px solid",borderColor:h?"var(--chakra-ring-color)":"blackAlpha.100",shadow:"sm",_hover:{shadow:"md"},transitionProperty:"box-shadow",transitionDuration:"normal",bg:"white",borderRadius:"md",spacing:0,align:"stretch","data-selection-ring":!0,pos:"relative",my:3,mt:1===o?0:void 0,role:"group",children:[!(0,eg.Xb)()&&(0,_.jsx)(M.az,{position:"absolute",color:c.text,zIndex:"1",top:"3.5",insetStart:"0",pointerEvents:"none",opacity:"0",_groupHover:{opacity:.75},children:(0,_.jsx)(el.g,{icon:es.IMq,fixedWidth:!0})}),l&&(0,_.jsx)(M.jl,{size:"6px",position:"absolute",zIndex:"2",top:"1.5",left:"1.5",bg:"sunglow.400"}),(0,_.jsx)(ed.Tz,{label:l&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(Z.E,{children:[(0,_.jsx)(ec.x6,{id:"rayOuP"})," "]}),(0,_.jsx)(Z.E,{color:"gray.400",children:s?(0,_.jsx)(ec.x6,{id:"W8sobv",values:{MAX_CARDS_PRO:em.t}}):(0,_.jsx)(ec.x6,{id:"yLG7qf"})})]}),placement:"top",children:(0,_.jsx)($.s,{dir:"column",align:"start",justify:"center",pe:1,ps:2,py:{base:3.5,md:4},w:12,cursor:l?"help":"grab","data-drag-handle":!0,contentEditable:!1,onClick:p,fontSize:o>=100?"xs":"sm",fontFamily:"mono",fontWeight:"600",borderLeftRadius:"inherit",userSelect:"none",transitionProperty:"filter",transitionDuration:"normal",_hover:{filter:"brightness(0.95)"},bg:c.bg,color:c.text,children:o})}),(0,_.jsx)(M.az,{p:{base:"0.75em",md:"1em"},flex:1,color:l?"gray.600":void 0,position:"relative",children:(0,_.jsx)(E.$p,{})}),(0,_.jsx)(ek,{addCard:u,focusCard:f,deleteCard:m})]}),!(0,eg.Xb)()&&!d&&(0,_.jsx)(eS,{addCard:u})]})},eS=(0,ep.memo)(e=>{let{addCard:t}=e;return(0,_.jsxs)($.s,{w:"100%",h:1,borderRadius:"md",bg:"trueblue.200",transitionProperty:"opacity",transitionDuration:"slow",opacity:0,_hover:{opacity:1},_focusWithin:{opacity:1},contentEditable:!1,my:1,dir:"column",align:"center",justify:"center",pos:"absolute",transform:"translateY(-0.75rem)",zIndex:1,children:[(0,_.jsx)(M.az,{pos:"absolute",top:-2,bottom:-2,insetStart:0,insetEnd:0}),(0,_.jsx)(ed.Tz,{placement:"top",label:eu.Ru._({id:"sFY+gw"}),shortcut:"---",children:(0,_.jsx)(ee.K,{pos:"absolute",variant:"solid",icon:(0,_.jsx)(el.g,{icon:es.QLR}),"aria-label":"Add card",isRound:!0,size:"xs",onClick:t,tabIndex:-1})})]})});eS.displayName="CardDivider";let ek=(0,ep.memo)(e=>{let{addCard:t,deleteCard:r,focusCard:n}=e;return(0,_.jsx)(Q.z,{pe:{base:2,md:2.5},pt:{base:2,md:3},alignSelf:"start",children:(0,eg.Xb)()?(0,_.jsx)(et.W,{children:e=>{let{onClose:o}=e;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(er.I,{onClick:n,as:ee.K,colorScheme:"gray",variant:"ghost",size:"sm",icon:(0,_.jsx)(el.g,{icon:es.Dwc,fixedWidth:!0})}),(0,_.jsx)(en.Z,{children:(0,_.jsxs)(eo.c,{zIndex:"tooltip",children:[(0,_.jsx)(ea.D,{onClick:()=>{o(),t()},icon:(0,_.jsx)(el.g,{icon:es.JHe,fixedWidth:!0}),children:(0,_.jsx)(ec.x6,{id:"90n2YU"})}),(0,_.jsx)(ei.N,{}),(0,_.jsx)(ea.D,{onClick:()=>{r(),o()},color:"red",icon:(0,_.jsx)(el.g,{icon:es.sjs,fixedWidth:!0}),children:(0,_.jsx)(ec.x6,{id:"nabda1"})})]})})]})}}):(0,_.jsx)(ed.Tz,{label:(0,_.jsx)(ec.x6,{id:"nabda1"}),placement:"top",children:(0,_.jsx)(ee.K,{colorScheme:"gray",variant:"ghost",opacity:"0",_groupHover:{opacity:1},_focus:{opacity:1},transitionProperty:"opacity",transitionDuration:"slow",size:"sm",onClick:r,"aria-label":eu.Ru._({id:"nabda1"}),icon:(0,_.jsx)(el.g,{icon:es.sjs,fixedWidth:!0})})})})});ek.displayName="CardActions";let ez=/^(---|___|—-)$/,eA=n.bP.create({name:"card",content:"block+",selectable:!0,draggable:!0,isolating:!0,parseHTML:()=>[{tag:"section"}],renderHTML(e){let{HTMLAttributes:t}=e;return["section",(0,n.KV)(t),0]},addNodeView:()=>(0,E.gu)(ew),addProseMirrorPlugins:()=>[J],addInputRules:()=>[new n.fV({find:ez,handler:e=>{let{state:t,range:r}=e,{tr:n}=t;(0,Y.S)({tr:n.deleteRange(r.from,r.to),dispatch:!0})}})],addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.mergeCardsOnDelete(!1),Delete:()=>this.editor.commands.mergeCardsOnDelete(!0),Tab:()=>this.editor.commands.selectNextCard(!0),"Shift-Tab":()=>this.editor.commands.selectNextCard(!1)}},addCommands:()=>({selectNextCard:e=>t=>{let{state:r,dispatch:o,commands:a}=t;if(!o)return!0;let{selection:i}=r,s=(0,n.KP)(K.jg)(i);if(!s||!i.empty)return!1;let l=r.doc.resolve(s.pos),d=l.index();if(e){if(d===l.parent.childCount-1)return!1;a.selectInsideNodeAtPos(s.pos+s.node.nodeSize)}else{if(0===d)return!1;let e=l.posAtIndex(d-1);a.selectInsideNodeAtPos(e)}return!0},mergeCardsOnDelete:e=>t=>{let{tr:r,state:o,dispatch:a}=t;if(!a)return!0;let{selection:i}=o,s=(0,n.KP)(K.jg)(i);if(!s||!i.empty)return!1;try{if(!(0,U.jF)(i,e))return!1;return e?(0,U.Uc)(s.pos,r,o):(0,U.c9)(s.pos,r)}catch(e){return console.debug("[CardCommands] mergeCardsOnDelete failed",e),!1}}})}),eR=[d.B,h.a,p.f,m.E,x.Hf,l.D,o.yN,f.z,c.J2,u.Ay.configure({openOnClick:!1}),C.B8,y.D,v.R,k.a,g.B,s.v,i.Q.configure({color:"var(--chakra-colors-trueblue-200)",width:3,class:"ProseMirror-dropcursor"}),S.bU,W,w.Q8,j.p],eD=[...eR,O,a.y.extend({content:"block+"})],eN=[...eR,eA,a.y.extend({content:"card+"})],eE=(e,t)=>{let r=(0,n._w)("freeform"===t?eD:eN);return"structured"===t&&(e=e.split("<hr>").map(e=>"<section>".concat(e,"</section>")).join("\n")),(0,b.S)(e,r)}},61644:(e,t,r)=>{r.d(t,{X:()=>i});var n=r(14041),o=r(91417),a=r(57882);let i=e=>{let{currentWorkspace:t}=(0,a.ur)(),r=null==t?void 0:t.id;(0,n.useEffect)(()=>{e&&!e.isDestroyed&&r&&e.commands.initializeUploadExtension(r)},[e,r]),(0,o.W)(e)}},50080:(e,t,r)=>{r.d(t,{X0:()=>o,_2:()=>i,lW:()=>a});var n=r(14041);let o=["createWithAI","createGenerate","legacyGuidedMode","createPaste","createImport","promptEditor","home"],a=(0,n.createContext)({goToScreen:()=>{throw Error("goToScreen not available. Did you forget to wrap your component in RouterNavigationContext?")},onDocGenerationLoaded:()=>{},navEnabled:!0,webpageOnly:!1,skipThemeStep:!1}),i=()=>(0,n.useContext)(a)},37908:(e,t,r)=>{r.d(t,{Tx:()=>i,pY:()=>s});var n=r(31085),o=r(14041);let a=o.createContext({});function i(){return(0,o.useContext)(a)}let s=e=>{let{children:t}=e,r=o.useRef();return(0,n.jsx)(a.Provider,{value:{setEditorInstance:e=>{r.current=e},getEditorInstance:()=>r.current},children:t})}},60434:(e,t,r)=>{r.d(t,{R7:()=>y,b2:()=>h,jQ:()=>f,lF:()=>b,ow:()=>C,pm:()=>g,sC:()=>x});var n=r(14041),o=r(50080),a=r(37908),i=r(50877),s=r(64225),l=r(39848),d=r(43125),c=r(45591),u=r(5577),p=r(23056),m=r(20869);let f=()=>{let e=(0,s.CU)(),t=(0,s.jL)(),[r]=(0,i.zb6)();return(0,n.useCallback)(async()=>{var n;let o=(0,m.cK)(e.getState()).id,a=null===(n=(await r({variables:{docGenerateInputId:o,input:{}}})).data)||void 0===n?void 0:n.updateDocGenerationDraftInput;a&&a.draftInput&&o!==a.draftInput.id&&t((0,m.Jv)(a))},[t,e,r])},h=e=>{var t;let r=(0,s.CU)(),o=(0,s.jL)(),[a]=(0,i.zb6)(),l=(0,n.useCallback)(async e=>{var t;let n=(0,m.gG)(r.getState()),i=(0,m.nY)(r.getState());if(!n||!i)return;let{format:s,...l}=e,d={format:s,...l},c=(0,m._y)(r.getState());d.settings&&(d.settings={...c,...d.settings});let u=(0,m.nY)(r.getState()),p=null===(t=(await a({variables:{docGenerateInputId:i,input:d}})).data)||void 0===t?void 0:t.updateDocGenerationDraftInput;p&&p.draftInput&&u!==p.draftInput.id&&o((0,m.Jv)(p))},[o,r,a]),d=(0,c.lW)(l,null!==(t=null==e?void 0:e.debounce)&&void 0!==t?t:0);return(0,n.useCallback)(function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];o((0,m.Yo)(e)),t&&d(e)},[d,o])},g=()=>{let e=h(),t=(0,s.GV)(m.wS),[r,a]=y("styleTemplate"),i=(0,n.useCallback)(function(t){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=(0,d.zY)(t).styleTemplates[0];e({format:t,settings:{styleTemplate:n}},r)},[e]),{webpageOnly:l}=(0,o._2)();return(0,n.useEffect)(()=>{l&&"webpage"!==t&&i("webpage")},[t,l,i,r,a]),{format:t,styleTemplate:r,setFormat:i,setStyleTemplate:a}},b=()=>{let e=h({debounce:500}),t=(0,n.useCallback)(function(t){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];e({prompt:t},r)},[e]);return[(0,s.GV)(m.fg),t]},x=()=>{let[e,t]=y("themeId"),r=(0,s.GV)(m.u$),o=(0,s.jL)();return(0,n.useEffect)(()=>{e&&r.length>0&&!r.includes(e)&&o((0,m._W)([e,...r]))},[e,r,o]),[e,t]},y=(e,t)=>{let r=h(t),o=(0,n.useCallback)(function(t){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];r({settings:{[e]:t}},n)},[e,r]);return[(0,s.GV)((0,m.Wt)(e)),o]},C=e=>{let t=h(e),{getEditorInstance:r}=(0,a.Tx)();return(0,n.useCallback)(function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],o=arguments.length>2?arguments[2]:void 0,a=r();if(a){let t=a.editorId===u.B,r=(0,l.uY)(e),n=(0,p.ZC)(r,t?"structured":"freeform").content.toJSON(),i=a.chain().setContent(n);o&&i.focus(o),i.run()}t({content:e},n)},[t,r])}},56219:(e,t,r)=>{r.d(t,{B:()=>d});var n=r(13236),o=r(81570),a=r(1279),i=r(39848),s=r(3968),l=r(60948);let d=n.YY.create({name:"clipboardLight",addCommands:()=>({insertMarkdownAt:(e,t)=>r=>{let{state:n,tr:o}=r;try{let r=(0,i.os)(t,n.schema);return o.replaceRange(e.from,e.to,r),!0}catch(e){return console.warn("(caught) [Clipboard] insertMarkdownAt error",e),!1}}}),addProseMirrorPlugins(){let e=this.editor;return[new o.k_({key:new o.hs("clipboardLight"),props:{clipboardSerializer:{serializeFragment:t=>(0,l.t8)(t,e.schema)},handlePaste:(t,r,n)=>(0,i.D1)(e,r)||(0,a.j)(t,r,n),transformPastedHTML:e=>(0,s.V)(e)}})]}})},29524:(e,t,r)=>{r.d(t,{hG:()=>u});var n=r(14041),o=r(43144),a=r(13236);let i=(...e)=>t=>{e.forEach(e=>{"function"==typeof e?e(t):e&&(e.current=t)})},s=({renderers:e})=>n.createElement(n.Fragment,null,Object.entries(e).map(([e,t])=>o.createPortal(t.reactElement,t.element,e)));class l extends n.Component{constructor(e){super(e),this.editorContentRef=n.createRef(),this.initialized=!1,this.state={renderers:{}}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){let{editor:e}=this.props;if(e&&e.options.element){if(e.contentComponent)return;let t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=this,e.createNodeViews(),this.initialized=!0}}maybeFlushSync(e){this.initialized?(0,o.flushSync)(e):e()}setRenderer(e,t){this.maybeFlushSync(()=>{this.setState(({renderers:r})=>({renderers:{...r,[e]:t}}))})}removeRenderer(e){this.maybeFlushSync(()=>{this.setState(({renderers:t})=>{let r={...t};return delete r[e],{renderers:r}})})}componentWillUnmount(){let{editor:e}=this.props;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild))return;let t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){let{editor:e,innerRef:t,...r}=this.props;return n.createElement(n.Fragment,null,n.createElement("div",{ref:i(t,this.editorContentRef),...r}),n.createElement(s,{renderers:this.state.renderers}))}}let d=(0,n.forwardRef)((e,t)=>{let r=n.useMemo(()=>Math.floor(0xffffffff*Math.random()).toString(),[e.editor]);return n.createElement(l,{key:r,innerRef:t,...e})});n.memo(d);class c extends a.KE{constructor(){super(...arguments),this.contentComponent=null}}let u=(e={},t=[])=>{let r=(0,n.useRef)(null),[,o]=(0,n.useState)({}),{onBeforeCreate:a,onBlur:i,onCreate:s,onDestroy:l,onFocus:d,onSelectionUpdate:u,onTransaction:p,onUpdate:m}=e,f=(0,n.useRef)(a),h=(0,n.useRef)(i),g=(0,n.useRef)(s),b=(0,n.useRef)(l),x=(0,n.useRef)(d),y=(0,n.useRef)(u),C=(0,n.useRef)(p),v=(0,n.useRef)(m);return(0,n.useEffect)(()=>{r.current&&(a&&(r.current.off("beforeCreate",f.current),r.current.on("beforeCreate",a),f.current=a),i&&(r.current.off("blur",h.current),r.current.on("blur",i),h.current=i),s&&(r.current.off("create",g.current),r.current.on("create",s),g.current=s),l&&(r.current.off("destroy",b.current),r.current.on("destroy",l),b.current=l),d&&(r.current.off("focus",x.current),r.current.on("focus",d),x.current=d),u&&(r.current.off("selectionUpdate",y.current),r.current.on("selectionUpdate",u),y.current=u),p&&(r.current.off("transaction",C.current),r.current.on("transaction",p),C.current=p),m&&(r.current.off("update",v.current),r.current.on("update",m),v.current=m))},[a,i,s,l,d,u,p,m,r.current]),(0,n.useEffect)(()=>{let t=!0,n=new c(e);return r.current=n,r.current.on("transaction",()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{t&&o({})})})}),()=>{t=!1,n.destroy()}},t),r.current};(0,n.createContext)({editor:null}).Consumer;let p=(0,n.createContext)({onDragStart:void 0}),m=()=>(0,n.useContext)(p);n.forwardRef((e,t)=>{let{onDragStart:r}=m(),o=e.as||"div";return n.createElement(o,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...e.style}})})}}]);
//# sourceMappingURL=4787-88d5b8da178a860e.js.map